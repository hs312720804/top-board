{"version":3,"file":"js/chunk-vendors-cfbf2917.d7ebffd3.js","mappings":"oQAmDIA,EAEJ,WACE,SAASA,IACPC,KAAKC,GAAK,EACVD,KAAKE,GAAK,EACVF,KAAKG,GAAK,EACVH,KAAKI,GAAK,EACVJ,KAAKK,KAAO,EACZL,KAAKM,KAAO,EACZN,KAAKO,KAAO,EACZP,KAAKQ,KAAO,EACZR,KAAKS,OAAS,CAChB,CAEA,OAAOV,CACT,CAdA,GAgBIW,EAEJ,SAAUC,GAGR,SAASD,EAAWE,GAClB,OAAOD,EAAOE,KAAKb,KAAMY,IAASZ,IACpC,CA8BA,OAlCAc,EAAAA,EAAAA,IAAUJ,EAAYC,GAMtBD,EAAWK,UAAUC,gBAAkB,WACrC,OAAO,IAAIjB,CACb,EAEAW,EAAWK,UAAUE,UAAY,SAAUC,EAAKC,GAC9C,IAAIV,EAASU,EAAMV,OACnBS,EAAIE,OAAOD,EAAMlB,GAAIkB,EAAMjB,IAC3BgB,EAAIG,cAAcF,EAAMd,KAAMc,EAAMb,KAAMa,EAAMZ,KAAMY,EAAMX,KAAMW,EAAMhB,GAAIgB,EAAMf,IAE7D,aAAjBe,EAAMG,QACRJ,EAAIK,OAAOJ,EAAMhB,GAAKM,EAAQU,EAAMf,IACpCc,EAAIG,cAAcF,EAAMZ,KAAOE,EAAQU,EAAMX,KAAMW,EAAMd,KAAOI,EAAQU,EAAMb,KAAMa,EAAMlB,GAAKQ,EAAQU,EAAMjB,MAE7GgB,EAAIK,OAAOJ,EAAMhB,GAAIgB,EAAMf,GAAKK,GAChCS,EAAIG,cAAcF,EAAMZ,KAAMY,EAAMX,KAAOC,EAAQU,EAAMd,KAAMc,EAAMb,KAAOG,EAAQU,EAAMlB,GAAIkB,EAAMjB,GAAKO,IAG3GS,EAAIM,WACN,EAEAd,EAAWK,UAAUU,UAAY,YAC/BC,EAAAA,EAAAA,IAAc1B,KAChB,EAEAU,EAAWK,UAAUY,SAAW,YAC9BC,EAAAA,EAAAA,IAAc5B,KAChB,EAEOU,CACT,CApCA,CAoCEmB,EAAAA,IAEEC,EAEJ,SAAUnB,GAGR,SAASmB,IACP,IAAIC,EAAmB,OAAXpB,GAAmBA,EAAOqB,MAAMhC,KAAMiC,YAAcjC,KAIhE,OAFA+B,EAAMG,KAAOJ,EAAWI,KACxBH,EAAMI,yBAA0B,EACzBJ,CACT,CAoMA,OA5MAjB,EAAAA,EAAAA,IAAUgB,EAAYnB,GAUtBmB,EAAWf,UAAUqB,OAAS,SAAUC,EAAaC,EAASC,GAC5D,IAAIC,EAAaxC,KACbyC,EAAQJ,EAAYK,WACpBC,EAAQ3C,KAAK2C,MACbC,EAAaP,EAAYO,WAEzBC,EAAQD,EAAWC,MAEnBC,EAASF,EAAWE,OACpBC,EAAWV,EAAYW,UACvBC,EAAWZ,EAAYW,QAAQ,QAC/B1B,EAASe,EAAYa,IAAI,UAC7BlD,KAAKmD,OAASd,EACdM,EAAMS,YACNT,EAAMU,EAAIT,EAAWS,EACrBV,EAAMW,EAAIV,EAAWU,EAErBb,EAAMc,UAAS,SAAUC,GACvB,IAAIC,EAAQ,IAAI/C,EACZgD,GAASC,EAAAA,EAAAA,GAAUF,GACvBC,EAAOE,UAAYJ,EAAKI,UACxBF,EAAOG,YAAcxB,EAAYwB,YACjCH,EAAOI,SAAW,OAClB,IAYI7D,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAnBAuD,EAAYP,EAAKQ,WACjBC,EAAiBF,EAAUC,SAAS,aACpCE,EAAYD,EAAef,IAAI,aAC/BiB,EAAWX,EAAKY,MAAMC,YACtBC,EAAad,EAAKY,MAAMJ,WACxBO,EAASD,EAAWpB,IAAI,UACxBsB,EAASF,EAAWpB,IAAI,UACxBuB,EAAWjB,EAAKkB,MAAML,YACtBM,EAAanB,EAAKkB,MAAMV,WACxBY,EAASD,EAAWzB,IAAI,UACxB2B,EAASF,EAAWzB,IAAI,UACxB4B,EAAatB,EAAKa,YA4CtB,OAnCAZ,EAAMtC,MAAMV,OAASsE,KAAKC,IAAI,EAAGF,EAAWG,IAC5CxB,EAAMtC,MAAMG,OAASA,EAEN,aAAXA,GACFrB,GAAgB,MAAVsE,EAAiBA,EAAS1B,EAAQsB,EAASd,GAAKyB,EAAWI,GACjEhF,GAAgB,MAAVsE,EAAiBA,EAAS1B,EAASqB,EAASb,GAAKa,EAASc,GAChE9E,GAAgB,MAAVyE,EAAiBA,EAAS/B,EAAQ4B,EAASpB,GAAKyB,EAAWK,GACjE/E,EAAe,MAAVyE,EAAiBA,EAAS/B,EAAS2B,EAASnB,EACjDjD,EAAOJ,EACPK,EAAOJ,GAAM,EAAIgE,GAAa9D,EAAK8D,EACnC3D,EAAOJ,EACPK,EAAON,EAAKgE,EAAY9D,GAAM,EAAI8D,KAElCjE,GAAgB,MAAVsE,EAAiBA,EAAS1B,EAAQsB,EAASd,GAAKc,EAASiB,GAC/DlF,GAAgB,MAAVsE,EAAiBA,EAAS1B,EAASqB,EAASb,GAAKwB,EAAWI,GAClE/E,EAAe,MAAVyE,EAAiBA,EAAS/B,EAAQ4B,EAASpB,EAChDjD,GAAgB,MAAVyE,EAAiBA,EAAS/B,EAAS2B,EAASnB,GAAKwB,EAAWK,GAClE9E,EAAOJ,GAAM,EAAIiE,GAAa/D,EAAK+D,EACnC5D,EAAOJ,EACPK,EAAON,EAAKiE,EAAY/D,GAAM,EAAI+D,GAClC1D,EAAOJ,GAGTqD,EAAM4B,SAAS,CACbpF,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJC,KAAMA,EACNC,KAAMA,EACNC,KAAMA,EACNC,KAAMA,IAERiD,EAAM6B,SAASrB,EAAesB,gBAEtB9B,EAAM+B,MAAMC,MAClB,IAAK,SACHhC,EAAM+B,MAAMC,KAAOjC,EAAKY,MAAMsB,UAAU,SACxCjC,EAAM+B,MAAMG,MAAQnC,EAAKY,MAAMsB,UAAU,SAASC,MAClD,MAEF,IAAK,SACHlC,EAAM+B,MAAMC,KAAOjC,EAAKkB,MAAMgB,UAAU,SACxCjC,EAAM+B,MAAMG,MAAQnC,EAAKkB,MAAMgB,UAAU,SAASC,MAClD,MAEF,IAAK,WACH,IAAIC,EAAcpC,EAAKY,MAAMsB,UAAU,SACnCG,EAAcrC,EAAKkB,MAAMgB,UAAU,UAEnCI,EAAAA,EAAAA,UAASF,KAAgBE,EAAAA,EAAAA,UAASD,KACpCpC,EAAM+B,MAAMC,KAAO,IAAI5D,EAAAA,EAAuB,EAAG,IAAgB,eAAXP,KAAuC,aAAXA,GAAwB,CAAC,CACzGyE,MAAOH,EACPI,OAAQ,GACP,CACDD,MAAOF,EACPG,OAAQ,OAMhBC,EAAAA,EAAAA,IAAcxC,GAAOyC,EAAAA,EAAAA,IAAqBnC,EAAW,aAAc,CACjEoC,aAAc9D,EACd+D,eAAgB5C,EAAKI,UACrByC,YAAa,GAAKtC,EAAUb,IAAI,WAElCO,EAAM6C,cAAc,CAClBC,SAAU,WAEZ,IAAIC,EAAgBzC,EAAUC,SAAS,aACvCyC,EAAAA,EAAAA,IAAyBhD,EAAOM,EAAW,aAAa,SAAU2C,GAChE,OAAOA,EAAMnB,cACf,IACA5C,EAAMgE,IAAIlD,GACVR,EAAS2D,iBAAiBpD,EAAKI,UAAWH,GAC1C,IAAIoD,EAAQL,EAActD,IAAI,UAC9B4D,EAAAA,EAAAA,IAAoBrD,EAAiB,cAAVoD,EAAwBrD,EAAKuD,yBAA2BF,EAAOL,EAActD,IAAI,aAAcsD,EAActD,IAAI,cAC5IS,EAAAA,EAAAA,GAAUF,GAAOK,SAAW,MAC9B,IAEArB,EAAMuE,UAAS,SAAUC,GACvB,IAAIC,EAASD,EAAK5C,YACd8C,EAAYF,EAAKjD,WACjBoD,EAAQD,EAAUjE,IAAI,UACtBmE,EAAQF,EAAUjE,IAAI,UACtBsD,EAAgBW,EAAUnD,SAAS,YACnCsD,EAAO,IAAIzF,EAAAA,EAAa,CAC1BV,MAAO,CACLkC,EAAY,MAAT+D,EAAgBA,EAAQvE,EAAQqE,EAAO7D,EAC1CC,EAAY,MAAT+D,EAAgBA,EAAQvE,EAASoE,EAAO5D,EAC3CT,MAAOqE,EAAO9B,GACdtC,OAAQoE,EAAOjC,IAEjBO,MAAO2B,EAAUnD,SAAS,aAAauB,eACvCgC,GAAI,MAENtB,EAAAA,EAAAA,IAAcqB,GAAMpB,EAAAA,EAAAA,IAAqBiB,GAAY,CACnDhB,aAAc9D,EACd+D,eAAgBa,EAAKrD,UACrByC,YAAaY,EAAKO,KAEpBF,EAAKG,uBAAwB,EAC7BH,EAAKI,SAAS,OAAQT,EAAKvB,UAAU,UACrC4B,EAAKI,SAAS,QAAST,EAAKvB,UAAU,SAASC,QAC/Cc,EAAAA,EAAAA,IAAyBa,EAAMH,GAC/BxE,EAAMgE,IAAIW,GACVvE,EAAS6D,iBAAiBK,EAAKrD,UAAW0D,IAC1C3D,EAAAA,EAAAA,GAAU2D,GAAMxD,SAAW,OAC3B,IAAI+C,EAAQL,EAActD,IAAI,UAC9B4D,EAAAA,EAAAA,IAAoBQ,EAAgB,cAAVT,EAAwBI,EAAKF,yBAA2BF,EAAOL,EAActD,IAAI,aAAcsD,EAActD,IAAI,YAC7I,IACAH,EAAS4E,mBAAkB,SAAUC,EAAIhE,GACvC,IAAIuD,EAAYpE,EAAS8E,aAAajE,GAElCuD,EAAUjE,IAAI,eAChB0E,EAAGE,MAAQ,SAAU1C,EAAIH,GACvBzC,EAAWL,yBAA0B,EACrCnC,KAAKmB,MAAMkC,GAAK+B,EAChBpF,KAAKmB,MAAMmC,GAAK2B,EAChBjF,KAAK+H,QACLxF,EAAIyF,eAAe,CACjB9F,KAAM,WACN+F,SAAU5F,EAAYmF,GACtB5D,UAAWb,EAASmF,YAAYtE,GAChCuE,OAAQnI,KAAKmB,MAAMkC,EAAIR,EACvBuF,OAAQpI,KAAKmB,MAAMmC,EAAIR,GAE3B,EAEA8E,EAAGS,UAAY,WACb7F,EAAWL,yBAA0B,CACvC,EAEAyF,EAAGU,WAAY,EACfV,EAAGW,OAAS,OAEhB,KAEKvI,KAAKwI,OAASnG,EAAYoG,sBAC7B9F,EAAM+F,YAAYC,EAAoBhG,EAAMiG,kBAAmBvG,GAAa,WAC1EM,EAAMkG,gBACR,KAGF7I,KAAKwI,MAAQnG,EAAYW,SAC3B,EAEAlB,EAAWf,UAAU+H,QAAU,WAAa,EAE5ChH,EAAWI,KAAO,SACXJ,CACT,CA9MA,CA8MEiH,EAAAA,GAGF,SAASJ,EAAoBrB,EAAMjF,EAAa2G,GAC9C,IAAIC,EAAS,IAAIpH,EAAAA,EAAa,CAC5BV,MAAO,CACLkC,EAAGiE,EAAKjE,EAAI,GACZC,EAAGgE,EAAKhE,EAAI,GACZT,MAAO,EACPC,OAAQwE,EAAKxE,OAAS,MAQ1B,OALAjB,EAAAA,GAAkBoH,EAAQ,CACxB9H,MAAO,CACL0B,MAAOyE,EAAKzE,MAAQ,KAErBR,EAAa2G,GACTC,CACT,CAEA,Q,qDChSIC,EAEJ,SAAUvI,GAGR,SAASuI,IACP,IAAInH,EAAmB,OAAXpB,GAAmBA,EAAOqB,MAAMhC,KAAMiC,YAAcjC,KAGhE,OADA+B,EAAMG,KAAOgH,EAAkBhH,KACxBH,CACT,CAoLA,OA3LAjB,EAAAA,EAAAA,IAAUoI,EAAmBvI,GAa7BuI,EAAkBnI,UAAUoI,eAAiB,SAAUC,EAAQ9G,GAC7D,IAAI+G,EAAQD,EAAOE,OAASF,EAAOC,MAC/BE,EAAQH,EAAOI,MAAQJ,EAAOG,MAC9BE,EAASL,EAAOK,OACpBzJ,KAAK0J,YAAc,GAGnB,IAFA,IAAIA,EAAc1J,KAAK0J,YAEdC,EAAI,EAAGA,EAAIF,EAAOG,OAAQD,IACV,MAAnBF,EAAOE,GAAGE,OAAiBJ,EAAOE,GAAGE,OAAS,IAChDH,EAAYD,EAAOE,GAAGE,OAAS,IAAIC,EAAAA,EAAML,EAAOE,GAAI3J,KAAMsC,IAQ9D,GAAIiH,GAASF,EAAO,CAClB,IAAI5G,GAAQsH,EAAAA,EAAAA,GAAwBR,EAAOF,EAAOrJ,MAAM,EAAMgK,GAC9D,OAAOvH,EAAM+G,IACf,CAEA,SAASQ,EAAWjH,EAAUE,GAC5BF,EAASkH,WAAW,gBAAgB,SAAUvD,EAAOwD,GACnD,IAAI7H,EAAcqE,EAAMyD,YACpBjD,EAAS7E,EAAYW,UAAUoH,cAAcF,GAEjD,GAAIhD,EAAQ,CACV,IAAImD,EAAYnD,EAAO2C,MACnBS,EAAajI,EAAYqH,YAAYW,GAErCC,IACF5D,EAAMyD,YAAcG,EAExB,CAEA,OAAO5D,CACT,IACAzD,EAASgH,WAAW,gBAAgB,SAAUvD,EAAOwD,GACnD,IAAI7H,EAAcqE,EAAMyD,YACpB3G,EAAOnB,EAAYK,WAAW6H,eAAeL,GAC7ChD,EAAS1D,EAAKY,MAAMC,YAExB,GAAI6C,EAAQ,CACV,IAAI2C,EAAQ3C,EAAO2C,MACfS,EAAajI,EAAYqH,YAAYG,GAErCS,IACF5D,EAAMyD,YAAcG,EAExB,CAEA,OAAO5D,CACT,GACF,CACF,EAEAwC,EAAkBnI,UAAUyJ,gBAAkB,SAAU5G,EAAW6G,GACjE,IAAIlB,EAAQvJ,KAAKoJ,OAAOI,MAAQxJ,KAAKoJ,OAAOG,MACxCmB,EAAWnB,EAAM3F,GACrB8G,EAASvC,OAASsC,EAAc,GAChCC,EAAStC,OAASqC,EAAc,EAClC,EAQAvB,EAAkBnI,UAAU2B,SAAW,WACrC,OAAO1C,KAAKgD,UAAUP,KACxB,EAQAyG,EAAkBnI,UAAU4J,YAAc,WACxC,OAAO3K,KAAK0C,WAAWO,QACzB,EAEAiG,EAAkBnI,UAAU6J,cAAgB,SAAUhH,EAAWiH,EAAgB/G,GAC/E,SAASgH,EAAQC,GACf,OAAOC,MAAMD,IAAe,MAAPA,CACvB,CAGA,GAAiB,SAAbjH,EAAqB,CACvB,IAAImH,EAASjL,KAAKkL,cAActH,EAAWE,GACvCqH,EAAaF,EAAOzB,KACpB4B,EAAYH,EAAOI,MACnBC,EAAWH,EAAWI,OAAS,OAASJ,EAAWK,OACvD,OAAOC,EAAAA,EAAAA,IAAoB,YAAa,CACtCC,KAAMJ,EACND,MAAOD,EACPN,QAASA,EAAQM,IAErB,CAEI,IAAInE,EAAOjH,KAAK0C,WAAWiJ,eAAe/H,GACtCyH,EAAQpE,EAAK5C,YAAYgH,MACzBO,EAAS5L,KAAKkL,cAActH,EAAWE,GAAU0F,KAAKkC,KAC1D,OAAOD,EAAAA,EAAAA,IAAoB,YAAa,CACtCC,KAAgB,MAAVE,EAAiBA,EAAS,GAAK,KACrCP,MAAOA,EACPP,QAASA,EAAQO,IAGzB,EAEAnC,EAAkBnI,UAAU8K,cAAgB,WAAa,EAGzD3C,EAAkBnI,UAAUmK,cAAgB,SAAUtH,EAAWE,GAC/D,IAAImH,EAAStK,EAAOI,UAAUmK,cAAcrK,KAAKb,KAAM4D,EAAWE,GAElE,GAAoB,MAAhBmH,EAAOI,OAA8B,SAAbvH,EAAqB,CAC/C,IAAImD,EAAOjH,KAAK0C,WAAWiJ,eAAe/H,GACtCkI,EAAY7E,EAAK5C,YAAYgH,MACjCJ,EAAOI,MAAQS,CACjB,CAEA,OAAOb,CACT,EAEA/B,EAAkBhH,KAAO,gBACzBgH,EAAkB6C,cAAgB,CAEhCC,EAAG,EACHC,iBAAkB,OAClBC,KAAM,KACNC,IAAK,KACLC,MAAO,MACPC,OAAQ,KACR/K,OAAQ,aACRgL,UAAW,GACXC,QAAS,EACTjE,WAAW,EACXkE,iBAAkB,GAClBC,MAAO,CACLC,MAAM,EACNnG,SAAU,QACVoG,SAAU,IAEZC,UAAW,CACTF,MAAM,EACNC,SAAU,IAEZlD,OAAQ,GACRoD,UAAW,UACXC,UAAW,CACT/G,MAAO,UACPgH,QAAS,GACTC,UAAW,IAEbC,SAAU,CACRR,MAAO,CACLC,MAAM,GAERI,UAAW,CACTC,QAAS,KAGbG,OAAQ,CACNC,UAAW,CACTC,YAAa,YAGjBC,gBAAiB,SACjBC,kBAAmB,KAEdpE,CACT,CA7LA,CA6LEqE,EAAAA,GAEF,I,iCCpMe,SAASC,EAAalL,EAASC,GAC5CD,EAAQmL,iBAAiB,UAAU,SAAUpL,GAC3C,IAAIiK,EAAYjK,EAAYa,IAAI,aAC5BqJ,EAAUlK,EAAYa,IAAI,WAC1BN,EAAa8K,EAAYrL,EAAaE,GAC1CF,EAAYO,WAAaA,EACzB,IAAIC,EAAQD,EAAWC,MACnBC,EAASF,EAAWE,OACpBL,EAAQJ,EAAYK,WACpB6G,EAAQ9G,EAAM8G,MACdD,EAAQ7G,EAAM6G,MAClBqE,EAAkBpE,GAClB,IAAIqE,EAAgBC,EAAAA,OAActE,GAAO,SAAUtC,GACjD,OAAkC,IAA3BA,EAAK5C,YAAYgH,KAC1B,IACIyC,EAAsC,IAAzBF,EAAchE,OAAe,EAAIvH,EAAYa,IAAI,oBAC9D5B,EAASe,EAAYa,IAAI,UACzB2J,EAAYxK,EAAYa,IAAI,aAChC6K,EAAaxE,EAAOD,EAAOgD,EAAWC,EAAS1J,EAAOC,EAAQgL,EAAYxM,EAAQuL,EACpF,GACF,CAKA,SAASa,EAAYrL,EAAaE,GAChC,OAAO2E,EAAAA,GAAqB7E,EAAY2L,qBAAsB,CAC5DnL,MAAON,EAAI0L,WACXnL,OAAQP,EAAI2L,aAEhB,CAEA,SAASH,EAAaxE,EAAOD,EAAOgD,EAAWC,EAAS1J,EAAOC,EAAQgL,EAAYxM,EAAQuL,GACzFsB,EAAoB5E,EAAOD,EAAOgD,EAAWzJ,EAAOC,EAAQxB,EAAQuL,GACpEuB,EAAkB7E,EAAOD,EAAOxG,EAAQD,EAAO0J,EAASuB,EAAYxM,GACpE+M,EAAkB9E,EAAOjI,EAC3B,CAMA,SAASqM,EAAkBpE,GACzBsE,EAAAA,KAAYtE,GAAO,SAAUtC,GAC3B,IAAIqH,EAASC,EAAItH,EAAKuH,SAAUC,GAC5BC,EAASH,EAAItH,EAAK0H,QAASF,GAC3BG,EAAe3H,EAAK4H,YAAc,EAClCxD,EAAQtG,KAAKC,IAAIsJ,EAAQI,EAAQE,GACrC3H,EAAK6H,UAAU,CACbzD,MAAOA,IACN,EACL,GACF,CASA,SAAS8C,EAAoB5E,EAAOD,EAAOgD,EAAWzJ,EAAOC,EAAQxB,EAAQuL,GAW3E,IARA,IAAIkC,EAAc,GAEdC,EAAc,GAEdC,EAAgB,GAChBC,EAAiB,GACjB7L,EAAI,EAECsG,EAAI,EAAGA,EAAIL,EAAMM,OAAQD,IAChCoF,EAAYpF,GAAK,EAGnB,IAASA,EAAI,EAAGA,EAAIJ,EAAMK,OAAQD,IAChCqF,EAAYrF,GAAKJ,EAAMI,GAAGgF,QAAQ/E,OAEX,IAAnBoF,EAAYrF,IACdsF,EAAcE,KAAK5F,EAAMI,IAI7B,IAAIyF,GAAgB,EAIpB,MAAOH,EAAcrF,OAAQ,CAC3B,IAAK,IAAIM,EAAM,EAAGA,EAAM+E,EAAcrF,OAAQM,IAAO,CACnD,IAAIjD,EAAOgI,EAAc/E,GACrBmF,EAAOpI,EAAKqI,UAAU9F,KAAK+F,eAAetI,EAAKrD,WAC/C4L,EAA4B,MAAdH,EAAKxF,OAAiBwF,EAAKxF,OAAS,EAElD2F,GAAeH,EAAKxF,MAAQuF,IAC9BA,EAAeC,EAAKxF,OAGtB5C,EAAK6H,UAAU,CACbjF,MAAO2F,EAAcH,EAAKxF,MAAQxG,IACjC,GACQ,aAAX/B,EAAwB2F,EAAK6H,UAAU,CACrC7J,GAAIqH,IACH,GAAQrF,EAAK6H,UAAU,CACxB1J,GAAIkH,IACH,GAEH,IAAK,IAAImD,EAAU,EAAGA,EAAUxI,EAAKuH,SAAS5E,OAAQ6F,IAAW,CAC/D,IAAIjM,EAAOyD,EAAKuH,SAASiB,GACrBC,EAAYpG,EAAMqG,QAAQnM,GAC9BuL,EAAYW,GAAa,EACzB,IAAIE,EAAapM,EAAKkB,MAClBmL,EAAYtG,EAAMoG,QAAQC,GAEG,MAA3BZ,EAAYa,IAAoBX,EAAeS,QAAQC,GAAc,GACzEV,EAAeC,KAAKS,EAExB,CACF,GAEEvM,EACF4L,EAAgBC,EAChBA,EAAiB,EACnB,CAEA,IAASvF,EAAI,EAAGA,EAAIoF,EAAYnF,OAAQD,IACtC,GAAuB,IAAnBoF,EAAYpF,GACd,MAAM,IAAImG,MAAM,iDAIpB,IAAIC,EAAWX,EAAe/L,EAAI,EAAI+L,EAAe/L,EAAI,EAErDwJ,GAA2B,SAAdA,GACfmD,EAAwBzG,EAAOsD,EAAWvL,EAAQyO,GAGpD,IAAIE,EAAgB,aAAX3O,GAAyBwB,EAASwJ,GAAayD,GAAYlN,EAAQyJ,GAAayD,EACzFG,EAAkB3G,EAAO0G,EAAI3O,EAC/B,CAEA,SAAS6O,EAAYlJ,GACnB,IAAIoI,EAAOpI,EAAKqI,UAAU9F,KAAK+F,eAAetI,EAAKrD,WACnD,OAAqB,MAAdyL,EAAKxF,OAAiBwF,EAAKxF,OAAS,CAC7C,CAEA,SAASmG,EAAwBzG,EAAOsD,EAAWvL,EAAQyO,GACzD,GAAkB,UAAdlD,EAAuB,CACzB,IAAIuD,EAAiB,GACjBC,EAAc9G,EACd+G,EAAa,EAEjB,MAAOD,EAAYzG,OAAQ,CACzB,IAAK,IAAID,EAAI,EAAGA,EAAI0G,EAAYzG,OAAQD,IAAK,CAC3C,IAAI1C,EAAOoJ,EAAY1G,GACvB1C,EAAK6H,UAAU,CACbyB,aAAcD,IACb,GAEH,IAAK,IAAIE,EAAI,EAAGA,EAAIvJ,EAAK0H,QAAQ/E,OAAQ4G,IAAK,CAC5C,IAAIhN,EAAOyD,EAAK0H,QAAQ6B,GAEpBJ,EAAeT,QAAQnM,EAAKY,OAAS,GACvCgM,EAAejB,KAAK3L,EAAKY,MAE7B,CACF,CAEAiM,EAAcD,EACdA,EAAiB,KACfE,CACJ,CAEAzC,EAAAA,KAAYtE,GAAO,SAAUtC,GACtBkJ,EAAYlJ,IACfA,EAAK6H,UAAU,CACbjF,MAAO9E,KAAKC,IAAI,EAAG+K,EAAW9I,EAAK5C,YAAYkM,gBAC9C,EAEP,GACF,KAAyB,YAAd1D,GACT4D,EAAelH,EAAOwG,EAE1B,CAUA,SAASU,EAAelH,EAAOwG,GAC7BlC,EAAAA,KAAYtE,GAAO,SAAUtC,GACtBkJ,EAAYlJ,IAAUA,EAAKuH,SAAS5E,QACvC3C,EAAK6H,UAAU,CACbjF,MAAOkG,IACN,EAEP,GACF,CASA,SAASG,EAAkB3G,EAAO0G,EAAI3O,GACpCuM,EAAAA,KAAYtE,GAAO,SAAUtC,GAC3B,IAAIoD,EAAYpD,EAAK5C,YAAYwF,MAAQoG,EAC9B,aAAX3O,EAAwB2F,EAAK6H,UAAU,CACrCxL,EAAG+G,IACF,GAAQpD,EAAK6H,UAAU,CACxBzL,EAAGgH,IACF,EACL,GACF,CAaA,SAAS+D,EAAkB7E,EAAOD,EAAOxG,EAAQD,EAAO0J,EAASuB,EAAYxM,GAC3E,IAAIoP,EAAiBC,EAAsBpH,EAAOjI,GAClDsP,EAAoBF,EAAgBpH,EAAOxG,EAAQD,EAAO0J,EAASjL,GACnEuP,EAAkBH,EAAgBnE,EAASzJ,EAAQD,EAAOvB,GAE1D,IAAK,IAAIwP,EAAQ,EAAGhD,EAAa,EAAGA,IAGlCgD,GAAS,IACTC,EAAiBL,EAAgBI,EAAOxP,GACxCuP,EAAkBH,EAAgBnE,EAASzJ,EAAQD,EAAOvB,GAC1D0P,EAAiBN,EAAgBI,EAAOxP,GACxCuP,EAAkBH,EAAgBnE,EAASzJ,EAAQD,EAAOvB,EAE9D,CAEA,SAASqP,EAAsBpH,EAAOjI,GACpC,IAAIoP,EAAiB,GACjBO,EAAqB,aAAX3P,EAAwB,IAAM,IACxC4P,GAAcC,EAAAA,EAAAA,IAAU5H,GAAO,SAAUtC,GAC3C,OAAOA,EAAK5C,YAAY4M,EAC1B,IAOA,OANAC,EAAYE,KAAKC,MAAK,SAAUC,EAAGC,GACjC,OAAOD,EAAIC,CACb,IACA1D,EAAAA,KAAYqD,EAAYE,MAAM,SAAUI,GACtCd,EAAevB,KAAK+B,EAAYO,QAAQvO,IAAIsO,GAC9C,IACOd,CACT,CAMA,SAASE,EAAoBF,EAAgBpH,EAAOxG,EAAQD,EAAO0J,EAASjL,GAC1E,IAAIoQ,EAAQC,IACZ9D,EAAAA,KAAY6C,GAAgB,SAAUnH,GACpC,IAAIqI,EAAIrI,EAAMK,OACV2E,EAAM,EACVV,EAAAA,KAAYtE,GAAO,SAAUtC,GAC3BsH,GAAOtH,EAAK5C,YAAYgH,KAC1B,IACA,IAAIwG,EAAgB,aAAXvQ,GAAyBuB,GAAS+O,EAAI,GAAKrF,GAAWgC,GAAOzL,GAAU8O,EAAI,GAAKrF,GAAWgC,EAEhGsD,EAAKH,IACPA,EAAQG,EAEZ,IACAhE,EAAAA,KAAY6C,GAAgB,SAAUnH,GACpCsE,EAAAA,KAAYtE,GAAO,SAAUtC,EAAM0C,GACjC,IAAImI,EAAS7K,EAAK5C,YAAYgH,MAAQqG,EAEvB,aAAXpQ,GACF2F,EAAK6H,UAAU,CACbzL,EAAGsG,IACF,GACH1C,EAAK6H,UAAU,CACb1J,GAAI0M,IACH,KAEH7K,EAAK6H,UAAU,CACbxL,EAAGqG,IACF,GACH1C,EAAK6H,UAAU,CACb7J,GAAI6M,IACH,GAEP,GACF,IACAjE,EAAAA,KAAYvE,GAAO,SAAU9F,GAC3B,IAAIuO,GAAUvO,EAAKqL,WAAa6C,EAChClO,EAAKsL,UAAU,CACb7J,GAAI8M,IACH,EACL,GACF,CAMA,SAASlB,EAAkBH,EAAgBnE,EAASzJ,EAAQD,EAAOvB,GACjE,IAAI2P,EAAqB,aAAX3P,EAAwB,IAAM,IAC5CuM,EAAAA,KAAY6C,GAAgB,SAAUnH,GAIpC,IAAIyI,EACA/K,EACAhC,EALJsE,EAAM8H,MAAK,SAAUC,EAAGC,GACtB,OAAOD,EAAEjN,YAAY4M,GAAWM,EAAElN,YAAY4M,EAChD,IAQA,IAJA,IAAIgB,EAAK,EACLL,EAAIrI,EAAMK,OACVsI,EAAwB,aAAX5Q,EAAwB,KAAO,KAEvCqI,EAAI,EAAGA,EAAIiI,EAAGjI,IACrB1C,EAAOsC,EAAMI,GACb1E,EAAKgN,EAAKhL,EAAK5C,YAAY4M,GAEvBhM,EAAK,IACP+M,EAAQ/K,EAAK5C,YAAY4M,GAAWhM,EACzB,aAAX3D,EAAwB2F,EAAK6H,UAAU,CACrCzL,EAAG2O,IACF,GAAQ/K,EAAK6H,UAAU,CACxBxL,EAAG0O,IACF,IAGLC,EAAKhL,EAAK5C,YAAY4M,GAAWhK,EAAK5C,YAAY6N,GAAc3F,EAGlE,IAAI4F,EAAuB,aAAX7Q,EAAwBuB,EAAQC,EAIhD,GAFAmC,EAAKgN,EAAK1F,EAAU4F,EAEhBlN,EAAK,EAAG,CACV+M,EAAQ/K,EAAK5C,YAAY4M,GAAWhM,EACzB,aAAX3D,EAAwB2F,EAAK6H,UAAU,CACrCzL,EAAG2O,IACF,GAAQ/K,EAAK6H,UAAU,CACxBxL,EAAG0O,IACF,GACHC,EAAKD,EAEL,IAASrI,EAAIiI,EAAI,EAAGjI,GAAK,IAAKA,EAC5B1C,EAAOsC,EAAMI,GACb1E,EAAKgC,EAAK5C,YAAY4M,GAAWhK,EAAK5C,YAAY6N,GAAc3F,EAAU0F,EAEtEhN,EAAK,IACP+M,EAAQ/K,EAAK5C,YAAY4M,GAAWhM,EACzB,aAAX3D,EAAwB2F,EAAK6H,UAAU,CACrCzL,EAAG2O,IACF,GAAQ/K,EAAK6H,UAAU,CACxBxL,EAAG0O,IACF,IAGLC,EAAKhL,EAAK5C,YAAY4M,EAE1B,CACF,GACF,CAQA,SAASF,EAAiBL,EAAgBI,EAAOxP,GAC/CuM,EAAAA,KAAY6C,EAAe0B,QAAQC,WAAW,SAAU9I,GACtDsE,EAAAA,KAAYtE,GAAO,SAAUtC,GAC3B,GAAIA,EAAKuH,SAAS5E,OAAQ,CACxB,IAAItG,EAAIiL,EAAItH,EAAKuH,SAAU8D,EAAgBhR,GAAUiN,EAAItH,EAAKuH,SAAUC,GAExE,GAAIzD,MAAM1H,GAAI,CACZ,IAAIiP,EAAMtL,EAAKuH,SAAS5E,OACxBtG,EAAIiP,EAAMhE,EAAItH,EAAKuH,SAAUgE,EAAclR,GAAUiR,EAAM,CAC7D,CAEA,GAAe,aAAXjR,EAAuB,CACzB,IAAI0Q,EAAQ/K,EAAK5C,YAAYhB,GAAKC,EAAImP,EAAOxL,EAAM3F,IAAWwP,EAC9D7J,EAAK6H,UAAU,CACbzL,EAAG2O,IACF,EACL,KAAO,CACL,IAAIU,EAAQzL,EAAK5C,YAAYf,GAAKA,EAAImP,EAAOxL,EAAM3F,IAAWwP,EAC9D7J,EAAK6H,UAAU,CACbxL,EAAGoP,IACF,EACL,CACF,CACF,GACF,GACF,CAEA,SAASJ,EAAe9O,EAAMlC,GAC5B,OAAOmR,EAAOjP,EAAKkB,MAAOpD,GAAUkC,EAAKqL,UAC3C,CAEA,SAAS2D,EAAahP,EAAMlC,GAC1B,OAAOmR,EAAOjP,EAAKkB,MAAOpD,EAC5B,CAEA,SAASqR,EAAenP,EAAMlC,GAC5B,OAAOmR,EAAOjP,EAAKY,MAAO9C,GAAUkC,EAAKqL,UAC3C,CAEA,SAAS+D,EAAapP,EAAMlC,GAC1B,OAAOmR,EAAOjP,EAAKY,MAAO9C,EAC5B,CAEA,SAASmR,EAAOxL,EAAM3F,GACpB,MAAkB,aAAXA,EAAwB2F,EAAK5C,YAAYhB,EAAI4D,EAAK5C,YAAYe,GAAK,EAAI6B,EAAK5C,YAAYf,EAAI2D,EAAK5C,YAAYY,GAAK,CAC3H,CAEA,SAASwJ,EAAajL,GACpB,OAAOA,EAAKqL,UACd,CAEA,SAASN,EAAIsE,EAAO7J,EAAI1H,GACtB,IAAIiN,EAAM,EACNgE,EAAMM,EAAMjJ,OACZD,GAAK,EAET,QAASA,EAAI4I,EAAK,CAChB,IAAIlH,GAASrC,EAAG6J,EAAMlJ,GAAIrI,GAErB0J,MAAMK,KACTkD,GAAOlD,EAEX,CAEA,OAAOkD,CACT,CAMA,SAASyC,EAAiBN,EAAgBI,EAAOxP,GAC/CuM,EAAAA,KAAY6C,GAAgB,SAAUnH,GACpCsE,EAAAA,KAAYtE,GAAO,SAAUtC,GAC3B,GAAIA,EAAK0H,QAAQ/E,OAAQ,CACvB,IAAItG,EAAIiL,EAAItH,EAAK0H,QAASgE,EAAgBrR,GAAUiN,EAAItH,EAAK0H,QAASF,GAEtE,GAAIzD,MAAM1H,GAAI,CACZ,IAAIiP,EAAMtL,EAAK0H,QAAQ/E,OACvBtG,EAAIiP,EAAMhE,EAAItH,EAAK0H,QAASiE,EAActR,GAAUiR,EAAM,CAC5D,CAEA,GAAe,aAAXjR,EAAuB,CACzB,IAAI0Q,EAAQ/K,EAAK5C,YAAYhB,GAAKC,EAAImP,EAAOxL,EAAM3F,IAAWwP,EAC9D7J,EAAK6H,UAAU,CACbzL,EAAG2O,IACF,EACL,KAAO,CACL,IAAIU,EAAQzL,EAAK5C,YAAYf,GAAKA,EAAImP,EAAOxL,EAAM3F,IAAWwP,EAC9D7J,EAAK6H,UAAU,CACbxL,EAAGoP,IACF,EACL,CACF,CACF,GACF,GACF,CAMA,SAASrE,EAAkB9E,EAAOjI,GAChC,IAAI2P,EAAqB,aAAX3P,EAAwB,IAAM,IAC5CuM,EAAAA,KAAYtE,GAAO,SAAUtC,GAC3BA,EAAKuH,SAAS6C,MAAK,SAAUC,EAAGC,GAC9B,OAAOD,EAAE5M,MAAML,YAAY4M,GAAWM,EAAE7M,MAAML,YAAY4M,EAC5D,IACAhK,EAAK0H,QAAQ0C,MAAK,SAAUC,EAAGC,GAC7B,OAAOD,EAAElN,MAAMC,YAAY4M,GAAWM,EAAEnN,MAAMC,YAAY4M,EAC5D,GACF,IACApD,EAAAA,KAAYtE,GAAO,SAAUtC,GAC3B,IAAI/B,EAAK,EACLC,EAAK,EACT0I,EAAAA,KAAY5G,EAAKuH,UAAU,SAAUhL,GACnCA,EAAKsL,UAAU,CACb5J,GAAIA,IACH,GACHA,GAAM1B,EAAKa,YAAYY,EACzB,IACA4I,EAAAA,KAAY5G,EAAK0H,SAAS,SAAUnL,GAClCA,EAAKsL,UAAU,CACb3J,GAAIA,IACH,GACHA,GAAM3B,EAAKa,YAAYY,EACzB,GACF,GACF,C,eC9fe,SAAS6N,EAAaxQ,GACnCA,EAAQmL,iBAAiB,UAAU,SAAUpL,GAC3C,IAAII,EAAQJ,EAAYK,WACpB6G,EAAQ9G,EAAM8G,MACdD,EAAQ7G,EAAM6G,MAElB,GAAIC,EAAMK,OAAQ,CAChB,IAAImJ,EAAapB,IACbqB,GAAcrB,IAClB9D,EAAAA,KAAYtE,GAAO,SAAUtC,GAC3B,IAAI6E,EAAY7E,EAAK5C,YAAYgH,MAE7BS,EAAYiH,IACdA,EAAajH,GAGXA,EAAYkH,IACdA,EAAalH,EAEjB,IACA+B,EAAAA,KAAYtE,GAAO,SAAUtC,GAC3B,IAAIgM,EAAU,IAAIC,EAAAA,EAAc,CAC9BhR,KAAM,QACNiR,cAAe,SACfC,WAAY,CAACL,EAAYC,GACzBK,OAAQhR,EAAYa,IAAI,WAEtBoQ,EAAkBL,EAAQM,iBAAiBtM,EAAK5C,YAAYgH,OAC5DmI,EAAcvM,EAAKjD,WAAWd,IAAI,CAAC,YAAa,UAEjC,MAAfsQ,GACFvM,EAAKwM,UAAU,QAASD,GACxBvM,EAAKwM,UAAU,QAAS,CACtBhO,KAAM+N,MAGRvM,EAAKwM,UAAU,QAASH,GACxBrM,EAAKwM,UAAU,QAAS,CACtBhO,KAAM6N,IAGZ,GACF,CAEIhK,EAAMM,QACRiE,EAAAA,KAAYvE,GAAO,SAAU9F,GAC3B,IAAIkQ,EAAYlQ,EAAKQ,WAAWd,IAAI,aACpCM,EAAKiQ,UAAU,QAASC,EAC1B,GAEJ,GACF,CCjDO,SAASC,EAAQC,GACtBA,EAAUC,kBAAkB/R,GAC5B8R,EAAUE,oBAAoB5K,GAC9B0K,EAAUG,eAAevG,GACzBoG,EAAUI,eAAelB,GACzBc,EAAUK,eAAe,CACvB/R,KAAM,WACNgS,MAAO,WAEPC,OAAQ,WACP,SAAUC,EAAS9R,GACpBA,EAAQ+R,cAAc,CACpBC,SAAU,SACVC,QAAS,SACTC,MAAOJ,IACN,SAAU/R,GACXA,EAAYmI,gBAAgB4J,EAAQxQ,UAAW,CAACwQ,EAAQjM,OAAQiM,EAAQhM,QAC1E,GACF,GACF,C,uGCnBIqM,EAEJ,SAAU9T,GAGR,SAAS8T,IACP,IAAI1S,EAAmB,OAAXpB,GAAmBA,EAAOqB,MAAMhC,KAAMiC,YAAcjC,KAIhE,OAFA+B,EAAMG,KAAOuS,EAAmBvS,KAChCH,EAAM2S,iBAAkB,EACjB3S,CACT,CAwEA,OAhFAjB,EAAAA,EAAAA,IAAU2T,EAAoB9T,GAU9B8T,EAAmB1T,UAAUoI,eAAiB,SAAUC,EAAQ9G,GAC9D,OAAOqS,EAAAA,EAAAA,GAAiB,KAAM3U,KAAM,CAClC4U,oBAAoB,GAExB,EAEAH,EAAmB1T,UAAU8T,eAAiB,WAC5C,IAAIC,EAAc9U,KAAKoJ,OAAO0L,YAE9B,OAAmB,MAAfA,EAEK9U,KAAKoJ,OAAO2L,MAAQ,IAAM/U,KAAKkD,IAAI,eAGrC4R,CACT,EAEAL,EAAmB1T,UAAUiU,wBAA0B,WACrD,IAAIC,EAAuBjV,KAAKoJ,OAAO6L,qBAEvC,OAA4B,MAAxBA,EAEKjV,KAAKoJ,OAAO2L,MAAQ,IAAM/U,KAAKkD,IAAI,wBAGrC+R,CACT,EAEAR,EAAmB1T,UAAUmU,cAAgB,SAAUtR,EAAW4F,EAAM2L,GACtE,OAAOA,EAAUC,MAAM5L,EAAKY,cAAcxG,GAC5C,EAEA6Q,EAAmB1T,UAAUsU,aAAe,WAE1C,OAAOrV,KAAKgD,UAAUsS,QAAUtV,KAAKgV,0BAA4BhV,KAAKwH,GAAK,EAC7E,EAEAiN,EAAmBvS,KAAO,iBAC1BuS,EAAmBc,aAAe,CAAC,OAAQ,QAAS,MAAO,aAAc,YACzEd,EAAmB1I,cAAgB,CACjCE,iBAAkB,cAElBD,EAAG,EACHwJ,iBAAiB,EACjBC,WAAY,GAEZV,OAAO,EAEPW,eAAgB,IAEhBvI,UAAW,CACTJ,QAAS,IAGXE,SAAU,CACR0I,OAAO,GAITC,MAAM,EACN1I,OAAQ,CACNC,UAAW,CACTC,YAAa,YAGjByI,oBAAqB,CACnBC,YAAa,UAIVrB,CACT,CAlFA,CAkFElH,EAAAA,GAEF,I,4CCpFIwI,EAEJ,SAAUpV,GAGR,SAASoV,IACP,IAAIhU,EAAmB,OAAXpB,GAAmBA,EAAOqB,MAAMhC,KAAMiC,YAAcjC,KAGhE,OADA+B,EAAMG,KAAO6T,EAAY7T,KAClBH,CACT,CA6FA,OApGAjB,EAAAA,EAAAA,IAAUiV,EAAapV,GASvBoV,EAAYhV,UAAUqB,OAAS,SAAUC,EAAaC,EAASC,GAC7D,IAAIiH,EAAOnH,EAAYW,UAEnBgT,EAAahW,KAAKiW,kBAAkBzM,EAAMnH,GAE9C2T,EAAWE,WAAW1M,EAAM,CAK1B2M,UAAWnW,KAAKoW,cAAc/T,KAEhCrC,KAAKqW,WAAY,CACnB,EAEAN,EAAYhV,UAAUuV,yBAA2B,SAAUjU,EAAaC,EAASC,GAC/E,IAAIiH,EAAOnH,EAAYW,UAEnBgT,EAAahW,KAAKiW,kBAAkBzM,EAAMnH,GAE9C2T,EAAWO,yBAAyB/M,GACpCxJ,KAAKqW,WAAY,CACnB,EAEAN,EAAYhV,UAAUyV,kBAAoB,SAAUC,EAAYpU,EAAaC,GAC3EtC,KAAK0W,YAAYC,kBAAkBF,EAAYpU,EAAYW,UAAW,CACpEmT,UAAWnW,KAAKoW,cAAc/T,KAGhCrC,KAAKqW,UAAYI,EAAWG,MAAQvU,EAAYW,UAAUsS,OAC5D,EAEAS,EAAYhV,UAAU8V,gBAAkB,SAAUxU,EAAaC,EAASC,GACtE,IAAIiH,EAAOnH,EAAYW,UAKvB,GAFAhD,KAAK2C,MAAMoF,SAEN/H,KAAKqW,WAAa7M,EAAK8L,QAAU,IACpC,MAAO,CACLnB,QAAQ,GAGV,IAAI2C,GAAMC,EAAAA,EAAAA,GAAa,IAAIC,MAAM3U,EAAaC,EAASC,GAEnDuU,EAAIG,UACNH,EAAIG,SAAS,CACXC,MAAO,EACPN,IAAKpN,EAAK8L,QACVA,MAAO9L,EAAK8L,SACX9L,GAGLxJ,KAAK0W,YAAYS,aAAa3N,EAElC,EAEAuM,EAAYhV,UAAUqW,aAAe,SAAUpO,GAC7ChJ,KAAK0W,aAAe1W,KAAK0W,YAAYU,aAAapO,EACpD,EAEA+M,EAAYhV,UAAUqV,cAAgB,SAAU/T,GAC9C,IAAIgV,EAAWhV,EAAY4J,iBACvBqL,EAAWD,GAAYA,EAASE,SAAWF,EAASE,UACxD,OAAOlV,EAAYa,IAAI,QAAQ,GAAQoU,EAAW,IACpD,EAEAvB,EAAYhV,UAAUkV,kBAAoB,SAAUzM,EAAMnH,GACxD,IAAI2T,EAAahW,KAAK0W,YAClBc,EAAkBnV,EAAYmV,gBAC9BC,EAAcD,EAAgBzC,MAUlC,OARKiB,GAAcyB,IAAgBzX,KAAK0X,eACtC1B,GAAcA,EAAW2B,SACzB3B,EAAahW,KAAK0W,YAAce,EAAc,IAAIG,EAAAA,EAAoB,IAAIC,EAAAA,EAC1E7X,KAAK0X,aAAeD,EACpBzX,KAAK2C,MAAMS,aAGbpD,KAAK2C,MAAMgE,IAAIqP,EAAWrT,OACnBqT,CACT,EAEAD,EAAYhV,UAAU4W,OAAS,SAAUrV,EAASC,GAChDvC,KAAK0W,aAAe1W,KAAK0W,YAAYiB,QAAO,GAC5C3X,KAAK0W,YAAc,IACrB,EAEAX,EAAYhV,UAAU+H,QAAU,WAAa,EAE7CiN,EAAY7T,KAAO,UACZ6T,CACT,CAtGA,CAsGEhN,EAAAA,GAEF,I,WC3GO,SAAS4K,EAAQC,IAEtBkE,EAAAA,EAAAA,GAAIC,EAAAA,GACJnE,EAAUE,oBAAoBW,GAC9Bb,EAAUC,kBAAkBkC,GAC5BnC,EAAUG,gBAAeiE,EAAAA,EAAAA,GAAa,WACxC,C,uMCDIC,EAAmB,EACnBC,EAAiB,EAKjBC,EAEJ,SAAUxX,GAGR,SAASwX,EAAclR,EAAM5E,EAAaC,EAASC,GACjD,IAAIR,EAAQpB,EAAOE,KAAKb,OAASA,KAEjC+B,EAAMwF,GAAK0Q,EACXlW,EAAMqW,WAAa,CACjBC,QAAQ,IAEV1U,EAAAA,EAAAA,GAAU5B,GAAO8B,YAAcxB,EAAYwB,YAC3C,IAAIyU,EAAO,IAAIzW,EAAAA,GAAa,CAC1B0F,GAAI2Q,EACJK,OAAQtR,EAAKjD,WAAWd,IAAI,CAAC,QAAS,aAOxC,OAJAnB,EAAMyW,eAAeF,GAErBvW,EAAMmU,YAAW,EAAMjP,EAAM5E,EAAaC,EAASC,GAE5CR,CACT,CA2LA,OA/MAjB,EAAAA,EAAAA,IAAUqX,EAAexX,GAsBzBwX,EAAcpX,UAAUmV,WAAa,SAAUuC,EAAaxR,EAC5D5E,EAAaC,EAASC,GACpBvC,KAAKiH,KAAOA,EACZA,EAAKyR,MAAQ1Y,KACbqC,EAAcA,GAAerC,KAAK2Y,aAClCrW,EAAUA,GAAWtC,KAAK4Y,SAC1B,IAAIC,EAAS7Y,MACb2D,EAAAA,EAAAA,GAAUkV,GAAQjV,UAAYqD,EAAKrD,UACnC,IAAIuD,EAAYF,EAAKjD,WACjBwC,EAAgBW,EAAUnD,SAAS,YACnCkD,EAASD,EAAK5C,YACdyU,EAAcjL,EAAAA,OAAc,CAAC,EAAG3G,GACpC4R,EAAYrM,MAAQ,KACpB,IAAIsM,EAAc9R,EAAKvB,UAAU,SACjCqT,EAAYC,SAAW,QACvB,IAAIrT,EAAQsB,EAAKvB,UAAU,SAEvBC,IACFoT,EAAYpT,OAAQsT,EAAAA,EAAAA,GAA+BtT,EAAOpD,IAG5D,IAAI2W,GAAeC,EAAAA,EAAAA,GAAsBhS,EAAUnD,SAAS,aAAc8U,GAAa,GACvFjL,EAAAA,OAAciL,EAAaI,GAC3BrL,EAAAA,KAAYuL,EAAAA,IAAgB,SAAUC,GACpC,IAAIC,EAAQT,EAAOU,YAAYF,GAC3BG,EAAiBrS,EAAUnD,SAAS,CAACqV,EAAW,cACpDC,EAAM9T,MAAQgU,EAAejU,eAE7B,IAAI2T,GAAeC,EAAAA,EAAAA,GAAsBK,EAAgBV,GAErDI,IACFI,EAAMnY,MAAQ+X,EAElB,IAEIT,GACFI,EAAOxT,SAASyT,GAChBD,EAAO1X,MAAMsY,EAAIvS,EAAOwS,GACxB7X,EAAAA,GAAkBgX,EAAQ,CACxB1X,MAAO,CACLsY,EAAGvS,EAAOuS,IAEXpX,EAAa4E,EAAKrD,aAIrB/B,EAAAA,EAAoBgX,EAAQ,CAC1B1X,MAAO2X,GACNzW,IACHsX,EAAAA,EAAAA,IAAad,IAGfA,EAAOvT,SAASyT,GAEhB/Y,KAAK4Z,aAAavX,GAElB,IAAIwX,EAAc1S,EAAU2S,WAAW,UACvCD,GAAehB,EAAOkB,KAAK,SAAUF,GACrC7Z,KAAK2Y,aAAetW,GAAerC,KAAK2Y,aACxC3Y,KAAK4Y,SAAWtW,GAAWtC,KAAK4Y,SAChC,IAAI/R,EAAQL,EAActD,IAAI,SAC1B8W,EAA2B,aAAVnT,EAAuBI,EAAKgT,sBAAkC,eAAVpT,EAAyBI,EAAKiT,uBAAyBrT,GAChIC,EAAAA,EAAAA,IAAoB9G,KAAMga,EAAgBxT,EAActD,IAAI,aAAcsD,EAActD,IAAI,YAC9F,EAEAiV,EAAcpX,UAAU6Y,aAAe,SAAUvX,GAC/C,IAAIN,EAAQ/B,KAERmH,EAAYnH,KAAKiH,KAAKjD,WACtBmW,EAAmBhT,EAAUnD,SAAS,SACtCkD,EAASlH,KAAKiH,KAAK5C,YACnB+V,EAAQlT,EAAOmT,SAAWnT,EAAOoT,WACjCC,GAAYrT,EAAOoT,WAAapT,EAAOmT,UAAY,EACnDjV,EAAKL,KAAKyV,IAAID,GACdtV,EAAKF,KAAK0V,IAAIF,GACd1B,EAAS7Y,KACTyM,EAAQoM,EAAO6B,iBACf9W,EAAY5D,KAAKiH,KAAKrD,UACtB+W,EAAgBR,EAAiBjX,IAAI,YAAc,IAAM6B,KAAK6V,GAC9DC,EAAgBV,EAAiBjX,IAAI,WAA8B,MAAjByX,GAAyB5V,KAAK+V,IAAIV,GAASO,GA6FjG,SAASI,EAAarU,EAAOgF,GAC3B,IAAIsP,EAAYtU,EAAMxD,IAAIwI,GAE1B,OAAiB,MAAbsP,EACKb,EAAiBjX,IAAIwI,GAGvBsP,CACT,CApGAvO,EAAMwO,QAAUJ,EAEhBhN,EAAAA,KAAYqN,EAAAA,IAAgB,SAAU7B,GACpC,IAAI8B,EAAgC,WAAd9B,EAAyBlS,EAAUnD,SAAS,SAAWmD,EAAUnD,SAAS,CAACqV,EAAW,UACxG+B,EAAyB,WAAd/B,EACXC,EAAQ8B,EAAW3O,EAAQA,EAAM8M,YAAYF,GAC7Cf,EAAOjW,EAAYgZ,kBAAkBzX,EAAWyV,GAEhD+B,IACF9C,EAAOA,GAAQvW,EAAMkF,KAAKyE,MAG5B4N,EAAM9T,OAAQ8V,EAAAA,EAAAA,IAAgBH,EAAiB,CAAC,EAAG,KAAoB,WAAd9B,GAAwB,GAE7Ef,IACFgB,EAAM9T,MAAM8S,KAAOA,GAIrB,IAAIiD,EAAUJ,EAAgBjY,IAAI,QAEnB,MAAXqY,GAAoBH,IACtB9B,EAAM2B,QAAUM,GAGlB,IAOI9B,EAPA+B,EAAgBT,EAAaI,EAAiB,YAC9CM,EAAcL,EAAWvC,EAASA,EAAO6C,OAAOrC,GAChDsC,EAAaF,EAAYjW,MAAMC,KACnCgW,EAAYrD,WAAa,CACvBwD,YAA8C,YAAjCT,EAAgBjY,IAAI,SAAyByY,EAAa,KACvEtD,OAA0B,YAAlBmD,GAGV,IAAIK,EAAed,EAAaI,EAAiB,aAAe,EAC5DW,EAAYf,EAAaI,EAAiB,SAExB,YAAlBK,GACF/B,EAAIvS,EAAOuS,EAAIoC,EACfC,EAAYvB,EAAWxV,KAAK6V,GAAK,EAAI,QAAU,QAE1CkB,GAA2B,WAAdA,EASO,SAAdA,GACTrC,EAAIvS,EAAOwS,GAAKmC,EAEZtB,EAAWxV,KAAK6V,GAAK,IACvBkB,EAAY,UAES,UAAdA,IACTrC,EAAIvS,EAAOuS,EAAIoC,EAEXtB,EAAWxV,KAAK6V,GAAK,IACvBkB,EAAY,UAhBZrC,EADEW,IAAU,EAAIrV,KAAK6V,IAAoB,IAAd1T,EAAOwS,GAC9B,GAECxS,EAAOuS,EAAIvS,EAAOwS,IAAM,EAG/BoC,EAAY,UAgBhBxC,EAAM9T,MAAMuW,MAAQD,EACpBxC,EAAM9T,MAAMwW,cAAgBjB,EAAaI,EAAiB,kBAAoB,SAC9E7B,EAAMjW,EAAIoW,EAAIrU,EAAK8B,EAAO+U,GAC1B3C,EAAMhW,EAAImW,EAAIxU,EAAKiC,EAAOgV,GAC1B,IAAIC,EAAapB,EAAaI,EAAiB,UAC3CiB,EAAS,EAEM,WAAfD,GACFC,GAASC,EAAAA,EAAAA,IAAiB9B,GAEtB6B,EAASrX,KAAK6V,GAAK,GAAKwB,EAAmB,IAAVrX,KAAK6V,KACxCwB,GAAUrX,KAAK6V,KAEO,eAAfuB,GACTC,EAASrX,KAAK6V,GAAK,EAAIL,EAEnB6B,EAASrX,KAAK6V,GAAK,EACrBwB,GAAUrX,KAAK6V,GACNwB,GAAUrX,KAAK6V,GAAK,IAC7BwB,GAAUrX,KAAK6V,KAER/M,EAAAA,SAAgBsO,KACzBC,EAASD,EAAapX,KAAK6V,GAAK,KAGlCtB,EAAMgD,SAAWF,CACnB,IAYA3P,EAAM8P,YACR,EAEOpE,CACT,CAjNA,CAiNEtW,EAAAA,GAEF,I,sBClOW2a,EAAsB,qBAC7BC,EAAmB,oBACnBC,EAAqB,sBAClB,SAASC,EAAsB/I,GACpCA,EAAUK,eAAe,CACvB/R,KAAMsa,EACNrI,OAAQ,eACP,SAAUC,EAAS9R,GAOpB,SAASsa,EAAiBlW,EAAOmW,GAC/B,IAAIC,GAAaC,EAAAA,EAAAA,IAAmB3I,EAAS,CAACoI,GAAsB9V,GAEpE,GAAIoW,EAAY,CACd,IAAIE,EAAiBtW,EAAMuW,cAEvBD,IACF5I,EAAQ8I,WAAYC,EAAAA,EAAAA,IAAcH,EAAgBF,EAAW7V,MAAQ,SAAW,aAGlFP,EAAM0W,cAAcN,EAAW7V,KACjC,CACF,CAlBA3E,EAAQ+R,cAAc,CACpBC,SAAU,SACVC,QAAS,WACTC,MAAOJ,GACNwI,EAeL,IACAhJ,EAAUK,eAAe,CACvB/R,KAAMua,EACNtI,OAAQ,SACP,SAAUC,EAAS9R,EAASC,GAS7B,SAAS8a,EAAgB3W,GACvB,IAAIoW,GAAaC,EAAAA,EAAAA,IAAmB3I,EAAS,CAACqI,GAAmB/V,GAE7DoW,IACF1I,EAAQxQ,UAAYkZ,EAAW7V,KAAKrD,UAExC,CAbAwQ,GAAUkJ,EAAAA,EAAAA,QAAO,CAAC,EAAGlJ,GACrB9R,EAAQ+R,cAAc,CACpBC,SAAU,SACVC,QAAS,WACTC,MAAOJ,GACNiJ,GAeH9a,EAAIyF,gBAAesV,EAAAA,EAAAA,QAAOlJ,EAAS,CACjClS,KAAM,cAEV,IACA0R,EAAUK,eAAe,CACvB/R,KAAMwa,EACNvI,OAAQ,eACP,SAAUC,EAAS9R,EAASC,GAC7B6R,GAAUkJ,EAAAA,EAAAA,QAAO,CAAC,EAAGlJ,GAMrB7R,EAAIyF,gBAAesV,EAAAA,EAAAA,QAAOlJ,EAAS,CACjClS,KAAM,aAEV,GACF,C,eClEIqb,EAEJ,SAAU5c,GAGR,SAAS4c,IACP,IAAIxb,EAAmB,OAAXpB,GAAmBA,EAAOqB,MAAMhC,KAAMiC,YAAcjC,KAGhE,OADA+B,EAAMG,KAAOqb,EAAarb,KACnBH,CACT,CA6KA,OApLAjB,EAAAA,EAAAA,IAAUyc,EAAc5c,GASxB4c,EAAaxc,UAAUqB,OAAS,SAAUC,EAAaC,EAASC,EAChE6R,GACE,IAAIoJ,EAAOxd,KACXA,KAAKqC,YAAcA,EACnBrC,KAAKuC,IAAMA,EACXvC,KAAKsC,QAAUA,EACf,IAAIkH,EAAOnH,EAAYW,UACnBya,EAAcjU,EAAKkU,KAAKC,KACxBC,EAAUvb,EAAY4a,cACtBta,EAAQ3C,KAAK2C,MACbkb,EAAyBxb,EAAYa,IAAI,0BACzC4a,EAAc,GAClBF,EAAQ5W,UAAS,SAAUC,GACzB6W,EAAY3O,KAAKlI,EACnB,IACA,IAAI8W,EAAc/d,KAAKge,cAAgB,GAQvC,SAASC,EAAWH,EAAaC,GAO/B,SAASG,EAAOjX,GACd,OAAOA,EAAKkX,OACd,CAEA,SAASC,EAAYC,EAAQC,GAC3B,IAAIC,EAAoB,MAAVF,EAAiB,KAAOP,EAAYO,GAC9CG,EAAoB,MAAVF,EAAiB,KAAOP,EAAYO,GAClDG,EAAaF,EAASC,EACxB,CAd2B,IAAvBV,EAAYlU,QAAuC,IAAvBmU,EAAYnU,QAI5C,IAAI8U,EAAAA,EAAWX,EAAaD,EAAaI,EAAQA,GAAQvX,IAAIyX,GAAajK,OAAOiK,GAAazG,OAAO9J,EAAAA,MAAauQ,EAAa,OAAOO,SAWxI,CAEA,SAASF,EAAaF,EAASC,GAM7B,GALKX,IAA0BU,GAAYA,EAAQ1P,aAEjD0P,EAAU,MAGRA,IAAYd,GAAee,IAAYf,EACzC,GAAIe,GAAWA,EAAQ9F,MACjB6F,GAEFC,EAAQ9F,MAAMxC,YAAW,EAAOqI,EAASlc,EAAaC,EAASC,GAE/DiH,EAAK5C,iBAAiB2X,EAAQ3a,UAAW4a,EAAQ9F,QAGjDkG,EAAWJ,QAER,GAAID,EAAS,CAElB,IAAI7F,EAAQ,IAAIP,EAAcoG,EAASlc,EAAaC,EAASC,GAC7DI,EAAMgE,IAAI+R,GAEVlP,EAAK5C,iBAAiB2X,EAAQ3a,UAAW8U,EAC3C,CAEJ,CAEA,SAASkG,EAAW3X,GACbA,GAIDA,EAAKyR,QACP/V,EAAMgV,OAAO1Q,EAAKyR,OAClBzR,EAAKyR,MAAQ,KAEjB,CAEA,SAASmG,EAAapB,EAAaqB,GAC7BA,EAASjV,MAAQ,GAEf2T,EAAKuB,aAEPvB,EAAKuB,aAAa7I,YAAW,EAAOuH,EAAapb,EAAaC,EAASC,IAGvEib,EAAKuB,aAAe,IAAI5G,EAAcsF,EAAapb,EAAaC,EAASC,GACzEI,EAAMgE,IAAI6W,EAAKuB,eAIjBD,EAASpG,MAAMsG,IAAI,SACnBxB,EAAKuB,aAAaE,GAAG,SAAS,SAAUC,GACtC1B,EAAK2B,YAAYL,EAASM,WAC5B,KACS5B,EAAKuB,eAEdpc,EAAMgV,OAAO6F,EAAKuB,cAClBvB,EAAKuB,aAAe,KAExB,CArFAd,EAAWH,EAAaC,GACxBc,EAAapB,EAAaG,GAE1B5d,KAAKqf,cAELrf,KAAKge,aAAeF,CAiFtB,EAMAP,EAAaxc,UAAUse,YAAc,WACnC,IAAItd,EAAQ/B,KAEZA,KAAK2C,MAAMqc,IAAI,SACfhf,KAAK2C,MAAMsc,GAAG,SAAS,SAAUC,GAC/B,IAAII,GAAc,EAEdR,EAAW/c,EAAMM,YAAY4a,cAEjC6B,EAAS9X,UAAS,SAAUC,GAC1B,IAAKqY,GAAerY,EAAKyR,OAASzR,EAAKyR,QAAUwG,EAAE1T,OAAQ,CACzD,IAAI+T,EAAYtY,EAAKjD,WAAWd,IAAI,aAEpC,GAAkB,eAAdqc,EACFxd,EAAMod,YAAYlY,QACb,GAAkB,SAAdsY,EAAsB,CAC/B,IAAIpY,EAAYF,EAAKjD,WACjBwb,EAAOrY,EAAUjE,IAAI,QAEzB,GAAIsc,EAAM,CACR,IAAIC,EAAatY,EAAUjE,IAAI,UAAU,IAAS,UAClDwc,EAAAA,EAAAA,IAAWF,EAAMC,EACnB,CACF,CAEAH,GAAc,CAChB,CACF,GACF,GACF,EAMA/B,EAAaxc,UAAUoe,YAAc,SAAUlY,GACzCA,IAASjH,KAAKqC,YAAY4a,eAC5Bjd,KAAKuC,IAAIyF,eAAe,CACtB9F,KAAMsa,EACNmD,KAAM3f,KAAK4f,IACX3X,SAAUjI,KAAKqC,YAAYmF,GAC3BoI,WAAY3I,GAGlB,EAMAsW,EAAaxc,UAAU8e,aAAe,SAAUzK,EAAO/S,GACrD,IAAIyd,EAAWzd,EAAYW,UACvB+c,EAAaD,EAAS1V,cAAc,GAExC,GAAI2V,EAAY,CACd,IAAI3a,EAAKgQ,EAAM,GAAK2K,EAAW9D,GAC3BhX,EAAKmQ,EAAM,GAAK2K,EAAW7D,GAC3B8D,EAASjb,KAAKkb,KAAK7a,EAAKA,EAAKH,EAAKA,GACtC,OAAO+a,GAAUD,EAAWtG,GAAKuG,GAAUD,EAAWrG,EACxD,CACF,EAEA6D,EAAarb,KAAO,WACbqb,CACT,CAtLA,CAsLExU,EAAAA,GAEF,I,2CC1LImX,EAEJ,SAAUvf,GAGR,SAASuf,IACP,IAAIne,EAAmB,OAAXpB,GAAmBA,EAAOqB,MAAMhC,KAAMiC,YAAcjC,KAIhE,OAFA+B,EAAMG,KAAOge,EAAoBhe,KACjCH,EAAMoe,mBAAoB,EACnBpe,CACT,CAuIA,OA/IAjB,EAAAA,EAAAA,IAAUof,EAAqBvf,GAU/Buf,EAAoBnf,UAAUoI,eAAiB,SAAUC,EAAQ9G,GAE/D,IAAIqb,EAAO,CACTjS,KAAMtC,EAAOsC,KACb0U,SAAUhX,EAAOI,MAEnB6W,EAAkB1C,GAClB,IAAIjU,EAAc1J,KAAKsgB,aAAezS,EAAAA,IAAWzE,EAAOK,QAAU,IAAI,SAAU8W,GAC9E,OAAO,IAAIzW,EAAAA,EAAMyW,EAAavgB,KAAMsC,EACtC,GAAGtC,MAIC0d,EAAO8C,EAAAA,EAAAA,WAAgB7C,EAAM3d,KAAMgK,GAEvC,SAASA,EAAWjH,GAClBA,EAASkH,WAAW,gBAAgB,SAAUvD,EAAOwD,GACnD,IAAIjD,EAAOyW,EAAK+C,mBAAmBvW,GAC/BI,EAAaZ,EAAYzC,EAAK4C,OAElC,OADAS,IAAe5D,EAAMyD,YAAcG,GAC5B5D,CACT,GACF,CAEA,OAAOgX,EAAKlU,IACd,EAEA0W,EAAoBnf,UAAU8K,cAAgB,WAC5C7L,KAAKod,eACP,EAMA8C,EAAoBnf,UAAUmK,cAAgB,SAAUtH,GACtD,IAAIqH,EAAStK,EAAOI,UAAUmK,cAAclJ,MAAMhC,KAAMiC,WAEpDgF,EAAOjH,KAAKgD,UAAU0a,KAAK+C,mBAAmB7c,GAElD,OADAqH,EAAOyV,cAAeC,EAAAA,EAAAA,IAAiB1Z,EAAMjH,MACtCiL,CACT,EAEAiV,EAAoBnf,UAAU6f,cAAgB,SAAU3Z,GACtD,OAAOjH,KAAKsgB,cAAgBtgB,KAAKsgB,aAAarZ,EAAK4C,MACrD,EAEAqW,EAAoBnf,UAAUkc,YAAc,WAC1C,OAAOjd,KAAK6gB,SACd,EAEAX,EAAoBnf,UAAUqc,cAAgB,SAAU0B,GACtDA,EAAW9e,KAAK6gB,UAAY/B,EAAWA,EAAW9e,KAAK6gB,UACvD,IAAIlD,EAAO3d,KAAK8gB,aAAapD,KAAKC,KAE7BmB,IAAYA,IAAanB,GAASA,EAAKoD,SAASjC,MACnD9e,KAAK6gB,UAAYlD,EAErB,EAEAuC,EAAoBnf,UAAUigB,gBAAkB,YAC9CC,EAAAA,EAAAA,GAAuBjhB,KACzB,EAEAkgB,EAAoBhe,KAAO,kBAC3Bge,EAAoBnU,cAAgB,CAElCC,EAAG,EAEHyG,OAAQ,CAAC,MAAO,OAChBuN,OAAQ,CAAC,EAAG,OAEZkB,WAAW,EACX5G,WAAY,GAEZ6G,SAAU,EAEVC,kBAAkB,EAElB7B,UAAW,aACX1B,wBAAwB,EACxBpR,MAAO,CAEL2P,OAAQ,SACR1P,MAAM,EACNK,QAAS,EAGTgP,MAAO,SACPxV,SAAU,SACV8a,SAAU,EACV9I,QAAQ,GAEVpL,UAAW,CACTmU,YAAa,EACblU,YAAa,QACbmU,WAAY,QACZC,WAAY,EACZC,YAAa,qBACbC,cAAe,EACfC,cAAe,EACf5U,QAAS,GAEXE,SAAU,CACRpG,MAAO,cAET+a,KAAM,CACJzU,UAAW,CACTJ,QAAS,IAEXN,MAAO,CACLM,QAAS,KAIb8U,cAAe,YACfvU,kBAAmB,IACnBwU,wBAAyB,IACzBtY,KAAM,GAaN6H,KAAM,QAED6O,CACT,CAjJA,CAiJE3S,EAAAA,GAEF,SAAS8S,EAAkB0B,GAIzB,IAAIxT,EAAM,EACVV,EAAAA,KAAYkU,EAAS3B,UAAU,SAAU4B,GACvC3B,EAAkB2B,GAClB,IAAIC,EAAaD,EAAM3W,MAEvBwC,EAAAA,QAAeoU,KAAgBA,EAAaA,EAAW,IACvD1T,GAAO0T,CACT,IACA,IAAIC,EAAYH,EAAS1W,MAErBwC,EAAAA,QAAeqU,KACjBA,EAAYA,EAAU,KAGP,MAAbA,GAAqBlX,MAAMkX,MAC7BA,EAAY3T,GAIV2T,EAAY,IACdA,EAAY,GAGdrU,EAAAA,QAAekU,EAAS1W,OAAS0W,EAAS1W,MAAM,GAAK6W,EAAYH,EAAS1W,MAAQ6W,CACpF,CAEA,Q,WCxLIC,EAASpd,KAAK6V,GAAK,IACR,SAASwH,EAAeC,EAAY/f,EAASC,GAC1DD,EAAQmL,iBAAiB4U,GAAY,SAAUhgB,GAC7C,IAAIoQ,EAASpQ,EAAYa,IAAI,UACzB8c,EAAS3d,EAAYa,IAAI,UAExB2K,EAAAA,QAAemS,KAClBA,EAAS,CAAC,EAAGA,IAGVnS,EAAAA,QAAe4E,KAClBA,EAAS,CAACA,EAAQA,IAGpB,IAAI5P,EAAQN,EAAI0L,WACZnL,EAASP,EAAI2L,YACboU,EAAOvd,KAAKwd,IAAI1f,EAAOC,GACvBmZ,GAAKuG,EAAAA,EAAAA,IAAa/P,EAAO,GAAI5P,GAC7BqZ,GAAKsG,EAAAA,EAAAA,IAAa/P,EAAO,GAAI3P,GAC7B4W,GAAK8I,EAAAA,EAAAA,IAAaxC,EAAO,GAAIsC,EAAO,GACpC7I,GAAI+I,EAAAA,EAAAA,IAAaxC,EAAO,GAAIsC,EAAO,GACnChI,GAAcjY,EAAYa,IAAI,cAAgBif,EAC9ChB,EAAW9e,EAAYa,IAAI,YAAcif,EACzC1E,EAAcpb,EAAYW,UAAU0a,KAAKC,KACzCmC,EAAWzd,EAAY4a,cACvBwF,EAAY3C,EAASjW,MACrBwH,EAAOhP,EAAYa,IAAI,QAEf,MAARmO,GACFqR,EAAa5C,EAAUzO,GAGzB,IAAIsR,EAAiB,EACrB9U,EAAAA,KAAYiS,EAASM,UAAU,SAAU4B,IACtChX,MAAMgX,EAAMnT,aAAe8T,GAC9B,IACA,IAAIpU,EAAMuR,EAASjR,WAEf+T,EAAa7d,KAAK6V,IAAMrM,GAAOoU,GAAkB,EACjDE,EAAmB/C,EAASjW,MAAQ,EACpCJ,EAASqW,EAAShd,QAAU+f,GAAoB,EAAI,GACpDC,GAAarJ,EAAIC,IAAOjQ,GAAU,GAClCyX,EAAY7e,EAAYa,IAAI,aAC5Bke,EAAmB/e,EAAYa,IAAI,oBAInC6f,EAAM7B,EAAY,GAAK,EAMvB8B,EAAa,SAAU/b,EAAMqT,GAC/B,GAAKrT,EAAL,CAIA,IAAIoT,EAAWC,EAEf,GAAIrT,IAASwW,EAAa,CAExB,IAAIpS,EAAQpE,EAAK4H,WACbuL,EAAgB,IAAR7L,GAAa6S,EAAmBwB,EAAavX,EAAQuX,EAE7DxI,EAAQ+G,IACV/G,EAAQ+G,GAMV9G,EAAWC,EAAayI,EAAM3I,EAC9B,IAAIvQ,EAAQ5C,EAAK4C,MAAQ4Y,GAAaI,GAAoB,EAAI,GAC1DI,EAASvJ,EAAKoJ,EAAYjZ,EAC1BqZ,EAAOxJ,EAAKoJ,GAAajZ,EAAQ,GACjCS,EAAajI,EAAYue,cAAc3Z,GAE3C,GAAIqD,EAAY,CACd,IAAI6Y,EAAO7Y,EAAWpH,IAAI,MAAM,GAC5BkgB,EAAM9Y,EAAWpH,IAAI,KAAK,GAC1BmgB,EAAW/Y,EAAWpH,IAAI,UAAU,GAExB,MAAZmgB,IACFF,EAAOE,EAAS,GAChBD,EAAMC,EAAS,IAGT,MAARF,IAAiBF,GAAST,EAAAA,EAAAA,IAAaW,EAAMb,EAAO,IAC7C,MAAPc,IAAgBF,GAAOV,EAAAA,EAAAA,IAAaY,EAAKd,EAAO,GAClD,CAEArb,EAAK6H,UAAU,CACbsL,MAAOA,EACPE,WAAYA,EACZD,SAAUA,EACV6G,UAAWA,EACXjF,GAAIA,EACJC,GAAIA,EACJxC,GAAIuJ,EACJxJ,EAAGyJ,GAEP,CAGA,GAAIjc,EAAKmZ,UAAYnZ,EAAKmZ,SAASxW,OAAQ,CAEzC,IAAI0Z,EAAiB,EACrBzV,EAAAA,KAAY5G,EAAKmZ,UAAU,SAAUnZ,GACnCqc,GAAkBN,EAAW/b,EAAMqT,EAAagJ,EAClD,GACF,CAEA,OAAOjJ,EAAWC,CAzDlB,CA0DF,EAGA,GAAIuI,EAAkB,CACpB,IAAII,EAASvJ,EACTwJ,EAAOxJ,EAAKoJ,EACZ1I,EAAkB,EAAVrV,KAAK6V,GACjB6C,EAAY3O,UAAU,CACpBsL,MAAOA,EACPE,WAAYA,EACZD,SAAUC,EAAaF,EACvB8G,UAAWA,EACXjF,GAAIA,EACJC,GAAIA,EACJxC,GAAIuJ,EACJxJ,EAAGyJ,GAEP,CAEAF,EAAWlD,EAAUxF,EACvB,GACF,CAKA,SAASoI,EAAazb,EAAMsc,GAC1B,IAAInD,EAAWnZ,EAAKmZ,UAAY,GAChCnZ,EAAKmZ,SAAW/O,EAAK+O,EAAUmD,GAE3BnD,EAASxW,QACXiE,EAAAA,KAAY5G,EAAKmZ,UAAU,SAAU4B,GACnCU,EAAaV,EAAOuB,EACtB,GAEJ,CAUA,SAASlS,EAAK+O,EAAUmD,GACtB,GAAI1V,EAAAA,WAAkB0V,GAAY,CAChC,IAAIC,EAAc3V,EAAAA,IAAWuS,GAAU,SAAU4B,EAAO9X,GACtD,IAAImB,EAAQ2W,EAAMnT,WAClB,MAAO,CACL5D,OAAQ,CACNpB,MAAOmY,EAAMnY,MACb/G,OAAQkf,EAAMlf,OACdc,UAAWoe,EAAMpe,UACjBiL,SAAU,WACR,OAAOxD,CACT,GAEFwR,MAAO3S,EAEX,IAIA,OAHAsZ,EAAYnS,MAAK,SAAUC,EAAGC,GAC5B,OAAOgS,EAAUjS,EAAErG,OAAQsG,EAAEtG,OAC/B,IACO4C,EAAAA,IAAW2V,GAAa,SAAUhY,GACvC,OAAO4U,EAAS5U,EAAOqR,MACzB,GACF,CACE,IAAI4G,EAAwB,QAAdF,EACd,OAAOnD,EAAS/O,MAAK,SAAUC,EAAGC,GAChC,IAAImS,GAAQpS,EAAEzC,WAAa0C,EAAE1C,aAAe4U,EAAU,GAAK,GAC3D,OAAgB,IAATC,GAAcpS,EAAE1N,UAAY2N,EAAE3N,YAAc6f,GAAW,EAAI,GAAKC,CACzE,GAEJ,C,eC7Le,SAASC,EAAerhB,GACrC,IAAIshB,EAAe,CAAC,EAEpB,SAASC,EAAU5c,EAAM5E,EAAayhB,GAEpC,IAAIC,EAAU9c,EAEd,MAAO8c,GAAWA,EAAQla,MAAQ,EAChCka,EAAUA,EAAQ3E,WAGpB,IAAIrZ,EAAQ1D,EAAY2hB,oBAAoBD,EAAQrY,MAAQqY,EAAQngB,UAAY,GAAIggB,GAOpF,OALI3c,EAAK4C,MAAQ,IAAK/D,EAAAA,EAAAA,UAASC,KAE7BA,GAAQke,EAAAA,EAAAA,MAAKle,GAAQkB,EAAK4C,MAAQ,IAAMia,EAAa,GAAK,KAGrD/d,CACT,CAEAzD,EAAQmL,iBAAiB,YAAY,SAAUpL,GAC7C,IAAImH,EAAOnH,EAAYW,UACnB0a,EAAOlU,EAAKkU,KAChBA,EAAK1W,UAAS,SAAUC,GACtB,IAAIP,EAAQO,EAAKjD,WACbwB,EAAQkB,EAAM1C,SAAS,aAAauB,eAEnCC,EAAMC,OACTD,EAAMC,KAAOoe,EAAU5c,EAAM5E,EAAaqb,EAAKC,KAAK7a,SAGtD,IAAIohB,EAAc1a,EAAK2a,uBAAuBld,EAAKrD,UAAW,UAC9D0Z,EAAAA,EAAAA,QAAO4G,EAAa1e,EACtB,GACF,GACF,C,eC/BO,SAASmO,EAAQC,GACtBA,EAAUC,kBAAkB0J,GAC5B3J,EAAUE,oBAAoBoM,GAC9BtM,EAAUG,gBAAeqQ,EAAAA,EAAAA,OAAMhC,EAAgB,aAC/CxO,EAAUyQ,mBAAkBD,EAAAA,EAAAA,OAAME,EAAAA,EAAY,aAC9C1Q,EAAUI,eAAe2P,GACzBhH,EAAsB/I,EACxB,C,kLCJI2Q,EAEJ,SAAU5jB,GAGR,SAAS4jB,IACP,IAAIxiB,EAAmB,OAAXpB,GAAmBA,EAAOqB,MAAMhC,KAAMiC,YAAcjC,KAIhE,OAFA+B,EAAMG,KAAOqiB,EAAeriB,KAC5BH,EAAMyiB,QAAU,GACTziB,CACT,CAqHA,OA7HAjB,EAAAA,EAAAA,IAAUyjB,EAAgB5jB,GAU1B4jB,EAAexjB,UAAUqB,OAAS,SAAUC,EAAaC,EAASC,GAChE,IAAIiH,EAAOnH,EAAYW,UACnBwa,EAAOxd,KACP2C,EAAQ3C,KAAK2C,MACb8hB,EAAepiB,EAAYqiB,iBAC3B9hB,EAAa4G,EAAKnF,UAAU,cAC5BiD,EAAO1E,EAAW0E,KAClBqd,EAAc/hB,EAAW+hB,YAI7B,SAASC,EAAUvV,GACjB,OAAOA,EAAK3D,IACd,CALA/I,EAAMU,EAAI,EACVV,EAAMW,EAAIgE,EAAKhE,EAAIqhB,EAAY,GAM/B,IAAIE,EAAa,IAAInG,EAAAA,EAAW1e,KAAK8kB,eAAiB,GAAIL,EAAcG,EAAWA,GAC/EG,EAAkB,GAGtB,SAASC,EAAQC,EAAQ/a,EAAKoU,GAC5B,IAAI4G,EAAkB1H,EAAKgH,QAE3B,GAAe,WAAXS,EAAJ,CAWA,IANA,IAEIzf,EAcA2f,EAhBAC,EAAU,GACVC,EAAU,GAEVC,EAAUb,EAAava,GAAKob,QAC5B9U,EAAI,EAEDA,EAAI8U,EAAQ1b,OAAQ4G,IAAK,CAC9B,IAAItJ,EAASsC,EAAKY,cAAckb,EAAQ9U,IACpCnN,EAAI6D,EAAO7D,EACX4O,EAAK/K,EAAO+K,GACZ3O,EAAI4D,EAAO5D,EACf8hB,EAAQjW,KAAK9L,EAAG4O,GAChBoT,EAAQlW,KAAK9L,EAAG4O,EAAK3O,GACrBkC,EAAQgE,EAAK+b,cAAcD,EAAQ9U,GAAI,QACzC,CAGA,IAAIgV,EAAahc,EAAKY,cAAckb,EAAQ,IACxCG,EAAapjB,EAAY2B,SAAS,SAClC0hB,EAASD,EAAWviB,IAAI,UACxBsD,EAAgBnE,EAAY2B,SAAS,YAEzC,GAAe,QAAXihB,EAAkB,CACpB,IAAIU,EAAaZ,EAAgB7a,GAAO,IAAIrI,EAAAA,EAC5CsjB,EAAU,IAAIS,EAAAA,EAAU,CACtBzkB,MAAO,CACL0kB,OAAQT,EACRU,gBAAiBT,EACjBU,OAAQ,GACRC,gBAAiB,GACjBC,kBAAkB,GAEpB1e,GAAI,IAENoe,EAAWhf,IAAIwe,GACfxiB,EAAMgE,IAAIgf,GAENtjB,EAAYoG,sBACd0c,EAAQzc,YAAYC,EAAoBwc,EAAQvc,kBAAmBvG,GAAa,WAC9E8iB,EAAQtc,gBACV,IAEJ,KAAO,CACD8c,EAAaT,EAAgB5G,GACjC6G,EAAUQ,EAAWO,QAAQ,GAC7BvjB,EAAMgE,IAAIgf,GACVZ,EAAgB7a,GAAOyb,EACvB9jB,EAAAA,EAAoBsjB,EAAS,CAC3BhkB,MAAO,CACL0kB,OAAQT,EACRU,gBAAiBT,IAElBhjB,IACHsX,EAAAA,EAAAA,IAAawL,EACf,EAEAlf,EAAAA,EAAAA,IAAckf,GAASjf,EAAAA,EAAAA,IAAqB7D,GAAc,CACxD+D,eAAgBkf,EAAQ9U,EAAI,GAC5BnK,YAAamD,EAAK2c,QAAQb,EAAQ9U,EAAI,IACtC4V,aAAc5gB,EAAMC,MACnB,CACD4gB,OAAQ,CACNrK,cAAe,YAInBmJ,EAAQ7e,cAAc,CACpBC,SAAU,KACV+f,OAAO,IAET,IAAIC,EAAUpB,EAAQzK,iBAElB6L,IACFA,EAAQljB,EAAImiB,EAAWniB,EAAIqiB,EAC3Ba,EAAQjjB,EAAIkiB,EAAWvT,GAAKuT,EAAWliB,EAAI,GAG7C6hB,EAAQ7f,SAASE,GACjBgE,EAAK5C,iBAAiBsD,EAAKib,IAC3B1e,EAAAA,EAAAA,IAAyB0e,EAAS9iB,IAClCyE,EAAAA,EAAAA,IAAoBqe,EAAS3e,EAActD,IAAI,SAAUsD,EAActD,IAAI,aAAcsD,EAActD,IAAI,YAlF3G,MAFEP,EAAMgV,OAAOuN,EAAgBhb,GAqFjC,CA3FA2a,EAAWle,KAAI6f,EAAAA,EAAAA,MAAKxB,EAAShlB,KAAM,QAAQmU,QAAOqS,EAAAA,EAAAA,MAAKxB,EAAShlB,KAAM,WAAW2X,QAAO6O,EAAAA,EAAAA,MAAKxB,EAAShlB,KAAM,WAAW2e,UA6FvH3e,KAAK8kB,cAAgBL,EACrBzkB,KAAKwkB,QAAUO,CACjB,EAEAR,EAAeriB,KAAO,aACfqiB,CACT,CA/HA,CA+HExb,EAAAA,GAIF,SAASJ,EAAoBrB,EAAMjF,EAAa2G,GAC9C,IAAIC,EAAS,IAAIpH,EAAAA,EAAa,CAC5BV,MAAO,CACLkC,EAAGiE,EAAKjE,EAAI,GACZC,EAAGgE,EAAKhE,EAAI,GACZT,MAAO,EACPC,OAAQwE,EAAKxE,OAAS,MAU1B,OAPAjB,EAAAA,GAAkBoH,EAAQ,CACxB9H,MAAO,CACLkC,EAAGiE,EAAKjE,EAAI,GACZR,MAAOyE,EAAKzE,MAAQ,IACpBC,OAAQwE,EAAKxE,OAAS,KAEvBT,EAAa2G,GACTC,CACT,CAEA,Q,4ECzJIwd,EAAkB,EAElBC,EAEJ,SAAU/lB,GAGR,SAAS+lB,IACP,IAAI3kB,EAAmB,OAAXpB,GAAmBA,EAAOqB,MAAMhC,KAAMiC,YAAcjC,KAGhE,OADA+B,EAAMG,KAAOwkB,EAAsBxkB,KAC5BH,CACT,CAoOA,OA3OAjB,EAAAA,EAAAA,IAAU4lB,EAAuB/lB,GAajC+lB,EAAsB3lB,UAAU4lB,KAAO,SAAUvd,GAE/CzI,EAAOI,UAAU4lB,KAAK3kB,MAAMhC,KAAMiC,WAKlCjC,KAAK4mB,qBAAuB,IAAIC,EAAAA,EAAqBhZ,EAAAA,KAAY7N,KAAKgD,QAAShD,MAAO6N,EAAAA,KAAY7N,KAAK8gB,WAAY9gB,MACrH,EASA0mB,EAAsB3lB,UAAU+lB,QAAU,SAAUtd,GAClD,IAAIud,EAAgBvd,EAAKI,OASrBod,EAAgB,CAAC,EAEjB9V,GAAcC,EAAAA,EAAAA,IAAU3H,GAAM,SAAU6F,GAK1C,OAJK2X,EAAcC,eAAe5X,EAAK,GAAK,MAC1C2X,EAAc3X,EAAK,GAAK,KAAO,GAG1BA,EAAK,EACd,IACI6X,EAAY,GAChBhW,EAAYO,QAAQ0V,MAAK,SAAUC,EAAO5V,GACxC0V,EAAU/X,KAAK,CACbzD,KAAM8F,EACN6V,SAAUD,GAEd,IAGA,IAFA,IAAIE,EAAWJ,EAAUtd,OAEhB2d,EAAI,EAAGA,EAAID,IAAYC,EAAG,CAGjC,IAFA,IAAI3b,EAASsb,EAAUK,GAAG7b,KAEjB8E,EAAI,EAAGA,EAAI0W,EAAUK,GAAGF,SAASzd,SAAU4G,EAAG,CACrD,IAAIgX,EAAYN,EAAUK,GAAGF,SAAS7W,GAAG,GAAK,GAC9CwW,EAAcQ,GAAaD,CAC7B,CAEA,IAAK,IAAIC,KAAaR,EAChBA,EAAcC,eAAeO,IAAcR,EAAcQ,KAAeD,IAC1EP,EAAcQ,GAAaD,EAC3B/d,EAAKud,GAAiB,CAACS,EAAW,EAAG5b,GACrCmb,IAGN,CAEA,OAAOvd,CACT,EAQAkd,EAAsB3lB,UAAUoI,eAAiB,SAAUC,EAAQ9G,GAajE,IAZA,IAAImlB,EAAkBznB,KAAK0nB,uBAAuB,aAAcC,EAAAA,IAAkBC,OAAO,GACrFC,EAAWJ,EAAgBvkB,IAAI,QAE/B4kB,EAAaja,EAAAA,OAAczE,EAAOI,MAAM,SAAUkB,GACpD,YAAuBqd,IAAhBrd,EAAS,EAClB,IAEIlB,EAAOxJ,KAAK8mB,QAAQgB,GAAc,IAClCE,EAAW,GACXC,EAAUjoB,KAAKioB,QAAUpa,EAAAA,gBACzByH,EAAQ,EAEH3L,EAAI,EAAGA,EAAIH,EAAKI,SAAUD,EACjCqe,EAAS7Y,KAAK3F,EAAKG,GAAG8c,IAEjBwB,EAAQ/kB,IAAIsG,EAAKG,GAAG8c,MACvBwB,EAAQC,IAAI1e,EAAKG,GAAG8c,GAAkBnR,GACtCA,KAIJ,IAAI6S,GAAaC,EAAAA,EAAAA,GAAwB5e,EAAM,CAC7C6e,gBAAiB,CAAC,UAClBC,iBAAkB,CAAC,CACjB5c,KAAM,OACNxJ,MAAMqmB,EAAAA,EAAAA,GAAuBV,IAC5B,CACDnc,KAAM,QACNxJ,KAAM,SACL,CACDwJ,KAAM,OACNxJ,KAAM,YAERsmB,aAAc,CACZC,OAAQ,EACRpd,MAAO,EACPqd,SAAU,KAEXP,WACCQ,EAAO,IAAIC,EAAAA,EAAWT,EAAYnoB,MAEtC,OADA2oB,EAAKE,SAASrf,GACPmf,CACT,EAOAjC,EAAsB3lB,UAAU2jB,eAAiB,WAK/C,IAJA,IAAIlb,EAAOxJ,KAAKgD,UACZ8lB,EAAWtf,EAAK8L,QAChByT,EAAW,GAENpf,EAAI,EAAGA,EAAImf,IAAYnf,EAC9Bof,EAASpf,GAAKA,EAGhB,IAAIqf,EAAUxf,EAAKyf,aAAa,UAE5B/X,GAAcC,EAAAA,EAAAA,IAAU4X,GAAU,SAAUlM,GAC9C,OAAOrT,EAAKtG,IAAI,OAAQ2Z,EAC1B,IACIqM,EAAc,GAUlB,OATAhY,EAAYO,QAAQ0V,MAAK,SAAUC,EAAO5V,GACxC4V,EAAM/V,MAAK,SAAU8X,EAAQC,GAC3B,OAAO5f,EAAKtG,IAAI8lB,EAASG,GAAU3f,EAAKtG,IAAI8lB,EAASI,EACvD,IACAF,EAAY/Z,KAAK,CACfzD,KAAM8F,EACN8T,QAAS8B,GAEb,IACO8B,CACT,EAMAxC,EAAsB3lB,UAAUsoB,mBAAqB,SAAUC,EAAKje,EAAOke,GACpE1b,EAAAA,QAAeyb,KAClBA,EAAMA,EAAM,CAACA,GAAO,IAStB,IANA,IAIIE,EAJAhgB,EAAOxJ,KAAKgD,UACZkmB,EAAclpB,KAAK0kB,iBACnBY,EAAU,GACVgC,EAAW4B,EAAYtf,OAGlBD,EAAI,EAAGA,EAAI2d,IAAY3d,EAAG,CAKjC,IAJA,IAAI8f,EAAUC,OAAOC,UACjBC,GAAc,EACdC,EAAWX,EAAYvf,GAAG2b,QAAQ1b,OAE7B4G,EAAI,EAAGA,EAAIqZ,IAAYrZ,EAAG,CACjC,IAAIsZ,EAAWtgB,EAAKtG,IAAIomB,EAAI,GAAIJ,EAAYvf,GAAG2b,QAAQ9U,IACnDuZ,EAAOhlB,KAAK+V,IAAIgP,EAAWze,GAE3B0e,GAAQN,IACVD,EAAeM,EACfL,EAAUM,EACVH,EAAaV,EAAYvf,GAAG2b,QAAQ9U,GAExC,CAEA8U,EAAQnW,KAAKya,EACf,CAEA,MAAO,CACLI,YAAa1E,EACbkE,aAAcA,EAElB,EAEA9C,EAAsB3lB,UAAU6J,cAAgB,SAAUhH,EAAWiH,EAAgB/G,GACnF,IAAI0F,EAAOxJ,KAAKgD,UACZ0I,EAAOlC,EAAK2c,QAAQviB,GACpByH,EAAQ7B,EAAKtG,IAAIsG,EAAKyf,aAAa,SAAUrlB,GACjD,OAAO6H,EAAAA,EAAAA,IAAoB,YAAa,CACtCC,KAAMA,EACNL,MAAOA,GAEX,EAEAqb,EAAsBxkB,KAAO,oBAC7BwkB,EAAsBnR,aAAe,CAAC,cACtCmR,EAAsB3a,cAAgB,CAEpCC,EAAG,EACHie,QAAS,OACThe,iBAAkB,aAElB0Y,YAAa,CAAC,MAAO,OAErBuF,gBAAiB,EACjB7c,gBAAiB,SACjBZ,MAAO,CACLiZ,OAAQ,EACRhZ,MAAM,EACNnG,SAAU,OACVoG,SAAU,IAEZM,SAAU,CACRR,MAAO,CACLC,MAAM,KAILga,CACT,CA7OA,CA6OEnZ,EAAAA,GAEF,I,WC1Pe,SAAS4c,EAAiB7nB,EAASC,GAChDD,EAAQmL,iBAAiB,cAAc,SAAUpL,GAC/C,IAAImH,EAAOnH,EAAYW,UACnBylB,EAASpmB,EAAY4J,iBACrBrJ,EAAa,CAAC,EAEd0E,EAAOmhB,EAAO2B,UAClBxnB,EAAW0E,KAAOA,EAClB,IAAIqd,EAActiB,EAAYa,IAAI,eAC9BmnB,EAAO5B,EAAO6B,UAGlB,GAFA1nB,EAAW+hB,YAAcA,EAEL,eAAhB0F,EAAK/oB,OAAyB,CAChCqjB,EAAY,GAAK4F,EAAAA,GAAwB5F,EAAY,GAAIrd,EAAKxE,QAC9D6hB,EAAY,GAAK4F,EAAAA,GAAwB5F,EAAY,GAAIrd,EAAKxE,QAC9D,IAAIA,EAASwE,EAAKxE,OAAS6hB,EAAY,GAAKA,EAAY,GACxD6F,EAAmBhhB,EAAMnH,EAAaS,EACxC,KAAO,CACL6hB,EAAY,GAAK4F,EAAAA,GAAwB5F,EAAY,GAAIrd,EAAKzE,OAC9D8hB,EAAY,GAAK4F,EAAAA,GAAwB5F,EAAY,GAAIrd,EAAKzE,OAC9D,IAAIA,EAAQyE,EAAKzE,MAAQ8hB,EAAY,GAAKA,EAAY,GACtD6F,EAAmBhhB,EAAMnH,EAAaQ,EACxC,CAEA2G,EAAKsF,UAAU,aAAclM,EAC/B,GACF,CASA,SAAS4nB,EAAmBhhB,EAAMnH,EAAaS,GAC7C,GAAK0G,EAAK8L,QAyBV,IArBA,IAmBImV,EAnBApT,EAAWhV,EAAY4J,iBAEvBid,EAAc7mB,EAAYqiB,iBAE1BsE,EAAUxf,EAAKyf,aAAa,UAC5ByB,EAAWlhB,EAAKyf,aAAa,SAC7B0B,EAAc9c,EAAAA,IAAWqb,GAAa,SAAU0B,GAClD,OAAO/c,EAAAA,IAAW+c,EAAYtF,SAAS,SAAUpb,GAC/C,IAAI2gB,EAAKxT,EAASyT,YAAYthB,EAAKtG,IAAI8lB,EAAS9e,IAEhD,OADA2gB,EAAG,GAAKrhB,EAAKtG,IAAIwnB,EAAUxgB,GACpB2gB,CACT,GACF,IACIE,EAAOC,EAAgBL,GACvBM,EAAWF,EAAK9Y,GAChBJ,EAAK/O,EAASioB,EAAK/lB,IAEnB4M,EAAIsX,EAAYtf,OAChBshB,EAAIhC,EAAY,GAAG5D,QAAQ1b,OAGtB4G,EAAI,EAAGA,EAAI0a,IAAK1a,EAAG,CAC1Bia,EAASQ,EAASza,GAAKqB,EACvBrI,EAAK2hB,cAAcjC,EAAY,GAAG5D,QAAQ9U,GAAI,CAC5C4a,WAAY,EACZ/nB,EAAGsnB,EAAY,GAAGna,GAAG,GACrByB,GAAIwY,EACJnnB,EAAGqnB,EAAY,GAAGna,GAAG,GAAKqB,IAG5B,IAAK,IAAIlI,EAAI,EAAGA,EAAIiI,IAAKjI,EACvB8gB,GAAUE,EAAYhhB,EAAI,GAAG6G,GAAG,GAAKqB,EACrCrI,EAAK2hB,cAAcjC,EAAYvf,GAAG2b,QAAQ9U,GAAI,CAC5C4a,WAAYzhB,EACZtG,EAAGsnB,EAAYhhB,GAAG6G,GAAG,GACrByB,GAAIwY,EACJnnB,EAAGqnB,EAAYhhB,GAAG6G,GAAG,GAAKqB,GAGhC,CACF,CASA,SAASmZ,EAAgBxhB,GAOvB,IANA,IAAI8d,EAAW9d,EAAKI,OAChBigB,EAAWrgB,EAAK,GAAGI,OACnByhB,EAAO,GACPpZ,EAAK,GACLjN,EAAM,EAED2E,EAAI,EAAGA,EAAIkgB,IAAYlgB,EAAG,CAGjC,IAFA,IAAI2hB,EAAO,EAEF9a,EAAI,EAAGA,EAAI8W,IAAY9W,EAC9B8a,GAAQ9hB,EAAKgH,GAAG7G,GAAG,GAGjB2hB,EAAOtmB,IACTA,EAAMsmB,GAGRD,EAAKlc,KAAKmc,EACZ,CAEA,IAAK,IAAI/D,EAAI,EAAGA,EAAIsC,IAAYtC,EAC9BtV,EAAGsV,IAAMviB,EAAMqmB,EAAK9D,IAAM,EAG5BviB,EAAM,EAEN,IAAK,IAAIumB,EAAI,EAAGA,EAAI1B,IAAY0B,EAAG,CACjC,IAAIhd,EAAM8c,EAAKE,GAAKtZ,EAAGsZ,GAEnBhd,EAAMvJ,IACRA,EAAMuJ,EAEV,CAEA,MAAO,CACL0D,GAAIA,EACJjN,IAAKA,EAET,C,eChJO,SAAS2O,EAAQC,GACtBA,EAAUC,kBAAkB0Q,GAC5B3Q,EAAUE,oBAAoB4S,GAC9B9S,EAAUG,eAAeoW,GACzBvW,EAAUyQ,mBAAkBC,EAAAA,EAAAA,GAAW,cACzC,C,6FCgBIkH,EAEJ,SAAU7qB,GAGR,SAAS6qB,IACP,IAAIzpB,EAAmB,OAAXpB,GAAmBA,EAAOqB,MAAMhC,KAAMiC,YAAcjC,KAKhE,OAHA+B,EAAM2S,iBAAkB,EAExB3S,EAAMoe,mBAAoB,EACnBpe,CACT,CAiJA,OA1JAjB,EAAAA,EAAAA,IAAU0qB,EAAiB7qB,GAe3B6qB,EAAgBzqB,UAAUoI,eAAiB,SAAUC,GAEnD,IAAIuU,EAAO,CACTjS,KAAMtC,EAAOsC,KACb0U,SAAUhX,EAAOI,MAEfiiB,EAASriB,EAAOqiB,QAAU,CAAC,EAC3BC,EAAc,IAAI5hB,EAAAA,EAAM2hB,EAAQzrB,KAAMA,KAAKsC,SAC3Cob,EAAO8C,EAAAA,EAAAA,WAAgB7C,EAAM3d,KAAMgK,GAEvC,SAASA,EAAWjH,GAClBA,EAASkH,WAAW,gBAAgB,SAAUvD,EAAOwD,GACnD,IAAIjD,EAAOyW,EAAK+C,mBAAmBvW,GAMnC,OAJMjD,GAAQA,EAAKmZ,SAASxW,QAAU3C,EAAK0kB,WACzCjlB,EAAMyD,YAAcuhB,GAGfhlB,CACT,GACF,CAEA,IAAIklB,EAAY,EAChBlO,EAAK1W,SAAS,YAAY,SAAUC,GAC9BA,EAAK4C,MAAQ+hB,IACfA,EAAY3kB,EAAK4C,MAErB,IACA,IAAIgiB,EAAoBziB,EAAOyiB,kBAC3BC,EAAkBD,GAAqBziB,EAAO2iB,kBAAoB,EAAI3iB,EAAO2iB,iBAAmBH,EAMpG,OALAlO,EAAKC,KAAK3W,SAAS,YAAY,SAAUC,GACvC,IAAIoI,EAAOpI,EAAK+kB,SAASxiB,KAAK+F,eAAetI,EAAKrD,WAElDqD,EAAK0kB,SAAWtc,GAA0B,MAAlBA,EAAK4c,WAAqB5c,EAAK4c,UAAYhlB,EAAK4C,OAASiiB,CACnF,IACOpO,EAAKlU,IACd,EAOAgiB,EAAgBzqB,UAAUmrB,UAAY,WACpC,IAAI5qB,EAAStB,KAAKkD,IAAI,UAQtB,MANe,eAAX5B,EACFA,EAAS,KACW,aAAXA,IACTA,EAAS,MAGJA,CACT,EAEAkqB,EAAgBzqB,UAAUorB,QAAU,SAAUC,GAC5CpsB,KAAKoJ,OAAOgjB,KAAOA,CACrB,EAEAZ,EAAgBzqB,UAAUsrB,UAAY,SAAU5Z,GAC9CzS,KAAKoJ,OAAOqJ,OAASA,CACvB,EAEA+Y,EAAgBzqB,UAAU6J,cAAgB,SAAUhH,EAAWiH,EAAgB/G,GAC7E,IAAI4Z,EAAO1d,KAAKgD,UAAU0a,KACtB4O,EAAW5O,EAAKC,KAAKyC,SAAS,GAC9BnZ,EAAOyW,EAAK+C,mBAAmB7c,GAC/ByH,EAAQpE,EAAK4H,WACbnD,EAAOzE,EAAKyE,KAEhB,MAAOzE,GAAQA,IAASqlB,EACtB5gB,EAAOzE,EAAKmY,WAAW1T,KAAO,IAAMA,EACpCzE,EAAOA,EAAKmY,WAGd,OAAO3T,EAAAA,EAAAA,IAAoB,YAAa,CACtCC,KAAMA,EACNL,MAAOA,EACPP,QAASE,MAAMK,IAAmB,MAATA,GAE7B,EAGAmgB,EAAgBzqB,UAAUmK,cAAgB,SAAUtH,GAClD,IAAIqH,EAAStK,EAAOI,UAAUmK,cAAclJ,MAAMhC,KAAMiC,WAEpDgF,EAAOjH,KAAKgD,UAAU0a,KAAK+C,mBAAmB7c,GAGlD,OAFAqH,EAAOshB,eAAgB5L,EAAAA,EAAAA,IAAiB1Z,EAAMjH,MAC9CiL,EAAOghB,WAAahlB,EAAK0kB,SAClB1gB,CACT,EAEAugB,EAAgBtpB,KAAO,cAGvBspB,EAAgBgB,WAAa,MAC7BhB,EAAgBzf,cAAgB,CAE9BC,EAAG,EACHC,iBAAkB,OAElBC,KAAM,MACNC,IAAK,MACLC,MAAO,MACPC,OAAQ,MAERnF,OAAQ,aAERulB,UAAW,QACXC,iBAAkB,MAElBC,MAAM,EAENC,eAAgB,GAEhBna,OAAQ,KACR2Z,KAAM,EACN9qB,OAAQ,KACRurB,OAAQ,cACRpX,WAAY,EACZoW,mBAAmB,EACnBE,iBAAkB,EAClBjf,UAAW,CACT/G,MAAO,OACPlD,MAAO,IACPmK,UAAW,IAEbG,UAAW,CACTpH,MAAO,iBAEPub,YAAa,KAEf7U,MAAO,CACLC,MAAM,GAERW,gBAAiB,SACjBC,kBAAmB,IACnBwU,wBAAyB,KAEpB0J,CACT,CA5JA,CA4JEje,EAAAA,GAEF,Q,wOCvJIuf,EAEJ,WACE,SAASA,IACP9sB,KAAK+sB,YAAc,GACnB/sB,KAAKgtB,YAAc,EACrB,CAEA,OAAOF,CACT,CAPA,GASIG,EAEJ,SAAUtsB,GAGR,SAASssB,EAASrsB,GAChB,OAAOD,EAAOE,KAAKb,KAAMY,IAASZ,IACpC,CAkDA,OAtDAc,EAAAA,EAAAA,IAAUmsB,EAAUtsB,GAMpBssB,EAASlsB,UAAUmsB,gBAAkB,WACnC,MAAO,CACLC,OAAQ,OACR1nB,KAAM,KAEV,EAEAwnB,EAASlsB,UAAUC,gBAAkB,WACnC,OAAO,IAAI8rB,CACb,EAEAG,EAASlsB,UAAUE,UAAY,SAAUC,EAAKC,GAC5C,IAAI6rB,EAAc7rB,EAAM6rB,YACpBI,EAAWJ,EAAYpjB,OACvBmjB,EAAc5rB,EAAM4rB,YACpBM,EAAgBL,EAAY,GAC5BM,EAAeN,EAAYI,EAAW,GAE1C,GAAiB,IAAbA,EAGF,OAFAlsB,EAAIE,OAAO2rB,EAAY,GAAIA,EAAY,SACvC7rB,EAAIK,OAAO8rB,EAAc,GAAIA,EAAc,IAI7C,IAAI/rB,EAASH,EAAMG,OACfisB,EAAqB,OAAXjsB,GAA8B,OAAXA,EAAkB,EAAI,EACnDksB,EAAW,EAAID,EACfE,GAAejL,EAAAA,EAAAA,IAAarhB,EAAMssB,aAAc,GAChDC,EAAW,GACfA,EAASH,GAAWR,EAAYQ,GAChCG,EAASF,GAAYT,EAAYS,IAAaF,EAAaE,GAAYT,EAAYS,IAAaC,EAChGvsB,EAAIE,OAAO2rB,EAAY,GAAIA,EAAY,IACvC7rB,EAAIK,OAAOmsB,EAAS,GAAIA,EAAS,IACjCxsB,EAAIE,OAAOisB,EAAc,GAAIA,EAAc,IAC3CK,EAASH,GAAWF,EAAcE,GAClCrsB,EAAIK,OAAOmsB,EAAS,GAAIA,EAAS,IACjCA,EAASH,GAAWD,EAAaC,GACjCrsB,EAAIK,OAAOmsB,EAAS,GAAIA,EAAS,IACjCxsB,EAAIK,OAAO+rB,EAAa,GAAIA,EAAa,IAEzC,IAAK,IAAI3jB,EAAI,EAAGA,EAAIyjB,EAAW,EAAGzjB,IAAK,CACrC,IAAIyL,EAAQ4X,EAAYrjB,GACxBzI,EAAIE,OAAOgU,EAAM,GAAIA,EAAM,IAC3BsY,EAASH,GAAWnY,EAAMmY,GAC1BrsB,EAAIK,OAAOmsB,EAAS,GAAIA,EAAS,GACnC,CACF,EAEOT,CACT,CAxDA,CAwDEU,EAAAA,IAEEC,EAEJ,SAAUjtB,GAGR,SAASitB,IACP,IAAI7rB,EAAmB,OAAXpB,GAAmBA,EAAOqB,MAAMhC,KAAMiC,YAAcjC,KAIhE,OAFA+B,EAAMG,KAAO0rB,EAAS1rB,KACtBH,EAAM8rB,WAAa,IAAIhsB,EAAAA,EAChBE,CACT,CAkMA,OA1MAjB,EAAAA,EAAAA,IAAU8sB,EAAUjtB,GAUpBitB,EAAS7sB,UAAU4lB,KAAO,SAAUrkB,EAASC,GAC3CvC,KAAK8tB,YAAc,IAAIC,EAAAA,EAAexrB,EAAIyrB,SAC1ChuB,KAAKiuB,gBAAkB,CACrBziB,OAAQxL,KAAK2C,OAEf3C,KAAK2C,MAAMgE,IAAI3G,KAAK6tB,WACtB,EAEAD,EAAS7sB,UAAUqB,OAAS,SAAUC,EAAaC,EAASC,GAC1D,IAAIiH,EAAOnH,EAAYW,UACnBJ,EAAaP,EAAYO,WACzBD,EAAQ3C,KAAK6tB,WACb3mB,EAAS7E,EAAYa,IAAI,UAEd,WAAXgE,GACFvE,EAAMU,EAAIT,EAAWS,EAAIT,EAAWC,MAAQ,EAC5CF,EAAMW,EAAIV,EAAWU,EAAIV,EAAWE,OAAS,IAE7CH,EAAMU,EAAIT,EAAWS,EACrBV,EAAMW,EAAIV,EAAWU,GAGvBtD,KAAKkuB,oBAAoB7rB,EAAaE,GAEtCvC,KAAKmuB,kBAAkB9rB,EAAaC,EAASC,GAE7C,IAAI6rB,EAAUpuB,KAAKwI,MACnBgB,EAAKka,KAAK0K,GAASznB,KAAI,SAAU0X,GAC3BgQ,EAAgB7kB,EAAM6U,IAExBiQ,EAAW9kB,EAAM6U,EAAQ,KAAM1b,EAAON,EAE1C,IAAG8R,QAAO,SAAUkK,EAAQC,GAC1B,IAAIiQ,EAAWH,EAAQI,iBAAiBlQ,GAEnC+P,EAAgB7kB,EAAM6U,GAM3BiQ,EAAW9kB,EAAM6U,EAAQkQ,EAAU5rB,EAAON,GALxCksB,GAAY3P,EAAWwP,EAAS9P,EAAQiQ,EAAU5rB,EAAON,EAM7D,IAAGsV,QAAO,SAAU2G,GAClB,IAAIiQ,EAAWH,EAAQI,iBAAiBlQ,GAMpCiQ,GACF3P,EAAWwP,EAAS9P,EAAQiQ,EAAU5rB,EAAON,EAEjD,IAAGsc,UACH3e,KAAKyuB,gBAAkBpsB,EAAYa,IAAI,kBAEvClD,KAAK0uB,wBAAwBrsB,IAEgB,IAAzCA,EAAYa,IAAI,sBAClBsG,EAAK7B,mBAAkB,SAAUC,EAAIhE,GACnCgE,EAAGoX,IAAI,SAASC,GAAG,SAAS,WAC1B1c,EAAIyF,eAAe,CACjB9F,KAAM,wBACN+F,SAAU5F,EAAYmF,GACtB5D,UAAWA,GAEf,GACF,IAGF5D,KAAKwI,MAAQgB,CACf,EAEAokB,EAAS7sB,UAAUmtB,oBAAsB,SAAU7rB,EAAaE,GAC9D,IAAIiH,EAAOnH,EAAYW,UACnB6iB,EAAS,GACbrc,EAAK2d,MAAK,SAAUjd,GAClB,IAAIhD,EAASsC,EAAKY,cAAcF,IAE5BhD,GAAW8D,MAAM9D,EAAO7D,IAAO2H,MAAM9D,EAAO5D,IAC9CuiB,EAAO1W,KAAK,EAAEjI,EAAO7D,GAAI6D,EAAO5D,GAEpC,IACA,IAAIif,EAAM,GACNvd,EAAM,GACV2pB,EAAAA,GAAgB9I,EAAQtD,EAAKvd,GAG7B,IAAI4pB,EAAS5uB,KAAK6uB,KACdC,EAAS9uB,KAAK+uB,KAEd/pB,EAAI,GAAKud,EAAI,KAAO,IACtBA,EAAI,GAAKqM,EAASA,EAAO,GAAKrM,EAAI,GAAK,EACvCvd,EAAI,GAAK8pB,EAASA,EAAO,GAAK9pB,EAAI,GAAK,GAGrCA,EAAI,GAAKud,EAAI,KAAO,IACtBA,EAAI,GAAKqM,EAASA,EAAO,GAAKrM,EAAI,GAAK,EACvCvd,EAAI,GAAK8pB,EAASA,EAAO,GAAK9pB,EAAI,GAAK,GAGzC,IAAIgqB,EAAe3sB,EAAY4J,iBAAmB,IAAIgjB,EAAAA,EACtDD,EAAaE,UAAY7sB,EAAYa,IAAI,cACzC8rB,EAAaG,gBAAgB5M,EAAI,GAAIA,EAAI,GAAIvd,EAAI,GAAKud,EAAI,GAAIvd,EAAI,GAAKud,EAAI,IAC3EyM,EAAa3C,UAAUhqB,EAAYa,IAAI,UAAWX,GAClDysB,EAAa7C,QAAQ9pB,EAAYa,IAAI,SAErClD,KAAK2C,MAAMoX,KAAK,CACd1W,EAAG2rB,EAAa3rB,EAChBC,EAAG0rB,EAAa1rB,EAChB8rB,OAAQJ,EAAaI,OACrBC,OAAQL,EAAaK,SAEvBrvB,KAAK6uB,KAAOtM,EACZviB,KAAK+uB,KAAO/pB,CACd,EAEA4oB,EAAS7sB,UAAUotB,kBAAoB,SAAU9rB,EAAaC,EAASC,GACrE,IAAIR,EAAQ/B,KAERsvB,EAAatvB,KAAK8tB,YAClByB,EAAiBvvB,KAAKiuB,gBACtBtrB,EAAQ3C,KAAK2C,MACjB2sB,EAAWE,mBAAkB,SAAUtQ,EAAG7b,EAAGC,GAC3C,IAAIgE,EAAO3E,EAAMiG,kBAEjB,OADAtB,EAAKmoB,eAAe9sB,EAAM+sB,WACnBpoB,EAAKqoB,QAAQtsB,EAAGC,MAAOssB,EAAAA,EAAAA,GAAoB1Q,EAAG3c,EAAKF,EAC5D,IACAitB,EAAWO,OAAOxtB,EAAYa,IAAI,SAClCqsB,EAAeL,UAAY7sB,EAAYa,IAAI,cAC3CqsB,EAAenD,KAAO/pB,EAAY4J,iBAAiB6jB,UACnDR,EAAWtQ,IAAI,OAAOA,IAAI,QAAQC,GAAG,OAAO,SAAUC,GACpD6Q,EAAAA,EAA2BR,EAAgBrQ,EAAE9Z,GAAI8Z,EAAEja,IACnD1C,EAAIyF,eAAe,CACjBC,SAAU5F,EAAYmF,GACtBtF,KAAM,WACNkD,GAAI8Z,EAAE9Z,GACNH,GAAIia,EAAEja,IAEV,IAAGga,GAAG,QAAQ,SAAUC,GACtB6Q,EAAAA,EAA4BR,EAAgBrQ,EAAEvJ,MAAOuJ,EAAE8Q,QAAS9Q,EAAE+Q,SAClE1tB,EAAIyF,eAAe,CACjBC,SAAU5F,EAAYmF,GACtBtF,KAAM,WACNkqB,KAAMlN,EAAEvJ,MACRqa,QAAS9Q,EAAE8Q,QACXC,QAAS/Q,EAAE+Q,UAGbluB,EAAM2sB,wBAAwBrsB,GAG9BE,EAAI2tB,mBACN,GACF,EAEAtC,EAAS7sB,UAAU2tB,wBAA0B,SAAUrsB,GACrD,IAAImH,EAAOnH,EAAYW,UAEnBmtB,EAAYnwB,KAAKowB,oBAAoB/tB,GAEzCmH,EAAK7B,mBAAkB,SAAUC,EAAIsC,GACnCtC,EAAGyoB,eAAeF,EACpB,GACF,EAEAvC,EAAS7sB,UAAUqvB,oBAAsB,SAAU/tB,GACjD,IAAIgV,EAAWhV,EAAY4J,iBAE3B,GAAsB,SAAlBoL,EAASnV,KACX,OAAO,EAGT,IAAI0qB,EAAiB5sB,KAAKyuB,gBACtB6B,EAAYjZ,EAAS+X,QAAU,EAE/BmB,EAAWlZ,EAASyY,UACpBK,GAAaI,EAAW,GAAK3D,EAAiB,EAClD,OAAOuD,EAAYG,CACrB,EAEA1C,EAAS7sB,UAAU+H,QAAU,WAC3B9I,KAAK8tB,aAAe9tB,KAAK8tB,YAAYhlB,UACrC9I,KAAKiuB,gBAAkB,IACzB,EAEAL,EAAS7sB,UAAU4W,OAAS,WAC1B3X,KAAK6tB,WAAWzqB,YAEhBpD,KAAKwI,MAAQ,IACf,EAEAolB,EAAS1rB,KAAO,OACT0rB,CACT,CA5MA,CA4ME7kB,EAAAA,GAEF,SAASslB,EAAgB7kB,EAAM5F,GAC7B,IAAIsD,EAASsC,EAAKY,cAAcxG,GAChC,OAAOsD,IAAW8D,MAAM9D,EAAO7D,KAAO2H,MAAM9D,EAAO5D,EACrD,CAEA,SAASgrB,EAAW9kB,EAAM5F,EAAW2qB,EAAU5rB,EAAON,GACpD,IAAImuB,GAAUjC,EACVtnB,EAAOuC,EAAKkU,KAAK+C,mBAAmB7c,GACpCuD,EAAYF,EAAKjD,WACjBysB,EAAcxpB,EAAKvB,UAAU,SAASD,KACtCirB,GAAqC,IAAlBzpB,EAAK0kB,UAA+C,IAAzB1kB,EAAKmZ,SAASxW,OAAe6mB,EAAc,OACzFhT,EAAcjU,EAAKkU,KAAKC,KACxBpS,EAAStE,EAAKmY,aAAe3B,EAAcxW,EAAOA,EAAKmY,YAAcnY,EACrE0pB,EAAiBnnB,EAAKglB,iBAAiBjjB,EAAO3H,WAC9CgtB,EAAerlB,EAAOlH,YACtBwsB,EAAkBF,EAAiB,CACrCttB,EAAGstB,EAAeG,OAClBxtB,EAAGqtB,EAAeI,OAClBC,KAAML,EAAeM,gBACrBC,KAAMP,EAAeQ,iBACnBP,EACAQ,EAAenqB,EAAK5C,YAEpBmsB,GACFjC,EAAW,IAAI8C,EAAAA,EAAU7nB,EAAM5F,EAAW,KAAM,CAC9C8sB,iBAAkBA,EAClBY,cAAc,IAEhB/C,EAASlrB,EAAIwtB,EAAgBxtB,EAC7BkrB,EAASjrB,EAAIutB,EAAgBvtB,GAE7BirB,EAASrY,WAAW1M,EAAM5F,EAAW,KAAM,CACzC8sB,iBAAkBA,EAClBY,cAAc,IAIlB/C,EAAS0C,gBAAkB1C,EAASgD,aACpChD,EAAS4C,gBAAkB5C,EAASiD,aACpCjD,EAASgD,aAAeH,EAAaJ,KACrCzC,EAASiD,aAAeJ,EAAaF,KACrCvuB,EAAMgE,IAAI4nB,GACV/kB,EAAK5C,iBAAiBhD,EAAW2qB,GACjCA,EAASuC,OAASvC,EAASlrB,EAC3BkrB,EAASwC,OAASxC,EAASjrB,EAC3BzB,EAAAA,EAAoB0sB,EAAU,CAC5BlrB,EAAG+tB,EAAa/tB,EAChBC,EAAG8tB,EAAa9tB,GACfjB,GACH,IAAIovB,EAAalD,EAASmD,gBAE1B,GAAkC,WAA9BrvB,EAAYa,IAAI,UAAwB,CAC1C,IAAIopB,EAAW7O,EAAY2C,SAAS,GAChCuR,EAAarF,EAASjoB,YACtButB,EAAWtF,EAASlM,SAASxW,OAC7BioB,OAAM,EACNC,OAAS,EAEb,GAAIV,EAAa/tB,IAAMsuB,EAAWtuB,IAAuB,IAAlB4D,EAAK0kB,UAAqBW,EAASlM,SAASxW,OAAQ,CACzF,IAAI6I,EAAS,CACXpP,GAAIipB,EAASlM,SAAS,GAAG/b,YAAYhB,EAAIipB,EAASlM,SAASwR,EAAW,GAAGvtB,YAAYhB,GAAK,EAC1FC,GAAIgpB,EAASlM,SAAS,GAAG/b,YAAYf,EAAIgpB,EAASlM,SAASwR,EAAW,GAAGvtB,YAAYf,GAAK,GAE5FuuB,EAAM9sB,KAAKgtB,MAAMtf,EAAOnP,EAAIquB,EAAWruB,EAAGmP,EAAOpP,EAAIsuB,EAAWtuB,GAE5DwuB,EAAM,IACRA,EAAgB,EAAV9sB,KAAK6V,GAASiX,GAGtBC,EAASrf,EAAOpP,EAAIsuB,EAAWtuB,EAE3ByuB,IACFD,GAAY9sB,KAAK6V,GAErB,MACEiX,EAAM9sB,KAAKgtB,MAAMX,EAAa9tB,EAAIquB,EAAWruB,EAAG8tB,EAAa/tB,EAAIsuB,EAAWtuB,GAExEwuB,EAAM,IACRA,EAAgB,EAAV9sB,KAAK6V,GAASiX,GAGO,IAAzB5qB,EAAKmZ,SAASxW,QAAyC,IAAzB3C,EAAKmZ,SAASxW,SAAkC,IAAlB3C,EAAK0kB,UACnEmG,EAASV,EAAa/tB,EAAIsuB,EAAWtuB,EAEjCyuB,IACFD,GAAY9sB,KAAK6V,MAGnBkX,EAASV,EAAa/tB,EAAIsuB,EAAWtuB,EAEhCyuB,IACHD,GAAY9sB,KAAK6V,KAKvB,IAAIoX,EAAeF,EAAS,OAAS,QACjC3X,EAAmBhT,EAAUnD,SAAS,SACtCoY,EAASjC,EAAiBjX,IAAI,UAC9B+uB,EAAoB7V,GAAUrX,KAAK6V,GAAK,KACxCsX,EAAcT,EAAW/W,iBAEzBwX,IACFT,EAAWnrB,cAAc,CACvBC,SAAU4T,EAAiBjX,IAAI,aAAe8uB,EAC9C1V,SAAoB,MAAVF,GAAkByV,EAAMI,EAClCE,OAAQ,WAEVD,EAAYxqB,SAAS,gBAAiB,UAE1C,CAGA,IAAIb,EAAQM,EAAUjE,IAAI,CAAC,WAAY,UACnCkvB,EAA6B,aAAVvrB,EAAuBgH,EAAAA,YAAmB5G,EAAKgT,sBAAuBhT,EAAKiT,wBAAoC,aAAVrT,EAAuBI,EAAKgT,sBAAkC,eAAVpT,EAAyBI,EAAKiT,uBAAyB,KAEnOkY,KAEFzuB,EAAAA,EAAAA,GAAU4qB,GAAU1nB,MAAQurB,GAG9BC,EAAShwB,EAAa4E,EAAMwW,EAAa8Q,EAAUsC,EAAiBD,EAAcQ,EAAczuB,GAE5F4rB,EAAS+D,SACX/D,EAASgE,mBAAqB,SAAUC,GACtC,GAAgB,SAAZA,EAAoB,CAItB,IAAIC,EAAWxrB,EAAKmY,YAAc5V,EAAKglB,iBAAiBvnB,EAAKmY,WAAWxb,WAElE6uB,GAAYA,EAASC,aAAeC,EAAAA,KACxCC,EAAAA,EAAAA,IAAcrE,EAAS+D,OAAQE,EAEnC,CACF,EAEJ,CAEA,SAASH,EAAShwB,EAAa4E,EAAMwW,EAAa8Q,EAAUsC,EAAiBD,EAAcQ,EAAczuB,GACvG,IAAIwE,EAAYF,EAAKjD,WACjByoB,EAAYpqB,EAAYa,IAAI,aAC5BgE,EAAS7E,EAAYa,IAAI,UACzB5B,EAASe,EAAY6pB,YACrBhoB,EAAY7B,EAAYa,IAAI,CAAC,YAAa,cAC1CwpB,EAAmBrqB,EAAYa,IAAI,oBACnC4J,EAAY3F,EAAUnD,SAAS,aAAa6uB,eAC5CrvB,EAAO+qB,EAAS+D,OAGpB,GAAkB,UAAd7F,EACExlB,EAAKmY,YAAcnY,EAAKmY,aAAe3B,IACpCja,IACHA,EAAO+qB,EAAS+D,OAAS,IAAIzwB,EAAAA,EAAoB,CAC/CV,MAAO2xB,EAAa5rB,EAAQ5F,EAAQ4C,EAAW2sB,EAAiBA,MAIpEhvB,EAAAA,EAAoB2B,EAAM,CACxBrC,MAAO2xB,EAAa5rB,EAAQ5F,EAAQ4C,EAAW0sB,EAAcQ,IAC5D/uB,SAEA,GAAkB,aAAdoqB,EACT,GAAe,eAAXvlB,GACF,GAAID,IAASwW,GAAexW,EAAKmZ,UAAqC,IAAzBnZ,EAAKmZ,SAASxW,SAAkC,IAAlB3C,EAAK0kB,SAAmB,CAIjG,IAHA,IAAIvL,EAAWnZ,EAAKmZ,SAChB4M,EAAc,GAETrjB,EAAI,EAAGA,EAAIyW,EAASxW,OAAQD,IAAK,CACxC,IAAIopB,EAAc3S,EAASzW,GAAGtF,YAC9B2oB,EAAY7d,KAAK,CAAC4jB,EAAY1vB,EAAG0vB,EAAYzvB,GAC/C,CAEKE,IACHA,EAAO+qB,EAAS+D,OAAS,IAAIrF,EAAS,CACpC9rB,MAAO,CACL4rB,YAAa,CAACqE,EAAa/tB,EAAG+tB,EAAa9tB,GAC3C0pB,YAAa,CAAC,CAACoE,EAAa/tB,EAAG+tB,EAAa9tB,IAC5ChC,OAAQA,EACRmsB,aAAcf,MAKpB7qB,EAAAA,EAAoB2B,EAAM,CACxBrC,MAAO,CACL4rB,YAAa,CAACqE,EAAa/tB,EAAG+tB,EAAa9tB,GAC3C0pB,YAAaA,IAEd3qB,EACL,OAEI2iB,EAOJxhB,IAAwB,aAAdipB,GAA6BxlB,EAAK0kB,YAC9CnoB,EAAK8B,SAASuI,EAAAA,SAAgB,CAC5BmlB,eAAe,EACfvtB,KAAM,MACLqH,KACHrG,EAAAA,EAAAA,IAAyBjD,EAAM2D,EAAW,cAC1C8rB,EAAAA,EAAAA,IAAqBzvB,GACrBb,EAAMgE,IAAInD,GAEd,CAEA,SAAS0vB,EAAejsB,EAAMuC,EAAM7G,EAAON,EAAa8wB,GACtD,IAAI1V,EAAcjU,EAAKkU,KAAKC,KAExByV,EAAKC,EAAc5V,EAAaxW,GAChCsE,EAAS6nB,EAAG7nB,OACZqlB,EAAewC,EAAGxC,aAElBrC,EAAW/kB,EAAKglB,iBAAiBvnB,EAAKrD,WAE1C,GAAK2qB,EAAL,CAIA,IAAIoC,EAAiBnnB,EAAKglB,iBAAiBjjB,EAAO3H,WAC9C0vB,EAAa3C,EAAe2B,OAK5B9uB,EAAO+qB,EAAS+D,UAA+B,IAApB/mB,EAAOogB,UAAiD,IAA3BpgB,EAAO6U,SAASxW,OAAe0pB,OAAavL,GACpG0E,EAAYpqB,EAAYa,IAAI,aAC5BqwB,EAAYlxB,EAAYa,IAAI,UAC5B5B,EAASe,EAAYa,IAAI,UACzBgB,EAAY7B,EAAYa,IAAI,CAAC,YAAa,cAE1CM,IACgB,UAAdipB,EACF5qB,EAAAA,GAAsB2B,EAAM,CAC1BrC,MAAO2xB,EAAaS,EAAWjyB,EAAQ4C,EAAW0sB,EAAcA,GAChEprB,MAAO,CACLuH,QAAS,IAEV1K,EAAa,CACd2G,GAAI,WACFrG,EAAMgV,OAAOnU,EACf,EACAgwB,UAAWL,IAEU,aAAd1G,GAA0D,eAA9BpqB,EAAYa,IAAI,WACrDrB,EAAAA,GAAsB2B,EAAM,CAC1BrC,MAAO,CACL4rB,YAAa,CAAC6D,EAAavtB,EAAGutB,EAAattB,GAC3C0pB,YAAa,CAAC,CAAC4D,EAAavtB,EAAGutB,EAAattB,KAE9CkC,MAAO,CACLuH,QAAS,IAEV1K,EAAa,CACd2G,GAAI,WACFrG,EAAMgV,OAAOnU,EACf,EACAgwB,UAAWL,IAxCjB,CA4CF,CAEA,SAASE,EAAc5V,EAAaxW,GAClC,IACI2pB,EADArlB,EAAStE,EAAKmY,aAAe3B,EAAcxW,EAAOA,EAAKmY,YAAcnY,EAGzE,MAAO2pB,EAAerlB,EAAOlH,YAA6B,MAAhBusB,EACxCrlB,EAASA,EAAO6T,aAAe3B,EAAclS,EAASA,EAAO6T,YAAc7T,EAG7E,MAAO,CACLA,OAAQA,EACRqlB,aAAcA,EAElB,CAEA,SAAShS,EAAWpV,EAAM5F,EAAW2qB,EAAU5rB,EAAON,GACpD,IAAI4E,EAAOuC,EAAKkU,KAAK+C,mBAAmB7c,GACpC6Z,EAAcjU,EAAKkU,KAAKC,KACxBiT,EAAeyC,EAAc5V,EAAaxW,GAAM2pB,aAEhDuC,EAAqB,CACvBM,SAAUpxB,EAAYa,IAAI,2BAC1BwwB,OAAQrxB,EAAYa,IAAI,0BAE1BrB,EAAAA,GAAsB0sB,EAAU,CAC9BlrB,EAAGutB,EAAavtB,EAAI,EACpBC,EAAGstB,EAAattB,EAAI,GACnBjB,EAAa,CACd2G,GAAI,WACFrG,EAAMgV,OAAO4W,GACb/kB,EAAK5C,iBAAiBhD,EAAW,KACnC,EACA4vB,UAAWL,IAEb5E,EAASoF,QAAQ,KAAMnqB,EAAKoqB,UAAW,CACrCC,WAAW,EACXC,UAAWX,IAGblsB,EAAKmZ,SAAS2T,SAAQ,SAAUC,GAC9Bd,EAAec,EAAWxqB,EAAM7G,EAAON,EAAa8wB,EACtD,IAEAD,EAAejsB,EAAMuC,EAAM7G,EAAON,EAAa8wB,EACjD,CAEA,SAASL,EAAaS,EAAWjyB,EAAQ4C,EAAW0sB,EAAcQ,GAChE,IAAI/wB,EACAC,EACAC,EACAC,EACAP,EACAE,EACAD,EACAE,EAEJ,GAAkB,WAAdmzB,EAAwB,CAC1BtzB,EAAK2wB,EAAaI,KAClB9wB,EAAK0wB,EAAaM,KAClB/wB,EAAKixB,EAAaJ,KAClB5wB,EAAKgxB,EAAaF,KAClB,IAAI+C,GAAcC,EAAAA,EAAAA,IAAiBj0B,EAAIC,GACnCi0B,GAAcD,EAAAA,EAAAA,IAAiBj0B,EAAIC,GAAME,EAAKF,GAAMgE,GACpDkwB,GAAcF,EAAAA,EAAAA,IAAiB/zB,EAAIC,GAAMF,EAAKE,GAAM8D,GACpDmwB,GAAcH,EAAAA,EAAAA,IAAiB/zB,EAAIC,GACvC,MAAO,CACLH,GAAIg0B,EAAY5wB,GAAK,EACrBnD,GAAI+zB,EAAY3wB,GAAK,EACrBnD,GAAIk0B,EAAYhxB,GAAK,EACrBjD,GAAIi0B,EAAY/wB,GAAK,EACrBjD,KAAM8zB,EAAY9wB,GAAK,EACvB/C,KAAM6zB,EAAY7wB,GAAK,EACvB/C,KAAM6zB,EAAY/wB,GAAK,EACvB7C,KAAM4zB,EAAY9wB,GAAK,EAE3B,CAqBA,OApBErD,EAAK2wB,EAAavtB,EAClBnD,EAAK0wB,EAAattB,EAClBnD,EAAKixB,EAAa/tB,EAClBjD,EAAKgxB,EAAa9tB,EAEH,OAAXhC,GAA8B,OAAXA,IACrBjB,EAAOJ,GAAME,EAAKF,GAAMiE,EACxB5D,EAAOJ,EACPK,EAAOJ,GAAMF,EAAKE,GAAM+D,EACxB1D,EAAOJ,GAGM,OAAXkB,GAA8B,OAAXA,IACrBjB,EAAOJ,EACPK,EAAOJ,GAAME,EAAKF,GAAMgE,EACxB3D,EAAOJ,EACPK,EAAOJ,GAAMF,EAAKE,GAAM8D,GAIrB,CACLjE,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJC,KAAMA,EACNC,KAAMA,EACNC,KAAMA,EACNC,KAAMA,EAEV,CAEA,Q","sources":["webpack://databoard/./node_modules/echarts/lib/chart/sankey/SankeyView.js","webpack://databoard/./node_modules/echarts/lib/chart/sankey/SankeySeries.js","webpack://databoard/./node_modules/echarts/lib/chart/sankey/sankeyLayout.js","webpack://databoard/./node_modules/echarts/lib/chart/sankey/sankeyVisual.js","webpack://databoard/./node_modules/echarts/lib/chart/sankey/install.js","webpack://databoard/./node_modules/echarts/lib/chart/scatter/ScatterSeries.js","webpack://databoard/./node_modules/echarts/lib/chart/scatter/ScatterView.js","webpack://databoard/./node_modules/echarts/lib/chart/scatter/install.js","webpack://databoard/./node_modules/echarts/lib/chart/sunburst/SunburstPiece.js","webpack://databoard/./node_modules/echarts/lib/chart/sunburst/sunburstAction.js","webpack://databoard/./node_modules/echarts/lib/chart/sunburst/SunburstView.js","webpack://databoard/./node_modules/echarts/lib/chart/sunburst/SunburstSeries.js","webpack://databoard/./node_modules/echarts/lib/chart/sunburst/sunburstLayout.js","webpack://databoard/./node_modules/echarts/lib/chart/sunburst/sunburstVisual.js","webpack://databoard/./node_modules/echarts/lib/chart/sunburst/install.js","webpack://databoard/./node_modules/echarts/lib/chart/themeRiver/ThemeRiverView.js","webpack://databoard/./node_modules/echarts/lib/chart/themeRiver/ThemeRiverSeries.js","webpack://databoard/./node_modules/echarts/lib/chart/themeRiver/themeRiverLayout.js","webpack://databoard/./node_modules/echarts/lib/chart/themeRiver/install.js","webpack://databoard/./node_modules/echarts/lib/chart/tree/TreeSeries.js","webpack://databoard/./node_modules/echarts/lib/chart/tree/TreeView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis, setStatesStylesFromModel } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isString } from 'zrender/lib/core/util.js';\n\nvar SankeyPathShape =\n/** @class */\nfunction () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n\n  return SankeyPathShape;\n}();\n\nvar SankeyPath =\n/** @class */\nfunction (_super) {\n  __extends(SankeyPath, _super);\n\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n\n    ctx.closePath();\n  };\n\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  return SankeyPath;\n}(graphic.Path);\n\nvar SankeyView =\n/** @class */\nfunction (_super) {\n  __extends(SankeyView, _super);\n\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeyView.type;\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo; // view width\n\n    var width = layoutInfo.width; // view height\n\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.x = layoutInfo.x;\n    group.y = layoutInfo.y; // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      switch (curve.style.fill) {\n        case 'source':\n          curve.style.fill = edge.node1.getVisual('color');\n          curve.style.decal = edge.node1.getVisual('style').decal;\n          break;\n\n        case 'target':\n          curve.style.fill = edge.node2.getVisual('color');\n          curve.style.decal = edge.node2.getVisual('style').decal;\n          break;\n\n        case 'gradient':\n          var sourceColor = edge.node1.getVisual('color');\n          var targetColor = edge.node2.getVisual('color');\n\n          if (isString(sourceColor) && isString(targetColor)) {\n            curve.style.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\n              color: sourceColor,\n              offset: 0\n            }, {\n              color: targetColor,\n              offset: 1\n            }]);\n          }\n\n      }\n\n      setLabelStyle(curve, getLabelStatesModels(edgeModel, 'edgeLabel'), {\n        labelFetcher: seriesModel,\n        labelDataIndex: edge.dataIndex,\n        defaultText: \"\" + edgeModel.get('value')\n      });\n      curve.setTextConfig({\n        position: 'inside'\n      });\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        return model.getItemStyle();\n      });\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n      getECData(curve).dataType = 'edge';\n    }); // Generate a rect for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: seriesModel,\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      toggleHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n\n    this._data = seriesModel.getData();\n  };\n\n  SankeyView.prototype.dispose = function () {};\n\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView); // Add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default SankeyView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport Model from '../../model/Model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\n\nvar SankeySeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SankeySeriesModel, _super);\n\n  function SankeySeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeySeriesModel.type;\n    return _this;\n  }\n  /**\n   * Init a graph data structure from data in option series\n   */\n\n\n  SankeySeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var links = option.edges || option.links;\n    var nodes = option.data || option.nodes;\n    var levels = option.levels;\n    this.levelModels = [];\n    var levelModels = this.levelModels;\n\n    for (var i = 0; i < levels.length; i++) {\n      if (levels[i].depth != null && levels[i].depth >= 0) {\n        levelModels[levels[i].depth] = new Model(levels[i], this, ecModel);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error('levels[i].depth is mandatory and should be natural number');\n        }\n      }\n    }\n\n    if (nodes && links) {\n      var graph = createGraphFromNodeEdge(nodes, links, this, true, beforeLink);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var layout = seriesModel.getData().getItemLayout(idx);\n\n        if (layout) {\n          var nodeDepth = layout.depth;\n          var levelModel = seriesModel.levelModels[nodeDepth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n      edgeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var edge = seriesModel.getGraph().getEdgeByIndex(idx);\n        var layout = edge.node1.getLayout();\n\n        if (layout) {\n          var depth = layout.depth;\n          var levelModel = seriesModel.levelModels[depth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n    }\n  };\n\n  SankeySeriesModel.prototype.setNodePosition = function (dataIndex, localPosition) {\n    var nodes = this.option.data || this.option.nodes;\n    var dataItem = nodes[dataIndex];\n    dataItem.localX = localPosition[0];\n    dataItem.localY = localPosition[1];\n  };\n  /**\n   * Return the graphic data structure\n   *\n   * @return graphic data structure\n   */\n\n\n  SankeySeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  /**\n   * Get edge data of graphic data structure\n   *\n   * @return data structure of list\n   */\n\n\n  SankeySeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  SankeySeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    function noValue(val) {\n      return isNaN(val) || val == null;\n    } // dataType === 'node' or empty do not show tooltip by default\n\n\n    if (dataType === 'edge') {\n      var params = this.getDataParams(dataIndex, dataType);\n      var rawDataOpt = params.data;\n      var edgeValue = params.value;\n      var edgeName = rawDataOpt.source + ' -- ' + rawDataOpt.target;\n      return createTooltipMarkup('nameValue', {\n        name: edgeName,\n        value: edgeValue,\n        noValue: noValue(edgeValue)\n      });\n    } // dataType === 'node'\n    else {\n        var node = this.getGraph().getNodeByIndex(dataIndex);\n        var value = node.getLayout().value;\n        var name_1 = this.getDataParams(dataIndex, dataType).data.name;\n        return createTooltipMarkup('nameValue', {\n          name: name_1 != null ? name_1 + '' : null,\n          value: value,\n          noValue: noValue(value)\n        });\n      }\n  };\n\n  SankeySeriesModel.prototype.optionUpdated = function () {}; // Override Series.getDataParams()\n\n\n  SankeySeriesModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n\n    if (params.value == null && dataType === 'node') {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var nodeValue = node.getLayout().value;\n      params.value = nodeValue;\n    }\n\n    return params;\n  };\n\n  SankeySeriesModel.type = 'series.sankey';\n  SankeySeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    left: '5%',\n    top: '5%',\n    right: '20%',\n    bottom: '5%',\n    orient: 'horizontal',\n    nodeWidth: 20,\n    nodeGap: 8,\n    draggable: true,\n    layoutIterations: 32,\n    label: {\n      show: true,\n      position: 'right',\n      fontSize: 12\n    },\n    edgeLabel: {\n      show: false,\n      fontSize: 12\n    },\n    levels: [],\n    nodeAlign: 'justify',\n    lineStyle: {\n      color: '#314656',\n      opacity: 0.2,\n      curveness: 0.5\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        opacity: 0.5\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 1000\n  };\n  return SankeySeriesModel;\n}(SeriesModel);\n\nexport default SankeySeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData } from '../../util/model.js';\nexport default function sankeyLayout(ecModel, api) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var nodeWidth = seriesModel.get('nodeWidth');\n    var nodeGap = seriesModel.get('nodeGap');\n    var layoutInfo = getViewRect(seriesModel, api);\n    seriesModel.layoutInfo = layoutInfo;\n    var width = layoutInfo.width;\n    var height = layoutInfo.height;\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n    computeNodeValues(nodes);\n    var filteredNodes = zrUtil.filter(nodes, function (node) {\n      return node.getLayout().value === 0;\n    });\n    var iterations = filteredNodes.length !== 0 ? 0 : seriesModel.get('layoutIterations');\n    var orient = seriesModel.get('orient');\n    var nodeAlign = seriesModel.get('nodeAlign');\n    layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign);\n  });\n}\n/**\n * Get the layout position of the whole view\n */\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign) {\n  computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign);\n  computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient);\n  computeEdgeDepths(nodes, orient);\n}\n/**\n * Compute the value of each node by summing the associated edge's value\n */\n\n\nfunction computeNodeValues(nodes) {\n  zrUtil.each(nodes, function (node) {\n    var value1 = sum(node.outEdges, getEdgeValue);\n    var value2 = sum(node.inEdges, getEdgeValue);\n    var nodeRawValue = node.getValue() || 0;\n    var value = Math.max(value1, value2, nodeRawValue);\n    node.setLayout({\n      value: value\n    }, true);\n  });\n}\n/**\n * Compute the x-position for each node.\n *\n * Here we use Kahn algorithm to detect cycle when we traverse\n * the node to computer the initial x position.\n */\n\n\nfunction computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign) {\n  // Used to mark whether the edge is deleted. if it is deleted,\n  // the value is 0, otherwise it is 1.\n  var remainEdges = []; // Storage each node's indegree.\n\n  var indegreeArr = []; // Used to storage the node with indegree is equal to 0.\n\n  var zeroIndegrees = [];\n  var nextTargetNode = [];\n  var x = 0; // let kx = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    remainEdges[i] = 1;\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    indegreeArr[i] = nodes[i].inEdges.length;\n\n    if (indegreeArr[i] === 0) {\n      zeroIndegrees.push(nodes[i]);\n    }\n  }\n\n  var maxNodeDepth = -1; // Traversing nodes using topological sorting to calculate the\n  // horizontal(if orient === 'horizontal') or vertical(if orient === 'vertical')\n  // position of the nodes.\n\n  while (zeroIndegrees.length) {\n    for (var idx = 0; idx < zeroIndegrees.length; idx++) {\n      var node = zeroIndegrees[idx];\n      var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n      var isItemDepth = item.depth != null && item.depth >= 0;\n\n      if (isItemDepth && item.depth > maxNodeDepth) {\n        maxNodeDepth = item.depth;\n      }\n\n      node.setLayout({\n        depth: isItemDepth ? item.depth : x\n      }, true);\n      orient === 'vertical' ? node.setLayout({\n        dy: nodeWidth\n      }, true) : node.setLayout({\n        dx: nodeWidth\n      }, true);\n\n      for (var edgeIdx = 0; edgeIdx < node.outEdges.length; edgeIdx++) {\n        var edge = node.outEdges[edgeIdx];\n        var indexEdge = edges.indexOf(edge);\n        remainEdges[indexEdge] = 0;\n        var targetNode = edge.node2;\n        var nodeIndex = nodes.indexOf(targetNode);\n\n        if (--indegreeArr[nodeIndex] === 0 && nextTargetNode.indexOf(targetNode) < 0) {\n          nextTargetNode.push(targetNode);\n        }\n      }\n    }\n\n    ++x;\n    zeroIndegrees = nextTargetNode;\n    nextTargetNode = [];\n  }\n\n  for (var i = 0; i < remainEdges.length; i++) {\n    if (remainEdges[i] === 1) {\n      throw new Error('Sankey is a DAG, the original data has cycle!');\n    }\n  }\n\n  var maxDepth = maxNodeDepth > x - 1 ? maxNodeDepth : x - 1;\n\n  if (nodeAlign && nodeAlign !== 'left') {\n    adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth);\n  }\n\n  var kx = orient === 'vertical' ? (height - nodeWidth) / maxDepth : (width - nodeWidth) / maxDepth;\n  scaleNodeBreadths(nodes, kx, orient);\n}\n\nfunction isNodeDepth(node) {\n  var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n  return item.depth != null && item.depth >= 0;\n}\n\nfunction adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth) {\n  if (nodeAlign === 'right') {\n    var nextSourceNode = [];\n    var remainNodes = nodes;\n    var nodeHeight = 0;\n\n    while (remainNodes.length) {\n      for (var i = 0; i < remainNodes.length; i++) {\n        var node = remainNodes[i];\n        node.setLayout({\n          skNodeHeight: nodeHeight\n        }, true);\n\n        for (var j = 0; j < node.inEdges.length; j++) {\n          var edge = node.inEdges[j];\n\n          if (nextSourceNode.indexOf(edge.node1) < 0) {\n            nextSourceNode.push(edge.node1);\n          }\n        }\n      }\n\n      remainNodes = nextSourceNode;\n      nextSourceNode = [];\n      ++nodeHeight;\n    }\n\n    zrUtil.each(nodes, function (node) {\n      if (!isNodeDepth(node)) {\n        node.setLayout({\n          depth: Math.max(0, maxDepth - node.getLayout().skNodeHeight)\n        }, true);\n      }\n    });\n  } else if (nodeAlign === 'justify') {\n    moveSinksRight(nodes, maxDepth);\n  }\n}\n/**\n * All the node without outEgdes are assigned maximum x-position and\n *     be aligned in the last column.\n *\n * @param nodes.  node of sankey view.\n * @param maxDepth.  use to assign to node without outEdges as x-position.\n */\n\n\nfunction moveSinksRight(nodes, maxDepth) {\n  zrUtil.each(nodes, function (node) {\n    if (!isNodeDepth(node) && !node.outEdges.length) {\n      node.setLayout({\n        depth: maxDepth\n      }, true);\n    }\n  });\n}\n/**\n * Scale node x-position to the width\n *\n * @param nodes  node of sankey view\n * @param kx   multiple used to scale nodes\n */\n\n\nfunction scaleNodeBreadths(nodes, kx, orient) {\n  zrUtil.each(nodes, function (node) {\n    var nodeDepth = node.getLayout().depth * kx;\n    orient === 'vertical' ? node.setLayout({\n      y: nodeDepth\n    }, true) : node.setLayout({\n      x: nodeDepth\n    }, true);\n  });\n}\n/**\n * Using Gauss-Seidel iterations method to compute the node depth(y-position)\n *\n * @param nodes  node of sankey view\n * @param edges  edge of sankey view\n * @param height  the whole height of the area to draw the view\n * @param nodeGap  the vertical distance between two nodes\n *     in the same column.\n * @param iterations  the number of iterations for the algorithm\n */\n\n\nfunction computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient) {\n  var nodesByBreadth = prepareNodesByBreadth(nodes, orient);\n  initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient);\n  resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n\n  for (var alpha = 1; iterations > 0; iterations--) {\n    // 0.99 is a experience parameter, ensure that each iterations of\n    // changes as small as possible.\n    alpha *= 0.99;\n    relaxRightToLeft(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n    relaxLeftToRight(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n  }\n}\n\nfunction prepareNodesByBreadth(nodes, orient) {\n  var nodesByBreadth = [];\n  var keyAttr = orient === 'vertical' ? 'y' : 'x';\n  var groupResult = groupData(nodes, function (node) {\n    return node.getLayout()[keyAttr];\n  });\n  groupResult.keys.sort(function (a, b) {\n    return a - b;\n  });\n  zrUtil.each(groupResult.keys, function (key) {\n    nodesByBreadth.push(groupResult.buckets.get(key));\n  });\n  return nodesByBreadth;\n}\n/**\n * Compute the original y-position for each node\n */\n\n\nfunction initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient) {\n  var minKy = Infinity;\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    var n = nodes.length;\n    var sum = 0;\n    zrUtil.each(nodes, function (node) {\n      sum += node.getLayout().value;\n    });\n    var ky = orient === 'vertical' ? (width - (n - 1) * nodeGap) / sum : (height - (n - 1) * nodeGap) / sum;\n\n    if (ky < minKy) {\n      minKy = ky;\n    }\n  });\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node, i) {\n      var nodeDy = node.getLayout().value * minKy;\n\n      if (orient === 'vertical') {\n        node.setLayout({\n          x: i\n        }, true);\n        node.setLayout({\n          dx: nodeDy\n        }, true);\n      } else {\n        node.setLayout({\n          y: i\n        }, true);\n        node.setLayout({\n          dy: nodeDy\n        }, true);\n      }\n    });\n  });\n  zrUtil.each(edges, function (edge) {\n    var edgeDy = +edge.getValue() * minKy;\n    edge.setLayout({\n      dy: edgeDy\n    }, true);\n  });\n}\n/**\n * Resolve the collision of initialized depth (y-position)\n */\n\n\nfunction resolveCollisions(nodesByBreadth, nodeGap, height, width, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    nodes.sort(function (a, b) {\n      return a.getLayout()[keyAttr] - b.getLayout()[keyAttr];\n    });\n    var nodeX;\n    var node;\n    var dy;\n    var y0 = 0;\n    var n = nodes.length;\n    var nodeDyAttr = orient === 'vertical' ? 'dx' : 'dy';\n\n    for (var i = 0; i < n; i++) {\n      node = nodes[i];\n      dy = y0 - node.getLayout()[keyAttr];\n\n      if (dy > 0) {\n        nodeX = node.getLayout()[keyAttr] + dy;\n        orient === 'vertical' ? node.setLayout({\n          x: nodeX\n        }, true) : node.setLayout({\n          y: nodeX\n        }, true);\n      }\n\n      y0 = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap;\n    }\n\n    var viewWidth = orient === 'vertical' ? width : height; // If the bottommost node goes outside the bounds, push it back up\n\n    dy = y0 - nodeGap - viewWidth;\n\n    if (dy > 0) {\n      nodeX = node.getLayout()[keyAttr] - dy;\n      orient === 'vertical' ? node.setLayout({\n        x: nodeX\n      }, true) : node.setLayout({\n        y: nodeX\n      }, true);\n      y0 = nodeX;\n\n      for (var i = n - 2; i >= 0; --i) {\n        node = nodes[i];\n        dy = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap - y0;\n\n        if (dy > 0) {\n          nodeX = node.getLayout()[keyAttr] - dy;\n          orient === 'vertical' ? node.setLayout({\n            x: nodeX\n          }, true) : node.setLayout({\n            y: nodeX\n          }, true);\n        }\n\n        y0 = node.getLayout()[keyAttr];\n      }\n    }\n  });\n}\n/**\n * Change the y-position of the nodes, except most the right side nodes\n * @param nodesByBreadth\n * @param alpha  parameter used to adjust the nodes y-position\n */\n\n\nfunction relaxRightToLeft(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth.slice().reverse(), function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.outEdges.length) {\n        var y = sum(node.outEdges, weightedTarget, orient) / sum(node.outEdges, getEdgeValue);\n\n        if (isNaN(y)) {\n          var len = node.outEdges.length;\n          y = len ? sum(node.outEdges, centerTarget, orient) / len : 0;\n        }\n\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n\nfunction weightedTarget(edge, orient) {\n  return center(edge.node2, orient) * edge.getValue();\n}\n\nfunction centerTarget(edge, orient) {\n  return center(edge.node2, orient);\n}\n\nfunction weightedSource(edge, orient) {\n  return center(edge.node1, orient) * edge.getValue();\n}\n\nfunction centerSource(edge, orient) {\n  return center(edge.node1, orient);\n}\n\nfunction center(node, orient) {\n  return orient === 'vertical' ? node.getLayout().x + node.getLayout().dx / 2 : node.getLayout().y + node.getLayout().dy / 2;\n}\n\nfunction getEdgeValue(edge) {\n  return edge.getValue();\n}\n\nfunction sum(array, cb, orient) {\n  var sum = 0;\n  var len = array.length;\n  var i = -1;\n\n  while (++i < len) {\n    var value = +cb(array[i], orient);\n\n    if (!isNaN(value)) {\n      sum += value;\n    }\n  }\n\n  return sum;\n}\n/**\n * Change the y-position of the nodes, except most the left side nodes\n */\n\n\nfunction relaxLeftToRight(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.inEdges.length) {\n        var y = sum(node.inEdges, weightedSource, orient) / sum(node.inEdges, getEdgeValue);\n\n        if (isNaN(y)) {\n          var len = node.inEdges.length;\n          y = len ? sum(node.inEdges, centerSource, orient) / len : 0;\n        }\n\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n/**\n * Compute the depth(y-position) of each edge\n */\n\n\nfunction computeEdgeDepths(nodes, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodes, function (node) {\n    node.outEdges.sort(function (a, b) {\n      return a.node2.getLayout()[keyAttr] - b.node2.getLayout()[keyAttr];\n    });\n    node.inEdges.sort(function (a, b) {\n      return a.node1.getLayout()[keyAttr] - b.node1.getLayout()[keyAttr];\n    });\n  });\n  zrUtil.each(nodes, function (node) {\n    var sy = 0;\n    var ty = 0;\n    zrUtil.each(node.outEdges, function (edge) {\n      edge.setLayout({\n        sy: sy\n      }, true);\n      sy += edge.getLayout().dy;\n    });\n    zrUtil.each(node.inEdges, function (edge) {\n      edge.setLayout({\n        ty: ty\n      }, true);\n      ty += edge.getLayout().dy;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nexport default function sankeyVisual(ecModel) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n\n    if (nodes.length) {\n      var minValue_1 = Infinity;\n      var maxValue_1 = -Infinity;\n      zrUtil.each(nodes, function (node) {\n        var nodeValue = node.getLayout().value;\n\n        if (nodeValue < minValue_1) {\n          minValue_1 = nodeValue;\n        }\n\n        if (nodeValue > maxValue_1) {\n          maxValue_1 = nodeValue;\n        }\n      });\n      zrUtil.each(nodes, function (node) {\n        var mapping = new VisualMapping({\n          type: 'color',\n          mappingMethod: 'linear',\n          dataExtent: [minValue_1, maxValue_1],\n          visual: seriesModel.get('color')\n        });\n        var mapValueToColor = mapping.mapValueToVisual(node.getLayout().value);\n        var customColor = node.getModel().get(['itemStyle', 'color']);\n\n        if (customColor != null) {\n          node.setVisual('color', customColor);\n          node.setVisual('style', {\n            fill: customColor\n          });\n        } else {\n          node.setVisual('color', mapValueToColor);\n          node.setVisual('style', {\n            fill: mapValueToColor\n          });\n        }\n      });\n    }\n\n    if (edges.length) {\n      zrUtil.each(edges, function (edge) {\n        var edgeStyle = edge.getModel().get('lineStyle');\n        edge.setVisual('style', edgeStyle);\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SankeyView from './SankeyView.js';\nimport SankeySeriesModel from './SankeySeries.js';\nimport sankeyLayout from './sankeyLayout.js';\nimport sankeyVisual from './sankeyVisual.js';\nexport function install(registers) {\n  registers.registerChartView(SankeyView);\n  registers.registerSeriesModel(SankeySeriesModel);\n  registers.registerLayout(sankeyLayout);\n  registers.registerVisual(sankeyVisual);\n  registers.registerAction({\n    type: 'dragNode',\n    event: 'dragnode',\n    // here can only use 'update' now, other value is not support in echarts.\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sankey',\n      query: payload\n    }, function (seriesModel) {\n      seriesModel.setNodePosition(payload.dataIndex, [payload.localX, payload.localY]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar ScatterSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ScatterSeriesModel, _super);\n\n  function ScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  ScatterSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n\n  ScatterSeriesModel.prototype.getZLevelKey = function () {\n    // Each progressive series has individual key.\n    return this.getData().count() > this.getProgressiveThreshold() ? this.id : '';\n  };\n\n  ScatterSeriesModel.type = 'series.scatter';\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  ScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    symbolSize: 10,\n    // symbolRotate: null,  // 图形旋转控制\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    itemStyle: {\n      opacity: 0.8 // color: 各异\n\n    },\n    emphasis: {\n      scale: true\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    } // progressive: null\n\n  };\n  return ScatterSeriesModel;\n}(SeriesModel);\n\nexport default ScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\n\nvar ScatterView =\n/** @class */\nfunction (_super) {\n  __extends(ScatterView, _super);\n\n  function ScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterView.type;\n    return _this;\n  }\n\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  };\n\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  };\n\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n\n    this.group.dirty();\n\n    if (!this._finished || data.count() > 1e4) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n\n      this._symbolDraw.updateLayout(data);\n    }\n  };\n\n  ScatterView.prototype.eachRendered = function (cb) {\n    this._symbolDraw && this._symbolDraw.eachRendered(cb);\n  };\n\n  ScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  };\n\n  ScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  };\n\n  ScatterView.prototype.dispose = function () {};\n\n  ScatterView.type = 'scatter';\n  return ScatterView;\n}(ChartView);\n\nexport default ScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport ScatterSeriesModel from './ScatterSeries.js';\nimport ScatterView from './ScatterView.js';\nimport { install as installGridSimple } from '../../component/grid/installSimple.js';\nimport layoutPoints from '../../layout/points.js';\nexport function install(registers) {\n  // In case developer forget to include grid component\n  use(installGridSimple);\n  registers.registerSeriesModel(ScatterSeriesModel);\n  registers.registerChartView(ScatterView);\n  registers.registerLayout(layoutPoints('scatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, SPECIAL_STATES, DISPLAY_STATES } from '../../util/states.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nvar DEFAULT_SECTOR_Z = 2;\nvar DEFAULT_TEXT_Z = 4;\n/**\n * Sunburstce of Sunburst including Sector, Label, LabelLine\n */\n\nvar SunburstPiece =\n/** @class */\nfunction (_super) {\n  __extends(SunburstPiece, _super);\n\n  function SunburstPiece(node, seriesModel, ecModel, api) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = DEFAULT_SECTOR_Z;\n    _this.textConfig = {\n      inside: true\n    };\n    getECData(_this).seriesIndex = seriesModel.seriesIndex;\n    var text = new graphic.Text({\n      z2: DEFAULT_TEXT_Z,\n      silent: node.getModel().get(['label', 'silent'])\n    });\n\n    _this.setTextContent(text);\n\n    _this.updateData(true, node, seriesModel, ecModel, api);\n\n    return _this;\n  }\n\n  SunburstPiece.prototype.updateData = function (firstCreate, node, // state: 'emphasis' | 'normal' | 'highlight' | 'downplay',\n  seriesModel, ecModel, api) {\n    this.node = node;\n    node.piece = this;\n    seriesModel = seriesModel || this._seriesModel;\n    ecModel = ecModel || this._ecModel;\n    var sector = this;\n    getECData(sector).dataIndex = node.dataIndex;\n    var itemModel = node.getModel();\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = node.getLayout();\n    var sectorShape = zrUtil.extend({}, layout);\n    sectorShape.label = null;\n    var normalStyle = node.getVisual('style');\n    normalStyle.lineJoin = 'bevel';\n    var decal = node.getVisual('decal');\n\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    zrUtil.extend(sectorShape, cornerRadius);\n    zrUtil.each(SPECIAL_STATES, function (stateName) {\n      var state = sector.ensureState(stateName);\n      var itemStyleModel = itemModel.getModel([stateName, 'itemStyle']);\n      state.style = itemStyleModel.getItemStyle(); // border radius\n\n      var cornerRadius = getSectorCornerRadius(itemStyleModel, sectorShape);\n\n      if (cornerRadius) {\n        state.shape = cornerRadius;\n      }\n    });\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, node.dataIndex);\n    } else {\n      // Disable animation for gradient since no interpolation method\n      // is supported for gradient\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel);\n      saveOldStyle(sector);\n    }\n\n    sector.useStyle(normalStyle);\n\n    this._updateLabel(seriesModel);\n\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n    this._seriesModel = seriesModel || this._seriesModel;\n    this._ecModel = ecModel || this._ecModel;\n    var focus = emphasisModel.get('focus');\n    var focusOrIndices = focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : focus;\n    toggleHoverEmphasis(this, focusOrIndices, emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n\n  SunburstPiece.prototype._updateLabel = function (seriesModel) {\n    var _this = this;\n\n    var itemModel = this.node.getModel();\n    var normalLabelModel = itemModel.getModel('label');\n    var layout = this.node.getLayout();\n    var angle = layout.endAngle - layout.startAngle;\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var sector = this;\n    var label = sector.getTextContent();\n    var dataIndex = this.node.dataIndex;\n    var labelMinAngle = normalLabelModel.get('minAngle') / 180 * Math.PI;\n    var isNormalShown = normalLabelModel.get('show') && !(labelMinAngle != null && Math.abs(angle) < labelMinAngle);\n    label.ignore = !isNormalShown; // TODO use setLabelStyle\n\n    zrUtil.each(DISPLAY_STATES, function (stateName) {\n      var labelStateModel = stateName === 'normal' ? itemModel.getModel('label') : itemModel.getModel([stateName, 'label']);\n      var isNormal = stateName === 'normal';\n      var state = isNormal ? label : label.ensureState(stateName);\n      var text = seriesModel.getFormattedLabel(dataIndex, stateName);\n\n      if (isNormal) {\n        text = text || _this.node.name;\n      }\n\n      state.style = createTextStyle(labelStateModel, {}, null, stateName !== 'normal', true);\n\n      if (text) {\n        state.style.text = text;\n      } // Not displaying text when angle is too small\n\n\n      var isShown = labelStateModel.get('show');\n\n      if (isShown != null && !isNormal) {\n        state.ignore = !isShown;\n      }\n\n      var labelPosition = getLabelAttr(labelStateModel, 'position');\n      var sectorState = isNormal ? sector : sector.states[stateName];\n      var labelColor = sectorState.style.fill;\n      sectorState.textConfig = {\n        outsideFill: labelStateModel.get('color') === 'inherit' ? labelColor : null,\n        inside: labelPosition !== 'outside'\n      };\n      var r;\n      var labelPadding = getLabelAttr(labelStateModel, 'distance') || 0;\n      var textAlign = getLabelAttr(labelStateModel, 'align');\n\n      if (labelPosition === 'outside') {\n        r = layout.r + labelPadding;\n        textAlign = midAngle > Math.PI / 2 ? 'right' : 'left';\n      } else {\n        if (!textAlign || textAlign === 'center') {\n          // Put label in the center if it's a circle\n          if (angle === 2 * Math.PI && layout.r0 === 0) {\n            r = 0;\n          } else {\n            r = (layout.r + layout.r0) / 2;\n          }\n\n          textAlign = 'center';\n        } else if (textAlign === 'left') {\n          r = layout.r0 + labelPadding;\n\n          if (midAngle > Math.PI / 2) {\n            textAlign = 'right';\n          }\n        } else if (textAlign === 'right') {\n          r = layout.r - labelPadding;\n\n          if (midAngle > Math.PI / 2) {\n            textAlign = 'left';\n          }\n        }\n      }\n\n      state.style.align = textAlign;\n      state.style.verticalAlign = getLabelAttr(labelStateModel, 'verticalAlign') || 'middle';\n      state.x = r * dx + layout.cx;\n      state.y = r * dy + layout.cy;\n      var rotateType = getLabelAttr(labelStateModel, 'rotate');\n      var rotate = 0;\n\n      if (rotateType === 'radial') {\n        rotate = normalizeRadian(-midAngle);\n\n        if (rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n          rotate += Math.PI;\n        }\n      } else if (rotateType === 'tangential') {\n        rotate = Math.PI / 2 - midAngle;\n\n        if (rotate > Math.PI / 2) {\n          rotate -= Math.PI;\n        } else if (rotate < -Math.PI / 2) {\n          rotate += Math.PI;\n        }\n      } else if (zrUtil.isNumber(rotateType)) {\n        rotate = rotateType * Math.PI / 180;\n      }\n\n      state.rotation = rotate;\n    });\n\n    function getLabelAttr(model, name) {\n      var stateAttr = model.get(name);\n\n      if (stateAttr == null) {\n        return normalLabelModel.get(name);\n      }\n\n      return stateAttr;\n    }\n\n    label.dirtyStyle();\n  };\n\n  return SunburstPiece;\n}(graphic.Sector);\n\nexport default SunburstPiece;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nimport { deprecateReplaceLog } from '../../util/log.js';\nimport { retrieveTargetInfo, aboveViewRoot } from '../helper/treeHelper.js';\nexport var ROOT_TO_NODE_ACTION = 'sunburstRootToNode';\nvar HIGHLIGHT_ACTION = 'sunburstHighlight';\nvar UNHIGHLIGHT_ACTION = 'sunburstUnhighlight';\nexport function installSunburstAction(registers) {\n  registers.registerAction({\n    type: ROOT_TO_NODE_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleRootToNode);\n\n    function handleRootToNode(model, index) {\n      var targetInfo = retrieveTargetInfo(payload, [ROOT_TO_NODE_ACTION], model);\n\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n\n        if (originViewRoot) {\n          payload.direction = aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n  registers.registerAction({\n    type: HIGHLIGHT_ACTION,\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    // Clone\n    payload = extend({}, payload);\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleHighlight);\n\n    function handleHighlight(model) {\n      var targetInfo = retrieveTargetInfo(payload, [HIGHLIGHT_ACTION], model);\n\n      if (targetInfo) {\n        payload.dataIndex = targetInfo.node.dataIndex;\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('sunburstHighlight', 'highlight');\n    } // Fast forward action\n\n\n    api.dispatchAction(extend(payload, {\n      type: 'highlight'\n    }));\n  });\n  registers.registerAction({\n    type: UNHIGHLIGHT_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel, api) {\n    payload = extend({}, payload);\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('sunburstUnhighlight', 'downplay');\n    }\n\n    api.dispatchAction(extend(payload, {\n      type: 'downplay'\n    }));\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport SunburstPiece from './SunburstPiece.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport { ROOT_TO_NODE_ACTION } from './sunburstAction.js';\nimport { windowOpen } from '../../util/format.js';\n\nvar SunburstView =\n/** @class */\nfunction (_super) {\n  __extends(SunburstView, _super);\n\n  function SunburstView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SunburstView.type;\n    return _this;\n  }\n\n  SunburstView.prototype.render = function (seriesModel, ecModel, api, // @ts-ignore\n  payload) {\n    var self = this;\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var data = seriesModel.getData();\n    var virtualRoot = data.tree.root;\n    var newRoot = seriesModel.getViewRoot();\n    var group = this.group;\n    var renderLabelForZeroData = seriesModel.get('renderLabelForZeroData');\n    var newChildren = [];\n    newRoot.eachNode(function (node) {\n      newChildren.push(node);\n    });\n    var oldChildren = this._oldChildren || [];\n    dualTravel(newChildren, oldChildren);\n    renderRollUp(virtualRoot, newRoot);\n\n    this._initEvents();\n\n    this._oldChildren = newChildren;\n\n    function dualTravel(newChildren, oldChildren) {\n      if (newChildren.length === 0 && oldChildren.length === 0) {\n        return;\n      }\n\n      new DataDiffer(oldChildren, newChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\n\n      function getKey(node) {\n        return node.getId();\n      }\n\n      function processNode(newIdx, oldIdx) {\n        var newNode = newIdx == null ? null : newChildren[newIdx];\n        var oldNode = oldIdx == null ? null : oldChildren[oldIdx];\n        doRenderNode(newNode, oldNode);\n      }\n    }\n\n    function doRenderNode(newNode, oldNode) {\n      if (!renderLabelForZeroData && newNode && !newNode.getValue()) {\n        // Not render data with value 0\n        newNode = null;\n      }\n\n      if (newNode !== virtualRoot && oldNode !== virtualRoot) {\n        if (oldNode && oldNode.piece) {\n          if (newNode) {\n            // Update\n            oldNode.piece.updateData(false, newNode, seriesModel, ecModel, api); // For tooltip\n\n            data.setItemGraphicEl(newNode.dataIndex, oldNode.piece);\n          } else {\n            // Remove\n            removeNode(oldNode);\n          }\n        } else if (newNode) {\n          // Add\n          var piece = new SunburstPiece(newNode, seriesModel, ecModel, api);\n          group.add(piece); // For tooltip\n\n          data.setItemGraphicEl(newNode.dataIndex, piece);\n        }\n      }\n    }\n\n    function removeNode(node) {\n      if (!node) {\n        return;\n      }\n\n      if (node.piece) {\n        group.remove(node.piece);\n        node.piece = null;\n      }\n    }\n\n    function renderRollUp(virtualRoot, viewRoot) {\n      if (viewRoot.depth > 0) {\n        // Render\n        if (self.virtualPiece) {\n          // Update\n          self.virtualPiece.updateData(false, virtualRoot, seriesModel, ecModel, api);\n        } else {\n          // Add\n          self.virtualPiece = new SunburstPiece(virtualRoot, seriesModel, ecModel, api);\n          group.add(self.virtualPiece);\n        } // TODO event scope\n\n\n        viewRoot.piece.off('click');\n        self.virtualPiece.on('click', function (e) {\n          self._rootToNode(viewRoot.parentNode);\n        });\n      } else if (self.virtualPiece) {\n        // Remove\n        group.remove(self.virtualPiece);\n        self.virtualPiece = null;\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  SunburstView.prototype._initEvents = function () {\n    var _this = this;\n\n    this.group.off('click');\n    this.group.on('click', function (e) {\n      var targetFound = false;\n\n      var viewRoot = _this.seriesModel.getViewRoot();\n\n      viewRoot.eachNode(function (node) {\n        if (!targetFound && node.piece && node.piece === e.target) {\n          var nodeClick = node.getModel().get('nodeClick');\n\n          if (nodeClick === 'rootToNode') {\n            _this._rootToNode(node);\n          } else if (nodeClick === 'link') {\n            var itemModel = node.getModel();\n            var link = itemModel.get('link');\n\n            if (link) {\n              var linkTarget = itemModel.get('target', true) || '_blank';\n              windowOpen(link, linkTarget);\n            }\n          }\n\n          targetFound = true;\n        }\n      });\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  SunburstView.prototype._rootToNode = function (node) {\n    if (node !== this.seriesModel.getViewRoot()) {\n      this.api.dispatchAction({\n        type: ROOT_TO_NODE_ACTION,\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        targetNode: node\n      });\n    }\n  };\n  /**\n   * @implement\n   */\n\n\n  SunburstView.prototype.containPoint = function (point, seriesModel) {\n    var treeRoot = seriesModel.getData();\n    var itemLayout = treeRoot.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  SunburstView.type = 'sunburst';\n  return SunburstView;\n}(ChartView);\n\nexport default SunburstView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport Model from '../../model/Model.js';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\n\nvar SunburstSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SunburstSeriesModel, _super);\n\n  function SunburstSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SunburstSeriesModel.type;\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n\n  SunburstSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levelModels = this._levelModels = zrUtil.map(option.levels || [], function (levelDefine) {\n      return new Model(levelDefine, this, ecModel);\n    }, this); // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = levelModels[node.depth];\n        levelModel && (model.parentModel = levelModel);\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  SunburstSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /*\n   * @override\n   */\n\n\n  SunburstSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  };\n\n  SunburstSeriesModel.prototype.getLevelModel = function (node) {\n    return this._levelModels && this._levelModels[node.depth];\n  };\n\n  SunburstSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  SunburstSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  SunburstSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  SunburstSeriesModel.type = 'series.sunburst';\n  SunburstSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // 'rootToNode', 'link', or false\n    nodeClick: 'rootToNode',\n    renderLabelForZeroData: false,\n    label: {\n      // could be: 'radial', 'tangential', or 'none'\n      rotate: 'radial',\n      show: true,\n      opacity: 1,\n      // 'left' is for inner side of inside, and 'right' is for outer\n      // side for inside\n      align: 'center',\n      position: 'inside',\n      distance: 5,\n      silent: true\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderColor: 'white',\n      borderType: 'solid',\n      shadowBlur: 0,\n      shadowColor: 'rgba(0, 0, 0, 0.2)',\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    emphasis: {\n      focus: 'descendant'\n    },\n    blur: {\n      itemStyle: {\n        opacity: 0.2\n      },\n      label: {\n        opacity: 0.1\n      }\n    },\n    // Animation type can be expansion, scale.\n    animationType: 'expansion',\n    animationDuration: 1000,\n    animationDurationUpdate: 500,\n    data: [],\n\n    /**\n     * Sort order.\n     *\n     * Valid values: 'desc', 'asc', null, or callback function.\n     * 'desc' and 'asc' for descend and ascendant order;\n     * null for not sorting;\n     * example of callback function:\n     * function(nodeA, nodeB) {\n     *     return nodeA.getValue() - nodeB.getValue();\n     * }\n     */\n    sort: 'desc'\n  };\n  return SunburstSeriesModel;\n}(SeriesModel);\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value; // TODO First value of array must be a number\n\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n\nexport default SunburstSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent } from '../../util/number.js';\nimport * as zrUtil from 'zrender/lib/core/util.js'; // let PI2 = Math.PI * 2;\n\nvar RADIAN = Math.PI / 180;\nexport default function sunburstLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var virtualRoot = seriesModel.getData().tree.root;\n    var treeRoot = seriesModel.getViewRoot();\n    var rootDepth = treeRoot.depth;\n    var sort = seriesModel.get('sort');\n\n    if (sort != null) {\n      initChildren(treeRoot, sort);\n    }\n\n    var validDataCount = 0;\n    zrUtil.each(treeRoot.children, function (child) {\n      !isNaN(child.getValue()) && validDataCount++;\n    });\n    var sum = treeRoot.getValue(); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var renderRollupNode = treeRoot.depth > 0;\n    var levels = treeRoot.height - (renderRollupNode ? -1 : 1);\n    var rPerLevel = (r - r0) / (levels || 1);\n    var clockwise = seriesModel.get('clockwise');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // In the case some sector angle is smaller than minAngle\n    // let restAngle = PI2;\n    // let valueSumLargerThanMinAngle = 0;\n\n    var dir = clockwise ? 1 : -1;\n    /**\n     * Render a tree\n     * @return increased angle\n     */\n\n    var renderNode = function (node, startAngle) {\n      if (!node) {\n        return;\n      }\n\n      var endAngle = startAngle; // Render self\n\n      if (node !== virtualRoot) {\n        // Tree node is virtual, so it doesn't need to be drawn\n        var value = node.getValue();\n        var angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n\n        if (angle < minAngle) {\n          angle = minAngle; // restAngle -= minAngle;\n        } // else {\n        //     valueSumLargerThanMinAngle += value;\n        // }\n\n\n        endAngle = startAngle + dir * angle;\n        var depth = node.depth - rootDepth - (renderRollupNode ? -1 : 1);\n        var rStart = r0 + rPerLevel * depth;\n        var rEnd = r0 + rPerLevel * (depth + 1);\n        var levelModel = seriesModel.getLevelModel(node);\n\n        if (levelModel) {\n          var r0_1 = levelModel.get('r0', true);\n          var r_1 = levelModel.get('r', true);\n          var radius_1 = levelModel.get('radius', true);\n\n          if (radius_1 != null) {\n            r0_1 = radius_1[0];\n            r_1 = radius_1[1];\n          }\n\n          r0_1 != null && (rStart = parsePercent(r0_1, size / 2));\n          r_1 != null && (rEnd = parsePercent(r_1, size / 2));\n        }\n\n        node.setLayout({\n          angle: angle,\n          startAngle: startAngle,\n          endAngle: endAngle,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: rStart,\n          r: rEnd\n        });\n      } // Render children\n\n\n      if (node.children && node.children.length) {\n        // currentAngle = startAngle;\n        var siblingAngle_1 = 0;\n        zrUtil.each(node.children, function (node) {\n          siblingAngle_1 += renderNode(node, startAngle + siblingAngle_1);\n        });\n      }\n\n      return endAngle - startAngle;\n    }; // Virtual root node for roll up\n\n\n    if (renderRollupNode) {\n      var rStart = r0;\n      var rEnd = r0 + rPerLevel;\n      var angle = Math.PI * 2;\n      virtualRoot.setLayout({\n        angle: angle,\n        startAngle: startAngle,\n        endAngle: startAngle + angle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: rStart,\n        r: rEnd\n      });\n    }\n\n    renderNode(treeRoot, startAngle);\n  });\n}\n/**\n * Init node children by order and update visual\n */\n\nfunction initChildren(node, sortOrder) {\n  var children = node.children || [];\n  node.children = sort(children, sortOrder); // Init children recursively\n\n  if (children.length) {\n    zrUtil.each(node.children, function (child) {\n      initChildren(child, sortOrder);\n    });\n  }\n}\n/**\n * Sort children nodes\n *\n * @param {TreeNode[]}               children children of node to be sorted\n * @param {string | function | null} sort sort method\n *                                   See SunburstSeries.js for details.\n */\n\n\nfunction sort(children, sortOrder) {\n  if (zrUtil.isFunction(sortOrder)) {\n    var sortTargets = zrUtil.map(children, function (child, idx) {\n      var value = child.getValue();\n      return {\n        params: {\n          depth: child.depth,\n          height: child.height,\n          dataIndex: child.dataIndex,\n          getValue: function () {\n            return value;\n          }\n        },\n        index: idx\n      };\n    });\n    sortTargets.sort(function (a, b) {\n      return sortOrder(a.params, b.params);\n    });\n    return zrUtil.map(sortTargets, function (target) {\n      return children[target.index];\n    });\n  } else {\n    var isAsc_1 = sortOrder === 'asc';\n    return children.sort(function (a, b) {\n      var diff = (a.getValue() - b.getValue()) * (isAsc_1 ? 1 : -1);\n      return diff === 0 ? (a.dataIndex - b.dataIndex) * (isAsc_1 ? -1 : 1) : diff;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { lift } from 'zrender/lib/tool/color.js';\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function sunburstVisual(ecModel) {\n  var paletteScope = {}; // Default color strategy\n\n  function pickColor(node, seriesModel, treeHeight) {\n    // Choose color from palette based on the first level.\n    var current = node;\n\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n\n    var color = seriesModel.getColorFromPalette(current.name || current.dataIndex + '', paletteScope);\n\n    if (node.depth > 1 && isString(color)) {\n      // Lighter on the deeper level.\n      color = lift(color, (node.depth - 1) / (treeHeight - 1) * 0.5);\n    }\n\n    return color;\n  }\n\n  ecModel.eachSeriesByType('sunburst', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel();\n      var style = model.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        style.fill = pickColor(node, seriesModel, tree.root.height);\n      }\n\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SunburstView from './SunburstView.js';\nimport SunburstSeriesModel from './SunburstSeries.js';\nimport sunburstLayout from './sunburstLayout.js';\nimport sunburstVisual from './sunburstVisual.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport { installSunburstAction } from './sunburstAction.js';\nexport function install(registers) {\n  registers.registerChartView(SunburstView);\n  registers.registerSeriesModel(SunburstSeriesModel);\n  registers.registerLayout(curry(sunburstLayout, 'sunburst'));\n  registers.registerProcessor(curry(dataFilter, 'sunburst'));\n  registers.registerVisual(sunburstVisual);\n  installSunburstAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { ECPolygon } from '../line/poly.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { bind } from 'zrender/lib/core/util.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport ChartView from '../../view/Chart.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\n\nvar ThemeRiverView =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverView, _super);\n\n  function ThemeRiverView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverView.type;\n    _this._layers = [];\n    return _this;\n  }\n\n  ThemeRiverView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var self = this;\n    var group = this.group;\n    var layersSeries = seriesModel.getLayerSeries();\n    var layoutInfo = data.getLayout('layoutInfo');\n    var rect = layoutInfo.rect;\n    var boundaryGap = layoutInfo.boundaryGap;\n    group.x = 0;\n    group.y = rect.y + boundaryGap[0];\n\n    function keyGetter(item) {\n      return item.name;\n    }\n\n    var dataDiffer = new DataDiffer(this._layersSeries || [], layersSeries, keyGetter, keyGetter);\n    var newLayersGroups = [];\n    dataDiffer.add(bind(process, this, 'add')).update(bind(process, this, 'update')).remove(bind(process, this, 'remove')).execute();\n\n    function process(status, idx, oldIdx) {\n      var oldLayersGroups = self._layers;\n\n      if (status === 'remove') {\n        group.remove(oldLayersGroups[idx]);\n        return;\n      }\n\n      var points0 = [];\n      var points1 = [];\n      var style;\n      var indices = layersSeries[idx].indices;\n      var j = 0;\n\n      for (; j < indices.length; j++) {\n        var layout = data.getItemLayout(indices[j]);\n        var x = layout.x;\n        var y0 = layout.y0;\n        var y = layout.y;\n        points0.push(x, y0);\n        points1.push(x, y0 + y);\n        style = data.getItemVisual(indices[j], 'style');\n      }\n\n      var polygon;\n      var textLayout = data.getItemLayout(indices[0]);\n      var labelModel = seriesModel.getModel('label');\n      var margin = labelModel.get('margin');\n      var emphasisModel = seriesModel.getModel('emphasis');\n\n      if (status === 'add') {\n        var layerGroup = newLayersGroups[idx] = new graphic.Group();\n        polygon = new ECPolygon({\n          shape: {\n            points: points0,\n            stackedOnPoints: points1,\n            smooth: 0.4,\n            stackedOnSmooth: 0.4,\n            smoothConstraint: false\n          },\n          z2: 0\n        });\n        layerGroup.add(polygon);\n        group.add(layerGroup);\n\n        if (seriesModel.isAnimationEnabled()) {\n          polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(), seriesModel, function () {\n            polygon.removeClipPath();\n          }));\n        }\n      } else {\n        var layerGroup = oldLayersGroups[oldIdx];\n        polygon = layerGroup.childAt(0);\n        group.add(layerGroup);\n        newLayersGroups[idx] = layerGroup;\n        graphic.updateProps(polygon, {\n          shape: {\n            points: points0,\n            stackedOnPoints: points1\n          }\n        }, seriesModel);\n        saveOldStyle(polygon);\n      }\n\n      setLabelStyle(polygon, getLabelStatesModels(seriesModel), {\n        labelDataIndex: indices[j - 1],\n        defaultText: data.getName(indices[j - 1]),\n        inheritColor: style.fill\n      }, {\n        normal: {\n          verticalAlign: 'middle' // align: 'right'\n\n        }\n      });\n      polygon.setTextConfig({\n        position: null,\n        local: true\n      });\n      var labelEl = polygon.getTextContent(); // TODO More label position options.\n\n      if (labelEl) {\n        labelEl.x = textLayout.x - margin;\n        labelEl.y = textLayout.y0 + textLayout.y / 2;\n      }\n\n      polygon.useStyle(style);\n      data.setItemGraphicEl(idx, polygon);\n      setStatesStylesFromModel(polygon, seriesModel);\n      toggleHoverEmphasis(polygon, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    }\n\n    this._layersSeries = layersSeries;\n    this._layers = newLayersGroups;\n  };\n\n  ThemeRiverView.type = 'themeRiver';\n  return ThemeRiverView;\n}(ChartView);\n\n; // add animation to the view\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      x: rect.x - 50,\n      width: rect.width + 100,\n      height: rect.height + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default ThemeRiverView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { groupData, SINGLE_REFERRING } from '../../util/model.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nvar DATA_NAME_INDEX = 2;\n\nvar ThemeRiverSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverSeriesModel, _super);\n\n  function ThemeRiverSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverSeriesModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  ThemeRiverSeriesModel.prototype.init = function (option) {\n    // eslint-disable-next-line\n    _super.prototype.init.apply(this, arguments); // Put this function here is for the sake of consistency of code style.\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n  /**\n   * If there is no value of a certain point in the time for some event,set it value to 0.\n   *\n   * @param {Array} data  initial data in the option\n   * @return {Array}\n   */\n\n\n  ThemeRiverSeriesModel.prototype.fixData = function (data) {\n    var rawDataLength = data.length;\n    /**\n     * Make sure every layer data get the same keys.\n     * The value index tells which layer has visited.\n     * {\n     *  2014/01/01: -1\n     * }\n     */\n\n    var timeValueKeys = {}; // grouped data by name\n\n    var groupResult = groupData(data, function (item) {\n      if (!timeValueKeys.hasOwnProperty(item[0] + '')) {\n        timeValueKeys[item[0] + ''] = -1;\n      }\n\n      return item[2];\n    });\n    var layerData = [];\n    groupResult.buckets.each(function (items, key) {\n      layerData.push({\n        name: key,\n        dataList: items\n      });\n    });\n    var layerNum = layerData.length;\n\n    for (var k = 0; k < layerNum; ++k) {\n      var name_1 = layerData[k].name;\n\n      for (var j = 0; j < layerData[k].dataList.length; ++j) {\n        var timeValue = layerData[k].dataList[j][0] + '';\n        timeValueKeys[timeValue] = k;\n      }\n\n      for (var timeValue in timeValueKeys) {\n        if (timeValueKeys.hasOwnProperty(timeValue) && timeValueKeys[timeValue] !== k) {\n          timeValueKeys[timeValue] = k;\n          data[rawDataLength] = [timeValue, 0, name_1];\n          rawDataLength++;\n        }\n      }\n    }\n\n    return data;\n  };\n  /**\n   * @override\n   * @param  option  the initial option that user gave\n   * @param  ecModel  the model object for themeRiver option\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var singleAxisModel = this.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    var axisType = singleAxisModel.get('type'); // filter the data item with the value of label is undefined\n\n    var filterData = zrUtil.filter(option.data, function (dataItem) {\n      return dataItem[2] !== undefined;\n    }); // ??? TODO design a stage to transfer data for themeRiver and lines?\n\n    var data = this.fixData(filterData || []);\n    var nameList = [];\n    var nameMap = this.nameMap = zrUtil.createHashMap();\n    var count = 0;\n\n    for (var i = 0; i < data.length; ++i) {\n      nameList.push(data[i][DATA_NAME_INDEX]);\n\n      if (!nameMap.get(data[i][DATA_NAME_INDEX])) {\n        nameMap.set(data[i][DATA_NAME_INDEX], count);\n        count++;\n      }\n    }\n\n    var dimensions = prepareSeriesDataSchema(data, {\n      coordDimensions: ['single'],\n      dimensionsDefine: [{\n        name: 'time',\n        type: getDimensionTypeByAxis(axisType)\n      }, {\n        name: 'value',\n        type: 'float'\n      }, {\n        name: 'name',\n        type: 'ordinal'\n      }],\n      encodeDefine: {\n        single: 0,\n        value: 1,\n        itemName: 2\n      }\n    }).dimensions;\n    var list = new SeriesData(dimensions, this);\n    list.initData(data);\n    return list;\n  };\n  /**\n   * The raw data is divided into multiple layers and each layer\n   *     has same name.\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getLayerSeries = function () {\n    var data = this.getData();\n    var lenCount = data.count();\n    var indexArr = [];\n\n    for (var i = 0; i < lenCount; ++i) {\n      indexArr[i] = i;\n    }\n\n    var timeDim = data.mapDimension('single'); // data group by name\n\n    var groupResult = groupData(indexArr, function (index) {\n      return data.get('name', index);\n    });\n    var layerSeries = [];\n    groupResult.buckets.each(function (items, key) {\n      items.sort(function (index1, index2) {\n        return data.get(timeDim, index1) - data.get(timeDim, index2);\n      });\n      layerSeries.push({\n        name: key,\n        indices: items\n      });\n    });\n    return layerSeries;\n  };\n  /**\n   * Get data indices for show tooltip content\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getAxisTooltipData = function (dim, value, baseAxis) {\n    if (!zrUtil.isArray(dim)) {\n      dim = dim ? [dim] : [];\n    }\n\n    var data = this.getData();\n    var layerSeries = this.getLayerSeries();\n    var indices = [];\n    var layerNum = layerSeries.length;\n    var nestestValue;\n\n    for (var i = 0; i < layerNum; ++i) {\n      var minDist = Number.MAX_VALUE;\n      var nearestIdx = -1;\n      var pointNum = layerSeries[i].indices.length;\n\n      for (var j = 0; j < pointNum; ++j) {\n        var theValue = data.get(dim[0], layerSeries[i].indices[j]);\n        var dist = Math.abs(theValue - value);\n\n        if (dist <= minDist) {\n          nestestValue = theValue;\n          minDist = dist;\n          nearestIdx = layerSeries[i].indices[j];\n        }\n      }\n\n      indices.push(nearestIdx);\n    }\n\n    return {\n      dataIndices: indices,\n      nestestValue: nestestValue\n    };\n  };\n\n  ThemeRiverSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var name = data.getName(dataIndex);\n    var value = data.get(data.mapDimension('value'), dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n\n  ThemeRiverSeriesModel.type = 'series.themeRiver';\n  ThemeRiverSeriesModel.dependencies = ['singleAxis'];\n  ThemeRiverSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'singleAxis',\n    // gap in axis's orthogonal orientation\n    boundaryGap: ['10%', '10%'],\n    // legendHoverLink: true,\n    singleAxisIndex: 0,\n    animationEasing: 'linear',\n    label: {\n      margin: 4,\n      show: true,\n      position: 'left',\n      fontSize: 11\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return ThemeRiverSeriesModel;\n}(SeriesModel);\n\nexport default ThemeRiverSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nexport default function themeRiverLayout(ecModel, api) {\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\n    var data = seriesModel.getData();\n    var single = seriesModel.coordinateSystem;\n    var layoutInfo = {}; // use the axis boundingRect for view\n\n    var rect = single.getRect();\n    layoutInfo.rect = rect;\n    var boundaryGap = seriesModel.get('boundaryGap');\n    var axis = single.getAxis();\n    layoutInfo.boundaryGap = boundaryGap;\n\n    if (axis.orient === 'horizontal') {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.height);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.height);\n      var height = rect.height - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, height);\n    } else {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.width);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.width);\n      var width = rect.width - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, width);\n    }\n\n    data.setLayout('layoutInfo', layoutInfo);\n  });\n}\n/**\n * The layout information about themeriver\n *\n * @param data  data in the series\n * @param seriesModel  the model object of themeRiver series\n * @param height  value used to compute every series height\n */\n\nfunction doThemeRiverLayout(data, seriesModel, height) {\n  if (!data.count()) {\n    return;\n  }\n\n  var coordSys = seriesModel.coordinateSystem; // the data in each layer are organized into a series.\n\n  var layerSeries = seriesModel.getLayerSeries(); // the points in each layer.\n\n  var timeDim = data.mapDimension('single');\n  var valueDim = data.mapDimension('value');\n  var layerPoints = zrUtil.map(layerSeries, function (singleLayer) {\n    return zrUtil.map(singleLayer.indices, function (idx) {\n      var pt = coordSys.dataToPoint(data.get(timeDim, idx));\n      pt[1] = data.get(valueDim, idx);\n      return pt;\n    });\n  });\n  var base = computeBaseline(layerPoints);\n  var baseLine = base.y0;\n  var ky = height / base.max; // set layout information for each item.\n\n  var n = layerSeries.length;\n  var m = layerSeries[0].indices.length;\n  var baseY0;\n\n  for (var j = 0; j < m; ++j) {\n    baseY0 = baseLine[j] * ky;\n    data.setItemLayout(layerSeries[0].indices[j], {\n      layerIndex: 0,\n      x: layerPoints[0][j][0],\n      y0: baseY0,\n      y: layerPoints[0][j][1] * ky\n    });\n\n    for (var i = 1; i < n; ++i) {\n      baseY0 += layerPoints[i - 1][j][1] * ky;\n      data.setItemLayout(layerSeries[i].indices[j], {\n        layerIndex: i,\n        x: layerPoints[i][j][0],\n        y0: baseY0,\n        y: layerPoints[i][j][1] * ky\n      });\n    }\n  }\n}\n/**\n * Compute the baseLine of the rawdata\n * Inspired by Lee Byron's paper Stacked Graphs - Geometry & Aesthetics\n *\n * @param  data  the points in each layer\n */\n\n\nfunction computeBaseline(data) {\n  var layerNum = data.length;\n  var pointNum = data[0].length;\n  var sums = [];\n  var y0 = [];\n  var max = 0;\n\n  for (var i = 0; i < pointNum; ++i) {\n    var temp = 0;\n\n    for (var j = 0; j < layerNum; ++j) {\n      temp += data[j][i][1];\n    }\n\n    if (temp > max) {\n      max = temp;\n    }\n\n    sums.push(temp);\n  }\n\n  for (var k = 0; k < pointNum; ++k) {\n    y0[k] = (max - sums[k]) / 2;\n  }\n\n  max = 0;\n\n  for (var l = 0; l < pointNum; ++l) {\n    var sum = sums[l] + y0[l];\n\n    if (sum > max) {\n      max = sum;\n    }\n  }\n\n  return {\n    y0: y0,\n    max: max\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport ThemeRiverView from './ThemeRiverView.js';\nimport ThemeRiverSeriesModel from './ThemeRiverSeries.js';\nimport themeRiverLayout from './themeRiverLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(ThemeRiverView);\n  registers.registerSeriesModel(ThemeRiverSeriesModel);\n  registers.registerLayout(themeRiverLayout);\n  registers.registerProcessor(dataFilter('themeRiver'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport Model from '../../model/Model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\n\nvar TreeSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(TreeSeriesModel, _super);\n\n  function TreeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.hasSymbolVisual = true; // Do it self.\n\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n  /**\n   * Init a tree data structure from data in option series\n   */\n\n\n  TreeSeriesModel.prototype.getInitialData = function (option) {\n    // create a virtual root\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    var leaves = option.leaves || {};\n    var leavesModel = new Model(leaves, this, this.ecModel);\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n\n        if (!(node && node.children.length && node.isExpand)) {\n          model.parentModel = leavesModel;\n        }\n\n        return model;\n      });\n    }\n\n    var treeDepth = 0;\n    tree.eachNode('preorder', function (node) {\n      if (node.depth > treeDepth) {\n        treeDepth = node.depth;\n      }\n    });\n    var expandAndCollapse = option.expandAndCollapse;\n    var expandTreeDepth = expandAndCollapse && option.initialTreeDepth >= 0 ? option.initialTreeDepth : treeDepth;\n    tree.root.eachNode('preorder', function (node) {\n      var item = node.hostTree.data.getRawDataItem(node.dataIndex); // Add item.collapsed != null, because users can collapse node original in the series.data.\n\n      node.isExpand = item && item.collapsed != null ? !item.collapsed : node.depth <= expandTreeDepth;\n    });\n    return tree.data;\n  };\n  /**\n   * Make the configuration 'orient' backward compatibly, with 'horizontal = LR', 'vertical = TB'.\n   * @returns {string} orient\n   */\n\n\n  TreeSeriesModel.prototype.getOrient = function () {\n    var orient = this.get('orient');\n\n    if (orient === 'horizontal') {\n      orient = 'LR';\n    } else if (orient === 'vertical') {\n      orient = 'TB';\n    }\n\n    return orient;\n  };\n\n  TreeSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  TreeSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  TreeSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var tree = this.getData().tree;\n    var realRoot = tree.root.children[0];\n    var node = tree.getNodeByDataIndex(dataIndex);\n    var value = node.getValue();\n    var name = node.name;\n\n    while (node && node !== realRoot) {\n      name = node.parentNode.name + '.' + name;\n      node = node.parentNode;\n    }\n\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value,\n      noValue: isNaN(value) || value == null\n    });\n  }; // Add tree path to tooltip param\n\n\n  TreeSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this);\n    params.collapsed = !node.isExpand;\n    return params;\n  };\n\n  TreeSeriesModel.type = 'series.tree'; // can support the position parameters 'left', 'top','right','bottom', 'width',\n  // 'height' in the setOption() with 'merge' mode normal.\n\n  TreeSeriesModel.layoutMode = 'box';\n  TreeSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // the position of the whole view\n    left: '12%',\n    top: '12%',\n    right: '12%',\n    bottom: '12%',\n    // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'\n    layout: 'orthogonal',\n    // value can be 'polyline'\n    edgeShape: 'curve',\n    edgeForkPosition: '50%',\n    // true | false | 'move' | 'scale', see module:component/helper/RoamController.\n    roam: false,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.4,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    orient: 'LR',\n    symbol: 'emptyCircle',\n    symbolSize: 7,\n    expandAndCollapse: true,\n    initialTreeDepth: 2,\n    lineStyle: {\n      color: '#ccc',\n      width: 1.5,\n      curveness: 0.5\n    },\n    itemStyle: {\n      color: 'lightsteelblue',\n      // borderColor: '#c23531',\n      borderWidth: 1.5\n    },\n    label: {\n      show: true\n    },\n    animationEasing: 'linear',\n    animationDuration: 700,\n    animationDurationUpdate: 500\n  };\n  return TreeSeriesModel;\n}(SeriesModel);\n\nexport default TreeSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport SymbolClz from '../helper/Symbol.js';\nimport { radialCoordinate } from './layoutHelper.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport View from '../../coord/View.js';\nimport * as roamHelper from '../../component/helper/roamHelper.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper.js';\nimport { parsePercent } from '../../util/number.js';\nimport ChartView from '../../view/Chart.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { setStatesStylesFromModel, setStatesFlag, setDefaultStateProxy, HOVER_STATE_BLUR } from '../../util/states.js';\n\nvar TreeEdgeShape =\n/** @class */\nfunction () {\n  function TreeEdgeShape() {\n    this.parentPoint = [];\n    this.childPoints = [];\n  }\n\n  return TreeEdgeShape;\n}();\n\nvar TreePath =\n/** @class */\nfunction (_super) {\n  __extends(TreePath, _super);\n\n  function TreePath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  TreePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  TreePath.prototype.getDefaultShape = function () {\n    return new TreeEdgeShape();\n  };\n\n  TreePath.prototype.buildPath = function (ctx, shape) {\n    var childPoints = shape.childPoints;\n    var childLen = childPoints.length;\n    var parentPoint = shape.parentPoint;\n    var firstChildPos = childPoints[0];\n    var lastChildPos = childPoints[childLen - 1];\n\n    if (childLen === 1) {\n      ctx.moveTo(parentPoint[0], parentPoint[1]);\n      ctx.lineTo(firstChildPos[0], firstChildPos[1]);\n      return;\n    }\n\n    var orient = shape.orient;\n    var forkDim = orient === 'TB' || orient === 'BT' ? 0 : 1;\n    var otherDim = 1 - forkDim;\n    var forkPosition = parsePercent(shape.forkPosition, 1);\n    var tmpPoint = [];\n    tmpPoint[forkDim] = parentPoint[forkDim];\n    tmpPoint[otherDim] = parentPoint[otherDim] + (lastChildPos[otherDim] - parentPoint[otherDim]) * forkPosition;\n    ctx.moveTo(parentPoint[0], parentPoint[1]);\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.moveTo(firstChildPos[0], firstChildPos[1]);\n    tmpPoint[forkDim] = firstChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    tmpPoint[forkDim] = lastChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.lineTo(lastChildPos[0], lastChildPos[1]);\n\n    for (var i = 1; i < childLen - 1; i++) {\n      var point = childPoints[i];\n      ctx.moveTo(point[0], point[1]);\n      tmpPoint[forkDim] = point[forkDim];\n      ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    }\n  };\n\n  return TreePath;\n}(Path);\n\nvar TreeView =\n/** @class */\nfunction (_super) {\n  __extends(TreeView, _super);\n\n  function TreeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreeView.type;\n    _this._mainGroup = new graphic.Group();\n    return _this;\n  }\n\n  TreeView.prototype.init = function (ecModel, api) {\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  };\n\n  TreeView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n\n    if (layout === 'radial') {\n      group.x = layoutInfo.x + layoutInfo.width / 2;\n      group.y = layoutInfo.y + layoutInfo.height / 2;\n    } else {\n      group.x = layoutInfo.x;\n      group.y = layoutInfo.y;\n    }\n\n    this._updateViewCoordSys(seriesModel, api);\n\n    this._updateController(seriesModel, ecModel, api);\n\n    var oldData = this._data;\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // Create node and edge\n        updateNode(data, newIdx, null, group, seriesModel);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n        return;\n      } // Update node and edge\n\n\n      updateNode(data, newIdx, symbolEl, group, seriesModel);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // When remove a collapsed node of subtree, since the collapsed\n      // node haven't been initialized with a symbol element,\n      // you can't found it's symbol element through index.\n      // so if we want to remove the symbol element we should insure\n      // that the symbol element is not null.\n\n      if (symbolEl) {\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n      }\n    }).execute();\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n\n    this._updateNodeAndLinkScale(seriesModel);\n\n    if (seriesModel.get('expandAndCollapse') === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n\n    this._data = data;\n  };\n\n  TreeView.prototype._updateViewCoordSys = function (seriesModel, api) {\n    var data = seriesModel.getData();\n    var points = [];\n    data.each(function (idx) {\n      var layout = data.getItemLayout(idx);\n\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\n        points.push([+layout.x, +layout.y]);\n      }\n    });\n    var min = [];\n    var max = [];\n    bbox.fromPoints(points, min, max); // If don't Store min max when collapse the root node after roam,\n    // the root node will disappear.\n\n    var oldMin = this._min;\n    var oldMax = this._max; // If width or height is 0\n\n    if (max[0] - min[0] === 0) {\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\n    }\n\n    if (max[1] - min[1] === 0) {\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\n    }\n\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    viewCoordSys.setCenter(seriesModel.get('center'), api);\n    viewCoordSys.setZoom(seriesModel.get('zoom')); // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\n\n    this.group.attr({\n      x: viewCoordSys.x,\n      y: viewCoordSys.y,\n      scaleX: viewCoordSys.scaleX,\n      scaleY: viewCoordSys.scaleY\n    });\n    this._min = min;\n    this._max = max;\n  };\n\n  TreeView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale(seriesModel); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  TreeView.prototype._updateNodeAndLinkScale = function (seriesModel) {\n    var data = seriesModel.getData();\n\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n\n    data.eachItemGraphicEl(function (el, idx) {\n      el.setSymbolScale(nodeScale);\n    });\n  };\n\n  TreeView.prototype._getNodeGlobalScale = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupZoom = coordSys.scaleX || 1; // Scale node when zoom changes\n\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  };\n\n  TreeView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  TreeView.prototype.remove = function () {\n    this._mainGroup.removeAll();\n\n    this._data = null;\n  };\n\n  TreeView.type = 'tree';\n  return TreeView;\n}(ChartView);\n\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y);\n}\n\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var visualColor = node.getVisual('style').fill;\n  var symbolInnerColor = node.isExpand === false && node.children.length !== 0 ? visualColor : '#fff';\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.__oldX,\n    y: sourceSymbolEl.__oldY,\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n    symbolEl.x = sourceOldLayout.x;\n    symbolEl.y = sourceOldLayout.y;\n  } else {\n    symbolEl.updateData(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n  }\n\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  symbolEl.__oldX = symbolEl.x;\n  symbolEl.__oldY = symbolEl.y;\n  graphic.updateProps(symbolEl, {\n    x: targetLayout.x,\n    y: targetLayout.y\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n\n  if (seriesModel.get('layout') === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length_1 = realRoot.children.length;\n    var rad = void 0;\n    var isLeft = void 0;\n\n    if (targetLayout.x === rootLayout.x && node.isExpand === true && realRoot.children.length) {\n      var center = {\n        x: (realRoot.children[0].getLayout().x + realRoot.children[length_1 - 1].getLayout().x) / 2,\n        y: (realRoot.children[0].getLayout().y + realRoot.children[length_1 - 1].getLayout().y) / 2\n      };\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      isLeft = center.x < rootLayout.x;\n\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    var normalLabelModel = itemModel.getModel('label');\n    var rotate = normalLabelModel.get('rotate');\n    var labelRotateRadian = rotate * (Math.PI / 180);\n    var textContent = symbolPath.getTextContent();\n\n    if (textContent) {\n      symbolPath.setTextConfig({\n        position: normalLabelModel.get('position') || textPosition,\n        rotation: rotate == null ? -rad : labelRotateRadian,\n        origin: 'center'\n      });\n      textContent.setStyle('verticalAlign', 'middle');\n    }\n  } // Handle status\n\n\n  var focus = itemModel.get(['emphasis', 'focus']);\n  var focusDataIndices = focus === 'relative' ? zrUtil.concatArray(node.getAncestorsIndices(), node.getDescendantIndices()) : focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : null;\n\n  if (focusDataIndices) {\n    // Modify the focus to data indices.\n    getECData(symbolEl).focus = focusDataIndices;\n  }\n\n  drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group);\n\n  if (symbolEl.__edge) {\n    symbolEl.onHoverStateChange = function (toState) {\n      if (toState !== 'blur') {\n        // NOTE: Ensure the parent elements will been blurred firstly.\n        // According to the return of getAncestorsIndices and getDescendantIndices\n        // TODO: A bit tricky.\n        var parentEl = node.parentNode && data.getItemGraphicEl(node.parentNode.dataIndex);\n\n        if (!(parentEl && parentEl.hoverState === HOVER_STATE_BLUR)) {\n          setStatesFlag(symbolEl.__edge, toState);\n        }\n      }\n    };\n  }\n}\n\nfunction drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group) {\n  var itemModel = node.getModel();\n  var edgeShape = seriesModel.get('edgeShape');\n  var layout = seriesModel.get('layout');\n  var orient = seriesModel.getOrient();\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n  var edgeForkPosition = seriesModel.get('edgeForkPosition');\n  var lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n  var edge = symbolEl.__edge; // curve edge from node -> parent\n  // polyline edge from node -> children\n\n  if (edgeShape === 'curve') {\n    if (node.parentNode && node.parentNode !== virtualRoot) {\n      if (!edge) {\n        edge = symbolEl.__edge = new graphic.BezierCurve({\n          shape: getEdgeShape(layout, orient, curvature, sourceOldLayout, sourceOldLayout)\n        });\n      }\n\n      graphic.updateProps(edge, {\n        shape: getEdgeShape(layout, orient, curvature, sourceLayout, targetLayout)\n      }, seriesModel);\n    }\n  } else if (edgeShape === 'polyline') {\n    if (layout === 'orthogonal') {\n      if (node !== virtualRoot && node.children && node.children.length !== 0 && node.isExpand === true) {\n        var children = node.children;\n        var childPoints = [];\n\n        for (var i = 0; i < children.length; i++) {\n          var childLayout = children[i].getLayout();\n          childPoints.push([childLayout.x, childLayout.y]);\n        }\n\n        if (!edge) {\n          edge = symbolEl.__edge = new TreePath({\n            shape: {\n              parentPoint: [targetLayout.x, targetLayout.y],\n              childPoints: [[targetLayout.x, targetLayout.y]],\n              orient: orient,\n              forkPosition: edgeForkPosition\n            }\n          });\n        }\n\n        graphic.updateProps(edge, {\n          shape: {\n            parentPoint: [targetLayout.x, targetLayout.y],\n            childPoints: childPoints\n          }\n        }, seriesModel);\n      }\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('The polyline edgeShape can only be used in orthogonal layout');\n      }\n    }\n  } // show all edge when edgeShape is 'curve', filter node `isExpand` is false when edgeShape is 'polyline'\n\n\n  if (edge && !(edgeShape === 'polyline' && !node.isExpand)) {\n    edge.useStyle(zrUtil.defaults({\n      strokeNoScale: true,\n      fill: null\n    }, lineStyle));\n    setStatesStylesFromModel(edge, itemModel, 'lineStyle');\n    setDefaultStateProxy(edge);\n    group.add(edge);\n  }\n}\n\nfunction removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt) {\n  var virtualRoot = data.tree.root;\n\n  var _a = getSourceNode(virtualRoot, node),\n      source = _a.source,\n      sourceLayout = _a.sourceLayout;\n\n  var symbolEl = data.getItemGraphicEl(node.dataIndex);\n\n  if (!symbolEl) {\n    return;\n  }\n\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceEdge = sourceSymbolEl.__edge; // 1. when expand the sub tree, delete the children node should delete the edge of\n  // the source at the same time. because the polyline edge shape is only owned by the source.\n  // 2.when the node is the only children of the source, delete the node should delete the edge of\n  // the source at the same time. the same reason as above.\n\n  var edge = symbolEl.__edge || (source.isExpand === false || source.children.length === 1 ? sourceEdge : undefined);\n  var edgeShape = seriesModel.get('edgeShape');\n  var layoutOpt = seriesModel.get('layout');\n  var orient = seriesModel.get('orient');\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n\n  if (edge) {\n    if (edgeShape === 'curve') {\n      graphic.removeElement(edge, {\n        shape: getEdgeShape(layoutOpt, orient, curvature, sourceLayout, sourceLayout),\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    } else if (edgeShape === 'polyline' && seriesModel.get('layout') === 'orthogonal') {\n      graphic.removeElement(edge, {\n        shape: {\n          parentPoint: [sourceLayout.x, sourceLayout.y],\n          childPoints: [[sourceLayout.x, sourceLayout.y]]\n        },\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function () {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    }\n  }\n}\n\nfunction getSourceNode(virtualRoot, node) {\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceLayout;\n\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  }\n\n  return {\n    source: source,\n    sourceLayout: sourceLayout\n  };\n}\n\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var sourceLayout = getSourceNode(virtualRoot, node).sourceLayout; // Use same duration and easing with update to have more consistent animation.\n\n  var removeAnimationOpt = {\n    duration: seriesModel.get('animationDurationUpdate'),\n    easing: seriesModel.get('animationEasingUpdate')\n  };\n  graphic.removeElement(symbolEl, {\n    x: sourceLayout.x + 1,\n    y: sourceLayout.y + 1\n  }, seriesModel, {\n    cb: function () {\n      group.remove(symbolEl);\n      data.setItemGraphicEl(dataIndex, null);\n    },\n    removeOpt: removeAnimationOpt\n  });\n  symbolEl.fadeOut(null, data.hostModel, {\n    fadeLabel: true,\n    animation: removeAnimationOpt\n  }); // remove edge as parent node\n\n  node.children.forEach(function (childNode) {\n    removeNodeEdge(childNode, data, group, seriesModel, removeAnimationOpt);\n  }); // remove edge as child node\n\n  removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt);\n}\n\nfunction getEdgeShape(layoutOpt, orient, curvature, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var x1;\n  var x2;\n  var y1;\n  var y2;\n\n  if (layoutOpt === 'radial') {\n    x1 = sourceLayout.rawX;\n    y1 = sourceLayout.rawY;\n    x2 = targetLayout.rawX;\n    y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x || 0,\n      y1: radialCoor1.y || 0,\n      x2: radialCoor4.x || 0,\n      y2: radialCoor4.y || 0,\n      cpx1: radialCoor2.x || 0,\n      cpy1: radialCoor2.y || 0,\n      cpx2: radialCoor3.x || 0,\n      cpy2: radialCoor3.y || 0\n    };\n  } else {\n    x1 = sourceLayout.x;\n    y1 = sourceLayout.y;\n    x2 = targetLayout.x;\n    y2 = targetLayout.y;\n\n    if (orient === 'LR' || orient === 'RL') {\n      cpx1 = x1 + (x2 - x1) * curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * curvature;\n      cpy2 = y2;\n    }\n\n    if (orient === 'TB' || orient === 'BT') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * curvature;\n    }\n  }\n\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2,\n    cpx1: cpx1,\n    cpy1: cpy1,\n    cpx2: cpx2,\n    cpy2: cpy2\n  };\n}\n\nexport default TreeView;"],"names":["SankeyPathShape","this","x1","y1","x2","y2","cpx1","cpy1","cpx2","cpy2","extent","SankeyPath","_super","opts","call","__extends","prototype","getDefaultShape","buildPath","ctx","shape","moveTo","bezierCurveTo","orient","lineTo","closePath","highlight","enterEmphasis","downplay","leaveEmphasis","graphic","SankeyView","_this","apply","arguments","type","_focusAdjacencyDisabled","render","seriesModel","ecModel","api","sankeyView","graph","getGraph","group","layoutInfo","width","height","nodeData","getData","edgeData","get","_model","removeAll","x","y","eachEdge","edge","curve","ecData","getECData","dataIndex","seriesIndex","dataType","edgeModel","getModel","lineStyleModel","curvature","n1Layout","node1","getLayout","node1Model","dragX1","dragY1","n2Layout","node2","node2Model","dragX2","dragY2","edgeLayout","Math","max","dy","sy","ty","dx","setShape","useStyle","getItemStyle","style","fill","getVisual","decal","sourceColor","targetColor","isString","color","offset","setLabelStyle","getLabelStatesModels","labelFetcher","labelDataIndex","defaultText","setTextConfig","position","emphasisModel","setStatesStylesFromModel","model","add","setItemGraphicEl","focus","toggleHoverEmphasis","getAdjacentDataIndices","eachNode","node","layout","itemModel","dragX","dragY","rect","z2","id","disableLabelAnimation","setStyle","eachItemGraphicEl","el","getItemModel","drift","dirty","dispatchAction","seriesId","getRawIndex","localX","localY","ondragend","draggable","cursor","_data","isAnimationEnabled","setClipPath","createGridClipShape","getBoundingRect","removeClipPath","dispose","ChartView","cb","rectEl","SankeySeriesModel","getInitialData","option","links","edges","nodes","data","levels","levelModels","i","length","depth","Model","createGraphFromNodeEdge","beforeLink","wrapMethod","idx","parentModel","getItemLayout","nodeDepth","levelModel","getEdgeByIndex","setNodePosition","localPosition","dataItem","getEdgeData","formatTooltip","multipleSeries","noValue","val","isNaN","params","getDataParams","rawDataOpt","edgeValue","value","edgeName","source","target","createTooltipMarkup","name","getNodeByIndex","name_1","optionUpdated","nodeValue","defaultOption","z","coordinateSystem","left","top","right","bottom","nodeWidth","nodeGap","layoutIterations","label","show","fontSize","edgeLabel","nodeAlign","lineStyle","opacity","curveness","emphasis","select","itemStyle","borderColor","animationEasing","animationDuration","SeriesModel","sankeyLayout","eachSeriesByType","getViewRect","computeNodeValues","filteredNodes","zrUtil","iterations","layoutSankey","getBoxLayoutParams","getWidth","getHeight","computeNodeBreadths","computeNodeDepths","computeEdgeDepths","value1","sum","outEdges","getEdgeValue","value2","inEdges","nodeRawValue","getValue","setLayout","remainEdges","indegreeArr","zeroIndegrees","nextTargetNode","push","maxNodeDepth","item","hostGraph","getRawDataItem","isItemDepth","edgeIdx","indexEdge","indexOf","targetNode","nodeIndex","Error","maxDepth","adjustNodeWithNodeAlign","kx","scaleNodeBreadths","isNodeDepth","nextSourceNode","remainNodes","nodeHeight","skNodeHeight","j","moveSinksRight","nodesByBreadth","prepareNodesByBreadth","initializeNodeDepth","resolveCollisions","alpha","relaxRightToLeft","relaxLeftToRight","keyAttr","groupResult","groupData","keys","sort","a","b","key","buckets","minKy","Infinity","n","ky","nodeDy","edgeDy","nodeX","y0","nodeDyAttr","viewWidth","slice","reverse","weightedTarget","len","centerTarget","center","nodeY","weightedSource","centerSource","array","sankeyVisual","minValue_1","maxValue_1","mapping","VisualMapping","mappingMethod","dataExtent","visual","mapValueToColor","mapValueToVisual","customColor","setVisual","edgeStyle","install","registers","registerChartView","registerSeriesModel","registerLayout","registerVisual","registerAction","event","update","payload","eachComponent","mainType","subType","query","ScatterSeriesModel","hasSymbolVisual","createSeriesData","useEncodeDefaulter","getProgressive","progressive","large","getProgressiveThreshold","progressiveThreshold","brushSelector","selectors","point","getZLevelKey","count","dependencies","legendHoverLink","symbolSize","largeThreshold","scale","clip","universalTransition","divideShape","ScatterView","symbolDraw","_updateSymbolDraw","updateData","clipShape","_getClipShape","_finished","incrementalPrepareRender","incrementalPrepareUpdate","incrementalRender","taskParams","_symbolDraw","incrementalUpdate","end","updateTransform","res","pointsLayout","reset","progress","start","updateLayout","eachRendered","coordSys","clipArea","getArea","pipelineContext","isLargeDraw","_isLargeDraw","remove","LargeSymbolDraw","SymbolDraw","use","installGridSimple","layoutPoints","DEFAULT_SECTOR_Z","DEFAULT_TEXT_Z","SunburstPiece","textConfig","inside","text","silent","setTextContent","firstCreate","piece","_seriesModel","_ecModel","sector","sectorShape","normalStyle","lineJoin","createOrUpdatePatternFromDecal","cornerRadius","getSectorCornerRadius","SPECIAL_STATES","stateName","state","ensureState","itemStyleModel","r","r0","saveOldStyle","_updateLabel","cursorStyle","getShallow","attr","focusOrIndices","getAncestorsIndices","getDescendantIndices","normalLabelModel","angle","endAngle","startAngle","midAngle","cos","sin","getTextContent","labelMinAngle","PI","isNormalShown","abs","getLabelAttr","stateAttr","ignore","DISPLAY_STATES","labelStateModel","isNormal","getFormattedLabel","createTextStyle","isShown","labelPosition","sectorState","states","labelColor","outsideFill","labelPadding","textAlign","align","verticalAlign","cx","cy","rotateType","rotate","normalizeRadian","rotation","dirtyStyle","ROOT_TO_NODE_ACTION","HIGHLIGHT_ACTION","UNHIGHLIGHT_ACTION","installSunburstAction","handleRootToNode","index","targetInfo","retrieveTargetInfo","originViewRoot","getViewRoot","direction","aboveViewRoot","resetViewRoot","handleHighlight","extend","SunburstView","self","virtualRoot","tree","root","newRoot","renderLabelForZeroData","newChildren","oldChildren","_oldChildren","dualTravel","getKey","getId","processNode","newIdx","oldIdx","newNode","oldNode","doRenderNode","DataDiffer","execute","removeNode","renderRollUp","viewRoot","virtualPiece","off","on","e","_rootToNode","parentNode","_initEvents","targetFound","nodeClick","link","linkTarget","windowOpen","from","uid","containPoint","treeRoot","itemLayout","radius","sqrt","SunburstSeriesModel","ignoreStyleOnData","children","completeTreeValue","_levelModels","levelDefine","Tree","getNodeByDataIndex","treePathInfo","wrapTreePathInfo","getLevelModel","_viewRoot","getRawData","contains","enableAriaDecal","enableAriaDecalForTree","clockwise","minAngle","stillShowZeroSum","distance","borderWidth","borderType","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","blur","animationType","animationDurationUpdate","dataNode","child","childValue","thisValue","RADIAN","sunburstLayout","seriesType","size","min","parsePercent","rootDepth","initChildren","validDataCount","unitRadian","renderRollupNode","rPerLevel","dir","renderNode","rStart","rEnd","r0_1","r_1","radius_1","siblingAngle_1","sortOrder","sortTargets","isAsc_1","diff","sunburstVisual","paletteScope","pickColor","treeHeight","current","getColorFromPalette","lift","existsStyle","ensureUniqueItemVisual","curry","registerProcessor","dataFilter","ThemeRiverView","_layers","layersSeries","getLayerSeries","boundaryGap","keyGetter","dataDiffer","_layersSeries","newLayersGroups","process","status","oldLayersGroups","polygon","points0","points1","indices","getItemVisual","textLayout","labelModel","margin","layerGroup","ECPolygon","points","stackedOnPoints","smooth","stackedOnSmooth","smoothConstraint","childAt","getName","inheritColor","normal","local","labelEl","bind","DATA_NAME_INDEX","ThemeRiverSeriesModel","init","legendVisualProvider","LegendVisualProvider","fixData","rawDataLength","timeValueKeys","hasOwnProperty","layerData","each","items","dataList","layerNum","k","timeValue","singleAxisModel","getReferringComponents","SINGLE_REFERRING","models","axisType","filterData","undefined","nameList","nameMap","set","dimensions","prepareSeriesDataSchema","coordDimensions","dimensionsDefine","getDimensionTypeByAxis","encodeDefine","single","itemName","list","SeriesData","initData","lenCount","indexArr","timeDim","mapDimension","layerSeries","index1","index2","getAxisTooltipData","dim","baseAxis","nestestValue","minDist","Number","MAX_VALUE","nearestIdx","pointNum","theValue","dist","dataIndices","colorBy","singleAxisIndex","themeRiverLayout","getRect","axis","getAxis","numberUtil","doThemeRiverLayout","baseY0","valueDim","layerPoints","singleLayer","pt","dataToPoint","base","computeBaseline","baseLine","m","setItemLayout","layerIndex","sums","temp","l","TreeSeriesModel","leaves","leavesModel","isExpand","treeDepth","expandAndCollapse","expandTreeDepth","initialTreeDepth","hostTree","collapsed","getOrient","setZoom","zoom","setCenter","realRoot","treeAncestors","layoutMode","edgeShape","edgeForkPosition","roam","nodeScaleRatio","symbol","TreeEdgeShape","parentPoint","childPoints","TreePath","getDefaultStyle","stroke","childLen","firstChildPos","lastChildPos","forkDim","otherDim","forkPosition","tmpPoint","Path","TreeView","_mainGroup","_controller","RoamController","getZr","_controllerHost","_updateViewCoordSys","_updateController","oldData","symbolNeedsDraw","updateNode","symbolEl","getItemGraphicEl","_nodeScaleRatio","_updateNodeAndLinkScale","bbox","oldMin","_min","oldMax","_max","viewCoordSys","View","zoomLimit","setBoundingRect","scaleX","scaleY","controller","controllerHost","setPointerChecker","applyTransform","transform","contain","onIrrelevantElement","enable","getZoom","roamHelper","originX","originY","updateLabelLayout","nodeScale","_getNodeGlobalScale","setSymbolScale","groupZoom","roamZoom","isInit","visualColor","symbolInnerColor","sourceSymbolEl","sourceLayout","sourceOldLayout","__oldX","__oldY","rawX","__radialOldRawX","rawY","__radialOldRawY","targetLayout","SymbolClz","useNameLabel","__radialRawX","__radialRawY","symbolPath","getSymbolPath","rootLayout","length_1","rad","isLeft","atan2","textPosition","labelRotateRadian","textContent","origin","focusDataIndices","drawEdge","__edge","onHoverStateChange","toState","parentEl","hoverState","HOVER_STATE_BLUR","setStatesFlag","getLineStyle","getEdgeShape","childLayout","strokeNoScale","setDefaultStateProxy","removeNodeEdge","removeAnimationOpt","_a","getSourceNode","sourceEdge","layoutOpt","removeOpt","duration","easing","fadeOut","hostModel","fadeLabel","animation","forEach","childNode","radialCoor1","radialCoordinate","radialCoor2","radialCoor3","radialCoor4"],"sourceRoot":""}
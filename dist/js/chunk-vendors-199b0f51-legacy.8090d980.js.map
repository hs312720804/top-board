{"version":3,"file":"js/chunk-vendors-199b0f51-legacy.8090d980.js","mappings":"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","sources":["webpack://databoard/./node_modules/zrender/lib/core/vector.js","webpack://databoard/./node_modules/zrender/lib/dom/HandlerProxy.js","webpack://databoard/./node_modules/zrender/lib/graphic/CompoundPath.js","webpack://databoard/./node_modules/zrender/lib/graphic/Displayable.js","webpack://databoard/./node_modules/zrender/lib/graphic/Gradient.js","webpack://databoard/./node_modules/zrender/lib/graphic/Group.js","webpack://databoard/./node_modules/zrender/lib/graphic/Image.js","webpack://databoard/./node_modules/zrender/lib/graphic/IncrementalDisplayable.js","webpack://databoard/./node_modules/zrender/lib/graphic/LinearGradient.js","webpack://databoard/./node_modules/zrender/lib/graphic/Path.js","webpack://databoard/./node_modules/zrender/lib/graphic/RadialGradient.js","webpack://databoard/./node_modules/zrender/lib/graphic/TSpan.js","webpack://databoard/./node_modules/zrender/lib/graphic/Text.js","webpack://databoard/./node_modules/zrender/lib/graphic/constants.js","webpack://databoard/./node_modules/zrender/lib/graphic/helper/image.js","webpack://databoard/./node_modules/zrender/lib/graphic/helper/parseText.js","webpack://databoard/./node_modules/zrender/lib/graphic/helper/smoothBezier.js","webpack://databoard/./node_modules/zrender/lib/graphic/helper/poly.js","webpack://databoard/./node_modules/zrender/lib/graphic/helper/subPixelOptimize.js","webpack://databoard/./node_modules/zrender/lib/graphic/shape/Arc.js","webpack://databoard/./node_modules/zrender/lib/graphic/shape/BezierCurve.js","webpack://databoard/./node_modules/zrender/lib/graphic/shape/Circle.js","webpack://databoard/./node_modules/zrender/lib/graphic/shape/Ellipse.js","webpack://databoard/./node_modules/zrender/lib/graphic/shape/Line.js","webpack://databoard/./node_modules/zrender/lib/graphic/shape/Polygon.js","webpack://databoard/./node_modules/zrender/lib/graphic/shape/Polyline.js","webpack://databoard/./node_modules/zrender/lib/graphic/helper/roundRect.js","webpack://databoard/./node_modules/zrender/lib/graphic/shape/Rect.js","webpack://databoard/./node_modules/zrender/lib/graphic/shape/Ring.js","webpack://databoard/./node_modules/zrender/lib/graphic/helper/roundSector.js","webpack://databoard/./node_modules/zrender/lib/graphic/shape/Sector.js","webpack://databoard/./node_modules/zrender/lib/mixin/Draggable.js","webpack://databoard/./node_modules/zrender/lib/svg/SVGPathRebuilder.js","webpack://databoard/./node_modules/zrender/lib/svg/mapStyleToAttrs.js","webpack://databoard/./node_modules/zrender/lib/svg/core.js","webpack://databoard/./node_modules/zrender/lib/svg/cssAnimation.js","webpack://databoard/./node_modules/zrender/lib/svg/graphic.js","webpack://databoard/./node_modules/zrender/lib/svg/domapi.js","webpack://databoard/./node_modules/zrender/lib/svg/patch.js","webpack://databoard/./node_modules/zrender/lib/svg/Painter.js","webpack://databoard/./node_modules/zrender/lib/svg/helper.js"],"sourcesContent":["export function create(x, y) {\n    if (x == null) {\n        x = 0;\n    }\n    if (y == null) {\n        y = 0;\n    }\n    return [x, y];\n}\nexport function copy(out, v) {\n    out[0] = v[0];\n    out[1] = v[1];\n    return out;\n}\nexport function clone(v) {\n    return [v[0], v[1]];\n}\nexport function set(out, a, b) {\n    out[0] = a;\n    out[1] = b;\n    return out;\n}\nexport function add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n}\nexport function scaleAndAdd(out, v1, v2, a) {\n    out[0] = v1[0] + v2[0] * a;\n    out[1] = v1[1] + v2[1] * a;\n    return out;\n}\nexport function sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n}\nexport function len(v) {\n    return Math.sqrt(lenSquare(v));\n}\nexport var length = len;\nexport function lenSquare(v) {\n    return v[0] * v[0] + v[1] * v[1];\n}\nexport var lengthSquare = lenSquare;\nexport function mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    return out;\n}\nexport function div(out, v1, v2) {\n    out[0] = v1[0] / v2[0];\n    out[1] = v1[1] / v2[1];\n    return out;\n}\nexport function dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n}\nexport function scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    return out;\n}\nexport function normalize(out, v) {\n    var d = len(v);\n    if (d === 0) {\n        out[0] = 0;\n        out[1] = 0;\n    }\n    else {\n        out[0] = v[0] / d;\n        out[1] = v[1] / d;\n    }\n    return out;\n}\nexport function distance(v1, v2) {\n    return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\nexport var dist = distance;\nexport function distanceSquare(v1, v2) {\n    return (v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\nexport var distSquare = distanceSquare;\nexport function negate(out, v) {\n    out[0] = -v[0];\n    out[1] = -v[1];\n    return out;\n}\nexport function lerp(out, v1, v2, t) {\n    out[0] = v1[0] + t * (v2[0] - v1[0]);\n    out[1] = v1[1] + t * (v2[1] - v1[1]);\n    return out;\n}\nexport function applyTransform(out, v, m) {\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\nexport function min(out, v1, v2) {\n    out[0] = Math.min(v1[0], v2[0]);\n    out[1] = Math.min(v1[1], v2[1]);\n    return out;\n}\nexport function max(out, v1, v2) {\n    out[0] = Math.max(v1[0], v2[0]);\n    out[1] = Math.max(v1[1], v2[1]);\n    return out;\n}\n","import { __extends } from \"tslib\";\nimport { addEventListener, removeEventListener, normalizeEvent, getNativeEvent } from '../core/event.js';\nimport * as zrUtil from '../core/util.js';\nimport Eventful from '../core/Eventful.js';\nimport env from '../core/env.js';\nvar TOUCH_CLICK_DELAY = 300;\nvar globalEventSupported = env.domSupported;\nvar localNativeListenerNames = (function () {\n    var mouseHandlerNames = [\n        'click', 'dblclick', 'mousewheel', 'wheel', 'mouseout',\n        'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n    ];\n    var touchHandlerNames = [\n        'touchstart', 'touchend', 'touchmove'\n    ];\n    var pointerEventNameMap = {\n        pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1\n    };\n    var pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n        var nm = name.replace('mouse', 'pointer');\n        return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n    });\n    return {\n        mouse: mouseHandlerNames,\n        touch: touchHandlerNames,\n        pointer: pointerHandlerNames\n    };\n})();\nvar globalNativeListenerNames = {\n    mouse: ['mousemove', 'mouseup'],\n    pointer: ['pointermove', 'pointerup']\n};\nvar wheelEventSupported = false;\nfunction isPointerFromTouch(event) {\n    var pointerType = event.pointerType;\n    return pointerType === 'pen' || pointerType === 'touch';\n}\nfunction setTouchTimer(scope) {\n    scope.touching = true;\n    if (scope.touchTimer != null) {\n        clearTimeout(scope.touchTimer);\n        scope.touchTimer = null;\n    }\n    scope.touchTimer = setTimeout(function () {\n        scope.touching = false;\n        scope.touchTimer = null;\n    }, 700);\n}\nfunction markTouch(event) {\n    event && (event.zrByTouch = true);\n}\nfunction normalizeGlobalEvent(instance, event) {\n    return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n}\nfunction isLocalEl(instance, el) {\n    var elTmp = el;\n    var isLocal = false;\n    while (elTmp && elTmp.nodeType !== 9\n        && !(isLocal = elTmp.domBelongToZr\n            || (elTmp !== el && elTmp === instance.painterRoot))) {\n        elTmp = elTmp.parentNode;\n    }\n    return isLocal;\n}\nvar FakeGlobalEvent = (function () {\n    function FakeGlobalEvent(instance, event) {\n        this.stopPropagation = zrUtil.noop;\n        this.stopImmediatePropagation = zrUtil.noop;\n        this.preventDefault = zrUtil.noop;\n        this.type = event.type;\n        this.target = this.currentTarget = instance.dom;\n        this.pointerType = event.pointerType;\n        this.clientX = event.clientX;\n        this.clientY = event.clientY;\n    }\n    return FakeGlobalEvent;\n}());\nvar localDOMHandlers = {\n    mousedown: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__mayPointerCapture = [event.zrX, event.zrY];\n        this.trigger('mousedown', event);\n    },\n    mousemove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var downPoint = this.__mayPointerCapture;\n        if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n            this.__togglePointerCapture(true);\n        }\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n    },\n    mouseout: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var element = event.toElement || event.relatedTarget;\n        if (!isLocalEl(this, element)) {\n            if (this.__pointerCapturing) {\n                event.zrEventControl = 'no_globalout';\n            }\n            this.trigger('mouseout', event);\n        }\n    },\n    wheel: function (event) {\n        wheelEventSupported = true;\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    mousewheel: function (event) {\n        if (wheelEventSupported) {\n            return;\n        }\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    touchstart: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.__lastTouchMoment = new Date();\n        this.handler.processGesture(event, 'start');\n        localDOMHandlers.mousemove.call(this, event);\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    touchmove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'change');\n        localDOMHandlers.mousemove.call(this, event);\n    },\n    touchend: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'end');\n        localDOMHandlers.mouseup.call(this, event);\n        if (+new Date() - (+this.__lastTouchMoment) < TOUCH_CLICK_DELAY) {\n            localDOMHandlers.click.call(this, event);\n        }\n    },\n    pointerdown: function (event) {\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        localDOMHandlers.mouseup.call(this, event);\n    },\n    pointerout: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mouseout.call(this, event);\n        }\n    }\n};\nzrUtil.each(['click', 'dblclick', 'contextmenu'], function (name) {\n    localDOMHandlers[name] = function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.trigger(name, event);\n    };\n});\nvar globalDOMHandlers = {\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            globalDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        globalDOMHandlers.mouseup.call(this, event);\n    },\n    mousemove: function (event) {\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        var pointerCaptureReleasing = this.__pointerCapturing;\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n        if (pointerCaptureReleasing) {\n            event.zrEventControl = 'only_globalout';\n            this.trigger('mouseout', event);\n        }\n    }\n};\nfunction mountLocalDOMEventListeners(instance, scope) {\n    var domHandlers = scope.domHandlers;\n    if (env.pointerEventsSupported) {\n        zrUtil.each(localNativeListenerNames.pointer, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                domHandlers[nativeEventName].call(instance, event);\n            });\n        });\n    }\n    else {\n        if (env.touchEventsSupported) {\n            zrUtil.each(localNativeListenerNames.touch, function (nativeEventName) {\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                    domHandlers[nativeEventName].call(instance, event);\n                    setTouchTimer(scope);\n                });\n            });\n        }\n        zrUtil.each(localNativeListenerNames.mouse, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                event = getNativeEvent(event);\n                if (!scope.touching) {\n                    domHandlers[nativeEventName].call(instance, event);\n                }\n            });\n        });\n    }\n}\nfunction mountGlobalDOMEventListeners(instance, scope) {\n    if (env.pointerEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.pointer, mount);\n    }\n    else if (!env.touchEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.mouse, mount);\n    }\n    function mount(nativeEventName) {\n        function nativeEventListener(event) {\n            event = getNativeEvent(event);\n            if (!isLocalEl(instance, event.target)) {\n                event = normalizeGlobalEvent(instance, event);\n                scope.domHandlers[nativeEventName].call(instance, event);\n            }\n        }\n        mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, { capture: true });\n    }\n}\nfunction mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n    scope.mounted[nativeEventName] = listener;\n    scope.listenerOpts[nativeEventName] = opt;\n    addEventListener(scope.domTarget, nativeEventName, listener, opt);\n}\nfunction unmountDOMEventListeners(scope) {\n    var mounted = scope.mounted;\n    for (var nativeEventName in mounted) {\n        if (mounted.hasOwnProperty(nativeEventName)) {\n            removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n        }\n    }\n    scope.mounted = {};\n}\nvar DOMHandlerScope = (function () {\n    function DOMHandlerScope(domTarget, domHandlers) {\n        this.mounted = {};\n        this.listenerOpts = {};\n        this.touching = false;\n        this.domTarget = domTarget;\n        this.domHandlers = domHandlers;\n    }\n    return DOMHandlerScope;\n}());\nvar HandlerDomProxy = (function (_super) {\n    __extends(HandlerDomProxy, _super);\n    function HandlerDomProxy(dom, painterRoot) {\n        var _this = _super.call(this) || this;\n        _this.__pointerCapturing = false;\n        _this.dom = dom;\n        _this.painterRoot = painterRoot;\n        _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n        if (globalEventSupported) {\n            _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n        }\n        mountLocalDOMEventListeners(_this, _this._localHandlerScope);\n        return _this;\n    }\n    HandlerDomProxy.prototype.dispose = function () {\n        unmountDOMEventListeners(this._localHandlerScope);\n        if (globalEventSupported) {\n            unmountDOMEventListeners(this._globalHandlerScope);\n        }\n    };\n    HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\n        this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n    };\n    HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\n        this.__mayPointerCapture = null;\n        if (globalEventSupported\n            && ((+this.__pointerCapturing) ^ (+isPointerCapturing))) {\n            this.__pointerCapturing = isPointerCapturing;\n            var globalHandlerScope = this._globalHandlerScope;\n            isPointerCapturing\n                ? mountGlobalDOMEventListeners(this, globalHandlerScope)\n                : unmountDOMEventListeners(globalHandlerScope);\n        }\n    };\n    return HandlerDomProxy;\n}(Eventful));\nexport default HandlerDomProxy;\n","import { __extends } from \"tslib\";\nimport Path from './Path.js';\nvar CompoundPath = (function (_super) {\n    __extends(CompoundPath, _super);\n    function CompoundPath() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'compound';\n        return _this;\n    }\n    CompoundPath.prototype._updatePathDirty = function () {\n        var paths = this.shape.paths;\n        var dirtyPath = this.shapeChanged();\n        for (var i = 0; i < paths.length; i++) {\n            dirtyPath = dirtyPath || paths[i].shapeChanged();\n        }\n        if (dirtyPath) {\n            this.dirtyShape();\n        }\n    };\n    CompoundPath.prototype.beforeBrush = function () {\n        this._updatePathDirty();\n        var paths = this.shape.paths || [];\n        var scale = this.getGlobalScale();\n        for (var i = 0; i < paths.length; i++) {\n            if (!paths[i].path) {\n                paths[i].createPathProxy();\n            }\n            paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n        }\n    };\n    CompoundPath.prototype.buildPath = function (ctx, shape) {\n        var paths = shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].buildPath(ctx, paths[i].shape, true);\n        }\n    };\n    CompoundPath.prototype.afterBrush = function () {\n        var paths = this.shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].pathUpdated();\n        }\n    };\n    CompoundPath.prototype.getBoundingRect = function () {\n        this._updatePathDirty.call(this);\n        return Path.prototype.getBoundingRect.call(this);\n    };\n    return CompoundPath;\n}(Path));\nexport default CompoundPath;\n","import { __extends } from \"tslib\";\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { keys, extend, createObject } from '../core/util.js';\nimport { REDRAW_BIT, STYLE_CHANGED_BIT } from './constants.js';\nvar STYLE_MAGIC_KEY = '__zr_style_' + Math.round((Math.random() * 10));\nexport var DEFAULT_COMMON_STYLE = {\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    shadowColor: '#000',\n    opacity: 1,\n    blend: 'source-over'\n};\nexport var DEFAULT_COMMON_ANIMATION_PROPS = {\n    style: {\n        shadowBlur: true,\n        shadowOffsetX: true,\n        shadowOffsetY: true,\n        shadowColor: true,\n        opacity: true\n    }\n};\nDEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\nvar PRIMARY_STATES_KEYS = ['z', 'z2', 'invisible'];\nvar PRIMARY_STATES_KEYS_IN_HOVER_LAYER = ['invisible'];\nvar Displayable = (function (_super) {\n    __extends(Displayable, _super);\n    function Displayable(props) {\n        return _super.call(this, props) || this;\n    }\n    Displayable.prototype._init = function (props) {\n        var keysArr = keys(props);\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            if (key === 'style') {\n                this.useStyle(props[key]);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, props[key]);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Displayable.prototype.beforeBrush = function () { };\n    Displayable.prototype.afterBrush = function () { };\n    Displayable.prototype.innerBeforeBrush = function () { };\n    Displayable.prototype.innerAfterBrush = function () { };\n    Displayable.prototype.shouldBePainted = function (viewWidth, viewHeight, considerClipPath, considerAncestors) {\n        var m = this.transform;\n        if (this.ignore\n            || this.invisible\n            || this.style.opacity === 0\n            || (this.culling\n                && isDisplayableCulled(this, viewWidth, viewHeight))\n            || (m && !m[0] && !m[3])) {\n            return false;\n        }\n        if (considerClipPath && this.__clipPaths) {\n            for (var i = 0; i < this.__clipPaths.length; ++i) {\n                if (this.__clipPaths[i].isZeroArea()) {\n                    return false;\n                }\n            }\n        }\n        if (considerAncestors && this.parent) {\n            var parent_1 = this.parent;\n            while (parent_1) {\n                if (parent_1.ignore) {\n                    return false;\n                }\n                parent_1 = parent_1.parent;\n            }\n        }\n        return true;\n    };\n    Displayable.prototype.contain = function (x, y) {\n        return this.rectContain(x, y);\n    };\n    Displayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    Displayable.prototype.rectContain = function (x, y) {\n        var coord = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        return rect.contain(coord[0], coord[1]);\n    };\n    Displayable.prototype.getPaintRect = function () {\n        var rect = this._paintRect;\n        if (!this._paintRect || this.__dirty) {\n            var transform = this.transform;\n            var elRect = this.getBoundingRect();\n            var style = this.style;\n            var shadowSize = style.shadowBlur || 0;\n            var shadowOffsetX = style.shadowOffsetX || 0;\n            var shadowOffsetY = style.shadowOffsetY || 0;\n            rect = this._paintRect || (this._paintRect = new BoundingRect(0, 0, 0, 0));\n            if (transform) {\n                BoundingRect.applyTransform(rect, elRect, transform);\n            }\n            else {\n                rect.copy(elRect);\n            }\n            if (shadowSize || shadowOffsetX || shadowOffsetY) {\n                rect.width += shadowSize * 2 + Math.abs(shadowOffsetX);\n                rect.height += shadowSize * 2 + Math.abs(shadowOffsetY);\n                rect.x = Math.min(rect.x, rect.x + shadowOffsetX - shadowSize);\n                rect.y = Math.min(rect.y, rect.y + shadowOffsetY - shadowSize);\n            }\n            var tolerance = this.dirtyRectTolerance;\n            if (!rect.isZero()) {\n                rect.x = Math.floor(rect.x - tolerance);\n                rect.y = Math.floor(rect.y - tolerance);\n                rect.width = Math.ceil(rect.width + 1 + tolerance * 2);\n                rect.height = Math.ceil(rect.height + 1 + tolerance * 2);\n            }\n        }\n        return rect;\n    };\n    Displayable.prototype.setPrevPaintRect = function (paintRect) {\n        if (paintRect) {\n            this._prevPaintRect = this._prevPaintRect || new BoundingRect(0, 0, 0, 0);\n            this._prevPaintRect.copy(paintRect);\n        }\n        else {\n            this._prevPaintRect = null;\n        }\n    };\n    Displayable.prototype.getPrevPaintRect = function () {\n        return this._prevPaintRect;\n    };\n    Displayable.prototype.animateStyle = function (loop) {\n        return this.animate('style', loop);\n    };\n    Displayable.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Displayable.prototype.attrKV = function (key, value) {\n        if (key !== 'style') {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n        else {\n            if (!this.style) {\n                this.useStyle(value);\n            }\n            else {\n                this.setStyle(value);\n            }\n        }\n    };\n    Displayable.prototype.setStyle = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.style[keyOrObj] = value;\n        }\n        else {\n            extend(this.style, keyOrObj);\n        }\n        this.dirtyStyle();\n        return this;\n    };\n    Displayable.prototype.dirtyStyle = function (notRedraw) {\n        if (!notRedraw) {\n            this.markRedraw();\n        }\n        this.__dirty |= STYLE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n    };\n    Displayable.prototype.dirty = function () {\n        this.dirtyStyle();\n    };\n    Displayable.prototype.styleChanged = function () {\n        return !!(this.__dirty & STYLE_CHANGED_BIT);\n    };\n    Displayable.prototype.styleUpdated = function () {\n        this.__dirty &= ~STYLE_CHANGED_BIT;\n    };\n    Displayable.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_COMMON_STYLE, obj);\n    };\n    Displayable.prototype.useStyle = function (obj) {\n        if (!obj[STYLE_MAGIC_KEY]) {\n            obj = this.createStyle(obj);\n        }\n        if (this.__inHover) {\n            this.__hoverStyle = obj;\n        }\n        else {\n            this.style = obj;\n        }\n        this.dirtyStyle();\n    };\n    Displayable.prototype.isStyleObject = function (obj) {\n        return obj[STYLE_MAGIC_KEY];\n    };\n    Displayable.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.style && !normalState.style) {\n            normalState.style = this._mergeStyle(this.createStyle(), this.style);\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetStyle;\n        if (state && state.style) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetStyle = state.style;\n                }\n                else {\n                    targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\n                    this._mergeStyle(targetStyle, state.style);\n                }\n            }\n            else {\n                targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\n                this._mergeStyle(targetStyle, state.style);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetStyle = normalState.style;\n        }\n        if (targetStyle) {\n            if (transition) {\n                var sourceStyle = this.style;\n                this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\n                if (needsRestoreToNormal) {\n                    var changedKeys = keys(sourceStyle);\n                    for (var i = 0; i < changedKeys.length; i++) {\n                        var key = changedKeys[i];\n                        if (key in targetStyle) {\n                            targetStyle[key] = targetStyle[key];\n                            this.style[key] = sourceStyle[key];\n                        }\n                    }\n                }\n                var targetKeys = keys(targetStyle);\n                for (var i = 0; i < targetKeys.length; i++) {\n                    var key = targetKeys[i];\n                    this.style[key] = this.style[key];\n                }\n                this._transitionState(stateName, {\n                    style: targetStyle\n                }, animationCfg, this.getAnimationStyleProps());\n            }\n            else {\n                this.useStyle(targetStyle);\n            }\n        }\n        var statesKeys = this.__inHover ? PRIMARY_STATES_KEYS_IN_HOVER_LAYER : PRIMARY_STATES_KEYS;\n        for (var i = 0; i < statesKeys.length; i++) {\n            var key = statesKeys[i];\n            if (state && state[key] != null) {\n                this[key] = state[key];\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    this[key] = normalState[key];\n                }\n            }\n        }\n    };\n    Displayable.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedStyle;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.style) {\n                mergedStyle = mergedStyle || {};\n                this._mergeStyle(mergedStyle, state.style);\n            }\n        }\n        if (mergedStyle) {\n            mergedState.style = mergedStyle;\n        }\n        return mergedState;\n    };\n    Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        extend(targetStyle, sourceStyle);\n        return targetStyle;\n    };\n    Displayable.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_COMMON_ANIMATION_PROPS;\n    };\n    Displayable.initDefaultProps = (function () {\n        var dispProto = Displayable.prototype;\n        dispProto.type = 'displayable';\n        dispProto.invisible = false;\n        dispProto.z = 0;\n        dispProto.z2 = 0;\n        dispProto.zlevel = 0;\n        dispProto.culling = false;\n        dispProto.cursor = 'pointer';\n        dispProto.rectHover = false;\n        dispProto.incremental = false;\n        dispProto._rect = null;\n        dispProto.dirtyRectTolerance = 0;\n        dispProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT;\n    })();\n    return Displayable;\n}(Element));\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar viewRect = new BoundingRect(0, 0, 0, 0);\nfunction isDisplayableCulled(el, width, height) {\n    tmpRect.copy(el.getBoundingRect());\n    if (el.transform) {\n        tmpRect.applyTransform(el.transform);\n    }\n    viewRect.width = width;\n    viewRect.height = height;\n    return !tmpRect.intersect(viewRect);\n}\nexport default Displayable;\n","var Gradient = (function () {\n    function Gradient(colorStops) {\n        this.colorStops = colorStops || [];\n    }\n    Gradient.prototype.addColorStop = function (offset, color) {\n        this.colorStops.push({\n            offset: offset,\n            color: color\n        });\n    };\n    return Gradient;\n}());\nexport default Gradient;\n","import { __extends } from \"tslib\";\nimport * as zrUtil from '../core/util.js';\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar Group = (function (_super) {\n    __extends(Group, _super);\n    function Group(opts) {\n        var _this = _super.call(this) || this;\n        _this.isGroup = true;\n        _this._children = [];\n        _this.attr(opts);\n        return _this;\n    }\n    Group.prototype.childrenRef = function () {\n        return this._children;\n    };\n    Group.prototype.children = function () {\n        return this._children.slice();\n    };\n    Group.prototype.childAt = function (idx) {\n        return this._children[idx];\n    };\n    Group.prototype.childOfName = function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].name === name) {\n                return children[i];\n            }\n        }\n    };\n    Group.prototype.childCount = function () {\n        return this._children.length;\n    };\n    Group.prototype.add = function (child) {\n        if (child) {\n            if (child !== this && child.parent !== this) {\n                this._children.push(child);\n                this._doAdd(child);\n            }\n            if (process.env.NODE_ENV !== 'production') {\n                if (child.__hostTarget) {\n                    throw 'This elemenet has been used as an attachment';\n                }\n            }\n        }\n        return this;\n    };\n    Group.prototype.addBefore = function (child, nextSibling) {\n        if (child && child !== this && child.parent !== this\n            && nextSibling && nextSibling.parent === this) {\n            var children = this._children;\n            var idx = children.indexOf(nextSibling);\n            if (idx >= 0) {\n                children.splice(idx, 0, child);\n                this._doAdd(child);\n            }\n        }\n        return this;\n    };\n    Group.prototype.replace = function (oldChild, newChild) {\n        var idx = zrUtil.indexOf(this._children, oldChild);\n        if (idx >= 0) {\n            this.replaceAt(newChild, idx);\n        }\n        return this;\n    };\n    Group.prototype.replaceAt = function (child, index) {\n        var children = this._children;\n        var old = children[index];\n        if (child && child !== this && child.parent !== this && child !== old) {\n            children[index] = child;\n            old.parent = null;\n            var zr = this.__zr;\n            if (zr) {\n                old.removeSelfFromZr(zr);\n            }\n            this._doAdd(child);\n        }\n        return this;\n    };\n    Group.prototype._doAdd = function (child) {\n        if (child.parent) {\n            child.parent.remove(child);\n        }\n        child.parent = this;\n        var zr = this.__zr;\n        if (zr && zr !== child.__zr) {\n            child.addSelfToZr(zr);\n        }\n        zr && zr.refresh();\n    };\n    Group.prototype.remove = function (child) {\n        var zr = this.__zr;\n        var children = this._children;\n        var idx = zrUtil.indexOf(children, child);\n        if (idx < 0) {\n            return this;\n        }\n        children.splice(idx, 1);\n        child.parent = null;\n        if (zr) {\n            child.removeSelfFromZr(zr);\n        }\n        zr && zr.refresh();\n        return this;\n    };\n    Group.prototype.removeAll = function () {\n        var children = this._children;\n        var zr = this.__zr;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (zr) {\n                child.removeSelfFromZr(zr);\n            }\n            child.parent = null;\n        }\n        children.length = 0;\n        return this;\n    };\n    Group.prototype.eachChild = function (cb, context) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            cb.call(context, child, i);\n        }\n        return this;\n    };\n    Group.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            var stopped = cb.call(context, child);\n            if (child.isGroup && !stopped) {\n                child.traverse(cb, context);\n            }\n        }\n        return this;\n    };\n    Group.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.addSelfToZr(zr);\n        }\n    };\n    Group.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.removeSelfFromZr(zr);\n        }\n    };\n    Group.prototype.getBoundingRect = function (includeChildren) {\n        var tmpRect = new BoundingRect(0, 0, 0, 0);\n        var children = includeChildren || this._children;\n        var tmpMat = [];\n        var rect = null;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (child.ignore || child.invisible) {\n                continue;\n            }\n            var childRect = child.getBoundingRect();\n            var transform = child.getLocalTransform(tmpMat);\n            if (transform) {\n                BoundingRect.applyTransform(tmpRect, childRect, transform);\n                rect = rect || tmpRect.clone();\n                rect.union(tmpRect);\n            }\n            else {\n                rect = rect || childRect.clone();\n                rect.union(childRect);\n            }\n        }\n        return rect || tmpRect;\n    };\n    return Group;\n}(Element));\nGroup.prototype.type = 'group';\nexport default Group;\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { defaults, createObject } from '../core/util.js';\nexport var DEFAULT_IMAGE_STYLE = defaults({\n    x: 0,\n    y: 0\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_IMAGE_ANIMATION_PROPS = {\n    style: defaults({\n        x: true,\n        y: true,\n        width: true,\n        height: true,\n        sx: true,\n        sy: true,\n        sWidth: true,\n        sHeight: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nfunction isImageLike(source) {\n    return !!(source\n        && typeof source !== 'string'\n        && source.width && source.height);\n}\nvar ZRImage = (function (_super) {\n    __extends(ZRImage, _super);\n    function ZRImage() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZRImage.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_IMAGE_STYLE, obj);\n    };\n    ZRImage.prototype._getSize = function (dim) {\n        var style = this.style;\n        var size = style[dim];\n        if (size != null) {\n            return size;\n        }\n        var imageSource = isImageLike(style.image)\n            ? style.image : this.__image;\n        if (!imageSource) {\n            return 0;\n        }\n        var otherDim = dim === 'width' ? 'height' : 'width';\n        var otherDimSize = style[otherDim];\n        if (otherDimSize == null) {\n            return imageSource[dim];\n        }\n        else {\n            return imageSource[dim] / imageSource[otherDim] * otherDimSize;\n        }\n    };\n    ZRImage.prototype.getWidth = function () {\n        return this._getSize('width');\n    };\n    ZRImage.prototype.getHeight = function () {\n        return this._getSize('height');\n    };\n    ZRImage.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_IMAGE_ANIMATION_PROPS;\n    };\n    ZRImage.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            this._rect = new BoundingRect(style.x || 0, style.y || 0, this.getWidth(), this.getHeight());\n        }\n        return this._rect;\n    };\n    return ZRImage;\n}(Displayable));\nZRImage.prototype.type = 'image';\nexport default ZRImage;\n","import { __extends } from \"tslib\";\nimport Displayble from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar m = [];\nvar IncrementalDisplayable = (function (_super) {\n    __extends(IncrementalDisplayable, _super);\n    function IncrementalDisplayable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.notClear = true;\n        _this.incremental = true;\n        _this._displayables = [];\n        _this._temporaryDisplayables = [];\n        _this._cursor = 0;\n        return _this;\n    }\n    IncrementalDisplayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    IncrementalDisplayable.prototype.useStyle = function () {\n        this.style = {};\n    };\n    IncrementalDisplayable.prototype.getCursor = function () {\n        return this._cursor;\n    };\n    IncrementalDisplayable.prototype.innerAfterBrush = function () {\n        this._cursor = this._displayables.length;\n    };\n    IncrementalDisplayable.prototype.clearDisplaybles = function () {\n        this._displayables = [];\n        this._temporaryDisplayables = [];\n        this._cursor = 0;\n        this.markRedraw();\n        this.notClear = false;\n    };\n    IncrementalDisplayable.prototype.clearTemporalDisplayables = function () {\n        this._temporaryDisplayables = [];\n    };\n    IncrementalDisplayable.prototype.addDisplayable = function (displayable, notPersistent) {\n        if (notPersistent) {\n            this._temporaryDisplayables.push(displayable);\n        }\n        else {\n            this._displayables.push(displayable);\n        }\n        this.markRedraw();\n    };\n    IncrementalDisplayable.prototype.addDisplayables = function (displayables, notPersistent) {\n        notPersistent = notPersistent || false;\n        for (var i = 0; i < displayables.length; i++) {\n            this.addDisplayable(displayables[i], notPersistent);\n        }\n    };\n    IncrementalDisplayable.prototype.getDisplayables = function () {\n        return this._displayables;\n    };\n    IncrementalDisplayable.prototype.getTemporalDisplayables = function () {\n        return this._temporaryDisplayables;\n    };\n    IncrementalDisplayable.prototype.eachPendingDisplayable = function (cb) {\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            cb && cb(this._displayables[i]);\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            cb && cb(this._temporaryDisplayables[i]);\n        }\n    };\n    IncrementalDisplayable.prototype.update = function () {\n        this.updateTransform();\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            var displayable = this._displayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            var displayable = this._temporaryDisplayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n    };\n    IncrementalDisplayable.prototype.getBoundingRect = function () {\n        if (!this._rect) {\n            var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                var childRect = displayable.getBoundingRect().clone();\n                if (displayable.needLocalTransform()) {\n                    childRect.applyTransform(displayable.getLocalTransform(m));\n                }\n                rect.union(childRect);\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    IncrementalDisplayable.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        if (rect.contain(localPos[0], localPos[1])) {\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                if (displayable.contain(x, y)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    return IncrementalDisplayable;\n}(Displayble));\nexport default IncrementalDisplayable;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar LinearGradient = (function (_super) {\n    __extends(LinearGradient, _super);\n    function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0 : x;\n        _this.y = y == null ? 0 : y;\n        _this.x2 = x2 == null ? 1 : x2;\n        _this.y2 = y2 == null ? 0 : y2;\n        _this.type = 'linear';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return LinearGradient;\n}(Gradient));\nexport default LinearGradient;\n;\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport * as pathContain from '../contain/path.js';\nimport { defaults, keys, extend, clone, isString, createObject } from '../core/util.js';\nimport { lum } from '../tool/color.js';\nimport { DARK_LABEL_COLOR, LIGHT_LABEL_COLOR, DARK_MODE_THRESHOLD, LIGHTER_LABEL_COLOR } from '../config.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT, STYLE_CHANGED_BIT } from './constants.js';\nimport { TRANSFORMABLE_PROPS } from '../core/Transformable.js';\nexport var DEFAULT_PATH_STYLE = defaults({\n    fill: '#000',\n    stroke: null,\n    strokePercent: 1,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    lineDashOffset: 0,\n    lineWidth: 1,\n    lineCap: 'butt',\n    miterLimit: 10,\n    strokeNoScale: false,\n    strokeFirst: false\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_PATH_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        strokePercent: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineDashOffset: true,\n        lineWidth: true,\n        miterLimit: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar pathCopyParams = TRANSFORMABLE_PROPS.concat(['invisible',\n    'culling', 'z', 'z2', 'zlevel', 'parent'\n]);\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Path.prototype.update = function () {\n        var _this = this;\n        _super.prototype.update.call(this);\n        var style = this.style;\n        if (style.decal) {\n            var decalEl = this._decalEl = this._decalEl || new Path();\n            if (decalEl.buildPath === Path.prototype.buildPath) {\n                decalEl.buildPath = function (ctx) {\n                    _this.buildPath(ctx, _this.shape);\n                };\n            }\n            decalEl.silent = true;\n            var decalElStyle = decalEl.style;\n            for (var key in style) {\n                if (decalElStyle[key] !== style[key]) {\n                    decalElStyle[key] = style[key];\n                }\n            }\n            decalElStyle.fill = style.fill ? style.decal : null;\n            decalElStyle.decal = null;\n            decalElStyle.shadowColor = null;\n            style.strokeFirst && (decalElStyle.stroke = null);\n            for (var i = 0; i < pathCopyParams.length; ++i) {\n                decalEl[pathCopyParams[i]] = this[pathCopyParams[i]];\n            }\n            decalEl.__dirty |= REDRAW_BIT;\n        }\n        else if (this._decalEl) {\n            this._decalEl = null;\n        }\n    };\n    Path.prototype.getDecalElement = function () {\n        return this._decalEl;\n    };\n    Path.prototype._init = function (props) {\n        var keysArr = keys(props);\n        this.shape = this.getDefaultShape();\n        var defaultStyle = this.getDefaultStyle();\n        if (defaultStyle) {\n            this.useStyle(defaultStyle);\n        }\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            var value = props[key];\n            if (key === 'style') {\n                if (!this.style) {\n                    this.useStyle(value);\n                }\n                else {\n                    extend(this.style, value);\n                }\n            }\n            else if (key === 'shape') {\n                extend(this.shape, value);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, value);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Path.prototype.getDefaultStyle = function () {\n        return null;\n    };\n    Path.prototype.getDefaultShape = function () {\n        return {};\n    };\n    Path.prototype.canBeInsideText = function () {\n        return this.hasFill();\n    };\n    Path.prototype.getInsideTextFill = function () {\n        var pathFill = this.style.fill;\n        if (pathFill !== 'none') {\n            if (isString(pathFill)) {\n                var fillLum = lum(pathFill, 0);\n                if (fillLum > 0.5) {\n                    return DARK_LABEL_COLOR;\n                }\n                else if (fillLum > 0.2) {\n                    return LIGHTER_LABEL_COLOR;\n                }\n                return LIGHT_LABEL_COLOR;\n            }\n            else if (pathFill) {\n                return LIGHT_LABEL_COLOR;\n            }\n        }\n        return DARK_LABEL_COLOR;\n    };\n    Path.prototype.getInsideTextStroke = function (textFill) {\n        var pathFill = this.style.fill;\n        if (isString(pathFill)) {\n            var zr = this.__zr;\n            var isDarkMode = !!(zr && zr.isDarkMode());\n            var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\n            if (isDarkMode === isDarkLabel) {\n                return pathFill;\n            }\n        }\n    };\n    Path.prototype.buildPath = function (ctx, shapeCfg, inBatch) { };\n    Path.prototype.pathUpdated = function () {\n        this.__dirty &= ~SHAPE_CHANGED_BIT;\n    };\n    Path.prototype.getUpdatedPathProxy = function (inBatch) {\n        !this.path && this.createPathProxy();\n        this.path.beginPath();\n        this.buildPath(this.path, this.shape, inBatch);\n        return this.path;\n    };\n    Path.prototype.createPathProxy = function () {\n        this.path = new PathProxy(false);\n    };\n    Path.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n    };\n    Path.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    Path.prototype.getBoundingRect = function () {\n        var rect = this._rect;\n        var style = this.style;\n        var needsUpdateRect = !rect;\n        if (needsUpdateRect) {\n            var firstInvoke = false;\n            if (!this.path) {\n                firstInvoke = true;\n                this.createPathProxy();\n            }\n            var path = this.path;\n            if (firstInvoke || (this.__dirty & SHAPE_CHANGED_BIT)) {\n                path.beginPath();\n                this.buildPath(path, this.shape, false);\n                this.pathUpdated();\n            }\n            rect = path.getBoundingRect();\n        }\n        this._rect = rect;\n        if (this.hasStroke() && this.path && this.path.len() > 0) {\n            var rectStroke = this._rectStroke || (this._rectStroke = rect.clone());\n            if (this.__dirty || needsUpdateRect) {\n                rectStroke.copy(rect);\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                var w = style.lineWidth;\n                if (!this.hasFill()) {\n                    var strokeContainThreshold = this.strokeContainThreshold;\n                    w = Math.max(w, strokeContainThreshold == null ? 4 : strokeContainThreshold);\n                }\n                if (lineScale > 1e-10) {\n                    rectStroke.width += w / lineScale;\n                    rectStroke.height += w / lineScale;\n                    rectStroke.x -= w / lineScale / 2;\n                    rectStroke.y -= w / lineScale / 2;\n                }\n            }\n            return rectStroke;\n        }\n        return rect;\n    };\n    Path.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        var style = this.style;\n        x = localPos[0];\n        y = localPos[1];\n        if (rect.contain(x, y)) {\n            var pathProxy = this.path;\n            if (this.hasStroke()) {\n                var lineWidth = style.lineWidth;\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                if (lineScale > 1e-10) {\n                    if (!this.hasFill()) {\n                        lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n                    }\n                    if (pathContain.containStroke(pathProxy, lineWidth / lineScale, x, y)) {\n                        return true;\n                    }\n                }\n            }\n            if (this.hasFill()) {\n                return pathContain.contain(pathProxy, x, y);\n            }\n        }\n        return false;\n    };\n    Path.prototype.dirtyShape = function () {\n        this.__dirty |= SHAPE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n        if (this._decalEl) {\n            this._decalEl.dirtyShape();\n        }\n        this.markRedraw();\n    };\n    Path.prototype.dirty = function () {\n        this.dirtyStyle();\n        this.dirtyShape();\n    };\n    Path.prototype.animateShape = function (loop) {\n        return this.animate('shape', loop);\n    };\n    Path.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else if (targetKey === 'shape') {\n            this.dirtyShape();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Path.prototype.attrKV = function (key, value) {\n        if (key === 'shape') {\n            this.setShape(value);\n        }\n        else {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n    };\n    Path.prototype.setShape = function (keyOrObj, value) {\n        var shape = this.shape;\n        if (!shape) {\n            shape = this.shape = {};\n        }\n        if (typeof keyOrObj === 'string') {\n            shape[keyOrObj] = value;\n        }\n        else {\n            extend(shape, keyOrObj);\n        }\n        this.dirtyShape();\n        return this;\n    };\n    Path.prototype.shapeChanged = function () {\n        return !!(this.__dirty & SHAPE_CHANGED_BIT);\n    };\n    Path.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_PATH_STYLE, obj);\n    };\n    Path.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.shape && !normalState.shape) {\n            normalState.shape = extend({}, this.shape);\n        }\n    };\n    Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetShape;\n        if (state && state.shape) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetShape = state.shape;\n                }\n                else {\n                    targetShape = extend({}, normalState.shape);\n                    extend(targetShape, state.shape);\n                }\n            }\n            else {\n                targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\n                extend(targetShape, state.shape);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetShape = normalState.shape;\n        }\n        if (targetShape) {\n            if (transition) {\n                this.shape = extend({}, this.shape);\n                var targetShapePrimaryProps = {};\n                var shapeKeys = keys(targetShape);\n                for (var i = 0; i < shapeKeys.length; i++) {\n                    var key = shapeKeys[i];\n                    if (typeof targetShape[key] === 'object') {\n                        this.shape[key] = targetShape[key];\n                    }\n                    else {\n                        targetShapePrimaryProps[key] = targetShape[key];\n                    }\n                }\n                this._transitionState(stateName, {\n                    shape: targetShapePrimaryProps\n                }, animationCfg);\n            }\n            else {\n                this.shape = targetShape;\n                this.dirtyShape();\n            }\n        }\n    };\n    Path.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedShape;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.shape) {\n                mergedShape = mergedShape || {};\n                this._mergeStyle(mergedShape, state.shape);\n            }\n        }\n        if (mergedShape) {\n            mergedState.shape = mergedShape;\n        }\n        return mergedState;\n    };\n    Path.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_PATH_ANIMATION_PROPS;\n    };\n    Path.prototype.isZeroArea = function () {\n        return false;\n    };\n    Path.extend = function (defaultProps) {\n        var Sub = (function (_super) {\n            __extends(Sub, _super);\n            function Sub(opts) {\n                var _this = _super.call(this, opts) || this;\n                defaultProps.init && defaultProps.init.call(_this, opts);\n                return _this;\n            }\n            Sub.prototype.getDefaultStyle = function () {\n                return clone(defaultProps.style);\n            };\n            Sub.prototype.getDefaultShape = function () {\n                return clone(defaultProps.shape);\n            };\n            return Sub;\n        }(Path));\n        for (var key in defaultProps) {\n            if (typeof defaultProps[key] === 'function') {\n                Sub.prototype[key] = defaultProps[key];\n            }\n        }\n        return Sub;\n    };\n    Path.initDefaultProps = (function () {\n        var pathProto = Path.prototype;\n        pathProto.type = 'path';\n        pathProto.strokeContainThreshold = 5;\n        pathProto.segmentIgnoreThreshold = 0;\n        pathProto.subPixelOptimize = false;\n        pathProto.autoBatch = false;\n        pathProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT | SHAPE_CHANGED_BIT;\n    })();\n    return Path;\n}(Displayable));\nexport default Path;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar RadialGradient = (function (_super) {\n    __extends(RadialGradient, _super);\n    function RadialGradient(x, y, r, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0.5 : x;\n        _this.y = y == null ? 0.5 : y;\n        _this.r = r == null ? 0.5 : r;\n        _this.type = 'radial';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return RadialGradient;\n}(Gradient));\nexport default RadialGradient;\n","import { __extends } from \"tslib\";\nimport Displayable from './Displayable.js';\nimport { getBoundingRect } from '../contain/text.js';\nimport { DEFAULT_PATH_STYLE } from './Path.js';\nimport { createObject, defaults } from '../core/util.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nexport var DEFAULT_TSPAN_STYLE = defaults({\n    strokeFirst: true,\n    font: DEFAULT_FONT,\n    x: 0,\n    y: 0,\n    textAlign: 'left',\n    textBaseline: 'top',\n    miterLimit: 2\n}, DEFAULT_PATH_STYLE);\nvar TSpan = (function (_super) {\n    __extends(TSpan, _super);\n    function TSpan() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TSpan.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return stroke != null && stroke !== 'none' && style.lineWidth > 0;\n    };\n    TSpan.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    TSpan.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_TSPAN_STYLE, obj);\n    };\n    TSpan.prototype.setBoundingRect = function (rect) {\n        this._rect = rect;\n    };\n    TSpan.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            var text = style.text;\n            text != null ? (text += '') : (text = '');\n            var rect = getBoundingRect(text, style.font, style.textAlign, style.textBaseline);\n            rect.x += style.x || 0;\n            rect.y += style.y || 0;\n            if (this.hasStroke()) {\n                var w = style.lineWidth;\n                rect.x -= w / 2;\n                rect.y -= w / 2;\n                rect.width += w;\n                rect.height += w;\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    TSpan.initDefaultProps = (function () {\n        var tspanProto = TSpan.prototype;\n        tspanProto.dirtyRectTolerance = 10;\n    })();\n    return TSpan;\n}(Displayable));\nTSpan.prototype.type = 'tspan';\nexport default TSpan;\n","import { __extends } from \"tslib\";\nimport { parseRichText, parsePlainText } from './helper/parseText.js';\nimport TSpan from './TSpan.js';\nimport { retrieve2, each, normalizeCssArray, trim, retrieve3, extend, keys, defaults } from '../core/util.js';\nimport { adjustTextX, adjustTextY } from '../contain/text.js';\nimport ZRImage from './Image.js';\nimport Rect from './shape/Rect.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Displayable, { DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE } from '../core/platform.js';\nvar DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexport var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineWidth: true,\n        fontSize: true,\n        lineHeight: true,\n        width: true,\n        height: true,\n        textShadowColor: true,\n        textShadowBlur: true,\n        textShadowOffsetX: true,\n        textShadowOffsetY: true,\n        backgroundColor: true,\n        padding: true,\n        borderColor: true,\n        borderWidth: true,\n        borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = (function (_super) {\n    __extends(ZRText, _super);\n    function ZRText(opts) {\n        var _this = _super.call(this) || this;\n        _this.type = 'text';\n        _this._children = [];\n        _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n        _this.attr(opts);\n        return _this;\n    }\n    ZRText.prototype.childrenRef = function () {\n        return this._children;\n    };\n    ZRText.prototype.update = function () {\n        _super.prototype.update.call(this);\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.zlevel = this.zlevel;\n            child.z = this.z;\n            child.z2 = this.z2;\n            child.culling = this.culling;\n            child.cursor = this.cursor;\n            child.invisible = this.invisible;\n        }\n    };\n    ZRText.prototype.updateTransform = function () {\n        var innerTransformable = this.innerTransformable;\n        if (innerTransformable) {\n            innerTransformable.updateTransform();\n            if (innerTransformable.transform) {\n                this.transform = innerTransformable.transform;\n            }\n        }\n        else {\n            _super.prototype.updateTransform.call(this);\n        }\n    };\n    ZRText.prototype.getLocalTransform = function (m) {\n        var innerTransformable = this.innerTransformable;\n        return innerTransformable\n            ? innerTransformable.getLocalTransform(m)\n            : _super.prototype.getLocalTransform.call(this, m);\n    };\n    ZRText.prototype.getComputedTransform = function () {\n        if (this.__hostTarget) {\n            this.__hostTarget.getComputedTransform();\n            this.__hostTarget.updateInnerText(true);\n        }\n        return _super.prototype.getComputedTransform.call(this);\n    };\n    ZRText.prototype._updateSubTexts = function () {\n        this._childCursor = 0;\n        normalizeTextStyle(this.style);\n        this.style.rich\n            ? this._updateRichTexts()\n            : this._updatePlainTexts();\n        this._children.length = this._childCursor;\n        this.styleUpdated();\n    };\n    ZRText.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = zr;\n        }\n    };\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = null;\n        }\n    };\n    ZRText.prototype.getBoundingRect = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        if (!this._rect) {\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\n            var children = this._children;\n            var tmpMat = [];\n            var rect = null;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                var childRect = child.getBoundingRect();\n                var transform = child.getLocalTransform(tmpMat);\n                if (transform) {\n                    tmpRect.copy(childRect);\n                    tmpRect.applyTransform(transform);\n                    rect = rect || tmpRect.clone();\n                    rect.union(tmpRect);\n                }\n                else {\n                    rect = rect || childRect.clone();\n                    rect.union(childRect);\n                }\n            }\n            this._rect = rect || tmpRect;\n        }\n        return this._rect;\n    };\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n        this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n    ZRText.prototype.setTextContent = function (textContent) {\n        if (process.env.NODE_ENV !== 'production') {\n            throw new Error('Can\\'t attach text on another text');\n        }\n    };\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        if (!sourceStyle) {\n            return targetStyle;\n        }\n        var sourceRich = sourceStyle.rich;\n        var targetRich = targetStyle.rich || (sourceRich && {});\n        extend(targetStyle, sourceStyle);\n        if (sourceRich && targetRich) {\n            this._mergeRich(targetRich, sourceRich);\n            targetStyle.rich = targetRich;\n        }\n        else if (targetRich) {\n            targetStyle.rich = targetRich;\n        }\n        return targetStyle;\n    };\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n        var richNames = keys(sourceRich);\n        for (var i = 0; i < richNames.length; i++) {\n            var richName = richNames[i];\n            targetRich[richName] = targetRich[richName] || {};\n            extend(targetRich[richName], sourceRich[richName]);\n        }\n    };\n    ZRText.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n        var child = this._children[this._childCursor];\n        if (!child || !(child instanceof Ctor)) {\n            child = new Ctor();\n        }\n        this._children[this._childCursor++] = child;\n        child.__zr = this.__zr;\n        child.parent = this;\n        return child;\n    };\n    ZRText.prototype._updatePlainTexts = function () {\n        var style = this.style;\n        var textFont = style.font || DEFAULT_FONT;\n        var textPadding = style.padding;\n        var text = getStyleText(style);\n        var contentBlock = parsePlainText(text, style);\n        var needDrawBg = needDrawBackground(style);\n        var bgColorDrawn = !!(style.backgroundColor);\n        var outerHeight = contentBlock.outerHeight;\n        var outerWidth = contentBlock.outerWidth;\n        var contentWidth = contentBlock.contentWidth;\n        var textLines = contentBlock.lines;\n        var lineHeight = contentBlock.lineHeight;\n        var defaultStyle = this._defaultStyle;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var textAlign = style.align || defaultStyle.align || 'left';\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n        var textX = baseX;\n        var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n        if (needDrawBg || textPadding) {\n            var boxX = adjustTextX(baseX, outerWidth, textAlign);\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n            needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        textY += lineHeight / 2;\n        if (textPadding) {\n            textX = getTextXForPadding(baseX, textAlign, textPadding);\n            if (verticalAlign === 'top') {\n                textY += textPadding[0];\n            }\n            else if (verticalAlign === 'bottom') {\n                textY -= textPadding[2];\n            }\n        }\n        var defaultLineWidth = 0;\n        var useDefaultFill = false;\n        var textFill = getFill('fill' in style\n            ? style.fill\n            : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in style\n            ? style.stroke\n            : (!bgColorDrawn\n                && (!defaultStyle.autoStroke || useDefaultFill))\n                ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                : null);\n        var hasShadow = style.textShadowBlur > 0;\n        var fixedBoundingRect = style.width != null\n            && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n        var calculatedLineHeight = contentBlock.calculatedLineHeight;\n        for (var i = 0; i < textLines.length; i++) {\n            var el = this._getOrCreateChild(TSpan);\n            var subElStyle = el.createStyle();\n            el.useStyle(subElStyle);\n            subElStyle.text = textLines[i];\n            subElStyle.x = textX;\n            subElStyle.y = textY;\n            if (textAlign) {\n                subElStyle.textAlign = textAlign;\n            }\n            subElStyle.textBaseline = 'middle';\n            subElStyle.opacity = style.opacity;\n            subElStyle.strokeFirst = true;\n            if (hasShadow) {\n                subElStyle.shadowBlur = style.textShadowBlur || 0;\n                subElStyle.shadowColor = style.textShadowColor || 'transparent';\n                subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n                subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n            }\n            subElStyle.stroke = textStroke;\n            subElStyle.fill = textFill;\n            if (textStroke) {\n                subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n                subElStyle.lineDash = style.lineDash;\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            }\n            subElStyle.font = textFont;\n            setSeparateFont(subElStyle, style);\n            textY += lineHeight;\n            if (fixedBoundingRect) {\n                el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n            }\n        }\n    };\n    ZRText.prototype._updateRichTexts = function () {\n        var style = this.style;\n        var text = getStyleText(style);\n        var contentBlock = parseRichText(text, style);\n        var contentWidth = contentBlock.width;\n        var outerWidth = contentBlock.outerWidth;\n        var outerHeight = contentBlock.outerHeight;\n        var textPadding = style.padding;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var defaultStyle = this._defaultStyle;\n        var textAlign = style.align || defaultStyle.align;\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n        var xLeft = boxX;\n        var lineTop = boxY;\n        if (textPadding) {\n            xLeft += textPadding[3];\n            lineTop += textPadding[0];\n        }\n        var xRight = xLeft + contentWidth;\n        if (needDrawBackground(style)) {\n            this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        var bgColorDrawn = !!(style.backgroundColor);\n        for (var i = 0; i < contentBlock.lines.length; i++) {\n            var line = contentBlock.lines[i];\n            var tokens = line.tokens;\n            var tokenCount = tokens.length;\n            var lineHeight = line.lineHeight;\n            var remainedWidth = line.width;\n            var leftIndex = 0;\n            var lineXLeft = xLeft;\n            var lineXRight = xRight;\n            var rightIndex = tokenCount - 1;\n            var token = void 0;\n            while (leftIndex < tokenCount\n                && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            while (rightIndex >= 0\n                && (token = tokens[rightIndex], token.align === 'right')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXRight -= token.width;\n                rightIndex--;\n            }\n            lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n            while (leftIndex <= rightIndex) {\n                token = tokens[leftIndex];\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            lineTop += lineHeight;\n        }\n    };\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n        var tokenStyle = style.rich[token.styleName] || {};\n        tokenStyle.text = token.text;\n        var verticalAlign = token.verticalAlign;\n        var y = lineTop + lineHeight / 2;\n        if (verticalAlign === 'top') {\n            y = lineTop + token.height / 2;\n        }\n        else if (verticalAlign === 'bottom') {\n            y = lineTop + lineHeight - token.height / 2;\n        }\n        var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n        needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\n            ? x - token.width\n            : textAlign === 'center'\n                ? x - token.width / 2\n                : x, y - token.height / 2, token.width, token.height);\n        var bgColorDrawn = !!tokenStyle.backgroundColor;\n        var textPadding = token.textPadding;\n        if (textPadding) {\n            x = getTextXForPadding(x, textAlign, textPadding);\n            y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n        }\n        var el = this._getOrCreateChild(TSpan);\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        var defaultStyle = this._defaultStyle;\n        var useDefaultFill = false;\n        var defaultLineWidth = 0;\n        var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill\n            : 'fill' in style ? style.fill\n                : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\n            : 'stroke' in style ? style.stroke\n                : (!bgColorDrawn\n                    && !parentBgColorDrawn\n                    && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                    : null);\n        var hasShadow = tokenStyle.textShadowBlur > 0\n            || style.textShadowBlur > 0;\n        subElStyle.text = token.text;\n        subElStyle.x = x;\n        subElStyle.y = y;\n        if (hasShadow) {\n            subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n            subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n            subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n            subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n        }\n        subElStyle.textAlign = textAlign;\n        subElStyle.textBaseline = 'middle';\n        subElStyle.font = token.font || DEFAULT_FONT;\n        subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n        setSeparateFont(subElStyle, tokenStyle);\n        if (textStroke) {\n            subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n            subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n            subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            subElStyle.stroke = textStroke;\n        }\n        if (textFill) {\n            subElStyle.fill = textFill;\n        }\n        var textWidth = token.contentWidth;\n        var textHeight = token.contentHeight;\n        el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n        var textBackgroundColor = style.backgroundColor;\n        var textBorderWidth = style.borderWidth;\n        var textBorderColor = style.borderColor;\n        var isImageBg = textBackgroundColor && textBackgroundColor.image;\n        var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n        var textBorderRadius = style.borderRadius;\n        var self = this;\n        var rectEl;\n        var imgEl;\n        if (isPlainOrGradientBg || style.lineHeight || (textBorderWidth && textBorderColor)) {\n            rectEl = this._getOrCreateChild(Rect);\n            rectEl.useStyle(rectEl.createStyle());\n            rectEl.style.fill = null;\n            var rectShape = rectEl.shape;\n            rectShape.x = x;\n            rectShape.y = y;\n            rectShape.width = width;\n            rectShape.height = height;\n            rectShape.r = textBorderRadius;\n            rectEl.dirtyShape();\n        }\n        if (isPlainOrGradientBg) {\n            var rectStyle = rectEl.style;\n            rectStyle.fill = textBackgroundColor || null;\n            rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n        }\n        else if (isImageBg) {\n            imgEl = this._getOrCreateChild(ZRImage);\n            imgEl.onload = function () {\n                self.dirtyStyle();\n            };\n            var imgStyle = imgEl.style;\n            imgStyle.image = textBackgroundColor.image;\n            imgStyle.x = x;\n            imgStyle.y = y;\n            imgStyle.width = width;\n            imgStyle.height = height;\n        }\n        if (textBorderWidth && textBorderColor) {\n            var rectStyle = rectEl.style;\n            rectStyle.lineWidth = textBorderWidth;\n            rectStyle.stroke = textBorderColor;\n            rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n            rectStyle.lineDash = style.borderDash;\n            rectStyle.lineDashOffset = style.borderDashOffset || 0;\n            rectEl.strokeContainThreshold = 0;\n            if (rectEl.hasFill() && rectEl.hasStroke()) {\n                rectStyle.strokeFirst = true;\n                rectStyle.lineWidth *= 2;\n            }\n        }\n        var commonStyle = (rectEl || imgEl).style;\n        commonStyle.shadowBlur = style.shadowBlur || 0;\n        commonStyle.shadowColor = style.shadowColor || 'transparent';\n        commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n        commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n        commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n    ZRText.makeFont = function (style) {\n        var font = '';\n        if (hasSeparateFont(style)) {\n            font = [\n                style.fontStyle,\n                style.fontWeight,\n                parseFontSize(style.fontSize),\n                style.fontFamily || 'sans-serif'\n            ].join(' ');\n        }\n        return font && trim(font) || style.textFont || style.font;\n    };\n    return ZRText;\n}(Displayable));\nvar VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\nvar VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\nvar FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\nexport function parseFontSize(fontSize) {\n    if (typeof fontSize === 'string'\n        && (fontSize.indexOf('px') !== -1\n            || fontSize.indexOf('rem') !== -1\n            || fontSize.indexOf('em') !== -1)) {\n        return fontSize;\n    }\n    else if (!isNaN(+fontSize)) {\n        return fontSize + 'px';\n    }\n    else {\n        return DEFAULT_FONT_SIZE + 'px';\n    }\n}\nfunction setSeparateFont(targetStyle, sourceStyle) {\n    for (var i = 0; i < FONT_PARTS.length; i++) {\n        var fontProp = FONT_PARTS[i];\n        var val = sourceStyle[fontProp];\n        if (val != null) {\n            targetStyle[fontProp] = val;\n        }\n    }\n}\nexport function hasSeparateFont(style) {\n    return style.fontSize != null || style.fontFamily || style.fontWeight;\n}\nexport function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n}\nfunction normalizeStyle(style) {\n    if (style) {\n        style.font = ZRText.makeFont(style);\n        var textAlign = style.align;\n        textAlign === 'middle' && (textAlign = 'center');\n        style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\n        var verticalAlign = style.verticalAlign;\n        verticalAlign === 'center' && (verticalAlign = 'middle');\n        style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\n        var textPadding = style.padding;\n        if (textPadding) {\n            style.padding = normalizeCssArray(style.padding);\n        }\n    }\n}\nfunction getStroke(stroke, lineWidth) {\n    return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\n        ? null\n        : (stroke.image || stroke.colorStops)\n            ? '#000'\n            : stroke;\n}\nfunction getFill(fill) {\n    return (fill == null || fill === 'none')\n        ? null\n        : (fill.image || fill.colorStops)\n            ? '#000'\n            : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right'\n        ? (x - textPadding[1])\n        : textAlign === 'center'\n            ? (x + textPadding[3] / 2 - textPadding[1] / 2)\n            : (x + textPadding[3]);\n}\nfunction getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n}\nfunction needDrawBackground(style) {\n    return !!(style.backgroundColor\n        || style.lineHeight\n        || (style.borderWidth && style.borderColor));\n}\nexport default ZRText;\n","export var REDRAW_BIT = 1;\nexport var STYLE_CHANGED_BIT = 2;\nexport var SHAPE_CHANGED_BIT = 4;\n","import LRU from '../../core/LRU.js';\nimport { platformApi } from '../../core/platform.js';\nvar globalImageCache = new LRU(50);\nexport function findExistImage(newImageOrSrc) {\n    if (typeof newImageOrSrc === 'string') {\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        return cachedImgObj && cachedImgObj.image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nexport function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n    if (!newImageOrSrc) {\n        return image;\n    }\n    else if (typeof newImageOrSrc === 'string') {\n        if ((image && image.__zrImageSrc === newImageOrSrc) || !hostEl) {\n            return image;\n        }\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        var pendingWrap = { hostEl: hostEl, cb: onload, cbPayload: cbPayload };\n        if (cachedImgObj) {\n            image = cachedImgObj.image;\n            !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n        }\n        else {\n            image = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);\n            image.__zrImageSrc = newImageOrSrc;\n            globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n                image: image,\n                pending: [pendingWrap]\n            });\n        }\n        return image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nfunction imageOnLoad() {\n    var cachedImgObj = this.__cachedImgObj;\n    this.onload = this.onerror = this.__cachedImgObj = null;\n    for (var i = 0; i < cachedImgObj.pending.length; i++) {\n        var pendingWrap = cachedImgObj.pending[i];\n        var cb = pendingWrap.cb;\n        cb && cb(this, pendingWrap.cbPayload);\n        pendingWrap.hostEl.dirty();\n    }\n    cachedImgObj.pending.length = 0;\n}\nexport function isImageReady(image) {\n    return image && image.width && image.height;\n}\n","import * as imageHelper from '../helper/image.js';\nimport { extend, retrieve2, retrieve3, reduce } from '../../core/util.js';\nimport { getLineHeight, getWidth, parsePercent } from '../../contain/text.js';\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nexport function truncateText(text, containerWidth, font, ellipsis, options) {\n    if (!containerWidth) {\n        return '';\n    }\n    var textLines = (text + '').split('\\n');\n    options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\n    for (var i = 0, len = textLines.length; i < len; i++) {\n        textLines[i] = truncateSingleLine(textLines[i], options);\n    }\n    return textLines.join('\\n');\n}\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n    options = options || {};\n    var preparedOpts = extend({}, options);\n    preparedOpts.font = font;\n    ellipsis = retrieve2(ellipsis, '...');\n    preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\n    var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\n    preparedOpts.cnCharWidth = getWidth('国', font);\n    var ascCharWidth = preparedOpts.ascCharWidth = getWidth('a', font);\n    preparedOpts.placeholder = retrieve2(options.placeholder, '');\n    var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\n    for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n        contentWidth -= ascCharWidth;\n    }\n    var ellipsisWidth = getWidth(ellipsis, font);\n    if (ellipsisWidth > contentWidth) {\n        ellipsis = '';\n        ellipsisWidth = 0;\n    }\n    contentWidth = containerWidth - ellipsisWidth;\n    preparedOpts.ellipsis = ellipsis;\n    preparedOpts.ellipsisWidth = ellipsisWidth;\n    preparedOpts.contentWidth = contentWidth;\n    preparedOpts.containerWidth = containerWidth;\n    return preparedOpts;\n}\nfunction truncateSingleLine(textLine, options) {\n    var containerWidth = options.containerWidth;\n    var font = options.font;\n    var contentWidth = options.contentWidth;\n    if (!containerWidth) {\n        return '';\n    }\n    var lineWidth = getWidth(textLine, font);\n    if (lineWidth <= containerWidth) {\n        return textLine;\n    }\n    for (var j = 0;; j++) {\n        if (lineWidth <= contentWidth || j >= options.maxIterations) {\n            textLine += options.ellipsis;\n            break;\n        }\n        var subLength = j === 0\n            ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth)\n            : lineWidth > 0\n                ? Math.floor(textLine.length * contentWidth / lineWidth)\n                : 0;\n        textLine = textLine.substr(0, subLength);\n        lineWidth = getWidth(textLine, font);\n    }\n    if (textLine === '') {\n        textLine = options.placeholder;\n    }\n    return textLine;\n}\nfunction estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n    var width = 0;\n    var i = 0;\n    for (var len = text.length; i < len && width < contentWidth; i++) {\n        var charCode = text.charCodeAt(i);\n        width += (0 <= charCode && charCode <= 127) ? ascCharWidth : cnCharWidth;\n    }\n    return i;\n}\nexport function parsePlainText(text, style) {\n    text != null && (text += '');\n    var overflow = style.overflow;\n    var padding = style.padding;\n    var font = style.font;\n    var truncate = overflow === 'truncate';\n    var calculatedLineHeight = getLineHeight(font);\n    var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\n    var bgColorDrawn = !!(style.backgroundColor);\n    var truncateLineOverflow = style.lineOverflow === 'truncate';\n    var width = style.width;\n    var lines;\n    if (width != null && (overflow === 'break' || overflow === 'breakAll')) {\n        lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\n    }\n    else {\n        lines = text ? text.split('\\n') : [];\n    }\n    var contentHeight = lines.length * lineHeight;\n    var height = retrieve2(style.height, contentHeight);\n    if (contentHeight > height && truncateLineOverflow) {\n        var lineCount = Math.floor(height / lineHeight);\n        lines = lines.slice(0, lineCount);\n    }\n    if (text && truncate && width != null) {\n        var options = prepareTruncateOptions(width, font, style.ellipsis, {\n            minChar: style.truncateMinChar,\n            placeholder: style.placeholder\n        });\n        for (var i = 0; i < lines.length; i++) {\n            lines[i] = truncateSingleLine(lines[i], options);\n        }\n    }\n    var outerHeight = height;\n    var contentWidth = 0;\n    for (var i = 0; i < lines.length; i++) {\n        contentWidth = Math.max(getWidth(lines[i], font), contentWidth);\n    }\n    if (width == null) {\n        width = contentWidth;\n    }\n    var outerWidth = contentWidth;\n    if (padding) {\n        outerHeight += padding[0] + padding[2];\n        outerWidth += padding[1] + padding[3];\n        width += padding[1] + padding[3];\n    }\n    if (bgColorDrawn) {\n        outerWidth = width;\n    }\n    return {\n        lines: lines,\n        height: height,\n        outerWidth: outerWidth,\n        outerHeight: outerHeight,\n        lineHeight: lineHeight,\n        calculatedLineHeight: calculatedLineHeight,\n        contentWidth: contentWidth,\n        contentHeight: contentHeight,\n        width: width\n    };\n}\nvar RichTextToken = (function () {\n    function RichTextToken() {\n    }\n    return RichTextToken;\n}());\nvar RichTextLine = (function () {\n    function RichTextLine(tokens) {\n        this.tokens = [];\n        if (tokens) {\n            this.tokens = tokens;\n        }\n    }\n    return RichTextLine;\n}());\nvar RichTextContentBlock = (function () {\n    function RichTextContentBlock() {\n        this.width = 0;\n        this.height = 0;\n        this.contentWidth = 0;\n        this.contentHeight = 0;\n        this.outerWidth = 0;\n        this.outerHeight = 0;\n        this.lines = [];\n    }\n    return RichTextContentBlock;\n}());\nexport { RichTextContentBlock };\nexport function parseRichText(text, style) {\n    var contentBlock = new RichTextContentBlock();\n    text != null && (text += '');\n    if (!text) {\n        return contentBlock;\n    }\n    var topWidth = style.width;\n    var topHeight = style.height;\n    var overflow = style.overflow;\n    var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null\n        ? { width: topWidth, accumWidth: 0, breakAll: overflow === 'breakAll' }\n        : null;\n    var lastIndex = STYLE_REG.lastIndex = 0;\n    var result;\n    while ((result = STYLE_REG.exec(text)) != null) {\n        var matchedIndex = result.index;\n        if (matchedIndex > lastIndex) {\n            pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\n        }\n        pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\n        lastIndex = STYLE_REG.lastIndex;\n    }\n    if (lastIndex < text.length) {\n        pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\n    }\n    var pendingList = [];\n    var calculatedHeight = 0;\n    var calculatedWidth = 0;\n    var stlPadding = style.padding;\n    var truncate = overflow === 'truncate';\n    var truncateLine = style.lineOverflow === 'truncate';\n    function finishLine(line, lineWidth, lineHeight) {\n        line.width = lineWidth;\n        line.lineHeight = lineHeight;\n        calculatedHeight += lineHeight;\n        calculatedWidth = Math.max(calculatedWidth, lineWidth);\n    }\n    outer: for (var i = 0; i < contentBlock.lines.length; i++) {\n        var line = contentBlock.lines[i];\n        var lineHeight = 0;\n        var lineWidth = 0;\n        for (var j = 0; j < line.tokens.length; j++) {\n            var token = line.tokens[j];\n            var tokenStyle = token.styleName && style.rich[token.styleName] || {};\n            var textPadding = token.textPadding = tokenStyle.padding;\n            var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\n            var font = token.font = tokenStyle.font || style.font;\n            token.contentHeight = getLineHeight(font);\n            var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\n            token.innerHeight = tokenHeight;\n            textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n            token.height = tokenHeight;\n            token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\n            token.align = tokenStyle && tokenStyle.align || style.align;\n            token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\n            if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\n                if (j > 0) {\n                    line.tokens = line.tokens.slice(0, j);\n                    finishLine(line, lineWidth, lineHeight);\n                    contentBlock.lines = contentBlock.lines.slice(0, i + 1);\n                }\n                else {\n                    contentBlock.lines = contentBlock.lines.slice(0, i);\n                }\n                break outer;\n            }\n            var styleTokenWidth = tokenStyle.width;\n            var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\n            if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\n                token.percentWidth = styleTokenWidth;\n                pendingList.push(token);\n                token.contentWidth = getWidth(token.text, font);\n            }\n            else {\n                if (tokenWidthNotSpecified) {\n                    var textBackgroundColor = tokenStyle.backgroundColor;\n                    var bgImg = textBackgroundColor && textBackgroundColor.image;\n                    if (bgImg) {\n                        bgImg = imageHelper.findExistImage(bgImg);\n                        if (imageHelper.isImageReady(bgImg)) {\n                            token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\n                        }\n                    }\n                }\n                var remainTruncWidth = truncate && topWidth != null\n                    ? topWidth - lineWidth : null;\n                if (remainTruncWidth != null && remainTruncWidth < token.width) {\n                    if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\n                        token.text = '';\n                        token.width = token.contentWidth = 0;\n                    }\n                    else {\n                        token.text = truncateText(token.text, remainTruncWidth - paddingH, font, style.ellipsis, { minChar: style.truncateMinChar });\n                        token.width = token.contentWidth = getWidth(token.text, font);\n                    }\n                }\n                else {\n                    token.contentWidth = getWidth(token.text, font);\n                }\n            }\n            token.width += paddingH;\n            lineWidth += token.width;\n            tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n        }\n        finishLine(line, lineWidth, lineHeight);\n    }\n    contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\n    contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\n    contentBlock.contentHeight = calculatedHeight;\n    contentBlock.contentWidth = calculatedWidth;\n    if (stlPadding) {\n        contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n        contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n    }\n    for (var i = 0; i < pendingList.length; i++) {\n        var token = pendingList[i];\n        var percentWidth = token.percentWidth;\n        token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\n    }\n    return contentBlock;\n}\nfunction pushTokens(block, str, style, wrapInfo, styleName) {\n    var isEmptyStr = str === '';\n    var tokenStyle = styleName && style.rich[styleName] || {};\n    var lines = block.lines;\n    var font = tokenStyle.font || style.font;\n    var newLine = false;\n    var strLines;\n    var linesWidths;\n    if (wrapInfo) {\n        var tokenPadding = tokenStyle.padding;\n        var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\n        if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\n            var outerWidth_1 = parsePercent(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\n            if (lines.length > 0) {\n                if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\n                    strLines = str.split('\\n');\n                    newLine = true;\n                }\n            }\n            wrapInfo.accumWidth = outerWidth_1;\n        }\n        else {\n            var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\n            wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\n            linesWidths = res.linesWidths;\n            strLines = res.lines;\n        }\n    }\n    else {\n        strLines = str.split('\\n');\n    }\n    for (var i = 0; i < strLines.length; i++) {\n        var text = strLines[i];\n        var token = new RichTextToken();\n        token.styleName = styleName;\n        token.text = text;\n        token.isLineHolder = !text && !isEmptyStr;\n        if (typeof tokenStyle.width === 'number') {\n            token.width = tokenStyle.width;\n        }\n        else {\n            token.width = linesWidths\n                ? linesWidths[i]\n                : getWidth(text, font);\n        }\n        if (!i && !newLine) {\n            var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\n            var tokensLen = tokens.length;\n            (tokensLen === 1 && tokens[0].isLineHolder)\n                ? (tokens[0] = token)\n                : ((text || !tokensLen || isEmptyStr) && tokens.push(token));\n        }\n        else {\n            lines.push(new RichTextLine([token]));\n        }\n    }\n}\nfunction isAlphabeticLetter(ch) {\n    var code = ch.charCodeAt(0);\n    return code >= 0x20 && code <= 0x24F\n        || code >= 0x370 && code <= 0x10FF\n        || code >= 0x1200 && code <= 0x13FF\n        || code >= 0x1E00 && code <= 0x206F;\n}\nvar breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\n    obj[ch] = true;\n    return obj;\n}, {});\nfunction isWordBreakChar(ch) {\n    if (isAlphabeticLetter(ch)) {\n        if (breakCharMap[ch]) {\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\nfunction wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\n    var lines = [];\n    var linesWidths = [];\n    var line = '';\n    var currentWord = '';\n    var currentWordWidth = 0;\n    var accumWidth = 0;\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\n') {\n            if (currentWord) {\n                line += currentWord;\n                accumWidth += currentWordWidth;\n            }\n            lines.push(line);\n            linesWidths.push(accumWidth);\n            line = '';\n            currentWord = '';\n            currentWordWidth = 0;\n            accumWidth = 0;\n            continue;\n        }\n        var chWidth = getWidth(ch, font);\n        var inWord = isBreakAll ? false : !isWordBreakChar(ch);\n        if (!lines.length\n            ? lastAccumWidth + accumWidth + chWidth > lineWidth\n            : accumWidth + chWidth > lineWidth) {\n            if (!accumWidth) {\n                if (inWord) {\n                    lines.push(currentWord);\n                    linesWidths.push(currentWordWidth);\n                    currentWord = ch;\n                    currentWordWidth = chWidth;\n                }\n                else {\n                    lines.push(ch);\n                    linesWidths.push(chWidth);\n                }\n            }\n            else if (line || currentWord) {\n                if (inWord) {\n                    if (!line) {\n                        line = currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                        accumWidth = currentWordWidth;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth - currentWordWidth);\n                    currentWord += ch;\n                    currentWordWidth += chWidth;\n                    line = '';\n                    accumWidth = currentWordWidth;\n                }\n                else {\n                    if (currentWord) {\n                        line += currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth);\n                    line = ch;\n                    accumWidth = chWidth;\n                }\n            }\n            continue;\n        }\n        accumWidth += chWidth;\n        if (inWord) {\n            currentWord += ch;\n            currentWordWidth += chWidth;\n        }\n        else {\n            if (currentWord) {\n                line += currentWord;\n                currentWord = '';\n                currentWordWidth = 0;\n            }\n            line += ch;\n        }\n    }\n    if (!lines.length && !line) {\n        line = text;\n        currentWord = '';\n        currentWordWidth = 0;\n    }\n    if (currentWord) {\n        line += currentWord;\n    }\n    if (line) {\n        lines.push(line);\n        linesWidths.push(accumWidth);\n    }\n    if (lines.length === 1) {\n        accumWidth += lastAccumWidth;\n    }\n    return {\n        accumWidth: accumWidth,\n        lines: lines,\n        linesWidths: linesWidths\n    };\n}\n","import { min as v2Min, max as v2Max, scale as v2Scale, distance as v2Distance, add as v2Add, clone as v2Clone, sub as v2Sub } from '../../core/vector.js';\nexport default function smoothBezier(points, smooth, isLoop, constraint) {\n    var cps = [];\n    var v = [];\n    var v1 = [];\n    var v2 = [];\n    var prevPoint;\n    var nextPoint;\n    var min;\n    var max;\n    if (constraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n        for (var i = 0, len = points.length; i < len; i++) {\n            v2Min(min, min, points[i]);\n            v2Max(max, max, points[i]);\n        }\n        v2Min(min, min, constraint[0]);\n        v2Max(max, max, constraint[1]);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isLoop) {\n            prevPoint = points[i ? i - 1 : len - 1];\n            nextPoint = points[(i + 1) % len];\n        }\n        else {\n            if (i === 0 || i === len - 1) {\n                cps.push(v2Clone(points[i]));\n                continue;\n            }\n            else {\n                prevPoint = points[i - 1];\n                nextPoint = points[i + 1];\n            }\n        }\n        v2Sub(v, nextPoint, prevPoint);\n        v2Scale(v, v, smooth);\n        var d0 = v2Distance(point, prevPoint);\n        var d1 = v2Distance(point, nextPoint);\n        var sum = d0 + d1;\n        if (sum !== 0) {\n            d0 /= sum;\n            d1 /= sum;\n        }\n        v2Scale(v1, v, -d0);\n        v2Scale(v2, v, d1);\n        var cp0 = v2Add([], point, v1);\n        var cp1 = v2Add([], point, v2);\n        if (constraint) {\n            v2Max(cp0, cp0, min);\n            v2Min(cp0, cp0, max);\n            v2Max(cp1, cp1, min);\n            v2Min(cp1, cp1, max);\n        }\n        cps.push(cp0);\n        cps.push(cp1);\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n}\n","import smoothBezier from './smoothBezier.js';\nexport function buildPath(ctx, shape, closePath) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n    if (points && points.length >= 2) {\n        if (smooth) {\n            var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n            ctx.moveTo(points[0][0], points[0][1]);\n            var len = points.length;\n            for (var i = 0; i < (closePath ? len : len - 1); i++) {\n                var cp1 = controlPoints[i * 2];\n                var cp2 = controlPoints[i * 2 + 1];\n                var p = points[(i + 1) % len];\n                ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n            }\n        }\n        else {\n            ctx.moveTo(points[0][0], points[0][1]);\n            for (var i = 1, l = points.length; i < l; i++) {\n                ctx.lineTo(points[i][0], points[i][1]);\n            }\n        }\n        closePath && ctx.closePath();\n    }\n}\n","var round = Math.round;\nexport function subPixelOptimizeLine(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var x1 = inputShape.x1;\n    var x2 = inputShape.x2;\n    var y1 = inputShape.y1;\n    var y2 = inputShape.y2;\n    outputShape.x1 = x1;\n    outputShape.x2 = x2;\n    outputShape.y1 = y1;\n    outputShape.y2 = y2;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    if (round(x1 * 2) === round(x2 * 2)) {\n        outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n    }\n    if (round(y1 * 2) === round(y2 * 2)) {\n        outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n    }\n    return outputShape;\n}\nexport function subPixelOptimizeRect(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var originX = inputShape.x;\n    var originY = inputShape.y;\n    var originWidth = inputShape.width;\n    var originHeight = inputShape.height;\n    outputShape.x = originX;\n    outputShape.y = originY;\n    outputShape.width = originWidth;\n    outputShape.height = originHeight;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    outputShape.x = subPixelOptimize(originX, lineWidth, true);\n    outputShape.y = subPixelOptimize(originY, lineWidth, true);\n    outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n    outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n    return outputShape;\n}\nexport function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n    if (!lineWidth) {\n        return position;\n    }\n    var doubledPosition = round(position * 2);\n    return (doubledPosition + round(lineWidth)) % 2 === 0\n        ? doubledPosition / 2\n        : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar ArcShape = (function () {\n    function ArcShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n    }\n    return ArcShape;\n}());\nexport { ArcShape };\nvar Arc = (function (_super) {\n    __extends(Arc, _super);\n    function Arc(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Arc.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Arc.prototype.getDefaultShape = function () {\n        return new ArcShape();\n    };\n    Arc.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var r = Math.max(shape.r, 0);\n        var startAngle = shape.startAngle;\n        var endAngle = shape.endAngle;\n        var clockwise = shape.clockwise;\n        var unitX = Math.cos(startAngle);\n        var unitY = Math.sin(startAngle);\n        ctx.moveTo(unitX * r + x, unitY * r + y);\n        ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    };\n    return Arc;\n}(Path));\nArc.prototype.type = 'arc';\nexport default Arc;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as vec2 from '../../core/vector.js';\nimport { quadraticSubdivide, cubicSubdivide, quadraticAt, cubicAt, quadraticDerivativeAt, cubicDerivativeAt } from '../../core/curve.js';\nvar out = [];\nvar BezierCurveShape = (function () {\n    function BezierCurveShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.cpx1 = 0;\n        this.cpy1 = 0;\n        this.percent = 1;\n    }\n    return BezierCurveShape;\n}());\nexport { BezierCurveShape };\nfunction someVectorAt(shape, t, isTangent) {\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    if (cpx2 != null || cpy2 != null) {\n        return [\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)\n        ];\n    }\n    else {\n        return [\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)\n        ];\n    }\n}\nvar BezierCurve = (function (_super) {\n    __extends(BezierCurve, _super);\n    function BezierCurve(opts) {\n        return _super.call(this, opts) || this;\n    }\n    BezierCurve.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    BezierCurve.prototype.getDefaultShape = function () {\n        return new BezierCurveShape();\n    };\n    BezierCurve.prototype.buildPath = function (ctx, shape) {\n        var x1 = shape.x1;\n        var y1 = shape.y1;\n        var x2 = shape.x2;\n        var y2 = shape.y2;\n        var cpx1 = shape.cpx1;\n        var cpy1 = shape.cpy1;\n        var cpx2 = shape.cpx2;\n        var cpy2 = shape.cpy2;\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (cpx2 == null || cpy2 == null) {\n            if (percent < 1) {\n                quadraticSubdivide(x1, cpx1, x2, percent, out);\n                cpx1 = out[1];\n                x2 = out[2];\n                quadraticSubdivide(y1, cpy1, y2, percent, out);\n                cpy1 = out[1];\n                y2 = out[2];\n            }\n            ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n        }\n        else {\n            if (percent < 1) {\n                cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n                cpx1 = out[1];\n                cpx2 = out[2];\n                x2 = out[3];\n                cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n                cpy1 = out[1];\n                cpy2 = out[2];\n                y2 = out[3];\n            }\n            ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n        }\n    };\n    BezierCurve.prototype.pointAt = function (t) {\n        return someVectorAt(this.shape, t, false);\n    };\n    BezierCurve.prototype.tangentAt = function (t) {\n        var p = someVectorAt(this.shape, t, true);\n        return vec2.normalize(p, p);\n    };\n    return BezierCurve;\n}(Path));\n;\nBezierCurve.prototype.type = 'bezier-curve';\nexport default BezierCurve;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar CircleShape = (function () {\n    function CircleShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n    }\n    return CircleShape;\n}());\nexport { CircleShape };\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Circle.prototype.getDefaultShape = function () {\n        return new CircleShape();\n    };\n    Circle.prototype.buildPath = function (ctx, shape) {\n        ctx.moveTo(shape.cx + shape.r, shape.cy);\n        ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\n    };\n    return Circle;\n}(Path));\n;\nCircle.prototype.type = 'circle';\nexport default Circle;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar EllipseShape = (function () {\n    function EllipseShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.rx = 0;\n        this.ry = 0;\n    }\n    return EllipseShape;\n}());\nexport { EllipseShape };\nvar Ellipse = (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ellipse.prototype.getDefaultShape = function () {\n        return new EllipseShape();\n    };\n    Ellipse.prototype.buildPath = function (ctx, shape) {\n        var k = 0.5522848;\n        var x = shape.cx;\n        var y = shape.cy;\n        var a = shape.rx;\n        var b = shape.ry;\n        var ox = a * k;\n        var oy = b * k;\n        ctx.moveTo(x - a, y);\n        ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n        ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n        ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n        ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n        ctx.closePath();\n    };\n    return Ellipse;\n}(Path));\nEllipse.prototype.type = 'ellipse';\nexport default Ellipse;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport { subPixelOptimizeLine } from '../helper/subPixelOptimize.js';\nvar subPixelOptimizeOutputShape = {};\nvar LineShape = (function () {\n    function LineShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.percent = 1;\n    }\n    return LineShape;\n}());\nexport { LineShape };\nvar Line = (function (_super) {\n    __extends(Line, _super);\n    function Line(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Line.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Line.prototype.getDefaultShape = function () {\n        return new LineShape();\n    };\n    Line.prototype.buildPath = function (ctx, shape) {\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape, shape, this.style);\n            x1 = optimizedShape.x1;\n            y1 = optimizedShape.y1;\n            x2 = optimizedShape.x2;\n            y2 = optimizedShape.y2;\n        }\n        else {\n            x1 = shape.x1;\n            y1 = shape.y1;\n            x2 = shape.x2;\n            y2 = shape.y2;\n        }\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (percent < 1) {\n            x2 = x1 * (1 - percent) + x2 * percent;\n            y2 = y1 * (1 - percent) + y2 * percent;\n        }\n        ctx.lineTo(x2, y2);\n    };\n    Line.prototype.pointAt = function (p) {\n        var shape = this.shape;\n        return [\n            shape.x1 * (1 - p) + shape.x2 * p,\n            shape.y1 * (1 - p) + shape.y2 * p\n        ];\n    };\n    return Line;\n}(Path));\nLine.prototype.type = 'line';\nexport default Line;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolygonShape = (function () {\n    function PolygonShape() {\n        this.points = null;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolygonShape;\n}());\nexport { PolygonShape };\nvar Polygon = (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polygon.prototype.getDefaultShape = function () {\n        return new PolygonShape();\n    };\n    Polygon.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, true);\n    };\n    return Polygon;\n}(Path));\n;\nPolygon.prototype.type = 'polygon';\nexport default Polygon;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolylineShape = (function () {\n    function PolylineShape() {\n        this.points = null;\n        this.percent = 1;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolylineShape;\n}());\nexport { PolylineShape };\nvar Polyline = (function (_super) {\n    __extends(Polyline, _super);\n    function Polyline(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polyline.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Polyline.prototype.getDefaultShape = function () {\n        return new PolylineShape();\n    };\n    Polyline.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, false);\n    };\n    return Polyline;\n}(Path));\nPolyline.prototype.type = 'polyline';\nexport default Polyline;\n","export function buildPath(ctx, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var width = shape.width;\n    var height = shape.height;\n    var r = shape.r;\n    var r1;\n    var r2;\n    var r3;\n    var r4;\n    if (width < 0) {\n        x = x + width;\n        width = -width;\n    }\n    if (height < 0) {\n        y = y + height;\n        height = -height;\n    }\n    if (typeof r === 'number') {\n        r1 = r2 = r3 = r4 = r;\n    }\n    else if (r instanceof Array) {\n        if (r.length === 1) {\n            r1 = r2 = r3 = r4 = r[0];\n        }\n        else if (r.length === 2) {\n            r1 = r3 = r[0];\n            r2 = r4 = r[1];\n        }\n        else if (r.length === 3) {\n            r1 = r[0];\n            r2 = r4 = r[1];\n            r3 = r[2];\n        }\n        else {\n            r1 = r[0];\n            r2 = r[1];\n            r3 = r[2];\n            r4 = r[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = 0;\n    }\n    var total;\n    if (r1 + r2 > width) {\n        total = r1 + r2;\n        r1 *= width / total;\n        r2 *= width / total;\n    }\n    if (r3 + r4 > width) {\n        total = r3 + r4;\n        r3 *= width / total;\n        r4 *= width / total;\n    }\n    if (r2 + r3 > height) {\n        total = r2 + r3;\n        r2 *= height / total;\n        r3 *= height / total;\n    }\n    if (r1 + r4 > height) {\n        total = r1 + r4;\n        r1 *= height / total;\n        r4 *= height / total;\n    }\n    ctx.moveTo(x + r1, y);\n    ctx.lineTo(x + width - r2, y);\n    r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n    ctx.lineTo(x + width, y + height - r3);\n    r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n    ctx.lineTo(x + r4, y + height);\n    r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n    ctx.lineTo(x, y + r1);\n    r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundRectHelper from '../helper/roundRect.js';\nimport { subPixelOptimizeRect } from '../helper/subPixelOptimize.js';\nvar RectShape = (function () {\n    function RectShape() {\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n    }\n    return RectShape;\n}());\nexport { RectShape };\nvar subPixelOptimizeOutputShape = {};\nvar Rect = (function (_super) {\n    __extends(Rect, _super);\n    function Rect(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Rect.prototype.getDefaultShape = function () {\n        return new RectShape();\n    };\n    Rect.prototype.buildPath = function (ctx, shape) {\n        var x;\n        var y;\n        var width;\n        var height;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n            x = optimizedShape.x;\n            y = optimizedShape.y;\n            width = optimizedShape.width;\n            height = optimizedShape.height;\n            optimizedShape.r = shape.r;\n            shape = optimizedShape;\n        }\n        else {\n            x = shape.x;\n            y = shape.y;\n            width = shape.width;\n            height = shape.height;\n        }\n        if (!shape.r) {\n            ctx.rect(x, y, width, height);\n        }\n        else {\n            roundRectHelper.buildPath(ctx, shape);\n        }\n    };\n    Rect.prototype.isZeroArea = function () {\n        return !this.shape.width || !this.shape.height;\n    };\n    return Rect;\n}(Path));\nRect.prototype.type = 'rect';\nexport default Rect;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar RingShape = (function () {\n    function RingShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.r0 = 0;\n    }\n    return RingShape;\n}());\nexport { RingShape };\nvar Ring = (function (_super) {\n    __extends(Ring, _super);\n    function Ring(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ring.prototype.getDefaultShape = function () {\n        return new RingShape();\n    };\n    Ring.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var PI2 = Math.PI * 2;\n        ctx.moveTo(x + shape.r, y);\n        ctx.arc(x, y, shape.r, 0, PI2, false);\n        ctx.moveTo(x + shape.r0, y);\n        ctx.arc(x, y, shape.r0, 0, PI2, true);\n    };\n    return Ring;\n}(Path));\nRing.prototype.type = 'ring';\nexport default Ring;\n","import { isArray } from '../../core/util.js';\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar mathACos = Math.acos;\nvar mathATan2 = Math.atan2;\nvar mathAbs = Math.abs;\nvar mathSqrt = Math.sqrt;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar e = 1e-4;\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var dx10 = x1 - x0;\n    var dy10 = y1 - y0;\n    var dx32 = x3 - x2;\n    var dy32 = y3 - y2;\n    var t = dy32 * dx10 - dx32 * dy10;\n    if (t * t < e) {\n        return;\n    }\n    t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;\n    return [x0 + t * dx10, y0 + t * dy10];\n}\nfunction computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\n    var x01 = x0 - x1;\n    var y01 = y0 - y1;\n    var lo = (clockwise ? cr : -cr) / mathSqrt(x01 * x01 + y01 * y01);\n    var ox = lo * y01;\n    var oy = -lo * x01;\n    var x11 = x0 + ox;\n    var y11 = y0 + oy;\n    var x10 = x1 + ox;\n    var y10 = y1 + oy;\n    var x00 = (x11 + x10) / 2;\n    var y00 = (y11 + y10) / 2;\n    var dx = x10 - x11;\n    var dy = y10 - y11;\n    var d2 = dx * dx + dy * dy;\n    var r = radius - cr;\n    var s = x11 * y10 - x10 * y11;\n    var d = (dy < 0 ? -1 : 1) * mathSqrt(mathMax(0, r * r * d2 - s * s));\n    var cx0 = (s * dy - dx * d) / d2;\n    var cy0 = (-s * dx - dy * d) / d2;\n    var cx1 = (s * dy + dx * d) / d2;\n    var cy1 = (-s * dx + dy * d) / d2;\n    var dx0 = cx0 - x00;\n    var dy0 = cy0 - y00;\n    var dx1 = cx1 - x00;\n    var dy1 = cy1 - y00;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n        cx0 = cx1;\n        cy0 = cy1;\n    }\n    return {\n        cx: cx0,\n        cy: cy0,\n        x0: -ox,\n        y0: -oy,\n        x1: cx0 * (radius / r - 1),\n        y1: cy0 * (radius / r - 1)\n    };\n}\nfunction normalizeCornerRadius(cr) {\n    var arr;\n    if (isArray(cr)) {\n        var len = cr.length;\n        if (!len) {\n            return cr;\n        }\n        if (len === 1) {\n            arr = [cr[0], cr[0], 0, 0];\n        }\n        else if (len === 2) {\n            arr = [cr[0], cr[0], cr[1], cr[1]];\n        }\n        else if (len === 3) {\n            arr = cr.concat(cr[2]);\n        }\n        else {\n            arr = cr;\n        }\n    }\n    else {\n        arr = [cr, cr, cr, cr];\n    }\n    return arr;\n}\nexport function buildPath(ctx, shape) {\n    var _a;\n    var radius = mathMax(shape.r, 0);\n    var innerRadius = mathMax(shape.r0 || 0, 0);\n    var hasRadius = radius > 0;\n    var hasInnerRadius = innerRadius > 0;\n    if (!hasRadius && !hasInnerRadius) {\n        return;\n    }\n    if (!hasRadius) {\n        radius = innerRadius;\n        innerRadius = 0;\n    }\n    if (innerRadius > radius) {\n        var tmp = radius;\n        radius = innerRadius;\n        innerRadius = tmp;\n    }\n    var startAngle = shape.startAngle, endAngle = shape.endAngle;\n    if (isNaN(startAngle) || isNaN(endAngle)) {\n        return;\n    }\n    var cx = shape.cx, cy = shape.cy;\n    var clockwise = !!shape.clockwise;\n    var arc = mathAbs(endAngle - startAngle);\n    var mod = arc > PI2 && arc % PI2;\n    mod > e && (arc = mod);\n    if (!(radius > e)) {\n        ctx.moveTo(cx, cy);\n    }\n    else if (arc > PI2 - e) {\n        ctx.moveTo(cx + radius * mathCos(startAngle), cy + radius * mathSin(startAngle));\n        ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        if (innerRadius > e) {\n            ctx.moveTo(cx + innerRadius * mathCos(endAngle), cy + innerRadius * mathSin(endAngle));\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    else {\n        var icrStart = void 0;\n        var icrEnd = void 0;\n        var ocrStart = void 0;\n        var ocrEnd = void 0;\n        var ocrs = void 0;\n        var ocre = void 0;\n        var icrs = void 0;\n        var icre = void 0;\n        var ocrMax = void 0;\n        var icrMax = void 0;\n        var limitedOcrMax = void 0;\n        var limitedIcrMax = void 0;\n        var xre = void 0;\n        var yre = void 0;\n        var xirs = void 0;\n        var yirs = void 0;\n        var xrs = radius * mathCos(startAngle);\n        var yrs = radius * mathSin(startAngle);\n        var xire = innerRadius * mathCos(endAngle);\n        var yire = innerRadius * mathSin(endAngle);\n        var hasArc = arc > e;\n        if (hasArc) {\n            var cornerRadius = shape.cornerRadius;\n            if (cornerRadius) {\n                _a = normalizeCornerRadius(cornerRadius), icrStart = _a[0], icrEnd = _a[1], ocrStart = _a[2], ocrEnd = _a[3];\n            }\n            var halfRd = mathAbs(radius - innerRadius) / 2;\n            ocrs = mathMin(halfRd, ocrStart);\n            ocre = mathMin(halfRd, ocrEnd);\n            icrs = mathMin(halfRd, icrStart);\n            icre = mathMin(halfRd, icrEnd);\n            limitedOcrMax = ocrMax = mathMax(ocrs, ocre);\n            limitedIcrMax = icrMax = mathMax(icrs, icre);\n            if (ocrMax > e || icrMax > e) {\n                xre = radius * mathCos(endAngle);\n                yre = radius * mathSin(endAngle);\n                xirs = innerRadius * mathCos(startAngle);\n                yirs = innerRadius * mathSin(startAngle);\n                if (arc < PI) {\n                    var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\n                    if (it_1) {\n                        var x0 = xrs - it_1[0];\n                        var y0 = yrs - it_1[1];\n                        var x1 = xre - it_1[0];\n                        var y1 = yre - it_1[1];\n                        var a = 1 / mathSin(mathACos((x0 * x1 + y0 * y1) / (mathSqrt(x0 * x0 + y0 * y0) * mathSqrt(x1 * x1 + y1 * y1))) / 2);\n                        var b = mathSqrt(it_1[0] * it_1[0] + it_1[1] * it_1[1]);\n                        limitedOcrMax = mathMin(ocrMax, (radius - b) / (a + 1));\n                        limitedIcrMax = mathMin(icrMax, (innerRadius - b) / (a - 1));\n                    }\n                }\n            }\n        }\n        if (!hasArc) {\n            ctx.moveTo(cx + xrs, cy + yrs);\n        }\n        else if (limitedOcrMax > e) {\n            var crStart = mathMin(ocrStart, limitedOcrMax);\n            var crEnd = mathMin(ocrEnd, limitedOcrMax);\n            var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, crStart, clockwise);\n            var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, crEnd, clockwise);\n            ctx.moveTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedOcrMax < ocrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedOcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crStart > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crStart, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, radius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), !clockwise);\n                crEnd > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crEnd, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.moveTo(cx + xrs, cy + yrs);\n            ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        }\n        if (!(innerRadius > e) || !hasArc) {\n            ctx.lineTo(cx + xire, cy + yire);\n        }\n        else if (limitedIcrMax > e) {\n            var crStart = mathMin(icrStart, limitedIcrMax);\n            var crEnd = mathMin(icrEnd, limitedIcrMax);\n            var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -crEnd, clockwise);\n            var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -crStart, clockwise);\n            ctx.lineTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedIcrMax < icrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedIcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crEnd > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crEnd, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, innerRadius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), clockwise);\n                crStart > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crStart, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.lineTo(cx + xire, cy + yire);\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    ctx.closePath();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundSectorHelper from '../helper/roundSector.js';\nvar SectorShape = (function () {\n    function SectorShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r0 = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n        this.cornerRadius = 0;\n    }\n    return SectorShape;\n}());\nexport { SectorShape };\nvar Sector = (function (_super) {\n    __extends(Sector, _super);\n    function Sector(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Sector.prototype.getDefaultShape = function () {\n        return new SectorShape();\n    };\n    Sector.prototype.buildPath = function (ctx, shape) {\n        roundSectorHelper.buildPath(ctx, shape);\n    };\n    Sector.prototype.isZeroArea = function () {\n        return this.shape.startAngle === this.shape.endAngle\n            || this.shape.r === this.shape.r0;\n    };\n    return Sector;\n}(Path));\nSector.prototype.type = 'sector';\nexport default Sector;\n","var Param = (function () {\n    function Param(target, e) {\n        this.target = target;\n        this.topTarget = e && e.topTarget;\n    }\n    return Param;\n}());\nvar Draggable = (function () {\n    function Draggable(handler) {\n        this.handler = handler;\n        handler.on('mousedown', this._dragStart, this);\n        handler.on('mousemove', this._drag, this);\n        handler.on('mouseup', this._dragEnd, this);\n    }\n    Draggable.prototype._dragStart = function (e) {\n        var draggingTarget = e.target;\n        while (draggingTarget && !draggingTarget.draggable) {\n            draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;\n        }\n        if (draggingTarget) {\n            this._draggingTarget = draggingTarget;\n            draggingTarget.dragging = true;\n            this._x = e.offsetX;\n            this._y = e.offsetY;\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n        }\n    };\n    Draggable.prototype._drag = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            var x = e.offsetX;\n            var y = e.offsetY;\n            var dx = x - this._x;\n            var dy = y - this._y;\n            this._x = x;\n            this._y = y;\n            draggingTarget.drift(dx, dy, e);\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n            var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n            var lastDropTarget = this._dropTarget;\n            this._dropTarget = dropTarget;\n            if (draggingTarget !== dropTarget) {\n                if (lastDropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n                }\n                if (dropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n                }\n            }\n        }\n    };\n    Draggable.prototype._dragEnd = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            draggingTarget.dragging = false;\n        }\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n        if (this._dropTarget) {\n            this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n        }\n        this._draggingTarget = null;\n        this._dropTarget = null;\n    };\n    return Draggable;\n}());\nexport default Draggable;\n","import { isAroundZero } from './helper.js';\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar SVGPathRebuilder = (function () {\n    function SVGPathRebuilder() {\n    }\n    SVGPathRebuilder.prototype.reset = function (precision) {\n        this._start = true;\n        this._d = [];\n        this._str = '';\n        this._p = Math.pow(10, precision || 4);\n    };\n    SVGPathRebuilder.prototype.moveTo = function (x, y) {\n        this._add('M', x, y);\n    };\n    SVGPathRebuilder.prototype.lineTo = function (x, y) {\n        this._add('L', x, y);\n    };\n    SVGPathRebuilder.prototype.bezierCurveTo = function (x, y, x2, y2, x3, y3) {\n        this._add('C', x, y, x2, y2, x3, y3);\n    };\n    SVGPathRebuilder.prototype.quadraticCurveTo = function (x, y, x2, y2) {\n        this._add('Q', x, y, x2, y2);\n    };\n    SVGPathRebuilder.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this.ellipse(cx, cy, r, r, 0, startAngle, endAngle, anticlockwise);\n    };\n    SVGPathRebuilder.prototype.ellipse = function (cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise) {\n        var dTheta = endAngle - startAngle;\n        var clockwise = !anticlockwise;\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive - PI2)\n            || (clockwise ? dTheta >= PI2 : -dTheta >= PI2);\n        var unifiedTheta = dTheta > 0 ? dTheta % PI2 : (dTheta % PI2 + PI2);\n        var large = false;\n        if (isCircle) {\n            large = true;\n        }\n        else if (isAroundZero(dThetaPositive)) {\n            large = false;\n        }\n        else {\n            large = (unifiedTheta >= PI) === !!clockwise;\n        }\n        var x0 = cx + rx * mathCos(startAngle);\n        var y0 = cy + ry * mathSin(startAngle);\n        if (this._start) {\n            this._add('M', x0, y0);\n        }\n        var xRot = Math.round(psi * degree);\n        if (isCircle) {\n            var p = 1 / this._p;\n            var dTheta_1 = (clockwise ? 1 : -1) * (PI2 - p);\n            this._add('A', rx, ry, xRot, 1, +clockwise, cx + rx * mathCos(startAngle + dTheta_1), cy + ry * mathSin(startAngle + dTheta_1));\n            if (p > 1e-2) {\n                this._add('A', rx, ry, xRot, 0, +clockwise, x0, y0);\n            }\n        }\n        else {\n            var x = cx + rx * mathCos(endAngle);\n            var y = cy + ry * mathSin(endAngle);\n            this._add('A', rx, ry, xRot, +large, +clockwise, x, y);\n        }\n    };\n    SVGPathRebuilder.prototype.rect = function (x, y, w, h) {\n        this._add('M', x, y);\n        this._add('l', w, 0);\n        this._add('l', 0, h);\n        this._add('l', -w, 0);\n        this._add('Z');\n    };\n    SVGPathRebuilder.prototype.closePath = function () {\n        if (this._d.length > 0) {\n            this._add('Z');\n        }\n    };\n    SVGPathRebuilder.prototype._add = function (cmd, a, b, c, d, e, f, g, h) {\n        var vals = [];\n        var p = this._p;\n        for (var i = 1; i < arguments.length; i++) {\n            var val = arguments[i];\n            if (isNaN(val)) {\n                this._invalid = true;\n                return;\n            }\n            vals.push(Math.round(val * p) / p);\n        }\n        this._d.push(cmd + vals.join(' '));\n        this._start = cmd === 'Z';\n    };\n    SVGPathRebuilder.prototype.generateStr = function () {\n        this._str = this._invalid ? '' : this._d.join('');\n        this._d = [];\n    };\n    SVGPathRebuilder.prototype.getStr = function () {\n        return this._str;\n    };\n    return SVGPathRebuilder;\n}());\nexport default SVGPathRebuilder;\n","import { DEFAULT_PATH_STYLE } from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineDash } from '../canvas/dashStyle.js';\nimport { map } from '../core/util.js';\nimport { normalizeColor } from './helper.js';\nvar NONE = 'none';\nvar mathRound = Math.round;\nfunction pathHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== NONE;\n}\nfunction pathHasStroke(style) {\n    var stroke = style.stroke;\n    return stroke != null && stroke !== NONE;\n}\nvar strokeProps = ['lineCap', 'miterLimit', 'lineJoin'];\nvar svgStrokeProps = map(strokeProps, function (prop) { return \"stroke-\" + prop.toLowerCase(); });\nexport default function mapStyleToAttrs(updateAttr, style, el, forceUpdate) {\n    var opacity = style.opacity == null ? 1 : style.opacity;\n    if (el instanceof ZRImage) {\n        updateAttr('opacity', opacity);\n        return;\n    }\n    if (pathHasFill(style)) {\n        var fill = normalizeColor(style.fill);\n        updateAttr('fill', fill.color);\n        var fillOpacity = style.fillOpacity != null\n            ? style.fillOpacity * fill.opacity * opacity\n            : fill.opacity * opacity;\n        if (forceUpdate || fillOpacity < 1) {\n            updateAttr('fill-opacity', fillOpacity);\n        }\n    }\n    else {\n        updateAttr('fill', NONE);\n    }\n    if (pathHasStroke(style)) {\n        var stroke = normalizeColor(style.stroke);\n        updateAttr('stroke', stroke.color);\n        var strokeScale = style.strokeNoScale\n            ? el.getLineScale()\n            : 1;\n        var strokeWidth = (strokeScale ? (style.lineWidth || 0) / strokeScale : 0);\n        var strokeOpacity = style.strokeOpacity != null\n            ? style.strokeOpacity * stroke.opacity * opacity\n            : stroke.opacity * opacity;\n        var strokeFirst = style.strokeFirst;\n        if (forceUpdate || strokeWidth !== 1) {\n            updateAttr('stroke-width', strokeWidth);\n        }\n        if (forceUpdate || strokeFirst) {\n            updateAttr('paint-order', strokeFirst ? 'stroke' : 'fill');\n        }\n        if (forceUpdate || strokeOpacity < 1) {\n            updateAttr('stroke-opacity', strokeOpacity);\n        }\n        if (style.lineDash) {\n            var _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n            if (lineDash) {\n                lineDashOffset = mathRound(lineDashOffset || 0);\n                updateAttr('stroke-dasharray', lineDash.join(','));\n                if (lineDashOffset || forceUpdate) {\n                    updateAttr('stroke-dashoffset', lineDashOffset);\n                }\n            }\n        }\n        else if (forceUpdate) {\n            updateAttr('stroke-dasharray', NONE);\n        }\n        for (var i = 0; i < strokeProps.length; i++) {\n            var propName = strokeProps[i];\n            if (forceUpdate || style[propName] !== DEFAULT_PATH_STYLE[propName]) {\n                var val = style[propName] || DEFAULT_PATH_STYLE[propName];\n                val && updateAttr(svgStrokeProps[i], val);\n            }\n        }\n    }\n    else if (forceUpdate) {\n        updateAttr('stroke', NONE);\n    }\n}\n","import { keys, map } from '../core/util.js';\nimport { encodeHTML } from '../core/dom.js';\nexport var SVGNS = 'http://www.w3.org/2000/svg';\nexport var XLINKNS = 'http://www.w3.org/1999/xlink';\nexport var XMLNS = 'http://www.w3.org/2000/xmlns/';\nexport var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\nexport function createElement(name) {\n    return document.createElementNS(SVGNS, name);\n}\n;\nexport function createVNode(tag, key, attrs, children, text) {\n    return {\n        tag: tag,\n        attrs: attrs || {},\n        children: children,\n        text: text,\n        key: key\n    };\n}\nfunction createElementOpen(name, attrs) {\n    var attrsStr = [];\n    if (attrs) {\n        for (var key in attrs) {\n            var val = attrs[key];\n            var part = key;\n            if (val === false) {\n                continue;\n            }\n            else if (val !== true && val != null) {\n                part += \"=\\\"\" + val + \"\\\"\";\n            }\n            attrsStr.push(part);\n        }\n    }\n    return \"<\" + name + \" \" + attrsStr.join(' ') + \">\";\n}\nfunction createElementClose(name) {\n    return \"</\" + name + \">\";\n}\nexport function vNodeToString(el, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    function convertElToString(el) {\n        var children = el.children, tag = el.tag, attrs = el.attrs, text = el.text;\n        return createElementOpen(tag, attrs)\n            + (tag !== 'style' ? encodeHTML(text) : text || '')\n            + (children ? \"\" + S + map(children, function (child) { return convertElToString(child); }).join(S) + S : '')\n            + createElementClose(tag);\n    }\n    return convertElToString(el);\n}\nexport function getCssString(selectorNodes, animationNodes, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    var bracketBegin = \" {\" + S;\n    var bracketEnd = S + \"}\";\n    var selectors = map(keys(selectorNodes), function (className) {\n        return className + bracketBegin + map(keys(selectorNodes[className]), function (attrName) {\n            return attrName + \":\" + selectorNodes[className][attrName] + \";\";\n        }).join(S) + bracketEnd;\n    }).join(S);\n    var animations = map(keys(animationNodes), function (animationName) {\n        return \"@keyframes \" + animationName + bracketBegin + map(keys(animationNodes[animationName]), function (percent) {\n            return percent + bracketBegin + map(keys(animationNodes[animationName][percent]), function (attrName) {\n                var val = animationNodes[animationName][percent][attrName];\n                if (attrName === 'd') {\n                    val = \"path(\\\"\" + val + \"\\\")\";\n                }\n                return attrName + \":\" + val + \";\";\n            }).join(S) + bracketEnd;\n        }).join(S) + bracketEnd;\n    }).join(S);\n    if (!selectors && !animations) {\n        return '';\n    }\n    return ['<![CDATA[', selectors, animations, ']]>'].join(S);\n}\nexport function createBrushScope(zrId) {\n    return {\n        zrId: zrId,\n        shadowCache: {},\n        patternCache: {},\n        gradientCache: {},\n        clipPathCache: {},\n        defs: {},\n        cssNodes: {},\n        cssAnims: {},\n        cssClassIdx: 0,\n        cssAnimIdx: 0,\n        shadowIdx: 0,\n        gradientIdx: 0,\n        patternIdx: 0,\n        clipPathIdx: 0\n    };\n}\nexport function createSVGVNode(width, height, children, useViewBox) {\n    return createVNode('svg', 'root', {\n        'width': width,\n        'height': height,\n        'xmlns': SVGNS,\n        'xmlns:xlink': XLINKNS,\n        'version': '1.1',\n        'baseProfile': 'full',\n        'viewBox': useViewBox ? \"0 0 \" + width + \" \" + height : false\n    }, children);\n}\n","import { copyTransform } from '../core/Transformable.js';\nimport { createBrushScope } from './core.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { getPathPrecision, getSRTTransformString } from './helper.js';\nimport { each, extend, filter, isNumber, isString, keys } from '../core/util.js';\nimport CompoundPath from '../graphic/CompoundPath.js';\nimport { createCubicEasingFunc } from '../animation/cubicEasing.js';\nexport var EASING_MAP = {\n    cubicIn: '0.32,0,0.67,0',\n    cubicOut: '0.33,1,0.68,1',\n    cubicInOut: '0.65,0,0.35,1',\n    quadraticIn: '0.11,0,0.5,0',\n    quadraticOut: '0.5,1,0.89,1',\n    quadraticInOut: '0.45,0,0.55,1',\n    quarticIn: '0.5,0,0.75,0',\n    quarticOut: '0.25,1,0.5,1',\n    quarticInOut: '0.76,0,0.24,1',\n    quinticIn: '0.64,0,0.78,0',\n    quinticOut: '0.22,1,0.36,1',\n    quinticInOut: '0.83,0,0.17,1',\n    sinusoidalIn: '0.12,0,0.39,0',\n    sinusoidalOut: '0.61,1,0.88,1',\n    sinusoidalInOut: '0.37,0,0.63,1',\n    exponentialIn: '0.7,0,0.84,0',\n    exponentialOut: '0.16,1,0.3,1',\n    exponentialInOut: '0.87,0,0.13,1',\n    circularIn: '0.55,0,1,0.45',\n    circularOut: '0,0.55,0.45,1',\n    circularInOut: '0.85,0,0.15,1'\n};\nvar transformOriginKey = 'transform-origin';\nfunction buildPathString(el, kfShape, path) {\n    var shape = extend({}, el.shape);\n    extend(shape, kfShape);\n    el.buildPath(path, shape);\n    var svgPathBuilder = new SVGPathRebuilder();\n    svgPathBuilder.reset(getPathPrecision(el));\n    path.rebuildPath(svgPathBuilder, 1);\n    svgPathBuilder.generateStr();\n    return svgPathBuilder.getStr();\n}\nfunction setTransformOrigin(target, transform) {\n    var originX = transform.originX, originY = transform.originY;\n    if (originX || originY) {\n        target[transformOriginKey] = originX + \"px \" + originY + \"px\";\n    }\n}\nexport var ANIMATE_STYLE_MAP = {\n    fill: 'fill',\n    opacity: 'opacity',\n    lineWidth: 'stroke-width',\n    lineDashOffset: 'stroke-dashoffset'\n};\nfunction addAnimation(cssAnim, scope) {\n    var animationName = scope.zrId + '-ani-' + scope.cssAnimIdx++;\n    scope.cssAnims[animationName] = cssAnim;\n    return animationName;\n}\nfunction createCompoundPathCSSAnimation(el, attrs, scope) {\n    var paths = el.shape.paths;\n    var composedAnim = {};\n    var cssAnimationCfg;\n    var cssAnimationName;\n    each(paths, function (path) {\n        var subScope = createBrushScope(scope.zrId);\n        subScope.animation = true;\n        createCSSAnimation(path, {}, subScope, true);\n        var cssAnims = subScope.cssAnims;\n        var cssNodes = subScope.cssNodes;\n        var animNames = keys(cssAnims);\n        var len = animNames.length;\n        if (!len) {\n            return;\n        }\n        cssAnimationName = animNames[len - 1];\n        var lastAnim = cssAnims[cssAnimationName];\n        for (var percent in lastAnim) {\n            var kf = lastAnim[percent];\n            composedAnim[percent] = composedAnim[percent] || { d: '' };\n            composedAnim[percent].d += kf.d || '';\n        }\n        for (var className in cssNodes) {\n            var val = cssNodes[className].animation;\n            if (val.indexOf(cssAnimationName) >= 0) {\n                cssAnimationCfg = val;\n            }\n        }\n    });\n    if (!cssAnimationCfg) {\n        return;\n    }\n    attrs.d = false;\n    var animationName = addAnimation(composedAnim, scope);\n    return cssAnimationCfg.replace(cssAnimationName, animationName);\n}\nfunction getEasingFunc(easing) {\n    return isString(easing)\n        ? EASING_MAP[easing]\n            ? \"cubic-bezier(\" + EASING_MAP[easing] + \")\"\n            : createCubicEasingFunc(easing) ? easing : ''\n        : '';\n}\nexport function createCSSAnimation(el, attrs, scope, onlyShape) {\n    var animators = el.animators;\n    var len = animators.length;\n    var cssAnimations = [];\n    if (el instanceof CompoundPath) {\n        var animationCfg = createCompoundPathCSSAnimation(el, attrs, scope);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n        else if (!len) {\n            return;\n        }\n    }\n    else if (!len) {\n        return;\n    }\n    var groupAnimators = {};\n    for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n        var cfgArr = [animator.getMaxTime() / 1000 + 's'];\n        var easing = getEasingFunc(animator.getClip().easing);\n        var delay = animator.getDelay();\n        if (easing) {\n            cfgArr.push(easing);\n        }\n        else {\n            cfgArr.push('linear');\n        }\n        if (delay) {\n            cfgArr.push(delay / 1000 + 's');\n        }\n        if (animator.getLoop()) {\n            cfgArr.push('infinite');\n        }\n        var cfg = cfgArr.join(' ');\n        groupAnimators[cfg] = groupAnimators[cfg] || [cfg, []];\n        groupAnimators[cfg][1].push(animator);\n    }\n    function createSingleCSSAnimation(groupAnimator) {\n        var animators = groupAnimator[1];\n        var len = animators.length;\n        var transformKfs = {};\n        var shapeKfs = {};\n        var finalKfs = {};\n        var animationTimingFunctionAttrName = 'animation-timing-function';\n        function saveAnimatorTrackToCssKfs(animator, cssKfs, toCssAttrName) {\n            var tracks = animator.getTracks();\n            var maxTime = animator.getMaxTime();\n            for (var k = 0; k < tracks.length; k++) {\n                var track = tracks[k];\n                if (track.needsAnimate()) {\n                    var kfs = track.keyframes;\n                    var attrName = track.propName;\n                    toCssAttrName && (attrName = toCssAttrName(attrName));\n                    if (attrName) {\n                        for (var i = 0; i < kfs.length; i++) {\n                            var kf = kfs[i];\n                            var percent = Math.round(kf.time / maxTime * 100) + '%';\n                            var kfEasing = getEasingFunc(kf.easing);\n                            var rawValue = kf.rawValue;\n                            if (isString(rawValue) || isNumber(rawValue)) {\n                                cssKfs[percent] = cssKfs[percent] || {};\n                                cssKfs[percent][attrName] = kf.rawValue;\n                                if (kfEasing) {\n                                    cssKfs[percent][animationTimingFunctionAttrName] = kfEasing;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            var targetProp = animator.targetName;\n            if (!targetProp) {\n                !onlyShape && saveAnimatorTrackToCssKfs(animator, transformKfs);\n            }\n            else if (targetProp === 'shape') {\n                saveAnimatorTrackToCssKfs(animator, shapeKfs);\n            }\n        }\n        for (var percent in transformKfs) {\n            var transform = {};\n            copyTransform(transform, el);\n            extend(transform, transformKfs[percent]);\n            var str = getSRTTransformString(transform);\n            var timingFunction = transformKfs[percent][animationTimingFunctionAttrName];\n            finalKfs[percent] = str ? {\n                transform: str\n            } : {};\n            setTransformOrigin(finalKfs[percent], transform);\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        var path;\n        var canAnimateShape = true;\n        for (var percent in shapeKfs) {\n            finalKfs[percent] = finalKfs[percent] || {};\n            var isFirst = !path;\n            var timingFunction = shapeKfs[percent][animationTimingFunctionAttrName];\n            if (isFirst) {\n                path = new PathProxy();\n            }\n            var len_1 = path.len();\n            path.reset();\n            finalKfs[percent].d = buildPathString(el, shapeKfs[percent], path);\n            var newLen = path.len();\n            if (!isFirst && len_1 !== newLen) {\n                canAnimateShape = false;\n                break;\n            }\n            if (timingFunction) {\n                finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n            }\n        }\n        ;\n        if (!canAnimateShape) {\n            for (var percent in finalKfs) {\n                delete finalKfs[percent].d;\n            }\n        }\n        if (!onlyShape) {\n            for (var i = 0; i < len; i++) {\n                var animator = animators[i];\n                var targetProp = animator.targetName;\n                if (targetProp === 'style') {\n                    saveAnimatorTrackToCssKfs(animator, finalKfs, function (propName) { return ANIMATE_STYLE_MAP[propName]; });\n                }\n            }\n        }\n        var percents = keys(finalKfs);\n        var allTransformOriginSame = true;\n        var transformOrigin;\n        for (var i = 1; i < percents.length; i++) {\n            var p0 = percents[i - 1];\n            var p1 = percents[i];\n            if (finalKfs[p0][transformOriginKey] !== finalKfs[p1][transformOriginKey]) {\n                allTransformOriginSame = false;\n                break;\n            }\n            transformOrigin = finalKfs[p0][transformOriginKey];\n        }\n        if (allTransformOriginSame && transformOrigin) {\n            for (var percent in finalKfs) {\n                if (finalKfs[percent][transformOriginKey]) {\n                    delete finalKfs[percent][transformOriginKey];\n                }\n            }\n            attrs[transformOriginKey] = transformOrigin;\n        }\n        if (filter(percents, function (percent) { return keys(finalKfs[percent]).length > 0; }).length) {\n            var animationName = addAnimation(finalKfs, scope);\n            return animationName + \" \" + groupAnimator[0] + \" both\";\n        }\n    }\n    for (var key in groupAnimators) {\n        var animationCfg = createSingleCSSAnimation(groupAnimators[key]);\n        if (animationCfg) {\n            cssAnimations.push(animationCfg);\n        }\n    }\n    if (cssAnimations.length) {\n        var className = scope.zrId + '-cls-' + scope.cssClassIdx++;\n        scope.cssNodes['.' + className] = {\n            animation: cssAnimations.join(',')\n        };\n        attrs[\"class\"] = className;\n    }\n}\n","import { adjustTextY, getIdURL, getMatrixStr, getPathPrecision, getShadowKey, getSRTTransformString, hasShadow, isAroundZero, isGradient, isImagePattern, isLinearGradient, isPattern, isRadialGradient, normalizeColor, round4, TEXT_ALIGN_TO_ANCHOR } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineHeight } from '../contain/text.js';\nimport TSpan from '../graphic/TSpan.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport mapStyleToAttrs from './mapStyleToAttrs.js';\nimport { createVNode, vNodeToString } from './core.js';\nimport { assert, clone, isFunction, isString, logError, map, retrieve2 } from '../core/util.js';\nimport { createOrUpdateImage } from '../graphic/helper/image.js';\nimport { createCSSAnimation } from './cssAnimation.js';\nimport { hasSeparateFont, parseFontSize } from '../graphic/Text.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_FAMILY } from '../core/platform.js';\nvar round = Math.round;\nfunction isImageLike(val) {\n    return val && isString(val.src);\n}\nfunction isCanvasLike(val) {\n    return val && isFunction(val.toDataURL);\n}\nfunction setStyleAttrs(attrs, style, el, scope) {\n    mapStyleToAttrs(function (key, val) {\n        var isFillStroke = key === 'fill' || key === 'stroke';\n        if (isFillStroke && isGradient(val)) {\n            setGradient(style, attrs, key, scope);\n        }\n        else if (isFillStroke && isPattern(val)) {\n            setPattern(el, attrs, key, scope);\n        }\n        else {\n            attrs[key] = val;\n        }\n    }, style, el, false);\n    setShadow(el, attrs, scope);\n}\nfunction noRotateScale(m) {\n    return isAroundZero(m[0] - 1)\n        && isAroundZero(m[1])\n        && isAroundZero(m[2])\n        && isAroundZero(m[3] - 1);\n}\nfunction noTranslate(m) {\n    return isAroundZero(m[4]) && isAroundZero(m[5]);\n}\nfunction setTransform(attrs, m, compress) {\n    if (m && !(noTranslate(m) && noRotateScale(m))) {\n        var mul = compress ? 10 : 1e4;\n        attrs.transform = noRotateScale(m)\n            ? \"translate(\" + round(m[4] * mul) / mul + \" \" + round(m[5] * mul) / mul + \")\" : getMatrixStr(m);\n    }\n}\nfunction convertPolyShape(shape, attrs, mul) {\n    var points = shape.points;\n    var strArr = [];\n    for (var i = 0; i < points.length; i++) {\n        strArr.push(round(points[i][0] * mul) / mul);\n        strArr.push(round(points[i][1] * mul) / mul);\n    }\n    attrs.points = strArr.join(' ');\n}\nfunction validatePolyShape(shape) {\n    return !shape.smooth;\n}\nfunction createAttrsConvert(desc) {\n    var normalizedDesc = map(desc, function (item) {\n        return (typeof item === 'string' ? [item, item] : item);\n    });\n    return function (shape, attrs, mul) {\n        for (var i = 0; i < normalizedDesc.length; i++) {\n            var item = normalizedDesc[i];\n            var val = shape[item[0]];\n            if (val != null) {\n                attrs[item[1]] = round(val * mul) / mul;\n            }\n        }\n    };\n}\nvar builtinShapesDef = {\n    circle: [createAttrsConvert(['cx', 'cy', 'r'])],\n    polyline: [convertPolyShape, validatePolyShape],\n    polygon: [convertPolyShape, validatePolyShape]\n};\nfunction hasShapeAnimation(el) {\n    var animators = el.animators;\n    for (var i = 0; i < animators.length; i++) {\n        if (animators[i].targetName === 'shape') {\n            return true;\n        }\n    }\n    return false;\n}\nexport function brushSVGPath(el, scope) {\n    var style = el.style;\n    var shape = el.shape;\n    var builtinShpDef = builtinShapesDef[el.type];\n    var attrs = {};\n    var needsAnimate = scope.animation;\n    var svgElType = 'path';\n    var strokePercent = el.style.strokePercent;\n    var precision = (scope.compress && getPathPrecision(el)) || 4;\n    if (builtinShpDef\n        && !scope.willUpdate\n        && !(builtinShpDef[1] && !builtinShpDef[1](shape))\n        && !(needsAnimate && hasShapeAnimation(el))\n        && !(strokePercent < 1)) {\n        svgElType = el.type;\n        var mul = Math.pow(10, precision);\n        builtinShpDef[0](shape, attrs, mul);\n    }\n    else {\n        var needBuildPath = !el.path || el.shapeChanged();\n        if (!el.path) {\n            el.createPathProxy();\n        }\n        var path = el.path;\n        if (needBuildPath) {\n            path.beginPath();\n            el.buildPath(path, el.shape);\n            el.pathUpdated();\n        }\n        var pathVersion = path.getVersion();\n        var elExt = el;\n        var svgPathBuilder = elExt.__svgPathBuilder;\n        if (elExt.__svgPathVersion !== pathVersion\n            || !svgPathBuilder\n            || strokePercent !== elExt.__svgPathStrokePercent) {\n            if (!svgPathBuilder) {\n                svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n            }\n            svgPathBuilder.reset(precision);\n            path.rebuildPath(svgPathBuilder, strokePercent);\n            svgPathBuilder.generateStr();\n            elExt.__svgPathVersion = pathVersion;\n            elExt.__svgPathStrokePercent = strokePercent;\n        }\n        attrs.d = svgPathBuilder.getStr();\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode(svgElType, el.id + '', attrs);\n}\nexport function brushSVGImage(el, scope) {\n    var style = el.style;\n    var image = style.image;\n    if (image && !isString(image)) {\n        if (isImageLike(image)) {\n            image = image.src;\n        }\n        else if (isCanvasLike(image)) {\n            image = image.toDataURL();\n        }\n    }\n    if (!image) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var attrs = {\n        href: image,\n        width: dw,\n        height: dh\n    };\n    if (x) {\n        attrs.x = x;\n    }\n    if (y) {\n        attrs.y = y;\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('image', el.id + '', attrs);\n}\n;\nexport function brushSVGTSpan(el, scope) {\n    var style = el.style;\n    var text = style.text;\n    text != null && (text += '');\n    if (!text || isNaN(style.x) || isNaN(style.y)) {\n        return;\n    }\n    var font = style.font || DEFAULT_FONT;\n    var x = style.x || 0;\n    var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n    var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign]\n        || style.textAlign;\n    var attrs = {\n        'dominant-baseline': 'central',\n        'text-anchor': textAlign\n    };\n    if (hasSeparateFont(style)) {\n        var separatedFontStr = '';\n        var fontStyle = style.fontStyle;\n        var fontSize = parseFontSize(style.fontSize);\n        if (!parseFloat(fontSize)) {\n            return;\n        }\n        var fontFamily = style.fontFamily || DEFAULT_FONT_FAMILY;\n        var fontWeight = style.fontWeight;\n        separatedFontStr += \"font-size:\" + fontSize + \";font-family:\" + fontFamily + \";\";\n        if (fontStyle && fontStyle !== 'normal') {\n            separatedFontStr += \"font-style:\" + fontStyle + \";\";\n        }\n        if (fontWeight && fontWeight !== 'normal') {\n            separatedFontStr += \"font-weight:\" + fontWeight + \";\";\n        }\n        attrs.style = separatedFontStr;\n    }\n    else {\n        attrs.style = \"font: \" + font;\n    }\n    if (text.match(/\\s/)) {\n        attrs['xml:space'] = 'preserve';\n    }\n    if (x) {\n        attrs.x = x;\n    }\n    if (y) {\n        attrs.y = y;\n    }\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('text', el.id + '', attrs, undefined, text);\n}\nexport function brush(el, scope) {\n    if (el instanceof Path) {\n        return brushSVGPath(el, scope);\n    }\n    else if (el instanceof ZRImage) {\n        return brushSVGImage(el, scope);\n    }\n    else if (el instanceof TSpan) {\n        return brushSVGTSpan(el, scope);\n    }\n}\nfunction setShadow(el, attrs, scope) {\n    var style = el.style;\n    if (hasShadow(style)) {\n        var shadowKey = getShadowKey(el);\n        var shadowCache = scope.shadowCache;\n        var shadowId = shadowCache[shadowKey];\n        if (!shadowId) {\n            var globalScale = el.getGlobalScale();\n            var scaleX = globalScale[0];\n            var scaleY = globalScale[1];\n            if (!scaleX || !scaleY) {\n                return;\n            }\n            var offsetX = style.shadowOffsetX || 0;\n            var offsetY = style.shadowOffsetY || 0;\n            var blur_1 = style.shadowBlur;\n            var _a = normalizeColor(style.shadowColor), opacity = _a.opacity, color = _a.color;\n            var stdDx = blur_1 / 2 / scaleX;\n            var stdDy = blur_1 / 2 / scaleY;\n            var stdDeviation = stdDx + ' ' + stdDy;\n            shadowId = scope.zrId + '-s' + scope.shadowIdx++;\n            scope.defs[shadowId] = createVNode('filter', shadowId, {\n                'id': shadowId,\n                'x': '-100%',\n                'y': '-100%',\n                'width': '300%',\n                'height': '300%'\n            }, [\n                createVNode('feDropShadow', '', {\n                    'dx': offsetX / scaleX,\n                    'dy': offsetY / scaleY,\n                    'stdDeviation': stdDeviation,\n                    'flood-color': color,\n                    'flood-opacity': opacity\n                })\n            ]);\n            shadowCache[shadowKey] = shadowId;\n        }\n        attrs.filter = getIdURL(shadowId);\n    }\n}\nexport function setGradient(style, attrs, target, scope) {\n    var val = style[target];\n    var gradientTag;\n    var gradientAttrs = {\n        'gradientUnits': val.global\n            ? 'userSpaceOnUse'\n            : 'objectBoundingBox'\n    };\n    if (isLinearGradient(val)) {\n        gradientTag = 'linearGradient';\n        gradientAttrs.x1 = val.x;\n        gradientAttrs.y1 = val.y;\n        gradientAttrs.x2 = val.x2;\n        gradientAttrs.y2 = val.y2;\n    }\n    else if (isRadialGradient(val)) {\n        gradientTag = 'radialGradient';\n        gradientAttrs.cx = retrieve2(val.x, 0.5);\n        gradientAttrs.cy = retrieve2(val.y, 0.5);\n        gradientAttrs.r = retrieve2(val.r, 0.5);\n    }\n    else {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Illegal gradient type.');\n        }\n        return;\n    }\n    var colors = val.colorStops;\n    var colorStops = [];\n    for (var i = 0, len = colors.length; i < len; ++i) {\n        var offset = round4(colors[i].offset) * 100 + '%';\n        var stopColor = colors[i].color;\n        var _a = normalizeColor(stopColor), color = _a.color, opacity = _a.opacity;\n        var stopsAttrs = {\n            'offset': offset\n        };\n        stopsAttrs['stop-color'] = color;\n        if (opacity < 1) {\n            stopsAttrs['stop-opacity'] = opacity;\n        }\n        colorStops.push(createVNode('stop', i + '', stopsAttrs));\n    }\n    var gradientVNode = createVNode(gradientTag, '', gradientAttrs, colorStops);\n    var gradientKey = vNodeToString(gradientVNode);\n    var gradientCache = scope.gradientCache;\n    var gradientId = gradientCache[gradientKey];\n    if (!gradientId) {\n        gradientId = scope.zrId + '-g' + scope.gradientIdx++;\n        gradientCache[gradientKey] = gradientId;\n        gradientAttrs.id = gradientId;\n        scope.defs[gradientId] = createVNode(gradientTag, gradientId, gradientAttrs, colorStops);\n    }\n    attrs[target] = getIdURL(gradientId);\n}\nexport function setPattern(el, attrs, target, scope) {\n    var val = el.style[target];\n    var boundingRect = el.getBoundingRect();\n    var patternAttrs = {};\n    var repeat = val.repeat;\n    var noRepeat = repeat === 'no-repeat';\n    var repeatX = repeat === 'repeat-x';\n    var repeatY = repeat === 'repeat-y';\n    var child;\n    if (isImagePattern(val)) {\n        var imageWidth_1 = val.imageWidth;\n        var imageHeight_1 = val.imageHeight;\n        var imageSrc = void 0;\n        var patternImage = val.image;\n        if (isString(patternImage)) {\n            imageSrc = patternImage;\n        }\n        else if (isImageLike(patternImage)) {\n            imageSrc = patternImage.src;\n        }\n        else if (isCanvasLike(patternImage)) {\n            imageSrc = patternImage.toDataURL();\n        }\n        if (typeof Image === 'undefined') {\n            var errMsg = 'Image width/height must been given explictly in svg-ssr renderer.';\n            assert(imageWidth_1, errMsg);\n            assert(imageHeight_1, errMsg);\n        }\n        else if (imageWidth_1 == null || imageHeight_1 == null) {\n            var setSizeToVNode_1 = function (vNode, img) {\n                if (vNode) {\n                    var svgEl = vNode.elm;\n                    var width = imageWidth_1 || img.width;\n                    var height = imageHeight_1 || img.height;\n                    if (vNode.tag === 'pattern') {\n                        if (repeatX) {\n                            height = 1;\n                            width /= boundingRect.width;\n                        }\n                        else if (repeatY) {\n                            width = 1;\n                            height /= boundingRect.height;\n                        }\n                    }\n                    vNode.attrs.width = width;\n                    vNode.attrs.height = height;\n                    if (svgEl) {\n                        svgEl.setAttribute('width', width);\n                        svgEl.setAttribute('height', height);\n                    }\n                }\n            };\n            var createdImage = createOrUpdateImage(imageSrc, null, el, function (img) {\n                noRepeat || setSizeToVNode_1(patternVNode, img);\n                setSizeToVNode_1(child, img);\n            });\n            if (createdImage && createdImage.width && createdImage.height) {\n                imageWidth_1 = imageWidth_1 || createdImage.width;\n                imageHeight_1 = imageHeight_1 || createdImage.height;\n            }\n        }\n        child = createVNode('image', 'img', {\n            href: imageSrc,\n            width: imageWidth_1,\n            height: imageHeight_1\n        });\n        patternAttrs.width = imageWidth_1;\n        patternAttrs.height = imageHeight_1;\n    }\n    else if (val.svgElement) {\n        child = clone(val.svgElement);\n        patternAttrs.width = val.svgWidth;\n        patternAttrs.height = val.svgHeight;\n    }\n    if (!child) {\n        return;\n    }\n    var patternWidth;\n    var patternHeight;\n    if (noRepeat) {\n        patternWidth = patternHeight = 1;\n    }\n    else if (repeatX) {\n        patternHeight = 1;\n        patternWidth = patternAttrs.width / boundingRect.width;\n    }\n    else if (repeatY) {\n        patternWidth = 1;\n        patternHeight = patternAttrs.height / boundingRect.height;\n    }\n    else {\n        patternAttrs.patternUnits = 'userSpaceOnUse';\n    }\n    if (patternWidth != null && !isNaN(patternWidth)) {\n        patternAttrs.width = patternWidth;\n    }\n    if (patternHeight != null && !isNaN(patternHeight)) {\n        patternAttrs.height = patternHeight;\n    }\n    var patternTransform = getSRTTransformString(val);\n    patternTransform && (patternAttrs.patternTransform = patternTransform);\n    var patternVNode = createVNode('pattern', '', patternAttrs, [child]);\n    var patternKey = vNodeToString(patternVNode);\n    var patternCache = scope.patternCache;\n    var patternId = patternCache[patternKey];\n    if (!patternId) {\n        patternId = scope.zrId + '-p' + scope.patternIdx++;\n        patternCache[patternKey] = patternId;\n        patternAttrs.id = patternId;\n        patternVNode = scope.defs[patternId] = createVNode('pattern', patternId, patternAttrs, [child]);\n    }\n    attrs[target] = getIdURL(patternId);\n}\nexport function setClipPath(clipPath, attrs, scope) {\n    var clipPathCache = scope.clipPathCache, defs = scope.defs;\n    var clipPathId = clipPathCache[clipPath.id];\n    if (!clipPathId) {\n        clipPathId = scope.zrId + '-c' + scope.clipPathIdx++;\n        var clipPathAttrs = {\n            id: clipPathId\n        };\n        clipPathCache[clipPath.id] = clipPathId;\n        defs[clipPathId] = createVNode('clipPath', clipPathId, clipPathAttrs, [brushSVGPath(clipPath, scope)]);\n    }\n    attrs['clip-path'] = getIdURL(clipPathId);\n}\n","export function createTextNode(text) {\n    return document.createTextNode(text);\n}\nexport function createComment(text) {\n    return document.createComment(text);\n}\nexport function insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nexport function removeChild(node, child) {\n    node.removeChild(child);\n}\nexport function appendChild(node, child) {\n    node.appendChild(child);\n}\nexport function parentNode(node) {\n    return node.parentNode;\n}\nexport function nextSibling(node) {\n    return node.nextSibling;\n}\nexport function tagName(elm) {\n    return elm.tagName;\n}\nexport function setTextContent(node, text) {\n    node.textContent = text;\n}\nexport function getTextContent(node) {\n    return node.textContent;\n}\nexport function isElement(node) {\n    return node.nodeType === 1;\n}\nexport function isText(node) {\n    return node.nodeType === 3;\n}\nexport function isComment(node) {\n    return node.nodeType === 8;\n}\n","import { isArray, isObject } from '../core/util.js';\nimport { createElement, createVNode, XMLNS, XML_NAMESPACE, XLINKNS } from './core.js';\nimport * as api from './domapi.js';\nvar colonChar = 58;\nvar xChar = 120;\nvar emptyNode = createVNode('', '');\nfunction isUndef(s) {\n    return s === undefined;\n}\nfunction isDef(s) {\n    return s !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var map = {};\n    for (var i = beginIdx; i <= endIdx; ++i) {\n        var key = children[i].key;\n        if (key !== undefined) {\n            if (process.env.NODE_ENV !== 'production') {\n                if (map[key] != null) {\n                    console.error(\"Duplicate key \" + key);\n                }\n            }\n            map[key] = i;\n        }\n    }\n    return map;\n}\nfunction sameVnode(vnode1, vnode2) {\n    var isSameKey = vnode1.key === vnode2.key;\n    var isSameTag = vnode1.tag === vnode2.tag;\n    return isSameTag && isSameKey;\n}\nfunction createElm(vnode) {\n    var i;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n        var elm = (vnode.elm = createElement(tag));\n        updateAttrs(emptyNode, vnode);\n        if (isArray(children)) {\n            for (i = 0; i < children.length; ++i) {\n                var ch = children[i];\n                if (ch != null) {\n                    api.appendChild(elm, createElm(ch));\n                }\n            }\n        }\n        else if (isDef(vnode.text) && !isObject(vnode.text)) {\n            api.appendChild(elm, api.createTextNode(vnode.text));\n        }\n    }\n    else {\n        vnode.elm = api.createTextNode(vnode.text);\n    }\n    return vnode.elm;\n}\nfunction addVnodes(parentElm, before, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        var ch = vnodes[startIdx];\n        if (ch != null) {\n            api.insertBefore(parentElm, createElm(ch), before);\n        }\n    }\n}\nfunction removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        var ch = vnodes[startIdx];\n        if (ch != null) {\n            if (isDef(ch.tag)) {\n                var parent_1 = api.parentNode(ch.elm);\n                api.removeChild(parent_1, ch.elm);\n            }\n            else {\n                api.removeChild(parentElm, ch.elm);\n            }\n        }\n    }\n}\nexport function updateAttrs(oldVnode, vnode) {\n    var key;\n    var elm = vnode.elm;\n    var oldAttrs = oldVnode && oldVnode.attrs || {};\n    var attrs = vnode.attrs || {};\n    if (oldAttrs === attrs) {\n        return;\n    }\n    for (key in attrs) {\n        var cur = attrs[key];\n        var old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, '');\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key === 'xmlns:xlink' || key === 'xmlns') {\n                    elm.setAttributeNS(XMLNS, key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    elm.setAttributeNS(XML_NAMESPACE, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    elm.setAttributeNS(XLINKNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nfunction updateChildren(parentElm, oldCh, newCh) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx;\n    var idxInOld;\n    var elmToMove;\n    var before;\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n        if (oldStartVnode == null) {\n            oldStartVnode = oldCh[++oldStartIdx];\n        }\n        else if (oldEndVnode == null) {\n            oldEndVnode = oldCh[--oldEndIdx];\n        }\n        else if (newStartVnode == null) {\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (newEndVnode == null) {\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldStartVnode, newStartVnode)) {\n            patchVnode(oldStartVnode, newStartVnode);\n            oldStartVnode = oldCh[++oldStartIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else if (sameVnode(oldEndVnode, newEndVnode)) {\n            patchVnode(oldEndVnode, newEndVnode);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldStartVnode, newEndVnode)) {\n            patchVnode(oldStartVnode, newEndVnode);\n            api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n            oldStartVnode = oldCh[++oldStartIdx];\n            newEndVnode = newCh[--newEndIdx];\n        }\n        else if (sameVnode(oldEndVnode, newStartVnode)) {\n            patchVnode(oldEndVnode, newStartVnode);\n            api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n            oldEndVnode = oldCh[--oldEndIdx];\n            newStartVnode = newCh[++newStartIdx];\n        }\n        else {\n            if (isUndef(oldKeyToIdx)) {\n                oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n            }\n            idxInOld = oldKeyToIdx[newStartVnode.key];\n            if (isUndef(idxInOld)) {\n                api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n            }\n            else {\n                elmToMove = oldCh[idxInOld];\n                if (elmToMove.tag !== newStartVnode.tag) {\n                    api.insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n                }\n                else {\n                    patchVnode(elmToMove, newStartVnode);\n                    oldCh[idxInOld] = undefined;\n                    api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                }\n            }\n            newStartVnode = newCh[++newStartIdx];\n        }\n    }\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\n        if (oldStartIdx > oldEndIdx) {\n            before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n            addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\n        }\n        else {\n            removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n        }\n    }\n}\nfunction patchVnode(oldVnode, vnode) {\n    var elm = (vnode.elm = oldVnode.elm);\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (oldVnode === vnode) {\n        return;\n    }\n    updateAttrs(oldVnode, vnode);\n    if (isUndef(vnode.text)) {\n        if (isDef(oldCh) && isDef(ch)) {\n            if (oldCh !== ch) {\n                updateChildren(elm, oldCh, ch);\n            }\n        }\n        else if (isDef(ch)) {\n            if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, '');\n            }\n            addVnodes(elm, null, ch, 0, ch.length - 1);\n        }\n        else if (isDef(oldCh)) {\n            removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n        }\n        else if (isDef(oldVnode.text)) {\n            api.setTextContent(elm, '');\n        }\n    }\n    else if (oldVnode.text !== vnode.text) {\n        if (isDef(oldCh)) {\n            removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n        }\n        api.setTextContent(elm, vnode.text);\n    }\n}\nexport default function patch(oldVnode, vnode) {\n    if (sameVnode(oldVnode, vnode)) {\n        patchVnode(oldVnode, vnode);\n    }\n    else {\n        var elm = oldVnode.elm;\n        var parent_2 = api.parentNode(elm);\n        createElm(vnode);\n        if (parent_2 !== null) {\n            api.insertBefore(parent_2, vnode.elm, api.nextSibling(elm));\n            removeVnodes(parent_2, [oldVnode], 0, 0);\n        }\n    }\n    return vnode;\n}\n","import { brush, setClipPath, setGradient, setPattern } from './graphic.js';\nimport { createElement, createVNode, vNodeToString, getCssString, createBrushScope, createSVGVNode } from './core.js';\nimport { normalizeColor, encodeBase64, isGradient, isPattern } from './helper.js';\nimport { extend, keys, logError, map, noop, retrieve2 } from '../core/util.js';\nimport patch, { updateAttrs } from './patch.js';\nimport { getSize } from '../canvas/helper.js';\nvar svgId = 0;\nvar SVGPainter = (function () {\n    function SVGPainter(root, storage, opts) {\n        this.type = 'svg';\n        this.refreshHover = createMethodNotSupport('refreshHover');\n        this.configLayer = createMethodNotSupport('configLayer');\n        this.storage = storage;\n        this._opts = opts = extend({}, opts);\n        this.root = root;\n        this._id = 'zr' + svgId++;\n        this._oldVNode = createSVGVNode(opts.width, opts.height);\n        if (root && !opts.ssr) {\n            var viewport = this._viewport = document.createElement('div');\n            viewport.style.cssText = 'position:relative;overflow:hidden';\n            var svgDom = this._svgDom = this._oldVNode.elm = createElement('svg');\n            updateAttrs(null, this._oldVNode);\n            viewport.appendChild(svgDom);\n            root.appendChild(viewport);\n        }\n        this.resize(opts.width, opts.height);\n    }\n    SVGPainter.prototype.getType = function () {\n        return this.type;\n    };\n    SVGPainter.prototype.getViewportRoot = function () {\n        return this._viewport;\n    };\n    SVGPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    SVGPainter.prototype.getSvgDom = function () {\n        return this._svgDom;\n    };\n    SVGPainter.prototype.refresh = function () {\n        if (this.root) {\n            var vnode = this.renderToVNode({\n                willUpdate: true\n            });\n            vnode.attrs.style = 'position:absolute;left:0;top:0;user-select:none';\n            patch(this._oldVNode, vnode);\n            this._oldVNode = vnode;\n        }\n    };\n    SVGPainter.prototype.renderOneToVNode = function (el) {\n        return brush(el, createBrushScope(this._id));\n    };\n    SVGPainter.prototype.renderToVNode = function (opts) {\n        opts = opts || {};\n        var list = this.storage.getDisplayList(true);\n        var width = this._width;\n        var height = this._height;\n        var scope = createBrushScope(this._id);\n        scope.animation = opts.animation;\n        scope.willUpdate = opts.willUpdate;\n        scope.compress = opts.compress;\n        var children = [];\n        var bgVNode = this._bgVNode = createBackgroundVNode(width, height, this._backgroundColor, scope);\n        bgVNode && children.push(bgVNode);\n        var mainVNode = !opts.compress\n            ? (this._mainVNode = createVNode('g', 'main', {}, [])) : null;\n        this._paintList(list, scope, mainVNode ? mainVNode.children : children);\n        mainVNode && children.push(mainVNode);\n        var defs = map(keys(scope.defs), function (id) { return scope.defs[id]; });\n        if (defs.length) {\n            children.push(createVNode('defs', 'defs', {}, defs));\n        }\n        if (opts.animation) {\n            var animationCssStr = getCssString(scope.cssNodes, scope.cssAnims, { newline: true });\n            if (animationCssStr) {\n                var styleNode = createVNode('style', 'stl', {}, [], animationCssStr);\n                children.push(styleNode);\n            }\n        }\n        return createSVGVNode(width, height, children, opts.useViewBox);\n    };\n    SVGPainter.prototype.renderToString = function (opts) {\n        opts = opts || {};\n        return vNodeToString(this.renderToVNode({\n            animation: retrieve2(opts.cssAnimation, true),\n            willUpdate: false,\n            compress: true,\n            useViewBox: retrieve2(opts.useViewBox, true)\n        }), { newline: true });\n    };\n    SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n    };\n    SVGPainter.prototype.getSvgRoot = function () {\n        return this._mainVNode && this._mainVNode.elm;\n    };\n    SVGPainter.prototype._paintList = function (list, scope, out) {\n        var listLen = list.length;\n        var clipPathsGroupsStack = [];\n        var clipPathsGroupsStackDepth = 0;\n        var currentClipPathGroup;\n        var prevClipPaths;\n        var clipGroupNodeIdx = 0;\n        for (var i = 0; i < listLen; i++) {\n            var displayable = list[i];\n            if (!displayable.invisible) {\n                var clipPaths = displayable.__clipPaths;\n                var len = clipPaths && clipPaths.length || 0;\n                var prevLen = prevClipPaths && prevClipPaths.length || 0;\n                var lca = void 0;\n                for (lca = Math.max(len - 1, prevLen - 1); lca >= 0; lca--) {\n                    if (clipPaths && prevClipPaths\n                        && clipPaths[lca] === prevClipPaths[lca]) {\n                        break;\n                    }\n                }\n                for (var i_1 = prevLen - 1; i_1 > lca; i_1--) {\n                    clipPathsGroupsStackDepth--;\n                    currentClipPathGroup = clipPathsGroupsStack[clipPathsGroupsStackDepth - 1];\n                }\n                for (var i_2 = lca + 1; i_2 < len; i_2++) {\n                    var groupAttrs = {};\n                    setClipPath(clipPaths[i_2], groupAttrs, scope);\n                    var g = createVNode('g', 'clip-g-' + clipGroupNodeIdx++, groupAttrs, []);\n                    (currentClipPathGroup ? currentClipPathGroup.children : out).push(g);\n                    clipPathsGroupsStack[clipPathsGroupsStackDepth++] = g;\n                    currentClipPathGroup = g;\n                }\n                prevClipPaths = clipPaths;\n                var ret = brush(displayable, scope);\n                if (ret) {\n                    (currentClipPathGroup ? currentClipPathGroup.children : out).push(ret);\n                }\n            }\n        }\n    };\n    SVGPainter.prototype.resize = function (width, height) {\n        var opts = this._opts;\n        var root = this.root;\n        var viewport = this._viewport;\n        width != null && (opts.width = width);\n        height != null && (opts.height = height);\n        if (root && viewport) {\n            viewport.style.display = 'none';\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            viewport.style.display = '';\n        }\n        if (this._width !== width || this._height !== height) {\n            this._width = width;\n            this._height = height;\n            if (viewport) {\n                var viewportStyle = viewport.style;\n                viewportStyle.width = width + 'px';\n                viewportStyle.height = height + 'px';\n            }\n            if (!isPattern(this._backgroundColor)) {\n                var svgDom = this._svgDom;\n                if (svgDom) {\n                    svgDom.setAttribute('width', width);\n                    svgDom.setAttribute('height', height);\n                }\n                var bgEl = this._bgVNode && this._bgVNode.elm;\n                if (bgEl) {\n                    bgEl.setAttribute('width', width);\n                    bgEl.setAttribute('height', height);\n                }\n            }\n            else {\n                this.refresh();\n            }\n        }\n    };\n    SVGPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    SVGPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    SVGPainter.prototype.dispose = function () {\n        if (this.root) {\n            this.root.innerHTML = '';\n        }\n        this._svgDom =\n            this._viewport =\n                this.storage =\n                    this._oldVNode =\n                        this._bgVNode =\n                            this._mainVNode = null;\n    };\n    SVGPainter.prototype.clear = function () {\n        if (this._svgDom) {\n            this._svgDom.innerHTML = null;\n        }\n        this._oldVNode = null;\n    };\n    SVGPainter.prototype.toDataURL = function (base64) {\n        var str = this.renderToString();\n        var prefix = 'data:image/svg+xml;';\n        if (base64) {\n            str = encodeBase64(str);\n            return str && prefix + 'base64,' + str;\n        }\n        return prefix + 'charset=UTF-8,' + encodeURIComponent(str);\n    };\n    return SVGPainter;\n}());\nfunction createMethodNotSupport(method) {\n    return function () {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('In SVG mode painter not support method \"' + method + '\"');\n        }\n    };\n}\nfunction createBackgroundVNode(width, height, backgroundColor, scope) {\n    var bgVNode;\n    if (backgroundColor && backgroundColor !== 'none') {\n        bgVNode = createVNode('rect', 'bg', {\n            width: width,\n            height: height,\n            x: '0',\n            y: '0',\n            id: '0'\n        });\n        if (isGradient(backgroundColor)) {\n            setGradient({ fill: backgroundColor }, bgVNode.attrs, 'fill', scope);\n        }\n        else if (isPattern(backgroundColor)) {\n            setPattern({\n                style: {\n                    fill: backgroundColor\n                },\n                dirty: noop,\n                getBoundingRect: function () { return ({ width: width, height: height }); }\n            }, bgVNode.attrs, 'fill', scope);\n        }\n        else {\n            var _a = normalizeColor(backgroundColor), color = _a.color, opacity = _a.opacity;\n            bgVNode.attrs.fill = color;\n            opacity < 1 && (bgVNode.attrs['fill-opacity'] = opacity);\n        }\n    }\n    return bgVNode;\n}\nexport default SVGPainter;\n","import { RADIAN_TO_DEGREE, retrieve2, logError, isFunction } from '../core/util.js';\nimport { parse } from '../tool/color.js';\nimport env from '../core/env.js';\nvar mathRound = Math.round;\nexport function normalizeColor(color) {\n    var opacity;\n    if (!color || color === 'transparent') {\n        color = 'none';\n    }\n    else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n        var arr = parse(color);\n        if (arr) {\n            color = 'rgb(' + arr[0] + ',' + arr[1] + ',' + arr[2] + ')';\n            opacity = arr[3];\n        }\n    }\n    return {\n        color: color,\n        opacity: opacity == null ? 1 : opacity\n    };\n}\nvar EPSILON = 1e-4;\nexport function isAroundZero(transform) {\n    return transform < EPSILON && transform > -EPSILON;\n}\nexport function round3(transform) {\n    return mathRound(transform * 1e3) / 1e3;\n}\nexport function round4(transform) {\n    return mathRound(transform * 1e4) / 1e4;\n}\nexport function round1(transform) {\n    return mathRound(transform * 10) / 10;\n}\nexport function getMatrixStr(m) {\n    return 'matrix('\n        + round3(m[0]) + ','\n        + round3(m[1]) + ','\n        + round3(m[2]) + ','\n        + round3(m[3]) + ','\n        + round4(m[4]) + ','\n        + round4(m[5])\n        + ')';\n}\nexport var TEXT_ALIGN_TO_ANCHOR = {\n    left: 'start',\n    right: 'end',\n    center: 'middle',\n    middle: 'middle'\n};\nexport function adjustTextY(y, lineHeight, textBaseline) {\n    if (textBaseline === 'top') {\n        y += lineHeight / 2;\n    }\n    else if (textBaseline === 'bottom') {\n        y -= lineHeight / 2;\n    }\n    return y;\n}\nexport function hasShadow(style) {\n    return style\n        && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n}\nexport function getShadowKey(displayable) {\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    return [\n        style.shadowColor,\n        (style.shadowBlur || 0).toFixed(2),\n        (style.shadowOffsetX || 0).toFixed(2),\n        (style.shadowOffsetY || 0).toFixed(2),\n        globalScale[0],\n        globalScale[1]\n    ].join(',');\n}\nexport function getClipPathsKey(clipPaths) {\n    var key = [];\n    if (clipPaths) {\n        for (var i = 0; i < clipPaths.length; i++) {\n            var clipPath = clipPaths[i];\n            key.push(clipPath.id);\n        }\n    }\n    return key.join(',');\n}\nexport function isImagePattern(val) {\n    return val && (!!val.image);\n}\nexport function isSVGPattern(val) {\n    return val && (!!val.svgElement);\n}\nexport function isPattern(val) {\n    return isImagePattern(val) || isSVGPattern(val);\n}\nexport function isLinearGradient(val) {\n    return val.type === 'linear';\n}\nexport function isRadialGradient(val) {\n    return val.type === 'radial';\n}\nexport function isGradient(val) {\n    return val && (val.type === 'linear'\n        || val.type === 'radial');\n}\nexport function getIdURL(id) {\n    return \"url(#\" + id + \")\";\n}\nexport function getPathPrecision(el) {\n    var scale = el.getGlobalScale();\n    var size = Math.max(scale[0], scale[1]);\n    return Math.max(Math.ceil(Math.log(size) / Math.log(10)), 1);\n}\nexport function getSRTTransformString(transform) {\n    var x = transform.x || 0;\n    var y = transform.y || 0;\n    var rotation = (transform.rotation || 0) * RADIAN_TO_DEGREE;\n    var scaleX = retrieve2(transform.scaleX, 1);\n    var scaleY = retrieve2(transform.scaleY, 1);\n    var skewX = transform.skewX || 0;\n    var skewY = transform.skewY || 0;\n    var res = [];\n    if (x || y) {\n        res.push(\"translate(\" + x + \"px,\" + y + \"px)\");\n    }\n    if (rotation) {\n        res.push(\"rotate(\" + rotation + \")\");\n    }\n    if (scaleX !== 1 || scaleY !== 1) {\n        res.push(\"scale(\" + scaleX + \",\" + scaleY + \")\");\n    }\n    if (skewX || skewY) {\n        res.push(\"skew(\" + mathRound(skewX * RADIAN_TO_DEGREE) + \"deg, \" + mathRound(skewY * RADIAN_TO_DEGREE) + \"deg)\");\n    }\n    return res.join(' ');\n}\nexport var encodeBase64 = (function () {\n    if (env.hasGlobalWindow && isFunction(window.btoa)) {\n        return function (str) {\n            return window.btoa(unescape(encodeURIComponent(str)));\n        };\n    }\n    if (typeof Buffer !== 'undefined') {\n        return function (str) {\n            return Buffer.from(str).toString('base64');\n        };\n    }\n    return function (str) {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Base64 isn\\'t natively supported in the current environment.');\n        }\n        return null;\n    };\n})();\n"],"names":["create","x","y","copy","out","v","clone","set","a","b","add","v1","v2","scaleAndAdd","sub","len","Math","sqrt","lenSquare","length","lengthSquare","mul","div","dot","scale","s","normalize","d","distance","dist","distanceSquare","distSquare","negate","lerp","t","applyTransform","m","min","max","TOUCH_CLICK_DELAY","globalEventSupported","localNativeListenerNames","mouseHandlerNames","touchHandlerNames","pointerEventNameMap","pointerdown","pointerup","pointermove","pointerout","pointerHandlerNames","name","nm","replace","hasOwnProperty","mouse","touch","pointer","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","event","pointerType","setTouchTimer","scope","touching","touchTimer","clearTimeout","setTimeout","markTouch","zrByTouch","normalizeGlobalEvent","instance","dom","FakeGlobalEvent","isLocalEl","el","elTmp","isLocal","nodeType","domBelongToZr","painterRoot","parentNode","this","stopPropagation","stopImmediatePropagation","preventDefault","type","target","currentTarget","clientX","clientY","localDOMHandlers","mousedown","__mayPointerCapture","zrX","zrY","trigger","mousemove","downPoint","__togglePointerCapture","mouseup","mouseout","element","toElement","relatedTarget","__pointerCapturing","zrEventControl","wheel","mousewheel","touchstart","__lastTouchMoment","Date","handler","processGesture","call","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","mountGlobalDOMEventListeners","mount","nativeEventListener","capture","listener","opt","mounted","listenerOpts","domTarget","unmountDOMEventListeners","DOMHandlerScope","HandlerDomProxy","_super","_this","_localHandlerScope","_globalHandlerScope","document","prototype","dispose","setCursor","cursorStyle","style","cursor","isPointerCapturing","globalHandlerScope","CompoundPath","apply","arguments","_updatePathDirty","paths","shape","dirtyPath","shapeChanged","i","dirtyShape","beforeBrush","getGlobalScale","path","createPathProxy","setScale","segmentIgnoreThreshold","buildPath","ctx","afterBrush","pathUpdated","getBoundingRect","STYLE_MAGIC_KEY","round","random","DEFAULT_COMMON_STYLE","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","opacity","blend","DEFAULT_COMMON_ANIMATION_PROPS","PRIMARY_STATES_KEYS","PRIMARY_STATES_KEYS_IN_HOVER_LAYER","Displayable","props","_init","keysArr","keys","key","useStyle","attrKV","innerBeforeBrush","innerAfterBrush","shouldBePainted","viewWidth","viewHeight","considerClipPath","considerAncestors","transform","ignore","invisible","culling","isDisplayableCulled","__clipPaths","isZeroArea","parent","parent_1","contain","rectContain","traverse","cb","context","coord","transformCoordToLocal","rect","getPaintRect","_paintRect","__dirty","elRect","shadowSize","width","abs","height","tolerance","dirtyRectTolerance","isZero","floor","ceil","setPrevPaintRect","paintRect","_prevPaintRect","getPrevPaintRect","animateStyle","loop","animate","updateDuringAnimation","targetKey","dirtyStyle","markRedraw","value","setStyle","keyOrObj","extend","notRedraw","_rect","dirty","styleChanged","styleUpdated","createStyle","obj","createObject","__inHover","__hoverStyle","isStyleObject","_innerSaveToNormal","toState","normalState","_normalState","_mergeStyle","_savePrimaryToNormal","_applyStateObj","stateName","state","keepCurrentStates","transition","animationCfg","targetStyle","needsRestoreToNormal","sourceStyle","changedKeys","targetKeys","_transitionState","getAnimationStyleProps","statesKeys","_mergeStates","states","mergedStyle","mergedState","initDefaultProps","dispProto","z","z2","zlevel","rectHover","incremental","tmpRect","viewRect","intersect","Gradient","colorStops","addColorStop","offset","color","push","Group","opts","isGroup","_children","attr","childrenRef","children","slice","childAt","idx","childOfName","childCount","child","_doAdd","addBefore","nextSibling","indexOf","splice","oldChild","newChild","replaceAt","index","old","zr","__zr","removeSelfFromZr","remove","addSelfToZr","refresh","removeAll","eachChild","stopped","includeChildren","tmpMat","childRect","getLocalTransform","union","DEFAULT_IMAGE_STYLE","defaults","DEFAULT_IMAGE_ANIMATION_PROPS","sx","sy","sWidth","sHeight","isImageLike","source","ZRImage","_getSize","dim","size","imageSource","image","__image","otherDim","otherDimSize","getWidth","getHeight","IncrementalDisplayable","notClear","_displayables","_temporaryDisplayables","_cursor","getCursor","clearDisplaybles","clearTemporalDisplayables","addDisplayable","displayable","notPersistent","addDisplayables","displayables","getDisplayables","getTemporalDisplayables","eachPendingDisplayable","update","updateTransform","Infinity","needLocalTransform","localPos","LinearGradient","x2","y2","globalCoord","global","DEFAULT_PATH_STYLE","fill","stroke","strokePercent","fillOpacity","strokeOpacity","lineDashOffset","lineWidth","lineCap","miterLimit","strokeNoScale","strokeFirst","DEFAULT_PATH_ANIMATION_PROPS","pathCopyParams","Path","decal","decalEl","_decalEl","silent","decalElStyle","getDecalElement","getDefaultShape","defaultStyle","getDefaultStyle","canBeInsideText","hasFill","getInsideTextFill","pathFill","isString","fillLum","lum","getInsideTextStroke","textFill","isDarkMode","isDarkLabel","shapeCfg","inBatch","getUpdatedPathProxy","beginPath","hasStroke","needsUpdateRect","firstInvoke","rectStroke","_rectStroke","lineScale","getLineScale","w","strokeContainThreshold","pathProxy","animateShape","setShape","targetShape","targetShapePrimaryProps","shapeKeys","mergedShape","defaultProps","Sub","init","pathProto","subPixelOptimize","autoBatch","RadialGradient","r","DEFAULT_TSPAN_STYLE","font","textAlign","textBaseline","TSpan","setBoundingRect","text","tspanProto","DEFAULT_RICH_TEXT_COLOR","DEFAULT_STROKE_LINE_WIDTH","DEFAULT_TEXT_ANIMATION_PROPS","fontSize","lineHeight","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","padding","borderColor","borderWidth","borderRadius","ZRText","_defaultStyle","_updateSubTexts","innerTransformable","getComputedTransform","__hostTarget","updateInnerText","_childCursor","normalizeTextStyle","rich","_updateRichTexts","_updatePlainTexts","setDefaultTextStyle","defaultTextStyle","setTextContent","textContent","sourceRich","targetRich","_mergeRich","richNames","richName","_getOrCreateChild","Ctor","textFont","textPadding","getStyleText","contentBlock","needDrawBg","needDrawBackground","bgColorDrawn","outerHeight","outerWidth","contentWidth","textLines","lines","baseX","baseY","align","verticalAlign","textX","textY","contentHeight","boxX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","getFill","textStroke","getStroke","autoStroke","hasShadow","fixedBoundingRect","overflow","calculatedLineHeight","subElStyle","lineDash","setSeparateFont","xLeft","lineTop","xRight","line","tokens","tokenCount","remainedWidth","leftIndex","lineXLeft","lineXRight","rightIndex","token","_placeToken","parentBgColorDrawn","tokenStyle","styleName","isLineHolder","innerHeight","retrieve3","retrieve2","textWidth","textHeight","topStyle","rectEl","imgEl","textBackgroundColor","textBorderWidth","textBorderColor","isImageBg","isPlainOrGradientBg","textBorderRadius","self","rectShape","rectStyle","onload","imgStyle","borderDash","borderDashOffset","commonStyle","makeFont","hasSeparateFont","fontStyle","fontWeight","parseFontSize","fontFamily","join","trim","VALID_TEXT_ALIGN","left","right","center","VALID_TEXT_VERTICAL_ALIGN","top","bottom","middle","FONT_PARTS","isNaN","fontProp","val","normalizeStyle","each","normalizeCssArray","REDRAW_BIT","STYLE_CHANGED_BIT","SHAPE_CHANGED_BIT","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","get","createOrUpdateImage","hostEl","cbPayload","__zrImageSrc","pendingWrap","isImageReady","pending","imageOnLoad","put","__cachedImgObj","onerror","STYLE_REG","truncateText","containerWidth","ellipsis","options","split","prepareTruncateOptions","truncateSingleLine","preparedOpts","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","ellipsisWidth","textLine","j","subLength","estimateLength","substr","charCode","charCodeAt","parsePlainText","truncate","truncateLineOverflow","lineOverflow","wrapText","lineCount","truncateMinChar","RichTextToken","RichTextLine","RichTextContentBlock","parseRichText","result","topWidth","topHeight","wrapInfo","accumWidth","breakAll","lastIndex","exec","matchedIndex","pushTokens","substring","pendingList","calculatedHeight","calculatedWidth","stlPadding","truncateLine","finishLine","outer","paddingH","tokenHeight","styleTokenWidth","tokenWidthNotSpecified","charAt","percentWidth","bgImg","remainTruncWidth","parseInt","block","str","strLines","linesWidths","isEmptyStr","newLine","tokenPadding","tokenPaddingH","outerWidth_1","res","tokensLen","isAlphabeticLetter","ch","code","breakCharMap","reduce","isWordBreakChar","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","chWidth","inWord","smoothBezier","points","smooth","isLoop","constraint","prevPoint","nextPoint","cps","point","d0","d1","sum","cp0","cp1","shift","closePath","controlPoints","smoothConstraint","moveTo","cp2","p","bezierCurveTo","l","lineTo","subPixelOptimizeLine","outputShape","inputShape","x1","y1","subPixelOptimizeRect","originX","originY","originWidth","originHeight","position","positiveOrNegative","doubledPosition","ArcShape","cx","cy","startAngle","endAngle","PI","clockwise","Arc","unitX","cos","unitY","sin","arc","BezierCurveShape","cpx1","cpy1","percent","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","quadraticCurveTo","pointAt","tangentAt","CircleShape","Circle","EllipseShape","rx","ry","Ellipse","k","ox","oy","subPixelOptimizeOutputShape","LineShape","Line","optimizedShape","PolygonShape","Polygon","PolylineShape","Polyline","r1","r2","r3","r4","total","Array","RectShape","Rect","RingShape","r0","Ring","PI2","mathSin","mathCos","mathACos","acos","mathATan2","atan2","mathAbs","mathSqrt","mathMax","mathMin","e","x0","y0","x3","y3","dx10","dy10","dx32","dy32","computeCornerTangents","radius","cr","x01","y01","lo","x11","y11","x10","y10","x00","y00","dx","dy","d2","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","normalizeCornerRadius","arr","isArray","concat","_a","innerRadius","hasRadius","hasInnerRadius","tmp","mod","icrStart","icrEnd","ocrStart","ocrEnd","ocrs","ocre","icrs","icre","ocrMax","icrMax","limitedOcrMax","limitedIcrMax","xre","yre","xirs","yirs","xrs","yrs","xire","yire","hasArc","cornerRadius","halfRd","it_1","crStart","crEnd","ct0","ct1","SectorShape","Sector","Param","topTarget","Draggable","on","_dragStart","_drag","_dragEnd","draggingTarget","draggable","_draggingTarget","dragging","_x","offsetX","_y","offsetY","dispatchToElement","drift","dropTarget","findHover","lastDropTarget","_dropTarget","degree","SVGPathRebuilder","reset","precision","_start","_d","_str","_p","pow","_add","anticlockwise","ellipse","psi","dTheta","dThetaPositive","isCircle","unifiedTheta","large","xRot","dTheta_1","h","cmd","c","f","g","vals","_invalid","generateStr","getStr","NONE","mathRound","pathHasFill","pathHasStroke","strokeProps","svgStrokeProps","map","prop","toLowerCase","mapStyleToAttrs","updateAttr","forceUpdate","strokeScale","strokeWidth","propName","SVGNS","XLINKNS","XMLNS","XML_NAMESPACE","createElement","createElementNS","createVNode","tag","attrs","createElementOpen","attrsStr","part","createElementClose","vNodeToString","S","newline","convertElToString","getCssString","selectorNodes","animationNodes","bracketBegin","bracketEnd","selectors","className","attrName","animations","animationName","createBrushScope","zrId","shadowCache","patternCache","gradientCache","clipPathCache","defs","cssNodes","cssAnims","cssClassIdx","cssAnimIdx","shadowIdx","gradientIdx","patternIdx","clipPathIdx","createSVGVNode","useViewBox","EASING_MAP","cubicIn","cubicOut","cubicInOut","quadraticIn","quadraticOut","quadraticInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","transformOriginKey","buildPathString","kfShape","svgPathBuilder","rebuildPath","setTransformOrigin","ANIMATE_STYLE_MAP","addAnimation","cssAnim","createCompoundPathCSSAnimation","cssAnimationCfg","cssAnimationName","composedAnim","subScope","animation","createCSSAnimation","animNames","lastAnim","kf","getEasingFunc","easing","onlyShape","animators","cssAnimations","groupAnimators","animator","cfgArr","getMaxTime","getClip","delay","getDelay","getLoop","cfg","createSingleCSSAnimation","groupAnimator","transformKfs","shapeKfs","finalKfs","animationTimingFunctionAttrName","saveAnimatorTrackToCssKfs","cssKfs","toCssAttrName","tracks","getTracks","maxTime","track","needsAnimate","kfs","keyframes","time","kfEasing","rawValue","isNumber","targetProp","targetName","timingFunction","canAnimateShape","isFirst","PathProxy","len_1","newLen","transformOrigin","percents","allTransformOriginSame","p0","p1","filter","src","isCanvasLike","isFunction","toDataURL","setStyleAttrs","isFillStroke","setGradient","setPattern","setShadow","noRotateScale","noTranslate","setTransform","compress","convertPolyShape","strArr","validatePolyShape","createAttrsConvert","desc","normalizedDesc","item","builtinShapesDef","circle","polyline","polygon","hasShapeAnimation","brushSVGPath","builtinShpDef","svgElType","willUpdate","needBuildPath","pathVersion","getVersion","elExt","__svgPathBuilder","__svgPathVersion","__svgPathStrokePercent","id","brushSVGImage","dw","dh","href","brushSVGTSpan","separatedFontStr","parseFloat","match","undefined","brush","shadowKey","shadowId","globalScale","scaleX","scaleY","blur_1","stdDx","stdDy","stdDeviation","gradientTag","gradientAttrs","colors","stopColor","stopsAttrs","gradientVNode","gradientKey","gradientId","boundingRect","patternAttrs","repeat","noRepeat","repeatX","repeatY","imageWidth_1","imageWidth","imageHeight_1","imageHeight","imageSrc","patternImage","Image","errMsg","assert","setSizeToVNode_1","vNode","img","svgEl","elm","setAttribute","createdImage","patternVNode","svgElement","svgWidth","svgHeight","patternWidth","patternHeight","patternUnits","patternTransform","patternKey","patternId","setClipPath","clipPath","clipPathId","clipPathAttrs","createTextNode","insertBefore","newNode","referenceNode","removeChild","node","appendChild","colonChar","xChar","emptyNode","isUndef","isDef","createKeyToOldIdx","beginIdx","endIdx","sameVnode","vnode1","vnode2","isSameKey","isSameTag","createElm","vnode","updateAttrs","isObject","addVnodes","parentElm","before","vnodes","startIdx","removeVnodes","oldVnode","oldAttrs","cur","removeAttribute","setAttributeNS","updateChildren","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","patchVnode","patch","parent_2","svgId","SVGPainter","root","storage","refreshHover","createMethodNotSupport","configLayer","_opts","_id","_oldVNode","ssr","viewport","_viewport","cssText","svgDom","_svgDom","resize","getType","getViewportRoot","getViewportRootOffset","viewportRoot","offsetLeft","offsetTop","getSvgDom","renderToVNode","renderOneToVNode","list","getDisplayList","_width","_height","bgVNode","_bgVNode","createBackgroundVNode","_backgroundColor","mainVNode","_mainVNode","_paintList","animationCssStr","styleNode","renderToString","cssAnimation","setBackgroundColor","getSvgRoot","currentClipPathGroup","prevClipPaths","listLen","clipPathsGroupsStack","clipPathsGroupsStackDepth","clipGroupNodeIdx","clipPaths","prevLen","lca","i_1","i_2","groupAttrs","ret","display","viewportStyle","bgEl","innerHTML","clear","base64","prefix","encodeURIComponent","method","noop","normalizeColor","parse","EPSILON","isAroundZero","round3","round4","getMatrixStr","TEXT_ALIGN_TO_ANCHOR","adjustTextY","getShadowKey","toFixed","isImagePattern","isSVGPattern","isPattern","isLinearGradient","isRadialGradient","isGradient","getIdURL","getPathPrecision","log","getSRTTransformString","rotation","RADIAN_TO_DEGREE","skewX","skewY","encodeBase64","window","btoa","unescape","Buffer","from","toString"],"sourceRoot":""}
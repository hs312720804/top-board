{"version":3,"file":"js/chunk-vendors-5add3539-legacy.f2168686.js","mappings":"wNASWA,EAAyB,gBAChCC,EAAsB,YAA2B,CAAC,WAClDC,GAAyB,IAAAC,QAAO,MAAqB,SAAUC,EAAKC,GAEpE,OADAD,EAAIC,IAAO,EACJD,CACX,GAAG,CAAEE,QAAQ,IACTC,EAAoB,CAAC,EACrBC,EAAkB,IAAI,IAAa,EAAG,EAAG,EAAG,GAC5CC,EAAW,WACX,SAASA,EAAQC,GACbC,KAAKC,IAAK,IAAAC,QACVF,KAAKG,UAAY,GACjBH,KAAKI,cAAgB,GACrBJ,KAAKK,OAAS,CAAC,EACfL,KAAKM,MAAMP,EACf,CAkyBA,OAjyBAD,EAAQS,UAAUD,MAAQ,SAAUP,GAChCC,KAAKQ,KAAKT,EACd,EACAD,EAAQS,UAAUE,MAAQ,SAAUC,EAAIC,EAAIC,GACxC,OAAQZ,KAAKa,WACT,IAAK,aACDF,EAAK,EACL,MACJ,IAAK,WACDD,EAAK,EACL,MAER,IAAII,EAAId,KAAKe,UACRD,IACDA,EAAId,KAAKe,UAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAEzCD,EAAE,IAAMJ,EACRI,EAAE,IAAMH,EACRX,KAAKgB,qBACLhB,KAAKiB,YACT,EACAnB,EAAQS,UAAUW,aAAe,WAAc,EAC/CpB,EAAQS,UAAUY,YAAc,WAAc,EAC9CrB,EAAQS,UAAUa,OAAS,WACvBpB,KAAKqB,kBACDrB,KAAKsB,SACLtB,KAAKuB,iBAEb,EACAzB,EAAQS,UAAUgB,gBAAkB,SAAUC,GAC1C,IAAIC,EAASzB,KAAK0B,aAClB,GAAID,KAAYA,EAAO9B,QAAU6B,GAAc,CACtCxB,KAAK2B,aACN3B,KAAK2B,WAAa,CAAC,GAEvB,IAAIA,EAAa3B,KAAK2B,WAClBC,EAAUD,EAAWE,MACrBC,EAAqBL,EAAOK,mBAC5BC,OAAY,EACZC,OAAoB,EACpBC,GAAmB,EACvBH,EAAmBI,OAASN,EAAU5B,KAAO,KAC7C,IAAImC,GAAc,EAElB,GADAL,EAAmBM,cAAcX,GACN,MAAvBE,EAAWU,SAAkB,CAC7B,IAAIC,EAAazC,EACb8B,EAAWW,WACXA,EAAWC,KAAKZ,EAAWW,YAG3BA,EAAWC,KAAKvC,KAAKwC,mBAEpBZ,GACDU,EAAWG,eAAezC,KAAKe,WAE/Bf,KAAK0C,sBACL1C,KAAK0C,sBAAsB9C,EAAmB+B,EAAYW,IAG1D,QAAsB1C,EAAmB+B,EAAYW,GAEzDR,EAAmBa,EAAI/C,EAAkB+C,EACzCb,EAAmBc,EAAIhD,EAAkBgD,EACzCb,EAAYnC,EAAkBiD,MAC9Bb,EAAoBpC,EAAkBkD,cACtC,IAAIC,EAAapB,EAAWqB,OAC5B,GAAID,GAAqC,MAAvBpB,EAAWsB,SAAkB,CAC3C,IAAIC,OAAa,EACbC,OAAa,EACE,WAAfJ,GACAG,EAAgC,GAAnBZ,EAAWc,MACxBD,EAAiC,GAApBb,EAAWe,SAGxBH,GAAa,QAAaH,EAAW,GAAIT,EAAWc,OACpDD,GAAa,QAAaJ,EAAW,GAAIT,EAAWe,SAExDlB,GAAc,EACdL,EAAmBwB,SAAWxB,EAAmBa,EAAIO,GAActB,EAAU,EAAIU,EAAWK,GAC5Fb,EAAmByB,SAAWzB,EAAmBc,EAAIO,GAAcvB,EAAU,EAAIU,EAAWM,EAChG,CACJ,CAC2B,MAAvBjB,EAAWsB,WACXnB,EAAmBmB,SAAWtB,EAAWsB,UAE7C,IAAIO,EAAa7B,EAAW8B,OACxBD,IACA1B,EAAmBa,GAAKa,EAAW,GACnC1B,EAAmBc,GAAKY,EAAW,GAC9BrB,IACDL,EAAmBwB,SAAWE,EAAW,GACzC1B,EAAmByB,SAAWC,EAAW,KAGjD,IAAIE,EAAgC,MAArB/B,EAAWgC,OACY,kBAAxBhC,EAAWU,UAAyBV,EAAWU,SAASuB,QAAQ,WAAa,EACrFjC,EAAWgC,OACbE,EAAwB7D,KAAK8D,yBAA2B9D,KAAK8D,uBAAyB,CAAC,GACvFC,OAAW,EACXC,OAAa,EACbC,OAAa,EACbP,GAAY1D,KAAKkE,mBACjBH,EAAWpC,EAAWwC,WACtBH,EAAarC,EAAWyC,aACR,MAAZL,GAAiC,SAAbA,IACpBA,EAAW/D,KAAKqE,qBAEF,MAAdL,GAAqC,SAAfA,IACtBA,EAAahE,KAAKsE,oBAAoBP,GACtCE,GAAa,KAIjBF,EAAWpC,EAAW4C,YACtBP,EAAarC,EAAW6C,cACR,MAAZT,GAAiC,SAAbA,IACpBA,EAAW/D,KAAKyE,kBAEF,MAAdT,GAAqC,SAAfA,IACtBA,EAAahE,KAAK0E,iBAAiBX,GACnCE,GAAa,IAGrBF,EAAWA,GAAY,OACnBA,IAAaF,EAAsBc,MAChCX,IAAeH,EAAsBe,QACrCX,IAAeJ,EAAsBI,YACrClC,IAAc8B,EAAsBhB,OACpCb,IAAsB6B,EAAsBf,gBAC/Cb,GAAmB,EACnB4B,EAAsBc,KAAOZ,EAC7BF,EAAsBe,OAASZ,EAC/BH,EAAsBI,WAAaA,EACnCJ,EAAsBhB,MAAQd,EAC9B8B,EAAsBf,cAAgBd,EACtCP,EAAOoD,oBAAoBhB,IAE/BpC,EAAOH,SAAW,KACdW,GACAR,EAAOqD,YAAW,EAE1B,CACJ,EACAhF,EAAQS,UAAU2D,gBAAkB,WAChC,OAAO,CACX,EACApE,EAAQS,UAAU8D,kBAAoB,WAClC,MAAO,MACX,EACAvE,EAAQS,UAAU+D,oBAAsB,SAAUP,GAC9C,MAAO,MACX,EACAjE,EAAQS,UAAUkE,eAAiB,WAC/B,OAAOzE,KAAK+E,MAAQ/E,KAAK+E,KAAKC,aAAe,KAAoB,IACrE,EACAlF,EAAQS,UAAUmE,iBAAmB,SAAUX,GAC3C,IAAIkB,EAAkBjF,KAAK+E,MAAQ/E,KAAK+E,KAAKG,qBACzCC,EAAsC,kBAApBF,IAAgC,IAAAG,OAAMH,GACvDE,IACDA,EAAW,CAAC,IAAK,IAAK,IAAK,IAI/B,IAFA,IAAIE,EAAQF,EAAS,GACjBG,EAAStF,KAAK+E,KAAKC,aACdO,EAAI,EAAGA,EAAI,EAAGA,IACnBJ,EAASI,GAAKJ,EAASI,GAAKF,GAASC,EAAS,EAAI,MAAQ,EAAID,GAGlE,OADAF,EAAS,GAAK,GACP,IAAAK,WAAUL,EAAU,OAC/B,EACArF,EAAQS,UAAUkF,SAAW,SAAUC,EAAIC,GAAW,EACtD7F,EAAQS,UAAUqF,OAAS,SAAUlG,EAAKmG,GAC1B,eAARnG,EACAM,KAAK8F,cAAcD,GAEN,gBAARnG,EACLM,KAAK+F,eAAeF,GAEP,aAARnG,EACLM,KAAKgG,YAAYH,GAEJ,UAARnG,GACLM,KAAKiG,MAAQjG,KAAKiG,OAAS,CAAC,GAC5B,IAAAC,QAAOlG,KAAKiG,MAAOJ,IAGnB7F,KAAKN,GAAOmG,CAEpB,EACA/F,EAAQS,UAAU4F,KAAO,WACrBnG,KAAKL,QAAS,EACdK,KAAKiB,YACT,EACAnB,EAAQS,UAAU6F,KAAO,WACrBpG,KAAKL,QAAS,EACdK,KAAKiB,YACT,EACAnB,EAAQS,UAAUC,KAAO,SAAU6F,EAAUR,GACzC,GAAwB,kBAAbQ,EACPrG,KAAK4F,OAAOS,EAAUR,QAErB,IAAI,IAAAS,UAASD,GAGd,IAFA,IAAI5G,EAAM4G,EACNE,GAAU,IAAAC,MAAK/G,GACV8F,EAAI,EAAGA,EAAIgB,EAAQE,OAAQlB,IAAK,CACrC,IAAI7F,EAAM6G,EAAQhB,GAClBvF,KAAK4F,OAAOlG,EAAK2G,EAAS3G,GAC9B,CAGJ,OADAM,KAAKiB,aACEjB,IACX,EACAF,EAAQS,UAAUmG,yBAA2B,SAAUC,GACnD3G,KAAK4G,mBAAmBD,GAExB,IADA,IAAIE,EAAc7G,KAAK8G,aACdvB,EAAI,EAAGA,EAAIvF,KAAKG,UAAUsG,OAAQlB,IAAK,CAC5C,IAAIwB,EAAW/G,KAAKG,UAAUoF,GAC1ByB,EAAsBD,EAASE,sBACnC,KAAIF,EAASG,WAAaF,GAAuBA,IAAwB3H,GAAzE,CAGA,IAAI8H,EAAaJ,EAASI,WACtBC,EAASD,EACPN,EAAYM,GAAcN,EAChCE,EAASM,OAAOD,EAJhB,CAKJ,CACJ,EACAtH,EAAQS,UAAUqG,mBAAqB,SAAUD,GAC7C,IAAIE,EAAc7G,KAAK8G,aAClBD,IACDA,EAAc7G,KAAK8G,aAAe,CAAC,GAEnCH,EAAQhF,aAAekF,EAAYlF,aACnCkF,EAAYlF,WAAa3B,KAAK2B,YAElC3B,KAAKsH,qBAAqBX,EAASE,EAAavH,EACpD,EACAQ,EAAQS,UAAU+G,qBAAuB,SAAUX,EAASE,EAAaU,GACrE,IAAK,IAAIhC,EAAI,EAAGA,EAAIgC,EAAYd,OAAQlB,IAAK,CACzC,IAAI7F,EAAM6H,EAAYhC,GACF,MAAhBoB,EAAQjH,IAAkBA,KAAOmH,IACjCA,EAAYnH,GAAOM,KAAKN,GAEhC,CACJ,EACAI,EAAQS,UAAUiH,SAAW,WACzB,OAAOxH,KAAKI,cAAcqG,OAAS,CACvC,EACA3G,EAAQS,UAAUkH,SAAW,SAAUC,GACnC,OAAO1H,KAAKK,OAAOqH,EACvB,EACA5H,EAAQS,UAAUoH,YAAc,SAAUD,GACtC,IAAIrH,EAASL,KAAKK,OAIlB,OAHKA,EAAOqH,KACRrH,EAAOqH,GAAQ,CAAC,GAEbrH,EAAOqH,EAClB,EACA5H,EAAQS,UAAUqH,YAAc,SAAUC,GACtC7H,KAAK8H,SAASzI,GAAwB,EAAOwI,EACjD,EACA/H,EAAQS,UAAUuH,SAAW,SAAUC,EAAWC,EAAmBH,EAAaI,GAC9E,IAAIC,EAAgBH,IAAc1I,EAC9B8I,EAAYnI,KAAKwH,WACrB,GAAKW,IAAaD,EAAlB,CAGA,IAAI9H,EAAgBJ,KAAKI,cACrBgI,EAAepI,KAAKqI,gBACxB,MAAI,IAAAzE,SAAQxD,EAAe2H,IAAc,KAAMC,GAA8C,IAAzB5H,EAAcqG,OAAlF,CAGA,IAAI6B,EAOJ,GANItI,KAAKuI,aAAeL,IACpBI,EAAQtI,KAAKuI,WAAWR,IAEvBO,IACDA,EAAStI,KAAKK,QAAUL,KAAKK,OAAO0H,IAEnCO,GAAUJ,EAAf,CAIKA,GACDlI,KAAK0G,yBAAyB4B,GAElC,IAAIE,KAAoBF,GAASA,EAAMG,YAAeR,GAClDO,GACAxI,KAAK0I,uBAAsB,GAE/B1I,KAAK2I,eAAeZ,EAAWO,EAAOtI,KAAK8G,aAAckB,GAAoBH,IAAgB7H,KAAK4I,WAAaR,GAAgBA,EAAaS,SAAW,EAAGT,GAC1J,IAAIU,EAAc9I,KAAK0B,aACnBqH,EAAY/I,KAAKgJ,WAyBrB,OAxBIF,GACAA,EAAYhB,SAASC,EAAWC,EAAmBH,EAAaW,GAEhEO,GACAA,EAAUjB,SAASC,EAAWC,EAAmBH,EAAaW,GAE9DN,GACAlI,KAAKI,cAAgB,GACrBJ,KAAK8G,aAAe,CAAC,GAGhBkB,EAIDhI,KAAKI,cAAc6I,KAAKlB,GAHxB/H,KAAKI,cAAgB,CAAC2H,GAM9B/H,KAAKkJ,0BACLlJ,KAAKiB,cACAuH,GAAiBxI,KAAK4I,YACvB5I,KAAK0I,uBAAsB,GAC3B1I,KAAKsB,UAAY,MAEdgH,CAnCP,EAFI,IAAAa,UAAS,SAAWpB,EAAY,eATpC,CALA,CAoDJ,EACAjI,EAAQS,UAAU6I,UAAY,SAAU/I,EAAQwH,EAAaI,GACzD,GAAK5H,EAAOoG,OAGP,CACD,IAAI4C,EAAe,GACfjJ,EAAgBJ,KAAKI,cACrBkJ,EAAMjJ,EAAOoG,OACb8C,EAAYD,IAAQlJ,EAAcqG,OACtC,GAAI8C,EACA,IAAK,IAAIhE,EAAI,EAAGA,EAAI+D,EAAK/D,IACrB,GAAIlF,EAAOkF,KAAOnF,EAAcmF,GAAI,CAChCgE,GAAY,EACZ,KACJ,CAGR,GAAIA,EACA,OAEJ,IAAShE,EAAI,EAAGA,EAAI+D,EAAK/D,IAAK,CAC1B,IAAIwC,EAAY1H,EAAOkF,GACnBiE,OAAW,EACXxJ,KAAKuI,aACLiB,EAAWxJ,KAAKuI,WAAWR,EAAW1H,IAErCmJ,IACDA,EAAWxJ,KAAKK,OAAO0H,IAEvByB,GACAH,EAAaJ,KAAKO,EAE1B,CACA,IAAIC,EAAeJ,EAAaC,EAAM,GAClCd,KAAoBiB,GAAgBA,EAAahB,YAAeR,GAChEO,GACAxI,KAAK0I,uBAAsB,GAE/B,IAAIgB,EAAc1J,KAAK2J,aAAaN,GAChCjB,EAAepI,KAAKqI,gBACxBrI,KAAK0G,yBAAyBgD,GAC9B1J,KAAK2I,eAAetI,EAAOuJ,KAAK,KAAMF,EAAa1J,KAAK8G,cAAc,GAAQe,IAAgB7H,KAAK4I,WAAaR,GAAgBA,EAAaS,SAAW,EAAGT,GAC3J,IAAIU,EAAc9I,KAAK0B,aACnBqH,EAAY/I,KAAKgJ,WACjBF,GACAA,EAAYM,UAAU/I,EAAQwH,EAAaW,GAE3CO,GACAA,EAAUK,UAAU/I,EAAQwH,EAAaW,GAE7CxI,KAAKkJ,0BACLlJ,KAAKI,cAAgBC,EAAOwJ,QAC5B7J,KAAKiB,cACAuH,GAAiBxI,KAAK4I,YACvB5I,KAAK0I,uBAAsB,GAC3B1I,KAAKsB,UAAY,KAEzB,MAvDItB,KAAK4H,aAwDb,EACA9H,EAAQS,UAAU2I,wBAA0B,WACxC,IAAK,IAAI3D,EAAI,EAAGA,EAAIvF,KAAKG,UAAUsG,OAAQlB,IAAK,CAC5C,IAAIwB,EAAW/G,KAAKG,UAAUoF,GAC1BwB,EAASI,YACTJ,EAAS+C,aAAa9J,KAAK+G,EAASI,YAE5C,CACJ,EACArH,EAAQS,UAAUwJ,YAAc,SAAUzB,GACtC,IAAI0B,GAAM,IAAApG,SAAQ5D,KAAKI,cAAekI,GACtC,GAAI0B,GAAO,EAAG,CACV,IAAI5J,EAAgBJ,KAAKI,cAAcyJ,QACvCzJ,EAAc6J,OAAOD,EAAK,GAC1BhK,KAAKoJ,UAAUhJ,EACnB,CACJ,EACAN,EAAQS,UAAU2J,aAAe,SAAUC,EAAUC,EAAUC,GAC3D,IAAIjK,EAAgBJ,KAAKI,cAAcyJ,QACnCG,GAAM,IAAApG,SAAQxD,EAAe+J,GAC7BG,GAAiB,IAAA1G,SAAQxD,EAAegK,IAAa,EACrDJ,GAAO,EACFM,EAIDlK,EAAc6J,OAAOD,EAAK,GAH1B5J,EAAc4J,GAAOI,EAMpBC,IAAaC,GAClBlK,EAAc6I,KAAKmB,GAEvBpK,KAAKoJ,UAAUhJ,EACnB,EACAN,EAAQS,UAAUgK,YAAc,SAAUjC,EAAOkC,GACzCA,EACAxK,KAAK8H,SAASQ,GAAO,GAGrBtI,KAAK+J,YAAYzB,EAEzB,EACAxI,EAAQS,UAAUoJ,aAAe,SAAUtJ,GAGvC,IAFA,IACIoK,EADAf,EAAc,CAAC,EAEVnE,EAAI,EAAGA,EAAIlF,EAAOoG,OAAQlB,IAAK,CACpC,IAAI+C,EAAQjI,EAAOkF,IACnB,IAAAW,QAAOwD,EAAapB,GAChBA,EAAM3G,aACN8I,EAAmBA,GAAoB,CAAC,GACxC,IAAAvE,QAAOuE,EAAkBnC,EAAM3G,YAEvC,CAIA,OAHI8I,IACAf,EAAY/H,WAAa8I,GAEtBf,CACX,EACA5J,EAAQS,UAAUoI,eAAiB,SAAUZ,EAAWO,EAAOzB,EAAamB,EAAmB0C,EAAYtC,GACvG,IAAIuC,IAAyBrC,GAASN,GAClCM,GAASA,EAAM3G,YACf3B,KAAK2B,YAAa,IAAAuE,QAAO,CAAC,EAAG8B,EAAoBhI,KAAK2B,WAAakF,EAAYlF,aAC/E,IAAAuE,QAAOlG,KAAK2B,WAAY2G,EAAM3G,aAEzBgJ,GACD9D,EAAYlF,aACZ3B,KAAK2B,WAAakF,EAAYlF,YAKtC,IAFA,IAAIiJ,EAAmB,CAAC,EACpBC,GAAgB,EACXtF,EAAI,EAAGA,EAAIjG,EAAoBmH,OAAQlB,IAAK,CACjD,IAAI7F,EAAMJ,EAAoBiG,GAC1BuF,EAAsBJ,GAAcnL,EAAuBG,GAC3D4I,GAAuB,MAAdA,EAAM5I,GACXoL,GACAD,GAAgB,EAChBD,EAAiBlL,GAAO4I,EAAM5I,IAG9BM,KAAKN,GAAO4I,EAAM5I,GAGjBiL,GACmB,MAApB9D,EAAYnH,KACRoL,GACAD,GAAgB,EAChBD,EAAiBlL,GAAOmH,EAAYnH,IAGpCM,KAAKN,GAAOmH,EAAYnH,GAIxC,CACA,IAAKgL,EACD,IAASnF,EAAI,EAAGA,EAAIvF,KAAKG,UAAUsG,OAAQlB,IAAK,CAC5C,IAAIwB,EAAW/G,KAAKG,UAAUoF,GAC1B4B,EAAaJ,EAASI,WACrBJ,EAASG,WACVH,EAASgE,mBAAmB5D,GACrBmB,GAASzB,GAAaM,GACtBmB,GAASzB,EAExB,CAEAgE,GACA7K,KAAKgL,iBAAiBjD,EAAW6C,EAAkBxC,EAE3D,EACAtI,EAAQS,UAAU0K,iBAAmB,SAAUC,GAC3C,KAAIA,EAAYnG,MAASmG,EAAYC,eAMjCD,IAAgBlL,KAApB,CAMA,IAAIoL,EAAKpL,KAAK+E,KACVqG,GACAF,EAAYG,YAAYD,GAE5BF,EAAYnG,KAAOqG,EACnBF,EAAYC,aAAenL,IAN3B,CAOJ,EACAF,EAAQS,UAAU+K,iBAAmB,SAAUJ,GACvCA,EAAYnG,MACZmG,EAAYK,iBAAiBL,EAAYnG,MAE7CmG,EAAYnG,KAAO,KACnBmG,EAAYC,aAAe,IAC/B,EACArL,EAAQS,UAAUiL,YAAc,WAC5B,OAAOxL,KAAKyL,SAChB,EACA3L,EAAQS,UAAUyF,YAAc,SAAU0F,GAClC1L,KAAKyL,WAAazL,KAAKyL,YAAcC,GACrC1L,KAAK2L,iBAET3L,KAAKiL,iBAAiBS,GACtB1L,KAAKyL,UAAYC,EACjB1L,KAAKiB,YACT,EACAnB,EAAQS,UAAUoL,eAAiB,WAC/B,IAAID,EAAW1L,KAAKyL,UAChBC,IACA1L,KAAKsL,iBAAiBI,GACtB1L,KAAKyL,UAAY,KACjBzL,KAAKiB,aAEb,EACAnB,EAAQS,UAAUqL,eAAiB,WAC/B,OAAO5L,KAAK0B,YAChB,EACA5B,EAAQS,UAAUwF,eAAiB,SAAUtE,GACzC,IAAIoK,EAAsB7L,KAAK0B,aAC3BmK,IAAwBpK,IAGxBoK,GAAuBA,IAAwBpK,GAC/CzB,KAAK8L,oBAOTrK,EAAOK,mBAAqB,IAAI,KAChC9B,KAAKiL,iBAAiBxJ,GACtBzB,KAAK0B,aAAeD,EACpBzB,KAAKiB,aACT,EACAnB,EAAQS,UAAUuF,cAAgB,SAAUiG,GACnC/L,KAAK2B,aACN3B,KAAK2B,WAAa,CAAC,IAEvB,IAAAuE,QAAOlG,KAAK2B,WAAYoK,GACxB/L,KAAKiB,YACT,EACAnB,EAAQS,UAAUyL,iBAAmB,WACjChM,KAAK2B,WAAa,KAClB3B,KAAKiB,YACT,EACAnB,EAAQS,UAAUuL,kBAAoB,WAClC,IAAIrK,EAASzB,KAAK0B,aACdD,IACAA,EAAOK,mBAAqB,KAC5B9B,KAAKsL,iBAAiB7J,GACtBzB,KAAK0B,aAAe,KACpB1B,KAAK8D,uBAAyB,KAC9B9D,KAAKiB,aAEb,EACAnB,EAAQS,UAAU0L,iBAAmB,WACjC,OAAOjM,KAAKgJ,UAChB,EACAlJ,EAAQS,UAAU2L,iBAAmB,SAAUC,GACvCnM,KAAKgJ,YAAchJ,KAAKgJ,aAAemD,GACvCnM,KAAKoM,sBAETpM,KAAKiL,iBAAiBkB,GACtBnM,KAAKgJ,WAAamD,EAClBnM,KAAKiB,YACT,EACAnB,EAAQS,UAAU6L,oBAAsB,WACpC,IAAIrD,EAAY/I,KAAKgJ,WACjBD,IACA/I,KAAKsL,iBAAiBvC,GACtB/I,KAAKgJ,WAAa,KAClBhJ,KAAKiB,aAEb,EACAnB,EAAQS,UAAUU,WAAa,WAC3BjB,KAAKsB,SAAW,KAChB,IAAI8J,EAAKpL,KAAK+E,KACVqG,IACIpL,KAAK4I,UACLwC,EAAGiB,eAGHjB,EAAGkB,WAGPtM,KAAKmL,cACLnL,KAAKmL,aAAalK,YAE1B,EACAnB,EAAQS,UAAUgM,MAAQ,WACtBvM,KAAKiB,YACT,EACAnB,EAAQS,UAAUmI,sBAAwB,SAAU8D,GAChDxM,KAAK4I,UAAY4D,EACjB,IAAI1D,EAAc9I,KAAK0B,aACnBqH,EAAY/I,KAAKgJ,WACjBF,IACAA,EAAYF,UAAY4D,GAExBzD,IACAA,EAAUH,UAAY4D,EAE9B,EACA1M,EAAQS,UAAU8K,YAAc,SAAUD,GACtC,GAAIpL,KAAK+E,OAASqG,EAAlB,CAGApL,KAAK+E,KAAOqG,EACZ,IAAIjL,EAAYH,KAAKG,UACrB,GAAIA,EACA,IAAK,IAAIoF,EAAI,EAAGA,EAAIpF,EAAUsG,OAAQlB,IAClC6F,EAAGqB,UAAUC,YAAYvM,EAAUoF,IAGvCvF,KAAKyL,WACLzL,KAAKyL,UAAUJ,YAAYD,GAE3BpL,KAAK0B,cACL1B,KAAK0B,aAAa2J,YAAYD,GAE9BpL,KAAKgJ,YACLhJ,KAAKgJ,WAAWqC,YAAYD,EAfhC,CAiBJ,EACAtL,EAAQS,UAAUgL,iBAAmB,SAAUH,GAC3C,GAAKpL,KAAK+E,KAAV,CAGA/E,KAAK+E,KAAO,KACZ,IAAI5E,EAAYH,KAAKG,UACrB,GAAIA,EACA,IAAK,IAAIoF,EAAI,EAAGA,EAAIpF,EAAUsG,OAAQlB,IAClC6F,EAAGqB,UAAUE,eAAexM,EAAUoF,IAG1CvF,KAAKyL,WACLzL,KAAKyL,UAAUF,iBAAiBH,GAEhCpL,KAAK0B,cACL1B,KAAK0B,aAAa6J,iBAAiBH,GAEnCpL,KAAKgJ,YACLhJ,KAAKgJ,WAAWuC,iBAAiBH,EAfrC,CAiBJ,EACAtL,EAAQS,UAAUqM,QAAU,SAAUlN,EAAKmN,EAAMC,GAC7C,IAAI1F,EAAS1H,EAAMM,KAAKN,GAAOM,KAU/B,IAAI+G,EAAW,IAAI,IAASK,EAAQyF,EAAMC,GAG1C,OAFApN,IAAQqH,EAASI,WAAazH,GAC9BM,KAAK0M,YAAY3F,EAAUrH,GACpBqH,CACX,EACAjH,EAAQS,UAAUmM,YAAc,SAAU3F,EAAUrH,GAChD,IAAI0L,EAAKpL,KAAK+E,KACVgI,EAAK/M,KACT+G,EAASiG,QAAO,WACZD,EAAGE,sBAAsBvN,EAC7B,IAAGwN,MAAK,WACJ,IAAI/M,EAAY4M,EAAG5M,UACf6J,GAAM,IAAApG,SAAQzD,EAAW4G,GACzBiD,GAAO,GACP7J,EAAU8J,OAAOD,EAAK,EAE9B,IACAhK,KAAKG,UAAU8I,KAAKlC,GAChBqE,GACAA,EAAGqB,UAAUC,YAAY3F,GAE7BqE,GAAMA,EAAG+B,QACb,EACArN,EAAQS,UAAU0M,sBAAwB,SAAUvN,GAChDM,KAAKiB,YACT,EACAnB,EAAQS,UAAU6M,cAAgB,SAAUC,EAAOC,GAI/C,IAHA,IAAInN,EAAYH,KAAKG,UACjBmJ,EAAMnJ,EAAUsG,OAChB8G,EAAgB,GACXhI,EAAI,EAAGA,EAAI+D,EAAK/D,IAAK,CAC1B,IAAIwB,EAAW5G,EAAUoF,GACpB8H,GAASA,IAAUtG,EAASsG,MAI7BE,EAActE,KAAKlC,GAHnBA,EAASyG,KAAKF,EAKtB,CAEA,OADAtN,KAAKG,UAAYoN,EACVvN,IACX,EACAF,EAAQS,UAAUkN,UAAY,SAAUrG,EAAQ2E,EAAK2B,GACjDD,EAAUzN,KAAMoH,EAAQ2E,EAAK2B,EACjC,EACA5N,EAAQS,UAAUoN,YAAc,SAAUvG,EAAQ2E,EAAK2B,GACnDD,EAAUzN,KAAMoH,EAAQ2E,EAAK2B,GAAgB,EACjD,EACA5N,EAAQS,UAAUyK,iBAAmB,SAAUjD,EAAWX,EAAQ2E,EAAK2B,GAEnE,IADA,IAAIvN,EAAYsN,EAAUzN,KAAMoH,EAAQ2E,EAAK2B,GACpCnI,EAAI,EAAGA,EAAIpF,EAAUsG,OAAQlB,IAClCpF,EAAUoF,GAAG0B,sBAAwBc,CAE7C,EACAjI,EAAQS,UAAUiC,gBAAkB,WAChC,OAAO,IACX,EACA1C,EAAQS,UAAUqN,aAAe,WAC7B,OAAO,IACX,EACA9N,EAAQ+N,iBAAmB,WACvB,IAAIC,EAAUhO,EAAQS,UACtBuN,EAAQC,KAAO,UACfD,EAAQpG,KAAO,GACfoG,EAAQnO,OACJmO,EAAQE,OACJF,EAAQG,QACJH,EAAQjN,UACJiN,EAAQI,SACJJ,EAAQK,WACJL,EAAQlF,WAAY,EAC5CkF,EAAQxM,QAAU,KAQlB,SAAS8M,EAAqB1O,EAAK2O,EAAYC,EAAMC,GAsBjD,SAASC,EAAaC,EAAMC,GACxBC,OAAOC,eAAeF,EAAK,EAAG,CAC1BG,IAAK,WACD,OAAOJ,EAAKH,EAChB,EACAQ,IAAK,SAAUC,GACXN,EAAKH,GAAQS,CACjB,IAEJJ,OAAOC,eAAeF,EAAK,EAAG,CAC1BG,IAAK,WACD,OAAOJ,EAAKF,EAChB,EACAO,IAAK,SAAUC,GACXN,EAAKF,GAAQQ,CACjB,GAER,CAtCAJ,OAAOC,eAAed,EAASpO,EAAK,CAChCmP,IAAK,WAID,IAAK7O,KAAKqO,GAAa,CACnB,IAAIK,EAAM1O,KAAKqO,GAAc,GAC7BG,EAAaxO,KAAM0O,EACvB,CACA,OAAO1O,KAAKqO,EAChB,EACAS,IAAK,SAAUJ,GAIX1O,KAAKsO,GAAQI,EAAI,GACjB1O,KAAKuO,GAAQG,EAAI,GACjB1O,KAAKqO,GAAcK,EACnBF,EAAaxO,KAAM0O,EACvB,GAoBR,CACIC,OAAOC,iBACPR,EAAqB,WAAY,aAAc,IAAK,KACpDA,EAAqB,QAAS,eAAgB,SAAU,UACxDA,EAAqB,SAAU,gBAAiB,UAAW,WAElE,CAjE0B,GAkEpBtO,CACX,CA1yBc,GA6yBd,SAAS2N,EAAUuB,EAAY5H,EAAQ2E,EAAK2B,EAAgBuB,GACxDlD,EAAMA,GAAO,CAAC,EACd,IAAI5L,EAAY,GAChB+O,EAAiBF,EAAY,GAAIA,EAAY5H,EAAQ2E,EAAK2B,EAAgBvN,EAAW8O,GACrF,IAAIE,EAAchP,EAAUsG,OACxB2I,GAAe,EACfC,EAAUtD,EAAImB,KACdoC,EAAavD,EAAIwD,QACjBC,EAAS,WACTJ,GAAe,EACfD,IACIA,GAAe,IACfC,EACOC,GAAWA,IACXC,GAAcA,IAE7B,EACIG,EAAY,WACZN,IACIA,GAAe,IACfC,EACOC,GAAWA,IACXC,GAAcA,IAE7B,EACKH,GACDE,GAAWA,IAEXlP,EAAUsG,OAAS,GAAKsF,EAAIiB,QAC5B7M,EAAU,GAAG6M,QAAO,SAAU5F,EAAQsI,GAClC3D,EAAIiB,OAAO0C,EACf,IAEJ,IAAK,IAAInK,EAAI,EAAGA,EAAIpF,EAAUsG,OAAQlB,IAAK,CACvC,IAAIwB,EAAW5G,EAAUoF,GACrBiK,GACAzI,EAASmG,KAAKsC,GAEdC,GACA1I,EAASwI,QAAQE,GAEjB1D,EAAI4D,OACJ5I,EAAS8B,SAASkD,EAAIlD,UAE1B9B,EAAS6I,MAAM7D,EAAI8D,OACvB,CACA,OAAO1P,CACX,CACA,SAAS2P,EAAeC,EAAQ3I,EAAQkC,GACpC,IAAK,IAAI/D,EAAI,EAAGA,EAAI+D,EAAK/D,IACrBwK,EAAOxK,GAAK6B,EAAO7B,EAE3B,CACA,SAASyK,EAAUnK,GACf,OAAO,IAAAoK,aAAYpK,EAAM,GAC7B,CACA,SAASqK,EAAU9I,EAAQ2I,EAAQrQ,GAC/B,IAAI,IAAAuQ,aAAYF,EAAOrQ,IAInB,IAHK,IAAAuQ,aAAY7I,EAAO1H,MACpB0H,EAAO1H,GAAO,KAEd,IAAAyQ,cAAaJ,EAAOrQ,IAAO,CAC3B,IAAI4J,EAAMyG,EAAOrQ,GAAK+G,OAClBW,EAAO1H,GAAK+G,SAAW6C,IACvBlC,EAAO1H,GAAO,IAAKqQ,EAAOrQ,GAAgB,YAAE4J,GAC5CwG,EAAe1I,EAAO1H,GAAMqQ,EAAOrQ,GAAM4J,GAEjD,KACK,CACD,IAAI8G,EAAYL,EAAOrQ,GACnB2Q,EAAYjJ,EAAO1H,GACnB4Q,EAAOF,EAAU3J,OACrB,GAAIuJ,EAAUI,GAEV,IADA,IAAIG,EAAOH,EAAU,GAAG3J,OACflB,EAAI,EAAGA,EAAI+K,EAAM/K,IACjB8K,EAAU9K,GAIXuK,EAAeO,EAAU9K,GAAI6K,EAAU7K,GAAIgL,GAH3CF,EAAU9K,GAAKiL,MAAMjQ,UAAUsJ,MAAM4G,KAAKL,EAAU7K,SAQ5DuK,EAAeO,EAAWD,EAAWE,GAEzCD,EAAU5J,OAAS2J,EAAU3J,MACjC,MAGAW,EAAO1H,GAAOqQ,EAAOrQ,EAE7B,CACA,SAASgR,EAAYC,EAAMC,GACvB,OAAOD,IAASC,IACT,IAAAX,aAAYU,KAAS,IAAAV,aAAYW,IAASC,EAAcF,EAAMC,EACzE,CACA,SAASC,EAAcC,EAAMC,GACzB,IAAIzH,EAAMwH,EAAKrK,OACf,GAAI6C,IAAQyH,EAAKtK,OACb,OAAO,EAEX,IAAK,IAAIlB,EAAI,EAAGA,EAAI+D,EAAK/D,IACrB,GAAIuL,EAAKvL,KAAOwL,EAAKxL,GACjB,OAAO,EAGf,OAAO,CACX,CACA,SAAS2J,EAAiBF,EAAYgC,EAAQC,EAAY7J,EAAQ2E,EAAK2B,EAAgBvN,EAAW8O,GAS9F,IARA,IAAIiC,GAAa,IAAA1K,MAAKY,GAClByB,EAAWkD,EAAIlD,SACfsI,EAAQpF,EAAIoF,MACZC,EAAWrF,EAAIqF,SACfC,EAAatF,EAAIsF,WACjBC,IAAc,IAAAhL,UAASoH,GACvB6D,EAAkBvC,EAAW7O,UAC7BqR,EAAgB,GACXC,EAAI,EAAGA,EAAIP,EAAWzK,OAAQgL,IAAK,CACxC,IAAIC,EAAWR,EAAWO,GACtBE,EAAYvK,EAAOsK,GACvB,GAAiB,MAAbC,GAA6C,MAAxBV,EAAWS,KAC5BJ,GAAc5D,EAAegE,IACjC,KAAI,IAAApL,UAASqL,KACL,IAAA1B,aAAY0B,KACZ,IAAAC,kBAAiBD,GAWrBH,EAAcvI,KAAKyI,OAXc,CACjC,GAAIV,EAAQ,CACH/B,IACDgC,EAAWS,GAAYC,EACvB3C,EAAW/B,sBAAsB+D,IAErC,QACJ,CACA9B,EAAiBF,EAAY0C,EAAUT,EAAWS,GAAWC,EAAW5F,EAAK2B,GAAkBA,EAAegE,GAAWvR,EAAW8O,EACxI,MAKMA,IACNgC,EAAWS,GAAYC,EACvB3C,EAAW/B,sBAAsB+D,GACjCQ,EAAcvI,KAAKyI,GAE3B,CACA,IAAIG,EAASL,EAAc/K,OAC3B,IAAK2K,GAAYS,EACb,IAAK,IAAItM,EAAI,EAAGA,EAAIgM,EAAgB9K,OAAQlB,IAAK,CAC7C,IAAIwB,EAAWwK,EAAgBhM,GAC/B,GAAIwB,EAASI,aAAe6J,EAAQ,CAChC,IAAIc,EAAa/K,EAASgL,WAAWP,GACrC,GAAIM,EAAY,CACZ,IAAI9H,GAAM,IAAApG,SAAQ2N,EAAiBxK,GACnCwK,EAAgBtH,OAAOD,EAAK,EAChC,CACJ,CACJ,CAMJ,GAJK+B,EAAI4D,QACL6B,GAAgB,IAAAQ,QAAOR,GAAe,SAAU9R,GAAO,OAAQgR,EAAYtJ,EAAO1H,GAAMuR,EAAWvR,GAAO,IAC1GmS,EAASL,EAAc/K,QAEvBoL,EAAS,GACL9F,EAAI4D,QAAUxP,EAAUsG,OAAS,CACrC,IAAIwL,OAAiB,EACjBC,OAAiB,EACjBC,OAAc,EAClB,GAAIlD,EAAS,CACTiD,EAAiB,CAAC,EACdb,IACAY,EAAiB,CAAC,GAEtB,IAAS1M,EAAI,EAAGA,EAAIsM,EAAQtM,IAAK,CACzBmM,EAAWF,EAAcjM,GAC7B2M,EAAeR,GAAYT,EAAWS,GAClCL,EACAY,EAAeP,GAAYtK,EAAOsK,GAGlCT,EAAWS,GAAYtK,EAAOsK,EAEtC,CACJ,MACK,GAAIL,EAAY,CACjBc,EAAc,CAAC,EACf,IAAS5M,EAAI,EAAGA,EAAIsM,EAAQtM,IAAK,CACzBmM,EAAWF,EAAcjM,GAC7B4M,EAAYT,IAAY,OAAWT,EAAWS,IAC9CxB,EAAUe,EAAY7J,EAAQsK,EAClC,CACJ,CACI3K,EAAW,IAAI,IAASkK,GAAY,GAAO,EAAOG,GAAW,IAAAY,QAAOT,GAAiB,SAAUxK,GAAY,OAAOA,EAASI,aAAe6J,CAAQ,IAAK,MAC3JjK,EAASI,WAAa6J,EAClBjF,EAAIsB,QACJtG,EAASsG,MAAQtB,EAAIsB,OAErBgE,GAAcY,GACdlL,EAASqL,aAAa,EAAGH,EAAgBT,GAEzCW,GACApL,EAASqL,aAAa,EAAGD,EAAaX,GAE1CzK,EAASqL,aAAyB,MAAZvJ,EAAmB,IAAMA,EAAUoG,EAAUiD,EAAiB9K,EAAQoK,GAAeL,MAAMA,GAAS,GAC1HnC,EAAWtC,YAAY3F,EAAUiK,GACjC7Q,EAAU8I,KAAKlC,EACnB,CACJ,EAhNA,IAAAsL,OAAMvS,EAAS,MACf,IAAAuS,OAAMvS,EAAS,MAgNf,Q,mHCrgCIwS,EAAS,SACb,SAASC,EAAgBC,EAASC,EAAYC,GAC1C,MAAO,CACH3E,KAAMyE,EACNE,MAAOA,EACPtL,OAAQqL,EAAWrL,OACnBuL,UAAWF,EAAWE,UACtBC,cAAc,EACdC,QAASH,EAAMI,IACfC,QAASL,EAAMM,IACfC,aAAcP,EAAMO,aACpBC,OAAQR,EAAMQ,OACdC,OAAQT,EAAMS,OACdC,WAAYV,EAAMU,WAClBC,WAAYX,EAAMY,QAClBC,UAAWb,EAAMa,UACjBC,MAAOd,EAAMc,MACbhG,KAAMiG,EAEd,CACA,SAASA,IACL,KAAezT,KAAK0S,MACxB,CACA,IAAIgB,EAAc,SAAUC,GAExB,SAASD,IACL,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAM7T,KAAM8T,YAAc9T,KAEhE,OADA4T,EAAMG,QAAU,KACTH,CACX,CAGA,OARA,QAAUF,EAAYC,GAMtBD,EAAWnT,UAAUyT,QAAU,WAAc,EAC7CN,EAAWnT,UAAU0T,UAAY,WAAc,EACxCP,CACX,CAViB,CAUf,KACEQ,EAAiB,WACjB,SAASA,EAAcvR,EAAGC,GACtB5C,KAAK2C,EAAIA,EACT3C,KAAK4C,EAAIA,CACb,CACA,OAAOsR,CACX,CANoB,GAOhBC,EAAe,CACf,QAAS,WAAY,aAAc,WACnC,UAAW,YAAa,YAAa,eAErCC,EAAU,IAAI,IAAa,EAAG,EAAG,EAAG,GACpCC,EAAW,SAAUV,GAErB,SAASU,EAAQC,EAASC,EAASC,EAAOC,EAAaC,GACnD,IAAId,EAAQD,EAAOlD,KAAKzQ,OAASA,KAUjC,OATA4T,EAAMe,SAAW,IAAIT,EAAc,EAAG,GACtCN,EAAMU,QAAUA,EAChBV,EAAMW,QAAUA,EAChBX,EAAMa,YAAcA,EACpBb,EAAMgB,aAAeF,EACrBF,EAAQA,GAAS,IAAId,EACrBE,EAAMY,MAAQ,KACdZ,EAAMiB,gBAAgBL,GACtBZ,EAAMkB,aAAe,IAAI,IAAUlB,GAC5BA,CACX,CAsJA,OAnKA,QAAUS,EAASV,GAcnBU,EAAQ9T,UAAUsU,gBAAkB,SAAUL,GACtCxU,KAAKwU,OACLxU,KAAKwU,MAAMR,UAEXQ,IACA,OAAUL,GAAc,SAAUzM,GAC9B8M,EAAMO,IAAMP,EAAMO,GAAGrN,EAAM1H,KAAK0H,GAAO1H,KAC3C,GAAGA,MACHwU,EAAMT,QAAU/T,MAEpBA,KAAKwU,MAAQA,CACjB,EACAH,EAAQ9T,UAAUyU,UAAY,SAAUtC,GACpC,IAAI/P,EAAI+P,EAAMI,IACVlQ,EAAI8P,EAAMM,IACViC,EAAYC,EAAkBlV,KAAM2C,EAAGC,GACvCuS,EAAcnV,KAAK2U,SACnBS,EAAoBD,EAAY/N,OAChCgO,IAAsBA,EAAkBrQ,OACxCoQ,EAAcnV,KAAKqV,UAAUF,EAAYxS,EAAGwS,EAAYvS,GACxDwS,EAAoBD,EAAY/N,QAEpC,IAAIkO,EAAUtV,KAAK2U,SAAWM,EAAY,IAAIf,EAAcvR,EAAGC,GAAK5C,KAAKqV,UAAU1S,EAAGC,GAClF2S,EAAgBD,EAAQlO,OACxBoN,EAAQxU,KAAKwU,MACjBA,EAAMP,WAAaO,EAAMP,UAAUsB,EAAgBA,EAAcC,OAAS,WACtEJ,GAAqBG,IAAkBH,GACvCpV,KAAKyV,kBAAkBN,EAAa,WAAYzC,GAEpD1S,KAAKyV,kBAAkBH,EAAS,YAAa5C,GACzC6C,GAAiBA,IAAkBH,GACnCpV,KAAKyV,kBAAkBH,EAAS,YAAa5C,EAErD,EACA2B,EAAQ9T,UAAUmV,SAAW,SAAUhD,GACnC,IAAIiD,EAAejD,EAAMkD,eACJ,mBAAjBD,GACA3V,KAAKyV,kBAAkBzV,KAAK2U,SAAU,WAAYjC,GAEjC,iBAAjBiD,GACA3V,KAAK6V,QAAQ,YAAa,CAAE9H,KAAM,YAAa2E,MAAOA,GAE9D,EACA2B,EAAQ9T,UAAUuV,OAAS,WACvB9V,KAAK2U,SAAW,IAAIT,EAAc,EAAG,EACzC,EACAG,EAAQ9T,UAAUwV,SAAW,SAAUC,EAAWC,GAC9C,IAAIlC,EAAU/T,KAAKgW,GACnBjC,GAAWA,EAAQtD,KAAKzQ,KAAMiW,EAClC,EACA5B,EAAQ9T,UAAUyT,QAAU,WACxBhU,KAAKwU,MAAMR,UACXhU,KAAKsU,QAAU,KACftU,KAAKwU,MAAQ,KACbxU,KAAKuU,QAAU,IACnB,EACAF,EAAQ9T,UAAU2V,eAAiB,SAAUC,GACzC,IAAI3B,EAAQxU,KAAKwU,MACjBA,EAAMP,WAAaO,EAAMP,UAAUkC,EACvC,EACA9B,EAAQ9T,UAAUkV,kBAAoB,SAAUhD,EAAYuD,EAAWtD,GACnED,EAAaA,GAAc,CAAC,EAC5B,IAAI1F,EAAK0F,EAAWrL,OACpB,IAAI2F,IAAMA,EAAGiB,OAAb,CAGA,IAAIoI,EAAY,KAAOJ,EACnBK,EAAc9D,EAAgByD,EAAWvD,EAAYC,GACzD,MAAO3F,EAKH,GAJAA,EAAGqJ,KACKC,EAAYzD,eAAiB7F,EAAGqJ,GAAU3F,KAAK1D,EAAIsJ,IAC3DtJ,EAAG8I,QAAQG,EAAWK,GACtBtJ,EAAKA,EAAG5B,aAAe4B,EAAG5B,aAAe4B,EAAG7K,OACxCmU,EAAYzD,aACZ,MAGHyD,EAAYzD,eACb5S,KAAK6V,QAAQG,EAAWK,GACpBrW,KAAKuU,SAAWvU,KAAKuU,QAAQ+B,gBAC7BtW,KAAKuU,QAAQ+B,gBAAe,SAAUC,GACD,oBAArBA,EAAMH,IACdG,EAAMH,GAAU3F,KAAK8F,EAAOF,GAE5BE,EAAMV,SACNU,EAAMV,QAAQG,EAAWK,EAEjC,IAtBR,CAyBJ,EACAhC,EAAQ9T,UAAU8U,UAAY,SAAU1S,EAAGC,EAAG4T,GAC1C,IAAIC,EAAOzW,KAAKsU,QAAQoC,iBACpBC,EAAM,IAAIzC,EAAcvR,EAAGC,GAE/B,GADAgU,EAAeH,EAAME,EAAKhU,EAAGC,EAAG4T,GAC5BxW,KAAK4U,eAAiB+B,EAAIvP,OAAQ,CAKlC,IAJA,IAAIyP,EAAa,GACbnC,EAAc1U,KAAK4U,aACnBkC,EAAiBpC,EAAc,EAC/BqC,EAAc,IAAI,IAAapU,EAAImU,EAAgBlU,EAAIkU,EAAgBpC,EAAaA,GAC/EnP,EAAIkR,EAAKhQ,OAAS,EAAGlB,GAAK,EAAGA,IAAK,CACvC,IAAIwH,EAAK0J,EAAKlR,GACVwH,IAAOyJ,GACHzJ,EAAGpN,QACHoN,EAAGiK,qBACFjK,EAAG7K,QAAW6K,EAAG7K,OAAO8U,sBAC7B5C,EAAQ7R,KAAKwK,EAAGvK,mBACZuK,EAAGhM,WACHqT,EAAQ3R,eAAesK,EAAGhM,WAE1BqT,EAAQ6C,UAAUF,IAClBF,EAAW5N,KAAK8D,GAG5B,CACA,GAAI8J,EAAWpQ,OAIX,IAHA,IAAIyQ,EAAQ,EACRC,EAAYC,KAAKC,GAAK,GACtBC,EAAgB,EAAVF,KAAKC,GACNE,EAAI,EAAGA,EAAIT,EAAgBS,GAAKL,EACrC,IAAK,IAAIM,EAAQ,EAAGA,EAAQF,EAAKE,GAASL,EAAW,CACjD,IAAIM,EAAK9U,EAAI4U,EAAIH,KAAKM,IAAIF,GACtBG,EAAK/U,EAAI2U,EAAIH,KAAKQ,IAAIJ,GAE1B,GADAZ,EAAeC,EAAYF,EAAKc,EAAIE,EAAInB,GACpCG,EAAIvP,OACJ,OAAOuP,CAEf,CAGZ,CACA,OAAOA,CACX,EACAtC,EAAQ9T,UAAUsX,eAAiB,SAAUnF,EAAOoF,GAC3C9X,KAAK+X,cACN/X,KAAK+X,YAAc,IAAI,KAE3B,IAAIC,EAAahY,KAAK+X,YACZ,UAAVD,GAAqBE,EAAWC,QAChC,IAAIC,EAAcF,EAAWG,UAAUzF,EAAO1S,KAAKqV,UAAU3C,EAAMI,IAAKJ,EAAMM,IAAK,MAAM5L,OAAQpH,KAAKwU,MAAM4D,KAE5G,GADU,QAAVN,GAAmBE,EAAWC,QAC1BC,EAAa,CACb,IAAInK,EAAOmK,EAAYnK,KACvB2E,EAAMO,aAAelF,EACrB,IAAIsK,EAAM,IAAInE,EACdmE,EAAIjR,OAAS8Q,EAAY9Q,OACzBpH,KAAKyV,kBAAkB4C,EAAKtK,EAAMmK,EAAYxF,MAClD,CACJ,EACO2B,CACX,CArKc,CAqKZ,KA+BF,SAASiE,EAAQC,EAAa5V,EAAGC,GAC7B,GAAI2V,EAAYA,EAAYC,UAAY,cAAgB,WAAW7V,EAAGC,GAAI,CACtE,IAAImK,EAAKwL,EACLE,OAAW,EACXtK,GAAa,EACjB,MAAOpB,EAAI,CAIP,GAHIA,EAAGoB,aACHA,GAAa,IAEZA,EAAY,CACb,IAAIzC,EAAWqB,EAAGvB,cAClB,GAAIE,IAAaA,EAASgN,QAAQ/V,EAAGC,GACjC,OAAO,EAEPmK,EAAGiB,SACHyK,GAAW,EAEnB,CACA,IAAIE,EAAS5L,EAAG5B,aAChB4B,EAAK4L,GAAkB5L,EAAG7K,MAC9B,CACA,OAAOuW,GAAWnG,CACtB,CACA,OAAO,CACX,CACA,SAASsE,EAAeH,EAAME,EAAKhU,EAAGC,EAAG4T,GACrC,IAAK,IAAIjR,EAAIkR,EAAKhQ,OAAS,EAAGlB,GAAK,EAAGA,IAAK,CACvC,IAAIwH,EAAK0J,EAAKlR,GACVqT,OAAmB,EACvB,GAAI7L,IAAOyJ,IACHzJ,EAAGpN,SACHiZ,EAAmBN,EAAQvL,EAAIpK,EAAGC,OACrC+T,EAAIhE,YAAcgE,EAAIhE,UAAY5F,GAC/B6L,IAAqBtG,GAAQ,CAC7BqE,EAAIvP,OAAS2F,EACb,KACJ,CAER,CACJ,CACA,SAASmI,EAAkB2D,EAAiBlW,EAAGC,GAC3C,IAAI2R,EAAUsE,EAAgBtE,QAC9B,OAAO5R,EAAI,GAAKA,EAAI4R,EAAQuE,YAAclW,EAAI,GAAKA,EAAI2R,EAAQwE,WACnE,CAzEA,OAAU,CAAC,QAAS,YAAa,UAAW,aAAc,WAAY,gBAAgB,SAAUrR,GAC5F2M,EAAQ9T,UAAUmH,GAAQ,SAAUgL,GAChC,IAGI4C,EACAC,EAJA5S,EAAI+P,EAAMI,IACVlQ,EAAI8P,EAAMM,IACViC,EAAYC,EAAkBlV,KAAM2C,EAAGC,GAO3C,GAJa,YAAT8E,GAAuBuN,IACvBK,EAAUtV,KAAKqV,UAAU1S,EAAGC,GAC5B2S,EAAgBD,EAAQlO,QAEf,cAATM,EACA1H,KAAKgZ,QAAUzD,EACfvV,KAAKiZ,WAAa,CAACvG,EAAMI,IAAKJ,EAAMM,KACpChT,KAAKkZ,MAAQ3D,OAEZ,GAAa,YAAT7N,EACL1H,KAAKkZ,MAAQ3D,OAEZ,GAAa,UAAT7N,EAAkB,CACvB,GAAI1H,KAAKgZ,UAAYhZ,KAAKkZ,QAClBlZ,KAAKiZ,YACN,OAAUjZ,KAAKiZ,WAAY,CAACvG,EAAMI,IAAKJ,EAAMM,MAAQ,EACxD,OAEJhT,KAAKiZ,WAAa,IACtB,CACAjZ,KAAKyV,kBAAkBH,EAAS5N,EAAMgL,EAC1C,CACJ,IA6CA,Q,4DCnSIyG,GAAsB,EAC1B,SAASC,IACDD,IAGJA,GAAsB,EACtBE,QAAQC,KAAK,gFACjB,CACA,SAASC,EAAiBC,EAAGC,GACzB,OAAID,EAAEE,SAAWD,EAAEC,OACXF,EAAEG,IAAMF,EAAEE,EACHH,EAAEI,GAAKH,EAAEG,GAEbJ,EAAEG,EAAIF,EAAEE,EAEZH,EAAEE,OAASD,EAAEC,MACxB,CACA,IAAIG,EAAW,WACX,SAASA,IACL7Z,KAAK8Z,OAAS,GACd9Z,KAAK+Z,aAAe,GACpB/Z,KAAKga,gBAAkB,EACvBha,KAAKia,oBAAsBV,CAC/B,CAiIA,OAhIAM,EAAQtZ,UAAUkF,SAAW,SAAUC,EAAIC,GACvC,IAAK,IAAIJ,EAAI,EAAGA,EAAIvF,KAAK8Z,OAAOrT,OAAQlB,IACpCvF,KAAK8Z,OAAOvU,GAAGE,SAASC,EAAIC,EAEpC,EACAkU,EAAQtZ,UAAUmW,eAAiB,SAAUtV,EAAQ8Y,GACjDA,EAAgBA,IAAiB,EACjC,IAAIC,EAAcna,KAAK+Z,aAIvB,OAHI3Y,GAAW+Y,EAAY1T,QACvBzG,KAAKoa,kBAAkBF,GAEpBC,CACX,EACAN,EAAQtZ,UAAU6Z,kBAAoB,SAAUF,GAC5Cla,KAAKga,gBAAkB,EAGvB,IAFA,IAAIK,EAAQra,KAAK8Z,OACbK,EAAcna,KAAK+Z,aACdxU,EAAI,EAAG+D,EAAM+Q,EAAM5T,OAAQlB,EAAI+D,EAAK/D,IACzCvF,KAAKsa,yBAAyBD,EAAM9U,GAAI,KAAM2U,GAElDC,EAAY1T,OAASzG,KAAKga,iBAC1B,OAAQG,EAAaZ,EACzB,EACAM,EAAQtZ,UAAU+Z,yBAA2B,SAAUvN,EAAIwN,EAAWL,GAClE,IAAInN,EAAGpN,QAAWua,EAAlB,CAGAnN,EAAG7L,eACH6L,EAAG3L,SACH2L,EAAG5L,cACH,IAAIqZ,EAAkBzN,EAAGvB,cACzB,GAAIuB,EAAGoB,WACHoM,EAAY,UAEX,GAAIC,EAAiB,CAElBD,EADAA,EACYA,EAAU1Q,QAGV,GAEhB,IAAI4Q,EAAkBD,EAClBE,EAAiB3N,EACrB,MAAO0N,EACHA,EAAgBvY,OAASwY,EACzBD,EAAgBpZ,kBAChBkZ,EAAUtR,KAAKwR,GACfC,EAAiBD,EACjBA,EAAkBA,EAAgBjP,aAE1C,CACA,GAAIuB,EAAG4N,YAAa,CAEhB,IADA,IAAIC,EAAW7N,EAAG4N,cACTpV,EAAI,EAAGA,EAAIqV,EAASnU,OAAQlB,IAAK,CACtC,IAAIsV,EAAQD,EAASrV,GACjBwH,EAAGzL,UACHuZ,EAAMvZ,SAAW,MAErBtB,KAAKsa,yBAAyBO,EAAON,EAAWL,EACpD,CACAnN,EAAGzL,QAAU,CACjB,KACK,CACD,IAAIwZ,EAAO/N,EACPwN,GAAaA,EAAU9T,OACvBqU,EAAKC,YAAcR,EAEdO,EAAKC,aAAeD,EAAKC,YAAYtU,OAAS,IACnDqU,EAAKC,YAAc,IAEnBC,MAAMF,EAAKnB,KACXP,IACA0B,EAAKnB,EAAI,GAETqB,MAAMF,EAAKlB,MACXR,IACA0B,EAAKlB,GAAK,GAEVoB,MAAMF,EAAKpB,UACXN,IACA0B,EAAKpB,OAAS,GAElB1Z,KAAK+Z,aAAa/Z,KAAKga,mBAAqBc,CAChD,CACA,IAAIG,EAAUlO,EAAGmO,iBAAmBnO,EAAGmO,kBACnCD,GACAjb,KAAKsa,yBAAyBW,EAASV,EAAWL,GAEtD,IAAInR,EAAYgE,EAAGd,mBACflD,GACA/I,KAAKsa,yBAAyBvR,EAAWwR,EAAWL,GAExD,IAAIzY,EAASsL,EAAGnB,iBACZnK,GACAzB,KAAKsa,yBAAyB7Y,EAAQ8Y,EAAWL,EApErD,CAsEJ,EACAL,EAAQtZ,UAAU4a,QAAU,SAAUpO,GAC9BA,EAAGhI,MAAQgI,EAAGhI,KAAKuP,UAAYtU,MAGnCA,KAAK8Z,OAAO7Q,KAAK8D,EACrB,EACA8M,EAAQtZ,UAAU6a,QAAU,SAAUrO,GAClC,GAAIA,aAAcyD,MACd,IAAK,IAAIjL,EAAI,EAAG8V,EAAItO,EAAGtG,OAAQlB,EAAI8V,EAAG9V,IAClCvF,KAAKob,QAAQrO,EAAGxH,QAFxB,CAMA,IAAIyE,EAAM,UAAahK,KAAK8Z,OAAQ/M,GAChC/C,GAAO,GACPhK,KAAK8Z,OAAO7P,OAAOD,EAAK,EAH5B,CAKJ,EACA6P,EAAQtZ,UAAU+a,YAAc,WAC5Btb,KAAK8Z,OAAS,GACd9Z,KAAK+Z,aAAe,GACpB/Z,KAAKga,gBAAkB,CAE3B,EACAH,EAAQtZ,UAAUgb,SAAW,WACzB,OAAOvb,KAAK8Z,MAChB,EACAD,EAAQtZ,UAAUyT,QAAU,WACxBhU,KAAK+Z,aAAe,KACpB/Z,KAAK8Z,OAAS,IAClB,EACOD,CACX,CAxIc,GAyId,Q,uGCzJO,SAAS2B,IACZ,OAAO,IAAIC,MAAOD,SACtB,CACA,IAAIE,EAAa,SAAU/H,GAEvB,SAAS+H,EAAUC,GACf,IAAI/H,EAAQD,EAAOlD,KAAKzQ,OAASA,KAQjC,OAPA4T,EAAMgI,UAAW,EACjBhI,EAAMiI,MAAQ,EACdjI,EAAMkI,YAAc,EACpBlI,EAAMmI,YAAc,EACpBnI,EAAMoI,SAAU,EAChBL,EAAOA,GAAQ,CAAC,EAChB/H,EAAMkE,MAAQ6D,EAAK7D,OAAS,CAAC,EACtBlE,CACX,CA6HA,OAxIA,QAAU8H,EAAW/H,GAYrB+H,EAAUnb,UAAU0b,QAAU,SAAUC,GAChCA,EAAKzP,WACLzM,KAAKmc,WAAWD,GAEflc,KAAKoc,OAINpc,KAAKqc,MAAMC,KAAOJ,EAClBA,EAAKK,KAAOvc,KAAKqc,MACjBH,EAAKI,KAAO,KACZtc,KAAKqc,MAAQH,GANblc,KAAKoc,MAAQpc,KAAKqc,MAAQH,EAQ9BA,EAAKzP,UAAYzM,IACrB,EACA0b,EAAUnb,UAAUmM,YAAc,SAAU3F,GACxCA,EAAS0F,UAAYzM,KACrB,IAAIkc,EAAOnV,EAASyV,UAChBN,GACAlc,KAAKic,QAAQC,EAErB,EACAR,EAAUnb,UAAU4b,WAAa,SAAUD,GACvC,GAAKA,EAAKzP,UAAV,CAGA,IAAI8P,EAAOL,EAAKK,KACZD,EAAOJ,EAAKI,KACZC,EACAA,EAAKD,KAAOA,EAGZtc,KAAKoc,MAAQE,EAEbA,EACAA,EAAKC,KAAOA,EAGZvc,KAAKqc,MAAQE,EAEjBL,EAAKI,KAAOJ,EAAKK,KAAOL,EAAKzP,UAAY,IAfzC,CAgBJ,EACAiP,EAAUnb,UAAUoM,eAAiB,SAAU5F,GAC3C,IAAImV,EAAOnV,EAASyV,UAChBN,GACAlc,KAAKmc,WAAWD,GAEpBnV,EAAS0F,UAAY,IACzB,EACAiP,EAAUnb,UAAUa,OAAS,SAAUqb,GACnC,IAAIC,EAAOlB,IAAYxb,KAAK8b,YACxBa,EAAQD,EAAO1c,KAAK6b,MACpBK,EAAOlc,KAAKoc,MAChB,MAAOF,EAAM,CACT,IAAIU,EAAWV,EAAKI,KAChBO,EAAWX,EAAKY,KAAKJ,EAAMC,GAC3BE,GACAX,EAAKa,YACL/c,KAAKmc,WAAWD,GAChBA,EAAOU,GAGPV,EAAOU,CAEf,CACA5c,KAAK6b,MAAQa,EACRD,IACDzc,KAAK6V,QAAQ,QAAS8G,GACtB3c,KAAK8X,MAAM1W,QAAUpB,KAAK8X,MAAM1W,SAExC,EACAsa,EAAUnb,UAAUyc,WAAa,WAC7B,IAAIvO,EAAOzO,KAEX,SAAS8c,IACDrO,EAAKmN,YACL,OAAsBkB,IACrBrO,EAAKuN,SAAWvN,EAAKrN,SAE9B,CANApB,KAAK4b,UAAW,GAOhB,OAAsBkB,EAC1B,EACApB,EAAUnb,UAAUqP,MAAQ,WACpB5P,KAAK4b,WAGT5b,KAAK6b,MAAQL,IACbxb,KAAK8b,YAAc,EACnB9b,KAAKgd,aACT,EACAtB,EAAUnb,UAAUiN,KAAO,WACvBxN,KAAK4b,UAAW,CACpB,EACAF,EAAUnb,UAAU0c,MAAQ,WACnBjd,KAAKgc,UACNhc,KAAK+b,YAAcP,IACnBxb,KAAKgc,SAAU,EAEvB,EACAN,EAAUnb,UAAU2c,OAAS,WACrBld,KAAKgc,UACLhc,KAAK8b,aAAeN,IAAYxb,KAAK+b,YACrC/b,KAAKgc,SAAU,EAEvB,EACAN,EAAUnb,UAAU0X,MAAQ,WACxB,IAAIiE,EAAOlc,KAAKoc,MAChB,MAAOF,EAAM,CACT,IAAIU,EAAWV,EAAKI,KACpBJ,EAAKK,KAAOL,EAAKI,KAAOJ,EAAKzP,UAAY,KACzCyP,EAAOU,CACX,CACA5c,KAAKoc,MAAQpc,KAAKqc,MAAQ,IAC9B,EACAX,EAAUnb,UAAU4c,WAAa,WAC7B,OAAqB,MAAdnd,KAAKoc,KAChB,EACAV,EAAUnb,UAAUqM,QAAU,SAAUxF,EAAQgW,GAC5CA,EAAUA,GAAW,CAAC,EACtBpd,KAAK4P,QACL,IAAI7I,EAAW,IAAI,IAASK,EAAQgW,EAAQvQ,MAE5C,OADA7M,KAAK0M,YAAY3F,GACVA,CACX,EACO2U,CACX,CA1IgB,CA0Id,KACF,Q,+EClJA,IAAI2B,EAAc,CACdC,OAAQ,SAAU7L,GACd,OAAOA,CACX,EACA8L,YAAa,SAAU9L,GACnB,OAAOA,EAAIA,CACf,EACA+L,aAAc,SAAU/L,GACpB,OAAOA,GAAK,EAAIA,EACpB,EACAgM,eAAgB,SAAUhM,GACtB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,GAEb,MAASA,GAAKA,EAAI,GAAK,EACnC,EACAiM,QAAS,SAAUjM,GACf,OAAOA,EAAIA,EAAIA,CACnB,EACAkM,SAAU,SAAUlM,GAChB,QAASA,EAAIA,EAAIA,EAAI,CACzB,EACAmM,WAAY,SAAUnM,GAClB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,EAAIA,EAElB,KAAQA,GAAK,GAAKA,EAAIA,EAAI,EACrC,EACAoM,UAAW,SAAUpM,GACjB,OAAOA,EAAIA,EAAIA,EAAIA,CACvB,EACAqM,WAAY,SAAUrM,GAClB,OAAO,KAAOA,EAAIA,EAAIA,EAAIA,CAC9B,EACAsM,aAAc,SAAUtM,GACpB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,EAAIA,EAAIA,GAErB,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAI,EAC1C,EACAuM,UAAW,SAAUvM,GACjB,OAAOA,EAAIA,EAAIA,EAAIA,EAAIA,CAC3B,EACAwM,WAAY,SAAUxM,GAClB,QAASA,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,CACjC,EACAyM,aAAc,SAAUzM,GACpB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,EAAIA,EAAIA,EAAIA,EAE1B,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,EAC7C,EACA0M,aAAc,SAAU1M,GACpB,OAAO,EAAI2F,KAAKM,IAAIjG,EAAI2F,KAAKC,GAAK,EACtC,EACA+G,cAAe,SAAU3M,GACrB,OAAO2F,KAAKQ,IAAInG,EAAI2F,KAAKC,GAAK,EAClC,EACAgH,gBAAiB,SAAU5M,GACvB,MAAO,IAAO,EAAI2F,KAAKM,IAAIN,KAAKC,GAAK5F,GACzC,EACA6M,cAAe,SAAU7M,GACrB,OAAa,IAANA,EAAU,EAAI2F,KAAKmH,IAAI,KAAM9M,EAAI,EAC5C,EACA+M,eAAgB,SAAU/M,GACtB,OAAa,IAANA,EAAU,EAAI,EAAI2F,KAAKmH,IAAI,GAAI,GAAK9M,EAC/C,EACAgN,iBAAkB,SAAUhN,GACxB,OAAU,IAANA,EACO,EAED,IAANA,EACO,GAENA,GAAK,GAAK,EACJ,GAAM2F,KAAKmH,IAAI,KAAM9M,EAAI,GAE7B,IAAqC,EAA7B2F,KAAKmH,IAAI,GAAI,IAAM9M,EAAI,IAC1C,EACAiN,WAAY,SAAUjN,GAClB,OAAO,EAAI2F,KAAKuH,KAAK,EAAIlN,EAAIA,EACjC,EACAmN,YAAa,SAAUnN,GACnB,OAAO2F,KAAKuH,KAAK,KAAOlN,EAAIA,EAChC,EACAoN,cAAe,SAAUpN,GACrB,OAAKA,GAAK,GAAK,GACH,IAAO2F,KAAKuH,KAAK,EAAIlN,EAAIA,GAAK,GAEnC,IAAO2F,KAAKuH,KAAK,GAAKlN,GAAK,GAAKA,GAAK,EAChD,EACAqN,UAAW,SAAUrN,GACjB,IAAIsN,EACAvF,EAAI,GACJwF,EAAI,GACR,OAAU,IAANvN,EACO,EAED,IAANA,EACO,IAEN+H,GAAKA,EAAI,GACVA,EAAI,EACJuF,EAAIC,EAAI,GAGRD,EAAIC,EAAI5H,KAAK6H,KAAK,EAAIzF,IAAM,EAAIpC,KAAKC,KAEhCmC,EAAIpC,KAAKmH,IAAI,EAAG,IAAM9M,GAAK,IAC9B2F,KAAKQ,KAAKnG,EAAIsN,IAAM,EAAI3H,KAAKC,IAAM2H,GAC7C,EACAE,WAAY,SAAUzN,GAClB,IAAIsN,EACAvF,EAAI,GACJwF,EAAI,GACR,OAAU,IAANvN,EACO,EAED,IAANA,EACO,IAEN+H,GAAKA,EAAI,GACVA,EAAI,EACJuF,EAAIC,EAAI,GAGRD,EAAIC,EAAI5H,KAAK6H,KAAK,EAAIzF,IAAM,EAAIpC,KAAKC,IAEjCmC,EAAIpC,KAAKmH,IAAI,GAAI,GAAK9M,GACxB2F,KAAKQ,KAAKnG,EAAIsN,IAAM,EAAI3H,KAAKC,IAAM2H,GAAK,EAClD,EACAG,aAAc,SAAU1N,GACpB,IAAIsN,EACAvF,EAAI,GACJwF,EAAI,GACR,OAAU,IAANvN,EACO,EAED,IAANA,EACO,IAEN+H,GAAKA,EAAI,GACVA,EAAI,EACJuF,EAAIC,EAAI,GAGRD,EAAIC,EAAI5H,KAAK6H,KAAK,EAAIzF,IAAM,EAAIpC,KAAKC,KAEpC5F,GAAK,GAAK,EACI+H,EAAIpC,KAAKmH,IAAI,EAAG,IAAM9M,GAAK,IACpC2F,KAAKQ,KAAKnG,EAAIsN,IAAM,EAAI3H,KAAKC,IAAM2H,IADjC,GAGLxF,EAAIpC,KAAKmH,IAAI,GAAI,IAAM9M,GAAK,IAC7B2F,KAAKQ,KAAKnG,EAAIsN,IAAM,EAAI3H,KAAKC,IAAM2H,GAAK,GAAM,EACxD,EACAI,OAAQ,SAAU3N,GACd,IAAIsN,EAAI,QACR,OAAOtN,EAAIA,IAAMsN,EAAI,GAAKtN,EAAIsN,EAClC,EACAM,QAAS,SAAU5N,GACf,IAAIsN,EAAI,QACR,QAAStN,EAAIA,IAAMsN,EAAI,GAAKtN,EAAIsN,GAAK,CACzC,EACAO,UAAW,SAAU7N,GACjB,IAAIsN,EAAI,UACR,OAAKtN,GAAK,GAAK,EACGA,EAAIA,IAAMsN,EAAI,GAAKtN,EAAIsN,GAA9B,GAEJ,KAAQtN,GAAK,GAAKA,IAAMsN,EAAI,GAAKtN,EAAIsN,GAAK,EACrD,EACAQ,SAAU,SAAU9N,GAChB,OAAO,EAAI4L,EAAYmC,UAAU,EAAI/N,EACzC,EACA+N,UAAW,SAAU/N,GACjB,OAAIA,EAAK,EAAI,KACF,OAASA,EAAIA,EAEfA,EAAK,EAAI,KACP,QAAUA,GAAM,IAAM,MAASA,EAAI,IAErCA,EAAK,IAAM,KACT,QAAUA,GAAM,KAAO,MAASA,EAAI,MAGpC,QAAUA,GAAM,MAAQ,MAASA,EAAI,OAEpD,EACAgO,YAAa,SAAUhO,GACnB,OAAIA,EAAI,GACiC,GAA9B4L,EAAYkC,SAAa,EAAJ9N,GAEU,GAAnC4L,EAAYmC,UAAc,EAAJ/N,EAAQ,GAAW,EACpD,GAEJ,I,sBC/LIiO,EAAQ,WACR,SAASA,EAAK/D,GACV3b,KAAK2f,SAAU,EACf3f,KAAK4f,WAAa,EAClB5f,KAAK8b,YAAc,EACnB9b,KAAKgc,SAAU,EACfhc,KAAK6f,MAAQlE,EAAKmE,MAAQ,IAC1B9f,KAAK+f,OAASpE,EAAKxK,OAAS,EAC5BnR,KAAK6M,KAAO8O,EAAK9O,OAAQ,EACzB7M,KAAKggB,QAAUrE,EAAKqE,SAAW,EAAAC,KAC/BjgB,KAAK+c,UAAYpB,EAAKoB,WAAa,EAAAkD,KACnCjgB,KAAKkgB,UAAYvE,EAAKuE,WAAa,EAAAD,KACnCtE,EAAK9L,QAAU7P,KAAKmgB,UAAUxE,EAAK9L,OACvC,CA6CA,OA5CA6P,EAAKnf,UAAUuc,KAAO,SAAUsD,EAAYC,GAKxC,GAJKrgB,KAAK2f,UACN3f,KAAK4f,WAAaQ,EAAapgB,KAAK+f,OACpC/f,KAAK2f,SAAU,IAEf3f,KAAKgc,QAAT,CAIA,IAAI8D,EAAO9f,KAAK6f,MACZS,EAAcF,EAAapgB,KAAK4f,WAAa5f,KAAK8b,YAClDpM,EAAU4Q,EAAcR,EACxBpQ,EAAU,IACVA,EAAU,GAEdA,EAAU0H,KAAKmJ,IAAI7Q,EAAS,GAC5B,IAAI8Q,EAAaxgB,KAAKwgB,WAClBC,EAAWD,EAAaA,EAAW9Q,GAAWA,EAElD,GADA1P,KAAKggB,QAAQS,GACG,IAAZ/Q,EAAe,CACf,IAAI1P,KAAK6M,KAOL,OAAO,EANP,IAAI6T,EAAYJ,EAAcR,EAC9B9f,KAAK4f,WAAaQ,EAAaM,EAC/B1gB,KAAK8b,YAAc,EACnB9b,KAAKkgB,WAKb,CACA,OAAO,CAtBP,CAFIlgB,KAAK8b,aAAeuE,CAyB5B,EACAX,EAAKnf,UAAU0c,MAAQ,WACnBjd,KAAKgc,SAAU,CACnB,EACA0D,EAAKnf,UAAU2c,OAAS,WACpBld,KAAKgc,SAAU,CACnB,EACA0D,EAAKnf,UAAU4f,UAAY,SAAUtQ,GACjC7P,KAAK6P,OAASA,EACd7P,KAAKwgB,YAAa,IAAAG,YAAW9Q,GACvBA,EACA,EAAYA,KAAW,OAAsBA,EACvD,EACO6P,CACX,CA3DW,GA4DX,I,sBCxDIkB,EAAapQ,MAAMjQ,UAAUsJ,MACjC,SAASgX,EAAkBC,EAAIC,EAAIrR,GAC/B,OAAQqR,EAAKD,GAAMpR,EAAUoR,CACjC,CACA,SAASE,EAAmBrK,EAAKmK,EAAIC,EAAIrR,GAErC,IADA,IAAIpG,EAAMwX,EAAGra,OACJlB,EAAI,EAAGA,EAAI+D,EAAK/D,IACrBoR,EAAIpR,GAAKsb,EAAkBC,EAAGvb,GAAIwb,EAAGxb,GAAImK,GAE7C,OAAOiH,CACX,CACA,SAASsK,EAAmBtK,EAAKmK,EAAIC,EAAIrR,GAGrC,IAFA,IAAIpG,EAAMwX,EAAGra,OACTya,EAAO5X,GAAOwX,EAAG,GAAGra,OACflB,EAAI,EAAGA,EAAI+D,EAAK/D,IAAK,CACrBoR,EAAIpR,KACLoR,EAAIpR,GAAK,IAEb,IAAK,IAAI4b,EAAI,EAAGA,EAAID,EAAMC,IACtBxK,EAAIpR,GAAG4b,GAAKN,EAAkBC,EAAGvb,GAAG4b,GAAIJ,EAAGxb,GAAG4b,GAAIzR,EAE1D,CACA,OAAOiH,CACX,CACA,SAASyK,EAAWzK,EAAKmK,EAAIC,EAAIM,GAE7B,IADA,IAAI/X,EAAMwX,EAAGra,OACJlB,EAAI,EAAGA,EAAI+D,EAAK/D,IACrBoR,EAAIpR,GAAKub,EAAGvb,GAAKwb,EAAGxb,GAAK8b,EAE7B,OAAO1K,CACX,CACA,SAAS2K,EAAW3K,EAAKmK,EAAIC,EAAIM,GAG7B,IAFA,IAAI/X,EAAMwX,EAAGra,OACTya,EAAO5X,GAAOwX,EAAG,GAAGra,OACflB,EAAI,EAAGA,EAAI+D,EAAK/D,IAAK,CACrBoR,EAAIpR,KACLoR,EAAIpR,GAAK,IAEb,IAAK,IAAI4b,EAAI,EAAGA,EAAID,EAAMC,IACtBxK,EAAIpR,GAAG4b,GAAKL,EAAGvb,GAAG4b,GAAKJ,EAAGxb,GAAG4b,GAAKE,CAE1C,CACA,OAAO1K,CACX,CACA,SAAS4K,EAAeC,EAAM7Q,GAM1B,IALA,IAAIL,EAAOkR,EAAK/a,OACZ8J,EAAOI,EAAKlK,OACZgb,EAAanR,EAAOC,EAAOI,EAAO6Q,EAClCE,EAAatK,KAAKmJ,IAAIjQ,EAAMC,GAC5BoR,EAAOF,EAAWC,EAAa,IAAM,CAAEE,MAAO,CAAC,EAAG,EAAG,EAAG,GAAIne,OAAQ,GAC/D8B,EAAImc,EAAYnc,EAAI6R,KAAKyK,IAAIvR,EAAMC,GAAOhL,IAC/Ckc,EAAWxY,KAAK,CACZxF,OAAQke,EAAKle,OACbme,MAAOD,EAAKC,MAAM/X,SAG9B,CACA,SAASiY,EAAUN,EAAM7Q,EAAMoR,GAC3B,IAAIjR,EAAO0Q,EACPzQ,EAAOJ,EACX,GAAKG,EAAK7H,MAAS8H,EAAK9H,KAAxB,CAGA,IAAI+Y,EAAUlR,EAAKrK,OACfwb,EAAUlR,EAAKtK,OACnB,GAAIub,IAAYC,EAAS,CACrB,IAAIC,EAAmBF,EAAUC,EACjC,GAAIC,EACApR,EAAKrK,OAASwb,OAGd,IAAK,IAAI1c,EAAIyc,EAASzc,EAAI0c,EAAS1c,IAC/BuL,EAAK7H,KAAgB,IAAX8Y,EAAehR,EAAKxL,GAAKqb,EAAWnQ,KAAKM,EAAKxL,IAGpE,CACA,IAAI2b,EAAOpQ,EAAK,IAAMA,EAAK,GAAGrK,OAC9B,IAASlB,EAAI,EAAGA,EAAIuL,EAAKrK,OAAQlB,IAC7B,GAAe,IAAXwc,EACI/G,MAAMlK,EAAKvL,MACXuL,EAAKvL,GAAKwL,EAAKxL,SAInB,IAAK,IAAI4b,EAAI,EAAGA,EAAID,EAAMC,IAClBnG,MAAMlK,EAAKvL,GAAG4b,MACdrQ,EAAKvL,GAAG4b,GAAKpQ,EAAKxL,GAAG4b,GAxBrC,CA6BJ,CACO,SAASgB,EAAWtc,GACvB,IAAI,IAAAoK,aAAYpK,GAAQ,CACpB,IAAIyD,EAAMzD,EAAMY,OAChB,IAAI,IAAAwJ,aAAYpK,EAAM,IAAK,CAEvB,IADA,IAAIuc,EAAM,GACD7c,EAAI,EAAGA,EAAI+D,EAAK/D,IACrB6c,EAAInZ,KAAK2X,EAAWnQ,KAAK5K,EAAMN,KAEnC,OAAO6c,CACX,CACA,OAAOxB,EAAWnQ,KAAK5K,EAC3B,CACA,OAAOA,CACX,CACA,SAASwc,EAAYC,GAKjB,OAJAA,EAAK,GAAKlL,KAAKmL,MAAMD,EAAK,KAAO,EACjCA,EAAK,GAAKlL,KAAKmL,MAAMD,EAAK,KAAO,EACjCA,EAAK,GAAKlL,KAAKmL,MAAMD,EAAK,KAAO,EACjCA,EAAK,GAAgB,MAAXA,EAAK,GAAa,EAAIA,EAAK,GAC9B,QAAUA,EAAK1Y,KAAK,KAAO,GACtC,CACA,SAAS4Y,EAAc3c,GACnB,OAAO,IAAAoK,aAAYpK,GAASA,EAAM,IAAM,EAAI,CAChD,CACA,IAAI4c,EAAoB,EACpBC,EAAsB,EACtBC,EAAsB,EACtBC,EAAmB,EACnBC,EAA6B,EAC7BC,EAA6B,EAC7BC,EAAoB,EACxB,SAASC,EAAoBC,GACzB,OAAOA,IAAYJ,GAA8BI,IAAYH,CACjE,CACA,SAASI,EAAiBD,GACtB,OAAOA,IAAYP,GAAuBO,IAAYN,CAC1D,CACA,IAAIQ,EAAU,CAAC,EAAG,EAAG,EAAG,GACpBC,EAAS,WACT,SAASA,EAAMC,GACXrjB,KAAKsjB,UAAY,GACjBtjB,KAAKujB,UAAW,EAChBvjB,KAAKwjB,UAAW,EAChBxjB,KAAKyjB,YAAa,EAClBzjB,KAAK0jB,QAAU,EACf1jB,KAAK2jB,SAAW,EAChB3jB,KAAKqjB,SAAWA,CACpB,CA4QA,OA3QAD,EAAM7iB,UAAU4c,WAAa,WACzB,OAAOnd,KAAK4jB,SAChB,EACAR,EAAM7iB,UAAUsjB,YAAc,WAC1B7jB,KAAK4jB,WAAY,EACb5jB,KAAK8jB,gBACL9jB,KAAK8jB,eAAeD,aAE5B,EACAT,EAAM7iB,UAAUwjB,aAAe,WAC3B,OAAO/jB,KAAKsjB,UAAU7c,QAAU,CACpC,EACA2c,EAAM7iB,UAAUyjB,iBAAmB,WAC/B,OAAOhkB,KAAK8jB,cAChB,EACAV,EAAM7iB,UAAU0jB,YAAc,SAAUvH,EAAMwH,EAAUrU,GACpD7P,KAAKyjB,YAAa,EAClB,IAAIH,EAAYtjB,KAAKsjB,UACjBha,EAAMga,EAAU7c,OAChB8c,GAAW,EACXN,EAAUF,EACVld,EAAQqe,EACZ,IAAI,IAAAjU,aAAYiU,GAAW,CACvB,IAAIC,EAAW3B,EAAc0B,GAC7BjB,EAAUkB,GACO,IAAbA,KAAmB,IAAAC,UAASF,EAAS,KACrB,IAAbC,KAAmB,IAAAC,UAASF,EAAS,GAAG,OAC3CX,GAAW,EAEnB,MAEI,IAAI,IAAAa,UAASF,MAAc,IAAAG,OAAMH,GAC7BjB,EAAUR,OAET,IAAI,IAAA6B,UAASJ,GACd,GAAKlJ,OAAOkJ,GAGP,CACD,IAAIK,EAAa3C,EAAMxc,MAAM8e,GACzBK,IACA1e,EAAQ0e,EACRtB,EAAUL,EAElB,MARIK,EAAUR,OAUb,IAAI,IAAA7Q,kBAAiBsS,GAAW,CACjC,IAAIM,GAAiB,IAAAte,QAAO,CAAC,EAAGL,GAChC2e,EAAeC,YAAa,IAAAC,KAAIR,EAASO,YAAY,SAAUE,GAAa,MAAO,CAC/ElhB,OAAQkhB,EAAUlhB,OAClBme,MAAOA,EAAMxc,MAAMuf,EAAU/C,OAC7B,KACA,QAAiBsC,GACjBjB,EAAUJ,GAEL,QAAiBqB,KACtBjB,EAAUH,GAEdjd,EAAQ2e,CACZ,CAEQ,IAARlb,EACAtJ,KAAKijB,QAAUA,EAEVA,IAAYjjB,KAAKijB,SAAWA,IAAYF,IAC7CQ,GAAW,GAEfvjB,KAAKujB,SAAWvjB,KAAKujB,UAAYA,EACjC,IAAIqB,EAAK,CACLlI,KAAMA,EACN7W,MAAOA,EACPqe,SAAUA,EACVxU,QAAS,GASb,OAPIG,IACA+U,EAAG/U,OAASA,EACZ+U,EAAGpE,YAAa,IAAAG,YAAW9Q,GACrBA,EACA,EAAYA,KAAW,OAAsBA,IAEvDyT,EAAUra,KAAK2b,GACRA,CACX,EACAxB,EAAM7iB,UAAUskB,QAAU,SAAUC,EAASC,GACzC,IAAIC,EAAMhlB,KAAKsjB,UACXtjB,KAAKyjB,YACLuB,EAAIC,MAAK,SAAUzL,EAAGC,GAClB,OAAOD,EAAEkD,KAAOjD,EAAEiD,IACtB,IAQJ,IANA,IAAIuG,EAAUjjB,KAAKijB,QACfiC,EAASF,EAAIve,OACb0e,EAASH,EAAIE,EAAS,GACtBE,EAAaplB,KAAKujB,SAClB8B,EAAQnC,EAAiBD,GACzBqC,EAAatC,EAAoBC,GAC5B1d,EAAI,EAAGA,EAAI2f,EAAQ3f,IAAK,CAC7B,IAAIqf,EAAKI,EAAIzf,GACTM,EAAQ+e,EAAG/e,MACX0f,EAAYJ,EAAOtf,MACvB+e,EAAGlV,QAAUkV,EAAGlI,KAAOoI,EAClBM,IACGC,GAAS9f,IAAM2f,EAAS,EACxBpD,EAAUjc,EAAO0f,EAAWtC,GAEvBqC,GACL/D,EAAe1b,EAAM4e,WAAYc,EAAUd,YAGvD,CACA,IAAKW,GACEnC,IAAYH,GACZiC,GACA/kB,KAAK+jB,gBACLgB,EAAchB,gBACdd,IAAY8B,EAAc9B,UACzB8B,EAAcnB,UAAW,CAC7B5jB,KAAK8jB,eAAiBiB,EACtB,IAAIS,EAAaR,EAAI,GAAGnf,MACxB,IAASN,EAAI,EAAGA,EAAI2f,EAAQ3f,IACpB0d,IAAYR,EACZuC,EAAIzf,GAAGkgB,cAAgBT,EAAIzf,GAAGM,MAAQ2f,EAEjCvC,IAAYL,EACjBoC,EAAIzf,GAAGkgB,cACHrE,EAAW,GAAI4D,EAAIzf,GAAGM,MAAO2f,GAAa,GAEzCtC,EAAiBD,KACtB+B,EAAIzf,GAAGkgB,cAAgBxC,IAAYP,EAC7BtB,EAAW,GAAI4D,EAAIzf,GAAGM,MAAO2f,GAAa,GAC1ClE,EAAW,GAAI0D,EAAIzf,GAAGM,MAAO2f,GAAa,GAG5D,CACJ,EACApC,EAAM7iB,UAAUuc,KAAO,SAAU1V,EAAQsI,GACrC,IAAI1P,KAAK4jB,UAAT,CAGI5jB,KAAK8jB,gBAAkB9jB,KAAK8jB,eAAeF,YAC3C5jB,KAAK8jB,eAAiB,MAE1B,IAOI4B,EAGAC,EACAC,EAXAC,EAAoC,MAAvB7lB,KAAK8jB,eAClBgC,EAAWD,EAAa,gBAAkB,QAC1C5C,EAAUjjB,KAAKijB,QACfK,EAAYtjB,KAAKsjB,UACjByC,EAASzC,EAAU7c,OACnB4c,EAAWrjB,KAAKqjB,SAChB2C,EAAe/C,IAAYL,EAE3BqD,EAAYjmB,KAAK0jB,QACjBwC,EAAU9O,KAAKmJ,IAGnB,GAAe,IAAXwF,EACAJ,EAAQC,EAAYtC,EAAU,OAE7B,CACD,GAAI5T,EAAU,EACVgW,EAAW,OAEV,GAAIhW,EAAU1P,KAAK2jB,SAAU,CAC9B,IAAI/T,EAAQsW,EAAQD,EAAY,EAAGF,EAAS,GAC5C,IAAKL,EAAW9V,EAAO8V,GAAY,EAAGA,IAClC,GAAIpC,EAAUoC,GAAUhW,SAAWA,EAC/B,MAGRgW,EAAWQ,EAAQR,EAAUK,EAAS,EAC1C,KACK,CACD,IAAKL,EAAWO,EAAWP,EAAWK,EAAQL,IAC1C,GAAIpC,EAAUoC,GAAUhW,QAAUA,EAC9B,MAGRgW,EAAWQ,EAAQR,EAAW,EAAGK,EAAS,EAC9C,CACAH,EAAYtC,EAAUoC,EAAW,GACjCC,EAAQrC,EAAUoC,EACtB,CACA,GAAMC,GAASC,EAAf,CAGA5lB,KAAK0jB,QAAUgC,EACf1lB,KAAK2jB,SAAWjU,EAChB,IAAIyW,EAAYP,EAAUlW,QAAUiW,EAAMjW,QACtC0W,EAAiB,IAAbD,EAAiB,EAAID,GAASxW,EAAUiW,EAAMjW,SAAWyW,EAAU,GACvEP,EAAUpF,aACV4F,EAAIR,EAAUpF,WAAW4F,IAE7B,IAAI/V,EAAYwV,EAAa7lB,KAAKqmB,eAC3BL,EAAe7C,EAAU/b,EAAOic,GAIvC,IAHKH,EAAiBD,KAAY+C,GAAkB3V,IAChDA,EAAYrQ,KAAKqmB,eAAiB,IAElCrmB,KAAKujB,SACLnc,EAAOic,GAAY+C,EAAI,EAAIT,EAAMzB,SAAW0B,EAAU1B,cAErD,GAAIhB,EAAiBD,GACtBA,IAAYP,EACN1B,EAAmB3Q,EAAWsV,EAAMG,GAAWF,EAAUE,GAAWM,GACpEnF,EAAmB5Q,EAAWsV,EAAMG,GAAWF,EAAUE,GAAWM,QAEzE,GAAIpD,EAAoBC,GAAU,CACnC,IAAIlU,EAAM4W,EAAMG,GACZQ,EAAYV,EAAUE,GACtBS,EAAqBtD,IAAYJ,EACrCzb,EAAOic,GAAY,CACftV,KAAMwY,EAAqB,SAAW,SACtC5jB,EAAGke,EAAkB9R,EAAIpM,EAAG2jB,EAAU3jB,EAAGyjB,GACzCxjB,EAAGie,EAAkB9R,EAAInM,EAAG0jB,EAAU1jB,EAAGwjB,GACzC3B,YAAY,IAAAC,KAAI3V,EAAI0V,YAAY,SAAUE,EAAW3a,GACjD,IAAIwc,EAAgBF,EAAU7B,WAAWza,GACzC,MAAO,CACHvG,OAAQod,EAAkB8D,EAAUlhB,OAAQ+iB,EAAc/iB,OAAQ2iB,GAClExE,MAAOS,EAAYrB,EAAmB,GAAI2D,EAAU/C,MAAO4E,EAAc5E,MAAOwE,IAExF,IACAK,OAAQH,EAAUG,QAElBF,GACAnf,EAAOic,GAAUqD,GAAK7F,EAAkB9R,EAAI2X,GAAIJ,EAAUI,GAAIN,GAC9Dhf,EAAOic,GAAUsD,GAAK9F,EAAkB9R,EAAI4X,GAAIL,EAAUK,GAAIP,IAG9Dhf,EAAOic,GAAU9L,EAAIsJ,EAAkB9R,EAAIwI,EAAG+O,EAAU/O,EAAG6O,EAEnE,MACK,GAAIJ,EACLhF,EAAmB3Q,EAAWsV,EAAMG,GAAWF,EAAUE,GAAWM,GAC/DP,IACDze,EAAOic,GAAYhB,EAAYhS,QAGlC,CACD,IAAIxK,EAAQgb,EAAkB8E,EAAMG,GAAWF,EAAUE,GAAWM,GAChEP,EACA7lB,KAAKqmB,eAAiBxgB,EAGtBuB,EAAOic,GAAYxd,CAE3B,CACIggB,GACA7lB,KAAK4mB,aAAaxf,EA9DtB,CA7CA,CA6GJ,EACAgc,EAAM7iB,UAAUqmB,aAAe,SAAUxf,GACrC,IAAI6b,EAAUjjB,KAAKijB,QACfI,EAAWrjB,KAAKqjB,SAChBoC,EAAgBzlB,KAAKqmB,eACrBpD,IAAYR,EACZrb,EAAOic,GAAYjc,EAAOic,GAAYoC,EAEjCxC,IAAYL,GACjBhB,EAAMxc,MAAMgC,EAAOic,GAAWF,GAC9B/B,EAAW+B,EAASA,EAASsC,EAAe,GAC5Cre,EAAOic,GAAYhB,EAAYc,IAE1BF,IAAYP,EACjBtB,EAAWha,EAAOic,GAAWjc,EAAOic,GAAWoC,EAAe,GAEzDxC,IAAYN,GACjBrB,EAAWla,EAAOic,GAAWjc,EAAOic,GAAWoC,EAAe,EAEtE,EACOrC,CACX,CAtRY,GAuRRyD,EAAY,WACZ,SAASA,EAASzf,EAAQyF,EAAMC,EAAwBga,GACpD9mB,KAAK+mB,QAAU,CAAC,EAChB/mB,KAAKgnB,WAAa,GAClBhnB,KAAKinB,SAAW,EAChBjnB,KAAKknB,SAAW,EAChBlnB,KAAKmnB,MAAQ,KACbnnB,KAAKonB,QAAUhgB,EACfpH,KAAKqnB,MAAQxa,EACTA,GAAQia,GACR,IAAA3d,UAAS,qDAGbnJ,KAAKsnB,mBAAqBR,EAC1B9mB,KAAKunB,eAAiBza,EAC1B,CA+SA,OA9SA+Z,EAAStmB,UAAUinB,WAAa,WAC5B,OAAOxnB,KAAKinB,QAChB,EACAJ,EAAStmB,UAAUknB,SAAW,WAC1B,OAAOznB,KAAK+f,MAChB,EACA8G,EAAStmB,UAAU2G,QAAU,WACzB,OAAOlH,KAAKqnB,KAChB,EACAR,EAAStmB,UAAUmnB,UAAY,WAC3B,OAAO1nB,KAAKonB,OAChB,EACAP,EAAStmB,UAAUuJ,aAAe,SAAU1C,GACxCpH,KAAKonB,QAAUhgB,CACnB,EACAyf,EAAStmB,UAAUonB,KAAO,SAAUjL,EAAM3c,EAAO8P,GAC7C,OAAO7P,KAAKoS,aAAasK,EAAM3c,GAAO,IAAAyG,MAAKzG,GAAQ8P,EACvD,EACAgX,EAAStmB,UAAU6R,aAAe,SAAUsK,EAAM3c,EAAO6nB,EAAW/X,GAEhE,IADA,IAAIgY,EAAS7nB,KAAK+mB,QACTxhB,EAAI,EAAGA,EAAIqiB,EAAUnhB,OAAQlB,IAAK,CACvC,IAAI8d,EAAWuE,EAAUriB,GACrBuiB,EAAQD,EAAOxE,GACnB,IAAKyE,EAAO,CACRA,EAAQD,EAAOxE,GAAY,IAAID,EAAMC,GACrC,IAAI0E,OAAe,EACfhD,EAAgB/kB,KAAKgoB,kBAAkB3E,GAC3C,GAAI0B,EAAe,CACf,IAAIkD,EAAkBlD,EAAczB,UAChC4E,EAAcD,EAAgBA,EAAgBxhB,OAAS,GAC3DshB,EAAeG,GAAeA,EAAYriB,MACtCkf,EAAc9B,UAAYL,GAAoBmF,IAC9CA,EAAe1F,EAAY0F,GAEnC,MAEIA,EAAe/nB,KAAKonB,QAAQ/D,GAEhC,GAAoB,MAAhB0E,EACA,SAEArL,EAAO,GACPoL,EAAM7D,YAAY,EAAG9B,EAAW4F,GAAelY,GAEnD7P,KAAKgnB,WAAW/d,KAAKoa,EACzB,CACAyE,EAAM7D,YAAYvH,EAAMyF,EAAWpiB,EAAMsjB,IAAYxT,EACzD,CAEA,OADA7P,KAAKinB,SAAW7P,KAAKyK,IAAI7hB,KAAKinB,SAAUvK,GACjC1c,IACX,EACA6mB,EAAStmB,UAAU0c,MAAQ,WACvBjd,KAAKmnB,MAAMlK,QACXjd,KAAKgc,SAAU,CACnB,EACA6K,EAAStmB,UAAU2c,OAAS,WACxBld,KAAKmnB,MAAMjK,SACXld,KAAKgc,SAAU,CACnB,EACA6K,EAAStmB,UAAU4nB,SAAW,WAC1B,QAASnoB,KAAKgc,OAClB,EACA6K,EAAStmB,UAAUsI,SAAW,SAAUA,GAGpC,OAFA7I,KAAKinB,SAAWpe,EAChB7I,KAAKooB,QAAS,EACPpoB,IACX,EACA6mB,EAAStmB,UAAU8nB,cAAgB,WAC/BroB,KAAKsoB,qBACLtoB,KAAKmnB,MAAQ,KACb,IAAIoB,EAAWvoB,KAAKwoB,SACpB,GAAID,EAEA,IADA,IAAIjf,EAAMif,EAAS9hB,OACVlB,EAAI,EAAGA,EAAI+D,EAAK/D,IACrBgjB,EAAShjB,GAAGkL,KAAKzQ,KAG7B,EACA6mB,EAAStmB,UAAUkoB,iBAAmB,WAClCzoB,KAAKsoB,qBACL,IAAI7b,EAAYzM,KAAKyM,UACjBic,EAAc1oB,KAAK2oB,YAKvB,GAJIlc,GACAA,EAAU0P,WAAWnc,KAAKmnB,OAE9BnnB,KAAKmnB,MAAQ,KACTuB,EACA,IAAK,IAAInjB,EAAI,EAAGA,EAAImjB,EAAYjiB,OAAQlB,IACpCmjB,EAAYnjB,GAAGkL,KAAKzQ,KAGhC,EACA6mB,EAAStmB,UAAU+nB,mBAAqB,WAGpC,IAFA,IAAIT,EAAS7nB,KAAK+mB,QACd6B,EAAa5oB,KAAKgnB,WACbzhB,EAAI,EAAGA,EAAIqjB,EAAWniB,OAAQlB,IACnCsiB,EAAOe,EAAWrjB,IAAIse,aAE9B,EACAgD,EAAStmB,UAAUynB,kBAAoB,SAAUa,GAC7C,IAAI9D,EACA+D,EAAoB9oB,KAAKsnB,mBAC7B,GAAIwB,EACA,IAAK,IAAIvjB,EAAI,EAAGA,EAAIujB,EAAkBriB,OAAQlB,IAAK,CAC/C,IAAIuiB,EAAQgB,EAAkBvjB,GAAGwjB,SAASF,GACtCf,IACA/C,EAAgB+C,EAExB,CAEJ,OAAO/C,CACX,EACA8B,EAAStmB,UAAUqP,MAAQ,SAAUC,GACjC,KAAI7P,KAAKknB,SAAW,GAApB,CAGAlnB,KAAKknB,SAAW,EAIhB,IAHA,IAAIzY,EAAOzO,KACP6nB,EAAS,GACT/C,EAAU9kB,KAAKinB,UAAY,EACtB1hB,EAAI,EAAGA,EAAIvF,KAAKgnB,WAAWvgB,OAAQlB,IAAK,CAC7C,IAAI8d,EAAWrjB,KAAKgnB,WAAWzhB,GAC3BuiB,EAAQ9nB,KAAK+mB,QAAQ1D,GACrB0B,EAAgB/kB,KAAKgoB,kBAAkB3E,GACvC2B,EAAM8C,EAAMxE,UACZyC,EAASf,EAAIve,OAEjB,GADAqhB,EAAMjD,QAAQC,EAASC,GACnB+C,EAAM/D,eACN,IAAK/jB,KAAKunB,gBAAkBO,EAAMvE,SAAU,CACxC,IAAI4B,EAASH,EAAIe,EAAS,GACtBZ,IACA1W,EAAK2Y,QAAQU,EAAMzE,UAAY8B,EAAOjB,UAE1C4D,EAAMjE,aACV,MAEIgE,EAAO5e,KAAK6e,EAGxB,CACA,GAAID,EAAOphB,QAAUzG,KAAKooB,OAAQ,CAC9B,IAAIlM,EAAO,IAAI,EAAK,CAChB4D,KAAMgF,EACNjY,KAAM7M,KAAKqnB,MACXlW,MAAOnR,KAAK+f,QAAU,EACtBC,QAAS,SAAUtQ,GACfjB,EAAKyY,SAAW,EAChB,IAAI4B,EAAoBra,EAAK6Y,mBAC7B,GAAIwB,EAAmB,CAEnB,IADA,IAAIE,GAA2B,EACtBzjB,EAAI,EAAGA,EAAIujB,EAAkBriB,OAAQlB,IAC1C,GAAIujB,EAAkBvjB,GAAG4hB,MAAO,CAC5B6B,GAA2B,EAC3B,KACJ,CAECA,IACDva,EAAK6Y,mBAAqB,KAElC,CACA,IAAS/hB,EAAI,EAAGA,EAAIsiB,EAAOphB,OAAQlB,IAC/BsiB,EAAOtiB,GAAGuX,KAAKrO,EAAK2Y,QAAS1X,GAEjC,IAAIuZ,EAAcxa,EAAKya,YACvB,GAAID,EACA,IAAS1jB,EAAI,EAAGA,EAAI0jB,EAAYxiB,OAAQlB,IACpC0jB,EAAY1jB,GAAGkJ,EAAK2Y,QAAS1X,EAGzC,EACAqN,UAAW,WACPtO,EAAK4Z,eACT,IAEJroB,KAAKmnB,MAAQjL,EACTlc,KAAKyM,WACLzM,KAAKyM,UAAUwP,QAAQC,GAEvBrM,GACAqM,EAAKiE,UAAUtQ,EAEvB,MAEI7P,KAAKqoB,gBAET,OAAOroB,IAtEP,CAuEJ,EACA6mB,EAAStmB,UAAUiN,KAAO,SAAUF,GAChC,GAAKtN,KAAKmnB,MAAV,CAGA,IAAIjL,EAAOlc,KAAKmnB,MACZ7Z,GACA4O,EAAK8D,QAAQ,GAEjBhgB,KAAKyoB,kBALL,CAMJ,EACA5B,EAAStmB,UAAU4Q,MAAQ,SAAUuL,GAEjC,OADA1c,KAAK+f,OAASrD,EACP1c,IACX,EACA6mB,EAAStmB,UAAUyM,OAAS,SAAUtH,GAOlC,OANIA,IACK1F,KAAKkpB,cACNlpB,KAAKkpB,YAAc,IAEvBlpB,KAAKkpB,YAAYjgB,KAAKvD,IAEnB1F,IACX,EACA6mB,EAAStmB,UAAU2M,KAAO,SAAUxH,GAOhC,OANIA,IACK1F,KAAKwoB,WACNxoB,KAAKwoB,SAAW,IAEpBxoB,KAAKwoB,SAASvf,KAAKvD,IAEhB1F,IACX,EACA6mB,EAAStmB,UAAUgP,QAAU,SAAU7J,GAOnC,OANIA,IACK1F,KAAK2oB,cACN3oB,KAAK2oB,YAAc,IAEvB3oB,KAAK2oB,YAAY1f,KAAKvD,IAEnB1F,IACX,EACA6mB,EAAStmB,UAAUic,QAAU,WACzB,OAAOxc,KAAKmnB,KAChB,EACAN,EAAStmB,UAAUwoB,SAAW,SAAU1F,GACpC,OAAOrjB,KAAK+mB,QAAQ1D,EACxB,EACAwD,EAAStmB,UAAU4oB,UAAY,WAC3B,IAAIvV,EAAQ5T,KACZ,OAAO,IAAA0kB,KAAI1kB,KAAKgnB,YAAY,SAAUtnB,GAAO,OAAOkU,EAAMmT,QAAQrnB,EAAM,GAC5E,EACAmnB,EAAStmB,UAAUwR,WAAa,SAAU6V,EAAWta,GACjD,IAAKsa,EAAUnhB,SAAWzG,KAAKmnB,MAC3B,OAAO,EAIX,IAFA,IAAIU,EAAS7nB,KAAK+mB,QACd6B,EAAa5oB,KAAKgnB,WACbzhB,EAAI,EAAGA,EAAIqiB,EAAUnhB,OAAQlB,IAAK,CACvC,IAAIuiB,EAAQD,EAAOD,EAAUriB,IACzBuiB,IAAUA,EAAM3K,eACZ7P,EACAwa,EAAMhL,KAAK9c,KAAKonB,QAAS,GAEF,IAAlBpnB,KAAKknB,UACVY,EAAMhL,KAAK9c,KAAKonB,QAAS,GAE7BU,EAAMjE,cAEd,CACA,IAAI/R,GAAa,EACjB,IAASvM,EAAI,EAAGA,EAAIqjB,EAAWniB,OAAQlB,IACnC,IAAKsiB,EAAOe,EAAWrjB,IAAI4X,aAAc,CACrCrL,GAAa,EACb,KACJ,CAKJ,OAHIA,GACA9R,KAAKyoB,mBAEF3W,CACX,EACA+U,EAAStmB,UAAU8G,OAAS,SAAUD,EAAQgiB,EAAWC,GACrD,GAAKjiB,EAAL,CAGAgiB,EAAYA,GAAappB,KAAKgnB,WAC9B,IAAK,IAAIzhB,EAAI,EAAGA,EAAI6jB,EAAU3iB,OAAQlB,IAAK,CACvC,IAAI8d,EAAW+F,EAAU7jB,GACrBuiB,EAAQ9nB,KAAK+mB,QAAQ1D,GACzB,GAAKyE,IAASA,EAAM3K,aAApB,CAGA,IAAI6H,EAAM8C,EAAMxE,UACZsB,EAAKI,EAAIqE,EAAc,EAAIrE,EAAIve,OAAS,GACxCme,IACAxd,EAAOic,GAAYlB,EAAWyC,EAAGV,UAJrC,CAMJ,CAbA,CAcJ,EACA2C,EAAStmB,UAAUwK,mBAAqB,SAAUue,EAAYF,GAC1DA,EAAYA,IAAa,IAAA5iB,MAAK8iB,GAC9B,IAAK,IAAI/jB,EAAI,EAAGA,EAAI6jB,EAAU3iB,OAAQlB,IAAK,CACvC,IAAI8d,EAAW+F,EAAU7jB,GACrBuiB,EAAQ9nB,KAAK+mB,QAAQ1D,GACzB,GAAKyE,EAAL,CAGA,IAAI9C,EAAM8C,EAAMxE,UAChB,GAAI0B,EAAIve,OAAS,EAAG,CAChB,IAAI0e,EAASH,EAAIuE,MACjBzB,EAAM7D,YAAYkB,EAAOzI,KAAM4M,EAAWjG,IAC1CyE,EAAMjD,QAAQ7kB,KAAKinB,SAAUa,EAAM9D,mBACvC,CANA,CAOJ,CACJ,EACO6C,CACX,CA/Te,GAgUf,G,kFC9tBI2C,EAAS,gCACN,SAASC,EAAsBC,GAClC,IAAIC,EAAQD,GAAkBF,EAAOI,KAAKF,GAC1C,GAAIC,EAAO,CACP,IAAIE,EAASF,EAAM,GAAGG,MAAM,KACxBC,IAAO,IAAAC,MAAKH,EAAO,IACnBI,IAAO,IAAAD,MAAKH,EAAO,IACnBK,IAAO,IAAAF,MAAKH,EAAO,IACnBM,IAAO,IAAAH,MAAKH,EAAO,IACvB,GAAI7O,MAAM+O,EAAME,EAAMC,EAAMC,GACxB,OAEJ,IAAIC,EAAU,GACd,OAAO,SAAUpL,GACb,OAAOA,GAAK,EACN,EAAIA,GAAK,EACT,GACA,QAAY,EAAG+K,EAAKG,EAAK,EAAGlL,EAAGoL,KAAY,QAAQ,EAAGH,EAAKE,EAAK,EAAGC,EAAQ,GACrF,CACJ,CACJ,C,4BCrBIC,E,WACJA,EAAyB,sBAChBC,OAAOD,uBAAyBC,OAAOD,sBAAsBE,KAAKD,SAC/DA,OAAOE,yBAA2BF,OAAOE,wBAAwBD,KAAKD,SACvEA,OAAOG,0BACPH,OAAOI,8BAAiC,SAAUC,GACzD,OAAOC,WAAWD,EAAM,GAC5B,EACA,Q,4JCAA,SAASE,EAAU5qB,EAAIsU,EAASuW,GAC5B,IAAIC,EAASC,EAAA,kBACT5nB,EAAQmR,EAAQuE,WAChBzV,EAASkR,EAAQwE,YACjBkS,EAAcF,EAAOG,MAWzB,OAVID,IACAA,EAAY5oB,SAAW,WACvB4oB,EAAYE,KAAO,IACnBF,EAAYG,IAAM,IAClBH,EAAY7nB,MAAQA,EAAQ,KAC5B6nB,EAAY5nB,OAASA,EAAS,KAC9B0nB,EAAOM,aAAa,iBAAkBprB,IAE1C8qB,EAAO3nB,MAAQA,EAAQ0nB,EACvBC,EAAO1nB,OAASA,EAASynB,EAClBC,CACX,CAEA,IAAIO,EAAS,SAAU3X,GAEnB,SAAS2X,EAAMrrB,EAAIsU,EAASuW,GACxB,IAiBI1S,EAjBAxE,EAAQD,EAAOlD,KAAKzQ,OAASA,KACjC4T,EAAM2X,YAAa,EACnB3X,EAAM4X,eAAiB,GACvB5X,EAAMkX,IAAM,EACZlX,EAAM6X,SAAU,EAChB7X,EAAM8X,OAAS,CAAC,EAChB9X,EAAM+X,aAAc,EACpB/X,EAAM8F,OAAS,EACf9F,EAAMgY,oBAAsB,EAC5BhY,EAAMtS,SAAU,EAChBsS,EAAMiY,kBAAmB,EACzBjY,EAAMkY,QAAS,EACflY,EAAMmY,YAAc,EACpBnY,EAAMoY,aAAe,EACrBpY,EAAMqY,WAAa,EACnBrY,EAAMsY,iBAAmB,KACzBtY,EAAMuY,eAAiB,KAEvBrB,EAAMA,GAAO,KACK,kBAAP7qB,EACPmY,EAAMyS,EAAU5qB,EAAIsU,EAASuW,GAExBsB,EAAK9lB,SAASrG,KACnBmY,EAAMnY,EACNA,EAAKmY,EAAInY,IAEb2T,EAAM3T,GAAKA,EACX2T,EAAMwE,IAAMA,EACZ,IAAIiU,EAAWjU,EAAI8S,MAUnB,OATImB,IACAD,EAAKE,kBAAkBlU,GACvBA,EAAImU,cAAgB,WAAc,OAAO,CAAO,EAChDF,EAASG,QAAU,IACnBH,EAASI,OAAS,IAClBJ,EAASK,YAAc,KAE3B9Y,EAAMW,QAAUA,EAChBX,EAAMkX,IAAMA,EACLlX,CACX,CAiOA,OA1QA,QAAU0X,EAAO3X,GA0CjB2X,EAAM/qB,UAAUosB,gBAAkB,WAC9B,OAAO3sB,KAAKisB,WAAajsB,KAAKgsB,YAClC,EACAV,EAAM/qB,UAAUqsB,WAAa,WACzB5sB,KAAKksB,iBAAmBlsB,KAAKgsB,aAC7BhsB,KAAKmsB,eAAiBnsB,KAAKisB,UAC/B,EACAX,EAAM/qB,UAAUssB,YAAc,WAC1B7sB,KAAK8sB,IAAM9sB,KAAKoY,IAAI2U,WAAW,MAC/B/sB,KAAK8sB,IAAIhC,IAAM9qB,KAAK8qB,GACxB,EACAQ,EAAM/qB,UAAUysB,aAAe,WAC3BhtB,KAAK6rB,kBAAmB,CAC5B,EACAP,EAAM/qB,UAAU0sB,iBAAmB,WAC/B,IAAInC,EAAM9qB,KAAK8qB,IACf9qB,KAAKktB,QAAUrC,EAAU,QAAU7qB,KAAKC,GAAID,KAAKuU,QAASuW,GAC1D9qB,KAAKmtB,QAAUntB,KAAKktB,QAAQH,WAAW,MAC3B,IAARjC,GACA9qB,KAAKmtB,QAAQC,MAAMtC,EAAKA,EAEhC,EACAQ,EAAM/qB,UAAU8sB,mBAAqB,SAAUlT,EAAamT,EAAUC,EAAWC,GAC7E,GAAIxtB,KAAK6rB,iBAEL,OADA7rB,KAAK6rB,kBAAmB,EACjB,KAEX,IAkFI4B,EAlFAC,EAAqB,GACrB9B,EAAsB5rB,KAAK4rB,oBAC3B+B,GAAO,EACPC,EAAc,IAAIC,EAAA,EAAa,EAAG,EAAG,EAAG,GAC5C,SAASC,EAAmBC,GACxB,GAAKA,EAAKC,aAAcD,EAAKE,SAG7B,GAAkC,IAA9BP,EAAmBjnB,OAAc,CACjC,IAAIynB,EAAe,IAAIL,EAAA,EAAa,EAAG,EAAG,EAAG,GAC7CK,EAAa3rB,KAAKwrB,GAClBL,EAAmBzkB,KAAKilB,EAC5B,KACK,CAID,IAHA,IAAIC,GAAW,EACXC,EAAeC,IACfC,EAAqB,EAChB/oB,EAAI,EAAGA,EAAImoB,EAAmBjnB,SAAUlB,EAAG,CAChD,IAAIgpB,EAAab,EAAmBnoB,GACpC,GAAIgpB,EAAWtX,UAAU8W,GAAO,CAC5B,IAAIS,EAAgB,IAAIX,EAAA,EAAa,EAAG,EAAG,EAAG,GAC9CW,EAAcjsB,KAAKgsB,GACnBC,EAAcC,MAAMV,GACpBL,EAAmBnoB,GAAKipB,EACxBL,GAAW,EACX,KACJ,CACK,GAAIR,EAAM,CACXC,EAAYrrB,KAAKwrB,GACjBH,EAAYa,MAAMF,GAClB,IAAIG,EAAQX,EAAK3qB,MAAQ2qB,EAAK1qB,OAC1BsrB,EAAQJ,EAAWnrB,MAAQmrB,EAAWlrB,OACtCurB,EAAchB,EAAYxqB,MAAQwqB,EAAYvqB,OAC9CwrB,EAAYD,EAAcF,EAAQC,EAClCE,EAAYT,IACZA,EAAeS,EACfP,EAAqB/oB,EAE7B,CACJ,CAKA,GAJIooB,IACAD,EAAmBY,GAAoBG,MAAMV,GAC7CI,GAAW,IAEVA,EAAU,CACPD,EAAe,IAAIL,EAAA,EAAa,EAAG,EAAG,EAAG,GAC7CK,EAAa3rB,KAAKwrB,GAClBL,EAAmBzkB,KAAKilB,EAC5B,CACKP,IACDA,EAAOD,EAAmBjnB,QAAUmlB,EAE5C,CACJ,CACA,IAAK,IAAIrmB,EAAIvF,KAAKgsB,aAAczmB,EAAIvF,KAAKisB,aAAc1mB,EAAG,CACtD,IAAIwH,EAAKoN,EAAY5U,GACrB,GAAIwH,EAAI,CACJ,IAAI+hB,EAAc/hB,EAAGgiB,gBAAgBxB,EAAWC,GAAY,GAAM,GAC9DwB,EAAWjiB,EAAGkiB,eAAkBliB,EAAGzL,QAAU,OAAgBwtB,GAC3D/hB,EAAGmiB,mBACH,KACFF,GACAlB,EAAmBkB,GAEvB,IAAIG,EAAUL,IAAiB/hB,EAAGzL,QAAU,OAAgByL,EAAGkiB,cACzDliB,EAAGa,eACH,KACFuhB,GACArB,EAAmBqB,EAE3B,CACJ,CACA,IAAS5pB,EAAIvF,KAAKksB,iBAAkB3mB,EAAIvF,KAAKmsB,iBAAkB5mB,EAAG,CAC1DwH,EAAKugB,EAAS/nB,GACdupB,EAAc/hB,EAAGgiB,gBAAgBxB,EAAWC,GAAY,GAAM,GAClE,GAAIzgB,KAAQ+hB,IAAgB/hB,EAAGhI,OAASgI,EAAGkiB,aAAc,CACjDD,EAAWjiB,EAAGmiB,mBACdF,GACAlB,EAAmBkB,EAE3B,CACJ,CAEA,EAAG,CACCvB,GAAmB,EACnB,IAASloB,EAAI,EAAGA,EAAImoB,EAAmBjnB,QACnC,GAAIinB,EAAmBnoB,GAAG0oB,SACtBP,EAAmBzjB,OAAO1E,EAAG,OADjC,CAIA,IAAK,IAAI4b,EAAI5b,EAAI,EAAG4b,EAAIuM,EAAmBjnB,QACnCinB,EAAmBnoB,GAAG0R,UAAUyW,EAAmBvM,KACnDsM,GAAmB,EACnBC,EAAmBnoB,GAAGkpB,MAAMf,EAAmBvM,IAC/CuM,EAAmBzjB,OAAOkX,EAAG,IAG7BA,IAGR5b,GAXA,CAaR,OAASkoB,GAET,OADAztB,KAAKovB,YAAc1B,EACZA,CACX,EACApC,EAAM/qB,UAAU8uB,mBAAqB,WACjC,OAAQrvB,KAAKovB,aAAe,IAAIvlB,OACpC,EACAyhB,EAAM/qB,UAAUuV,OAAS,SAAU1S,EAAOC,GACtC,IAAIynB,EAAM9qB,KAAK8qB,IACX1S,EAAMpY,KAAKoY,IACXiU,EAAWjU,EAAI8S,MACfgC,EAAUltB,KAAKktB,QACfb,IACAA,EAASjpB,MAAQA,EAAQ,KACzBipB,EAAShpB,OAASA,EAAS,MAE/B+U,EAAIhV,MAAQA,EAAQ0nB,EACpB1S,EAAI/U,OAASA,EAASynB,EAClBoC,IACAA,EAAQ9pB,MAAQA,EAAQ0nB,EACxBoC,EAAQ7pB,OAASA,EAASynB,EACd,IAARA,GACA9qB,KAAKmtB,QAAQC,MAAMtC,EAAKA,GAGpC,EACAQ,EAAM/qB,UAAU0X,MAAQ,SAAUqX,EAAUC,EAAYC,GACpD,IAAIpX,EAAMpY,KAAKoY,IACX0U,EAAM9sB,KAAK8sB,IACX1pB,EAAQgV,EAAIhV,MACZC,EAAS+U,EAAI/U,OACjBksB,EAAaA,GAAcvvB,KAAKuvB,WAChC,IAAIE,EAAiBzvB,KAAKurB,aAAe+D,EACrC9D,EAAiBxrB,KAAKwrB,eACtBV,EAAM9qB,KAAK8qB,IACXrc,EAAOzO,KACPyvB,IACKzvB,KAAKktB,SACNltB,KAAKitB,mBAETjtB,KAAKmtB,QAAQuC,yBAA2B,OACxC1vB,KAAKmtB,QAAQwC,UAAUvX,EAAK,EAAG,EAAGhV,EAAQ0nB,EAAKznB,EAASynB,IAE5D,IAAIoC,EAAUltB,KAAKktB,QACnB,SAAS0C,EAAQjtB,EAAGC,EAAGQ,EAAOC,GAE1B,GADAypB,EAAI+C,UAAUltB,EAAGC,EAAGQ,EAAOC,GACvBksB,GAA6B,gBAAfA,EAA8B,CAC5C,IAAIO,OAA8B,EAClC,GAAI1D,EAAKxa,iBAAiB2d,GAAa,CACnC,IAAIQ,EAAcR,EAAW9I,QAAW8I,EAAWS,UAAY5sB,GACxDmsB,EAAWU,WAAa5sB,EAC/BysB,EAA8BC,GACvBR,EAAWW,mBACX,QAAkBpD,EAAKyC,EAAY,CAClC5sB,EAAG,EACHC,EAAG,EACHQ,MAAOA,EACPC,OAAQA,IAEhBksB,EAAWW,iBAAmBJ,EAC9BP,EAAWS,QAAU5sB,EACrBmsB,EAAWU,SAAW5sB,CAC1B,MACS+oB,EAAK+D,qBAAqBZ,KAC/BA,EAAWa,OAASb,EAAWa,QAAUtF,EACzCyE,EAAWc,OAASd,EAAWc,QAAUvF,EACzCgF,GAA8B,QAAoBhD,EAAKyC,EAAY,CAC/DhjB,MAAO,WACHkC,EAAKue,eACLve,EAAK6hB,UAAUhkB,SACnB,KAGRwgB,EAAIyD,OACJzD,EAAI0D,UAAYV,GAA+BP,EAC/CzC,EAAI2D,SAAS9tB,EAAGC,EAAGQ,EAAOC,GAC1BypB,EAAI4D,SACR,CACIjB,IACA3C,EAAIyD,OACJzD,EAAI6D,YAAcnF,EAClBsB,EAAI6C,UAAUzC,EAASvqB,EAAGC,EAAGQ,EAAOC,GACpCypB,EAAI4D,UAEZ,EAEKlB,GAAgBC,EACjBG,EAAQ,EAAG,EAAGxsB,EAAOC,GAEhBmsB,EAAa/oB,QAClB2lB,EAAKwE,KAAKpB,GAAc,SAAUzB,GAC9B6B,EAAQ7B,EAAKprB,EAAImoB,EAAKiD,EAAKnrB,EAAIkoB,EAAKiD,EAAK3qB,MAAQ0nB,EAAKiD,EAAK1qB,OAASynB,EACxE,GAER,EACOQ,CACX,CA5QY,CA4QVuF,EAAA,GACF,I,sBChSIC,EAAqB,IACrBC,EAAgB,OAChBC,EAA2B,IAC3BC,EAAkB,KACtB,SAASC,EAAa3a,GAClB,QAAKA,MAGDA,EAAM4a,aAGoB,oBAAlB5a,EAAY,QACU,oBAAnBA,EAAa,QAIhC,CACA,SAAS6a,EAAWhuB,EAAOC,GACvB,IAAIguB,EAAUC,SAASC,cAAc,OASrC,OARAF,EAAQnG,MAAMsG,QAAU,CACpB,oBACA,SAAWpuB,EAAQ,KACnB,UAAYC,EAAS,KACrB,YACA,WACA,kBACFuG,KAAK,KAAO,IACPynB,CACX,CACA,IAAII,EAAiB,WACjB,SAASA,EAAcC,EAAMpd,EAASqH,EAAM1b,GACxCD,KAAK+N,KAAO,SACZ/N,KAAK2xB,YAAc,GACnB3xB,KAAK4xB,iBAAmB,GACxB5xB,KAAK6xB,QAAU,CAAC,EAChB7xB,KAAK8xB,aAAe,CAAC,EACrB9xB,KAAK+xB,2BAA4B,EACjC/xB,KAAK+N,KAAO,SACZ,IAAIikB,GAAgBN,EAAKO,UACc,WAAhCP,EAAKO,SAASC,cACrBlyB,KAAKmyB,MAAQxW,EAAOyQ,EAAKlmB,OAAO,CAAC,EAAGyV,GAAQ,CAAC,GAC7C3b,KAAK8qB,IAAMnP,EAAKyW,kBAAoB,KACpCpyB,KAAKqyB,cAAgBL,EACrBhyB,KAAK0xB,KAAOA,EACZ,IAAIY,EAAYZ,EAAKxG,MACjBoH,IACAlG,EAAKE,kBAAkBoF,GACvBA,EAAKa,UAAY,IAErBvyB,KAAKsU,QAAUA,EACf,IAAIke,EAAaxyB,KAAK2xB,YACtB3xB,KAAK4xB,iBAAmB,GACxB,IAAIa,EAASzyB,KAAK6xB,QAClB,GAAKG,EAMA,CACD,IAAIU,EAAahB,EACbtuB,EAAQsvB,EAAWtvB,MACnBC,EAASqvB,EAAWrvB,OACN,MAAdsY,EAAKvY,QACLA,EAAQuY,EAAKvY,OAEE,MAAfuY,EAAKtY,SACLA,EAASsY,EAAKtY,QAElBrD,KAAK8qB,IAAMnP,EAAKyW,kBAAoB,EACpCM,EAAWtvB,MAAQA,EAAQpD,KAAK8qB,IAChC4H,EAAWrvB,OAASA,EAASrD,KAAK8qB,IAClC9qB,KAAK2yB,OAASvvB,EACdpD,KAAK4yB,QAAUvvB,EACf,IAAIwvB,EAAY,IAAI,EAAMH,EAAY1yB,KAAMA,KAAK8qB,KACjD+H,EAAU1B,aAAc,EACxB0B,EAAUhG,cACV4F,EAAO1B,GAAiB8B,EACxBA,EAAUnZ,OAASqX,EACnByB,EAAWvpB,KAAK8nB,GAChB/wB,KAAK8yB,SAAWpB,CACpB,KA5BmB,CACf1xB,KAAK2yB,QAAS,QAAQjB,EAAM,EAAG/V,GAC/B3b,KAAK4yB,SAAU,QAAQlB,EAAM,EAAG/V,GAChC,IAAI0V,EAAUrxB,KAAK8yB,SAAW1B,EAAWpxB,KAAK2yB,OAAQ3yB,KAAK4yB,SAC3DlB,EAAKqB,YAAY1B,EACrB,CAwBJ,CAmiBA,OAliBAI,EAAclxB,UAAUyyB,QAAU,WAC9B,MAAO,QACX,EACAvB,EAAclxB,UAAU0yB,eAAiB,WACrC,OAAOjzB,KAAKqyB,aAChB,EACAZ,EAAclxB,UAAU2yB,gBAAkB,WACtC,OAAOlzB,KAAK8yB,QAChB,EACArB,EAAclxB,UAAU4yB,sBAAwB,WAC5C,IAAIC,EAAepzB,KAAKkzB,kBACxB,GAAIE,EACA,MAAO,CACHC,WAAYD,EAAaC,YAAc,EACvCC,UAAWF,EAAaE,WAAa,EAGjD,EACA7B,EAAclxB,UAAU+L,QAAU,SAAUinB,GACxC,IAAI9c,EAAOzW,KAAKsU,QAAQoC,gBAAe,GACnC4W,EAAWttB,KAAK4xB,iBAChBY,EAAaxyB,KAAK2xB,YACtB3xB,KAAKwzB,UAAYpc,KAAKqc,SACtBzzB,KAAK0zB,WAAWjd,EAAM6W,EAAUiG,EAAUvzB,KAAKwzB,WAC/C,IAAK,IAAIjuB,EAAI,EAAGA,EAAIitB,EAAW/rB,OAAQlB,IAAK,CACxC,IAAIoU,EAAI6Y,EAAWjtB,GACfgR,EAAQvW,KAAK6xB,QAAQlY,GACzB,IAAKpD,EAAM4a,aAAe5a,EAAMjK,QAAS,CACrC,IAAIijB,EAAmB,IAANhqB,EAAUvF,KAAK2zB,iBAAmB,KACnDpd,EAAMjK,QAAQijB,EAClB,CACJ,CAIA,OAHIvvB,KAAKmyB,MAAMyB,eACX5zB,KAAK4xB,iBAAmBnb,EAAK5M,SAE1B7J,IACX,EACAyxB,EAAclxB,UAAU8L,aAAe,WACnCrM,KAAK6zB,gBAAgB7zB,KAAKsU,QAAQoC,gBAAe,GACrD,EACA+a,EAAclxB,UAAUszB,gBAAkB,SAAUpd,GAChD,IAAInN,EAAMmN,EAAKhQ,OACXgC,EAAazI,KAAK8zB,YAEtB,GADArrB,GAAcA,EAAWwP,QACpB3O,EAAL,CASA,IANA,IAKIwjB,EALAzf,EAAQ,CACRb,SAAS,EACT+gB,UAAWvtB,KAAK2yB,OAChBnF,WAAYxtB,KAAK4yB,SAGZrtB,EAAI,EAAGA,EAAI+D,EAAK/D,IAAK,CAC1B,IAAIwH,EAAK0J,EAAKlR,GACVwH,EAAGnE,YACEH,IACDA,EAAazI,KAAK8zB,YAAc9zB,KAAK+zB,SAASjD,IAE7ChE,IACDA,EAAMrkB,EAAWqkB,IACjBA,EAAIyD,SAER,QAAMzD,EAAK/f,EAAIM,EAAO9H,IAAM+D,EAAM,GAE1C,CACIwjB,GACAA,EAAI4D,SArBR,CAuBJ,EACAe,EAAclxB,UAAUyzB,cAAgB,WACpC,OAAOh0B,KAAK+zB,SAASjD,EACzB,EACAW,EAAclxB,UAAU0zB,SAAW,SAAUnH,EAAK/f,IAC9C,QAAY+f,EAAK/f,EACrB,EACA0kB,EAAclxB,UAAUmzB,WAAa,SAAUjd,EAAM6W,EAAUiG,EAAUW,GACrE,GAAIl0B,KAAKwzB,YAAcU,EAAvB,CAGAX,EAAWA,IAAY,EACvBvzB,KAAKm0B,mBAAmB1d,GACxB,IAAI2d,EAAKp0B,KAAKq0B,aAAa5d,EAAM6W,EAAUiG,GAAW1W,EAAWuX,EAAGvX,SAAUyX,EAAoBF,EAAGE,kBAOrG,GANIt0B,KAAK+xB,2BACL/xB,KAAKu0B,qBAELD,GACAt0B,KAAK6zB,gBAAgBpd,GAEpBoG,EAOD7c,KAAKw0B,WAAU,SAAUje,GACrBA,EAAMqW,YAAcrW,EAAMqW,YAC9B,QATW,CACX,IAAI6H,EAASz0B,MACb,EAAAqqB,EAAA,IAAsB,WAClBoK,EAAOf,WAAWjd,EAAM6W,EAAUiG,EAAUW,EAChD,GACJ,CAfA,CAqBJ,EACAzC,EAAclxB,UAAUg0B,mBAAqB,WACzC,IAAIzH,EAAM9sB,KAAK+zB,SAAShD,GAAejE,IACnC1pB,EAAQpD,KAAK8yB,SAAS1vB,MACtBC,EAASrD,KAAK8yB,SAASzvB,OAC3BypB,EAAI+C,UAAU,EAAG,EAAGzsB,EAAOC,GAC3BrD,KAAK00B,kBAAiB,SAAUne,GACxBA,EAAMkV,SACNqB,EAAI6C,UAAUpZ,EAAM6B,IAAK,EAAG,EAAGhV,EAAOC,EAE9C,GACJ,EACAouB,EAAclxB,UAAU8zB,aAAe,SAAU5d,EAAM6W,EAAUiG,GAI7D,IAHA,IAAI3f,EAAQ5T,KACR20B,EAAY,GACZf,EAAe5zB,KAAKmyB,MAAMyB,aACrBgB,EAAK,EAAGA,EAAK50B,KAAK2xB,YAAYlrB,OAAQmuB,IAAM,CACjD,IAAIlb,EAAS1Z,KAAK2xB,YAAYiD,GAC1Bre,EAAQvW,KAAK6xB,QAAQnY,GACrBnD,EAAM4a,aACH5a,IAAUvW,KAAK8zB,cACdvd,EAAMjV,SAAWiyB,IACrBoB,EAAU1rB,KAAKsN,EAEvB,CAgFA,IA/EA,IAAIsG,GAAW,EACXyX,GAAoB,EACpBO,EAAU,SAAUpjB,GACpB,IAsBIlM,EAtBAgR,EAAQoe,EAAUljB,GAClBqb,EAAMvW,EAAMuW,IACZ0C,EAAeoE,GACZrd,EAAM8W,mBAAmB5W,EAAM6W,EAAUwH,EAAOnC,OAAQmC,EAAOlC,SAClEhjB,EAAQ2jB,EAAWhd,EAAMyV,aAAezV,EAAMwV,YAC9CgJ,GAAYxB,GAAYhd,EAAMoV,aAAelQ,KAAKuZ,IAClDC,EAAYF,GAAYtZ,KAAKuZ,MAC7BzF,EAAahZ,EAAMmD,SAAWob,EAAOnD,YAAY,GAC/CmD,EAAOnB,iBAAmB,KAChC,GAAIpd,EAAMyV,eAAiBzV,EAAM0V,WAC7B1V,EAAM0B,OAAM,EAAOsX,EAAYC,QAE9B,GAAI5f,IAAU2G,EAAMyV,aAAc,CACnC,IAAIkJ,EAAUze,EAAK7G,GACdslB,EAAQvJ,aAAgBuJ,EAAQC,WAAY5B,GAC7Chd,EAAM0B,OAAM,EAAOsX,EAAYC,EAEvC,EACe,IAAX5f,IACAyJ,QAAQ+b,MAAM,4CACdxlB,EAAQ2G,EAAMyV,cAGlB,IAAIqJ,EAAU,SAAUC,GACpB,IAAIjoB,EAAQ,CACRb,SAAS,EACT+oB,YAAY,EACZC,OAAQ,KACRjI,UAAW3Z,EAAM+e,OACjBnF,WAAY5Z,EAAMgf,SAEtB,IAAKrtB,EAAIqK,EAAOrK,EAAIgR,EAAM0V,WAAY1mB,IAAK,CACvC,IAAIwH,EAAK0J,EAAKlR,GAKd,GAJIwH,EAAGnE,YACH0rB,GAAoB,GAExB1gB,EAAM6hB,WAAW1oB,EAAIwJ,EAAOqd,EAAc0B,EAAajoB,EAAO9H,IAAMgR,EAAM0V,WAAa,GACnF8I,EAAU,CACV,IAAIW,EAAQja,KAAKuZ,MAAQC,EACzB,GAAIS,EAAQ,GACR,KAER,CACJ,CACIroB,EAAMsoB,iBACN7I,EAAI4D,SAEZ,EACA,GAAIlB,EACA,GAA4B,IAAxBA,EAAa/oB,OACblB,EAAIgR,EAAM0V,gBAIV,IADA,IAAInB,EAAMgK,EAAOhK,IACRvT,EAAI,EAAGA,EAAIiY,EAAa/oB,SAAU8Q,EAAG,CAC1C,IAAIwW,EAAOyB,EAAajY,GACxBuV,EAAIyD,OACJzD,EAAI8I,YACJ9I,EAAIiB,KAAKA,EAAKprB,EAAImoB,EAAKiD,EAAKnrB,EAAIkoB,EAAKiD,EAAK3qB,MAAQ0nB,EAAKiD,EAAK1qB,OAASynB,GACrEgC,EAAI5Q,OACJmZ,EAAQtH,GACRjB,EAAI4D,SACR,MAIJ5D,EAAIyD,OACJ8E,IACAvI,EAAI4D,UAERna,EAAMwV,YAAcxmB,EAChBgR,EAAMwV,YAAcxV,EAAM0V,aAC1BpP,GAAW,EAEnB,EACIiY,EAAS90B,KACJyR,EAAI,EAAGA,EAAIkjB,EAAUluB,OAAQgL,IAClCojB,EAAQpjB,GASZ,OAPIokB,EAAA,OACAzJ,EAAKwE,KAAK5wB,KAAK6xB,SAAS,SAAUtb,GAC1BA,GAASA,EAAMuW,KAAOvW,EAAMuW,IAAIgJ,MAChCvf,EAAMuW,IAAIgJ,MAElB,IAEG,CACHjZ,SAAUA,EACVyX,kBAAmBA,EAE3B,EACA7C,EAAclxB,UAAUk1B,WAAa,SAAU1oB,EAAIgpB,EAAcnC,EAAc0B,EAAajoB,EAAO2oB,GAC/F,IAAIlJ,EAAMiJ,EAAajJ,IACvB,GAAI8G,EAAc,CACd,IAAIqC,EAAYlpB,EAAGa,iBACd0nB,GAAeW,GAAaA,EAAUhf,UAAUqe,OACjD,QAAMxI,EAAK/f,EAAIM,EAAO2oB,GACtBjpB,EAAGmpB,iBAAiBD,GAE5B,MAEI,QAAMnJ,EAAK/f,EAAIM,EAAO2oB,EAE9B,EACAvE,EAAclxB,UAAUwzB,SAAW,SAAUra,EAAQ+R,GAC7CzrB,KAAKqyB,gBAAkBryB,KAAK+xB,4BAC5BrY,EAASqX,GAEb,IAAIxa,EAAQvW,KAAK6xB,QAAQnY,GAiBzB,OAhBKnD,IACDA,EAAQ,IAAI,EAAM,MAAQmD,EAAQ1Z,KAAMA,KAAK8qB,KAC7CvU,EAAMmD,OAASA,EACfnD,EAAM4a,aAAc,EAChBnxB,KAAK8xB,aAAapY,GAClB0S,EAAK+J,MAAM5f,EAAOvW,KAAK8xB,aAAapY,IAAS,GAExC1Z,KAAK8xB,aAAapY,EAASsX,IAChC5E,EAAK+J,MAAM5f,EAAOvW,KAAK8xB,aAAapY,EAASsX,IAA2B,GAExEvF,IACAlV,EAAMkV,QAAUA,GAEpBzrB,KAAKo2B,YAAY1c,EAAQnD,GACzBA,EAAMsW,eAEHtW,CACX,EACAkb,EAAclxB,UAAU61B,YAAc,SAAU1c,EAAQnD,GACpD,IAAI8f,EAAYr2B,KAAK6xB,QACjBW,EAAaxyB,KAAK2xB,YAClBroB,EAAMkpB,EAAW/rB,OACjB4qB,EAAUrxB,KAAK8yB,SACfwD,EAAY,KACZ/wB,GAAK,EACT,IAAI8wB,EAAU3c,IAMTwX,EAAa3a,GAAlB,CAMA,GAAIjN,EAAM,GAAKoQ,EAAS8Y,EAAW,GAAI,CACnC,IAAKjtB,EAAI,EAAGA,EAAI+D,EAAM,EAAG/D,IACrB,GAAIitB,EAAWjtB,GAAKmU,GACb8Y,EAAWjtB,EAAI,GAAKmU,EACvB,MAGR4c,EAAYD,EAAU7D,EAAWjtB,GACrC,CAGA,GAFAitB,EAAWvoB,OAAO1E,EAAI,EAAG,EAAGmU,GAC5B2c,EAAU3c,GAAUnD,GACfA,EAAMkV,QACP,GAAI6K,EAAW,CACX,IAAIC,EAAUD,EAAUle,IACpBme,EAAQC,YACRnF,EAAQoF,aAAalgB,EAAM6B,IAAKme,EAAQC,aAGxCnF,EAAQ0B,YAAYxc,EAAM6B,IAElC,MAEQiZ,EAAQqF,WACRrF,EAAQoF,aAAalgB,EAAM6B,IAAKiZ,EAAQqF,YAGxCrF,EAAQ0B,YAAYxc,EAAM6B,KAItC7B,EAAM+Z,UAAYtwB,IA/BlB,CAgCJ,EACAyxB,EAAclxB,UAAUi0B,UAAY,SAAU9uB,EAAIC,GAE9C,IADA,IAAI6sB,EAAaxyB,KAAK2xB,YACbpsB,EAAI,EAAGA,EAAIitB,EAAW/rB,OAAQlB,IAAK,CACxC,IAAIoU,EAAI6Y,EAAWjtB,GACnBG,EAAG+K,KAAK9K,EAAS3F,KAAK6xB,QAAQlY,GAAIA,EACtC,CACJ,EACA8X,EAAclxB,UAAUm0B,iBAAmB,SAAUhvB,EAAIC,GAErD,IADA,IAAI6sB,EAAaxyB,KAAK2xB,YACbpsB,EAAI,EAAGA,EAAIitB,EAAW/rB,OAAQlB,IAAK,CACxC,IAAIoU,EAAI6Y,EAAWjtB,GACfgR,EAAQvW,KAAK6xB,QAAQlY,GACrBpD,EAAM4a,aACNzrB,EAAG+K,KAAK9K,EAAS4Q,EAAOoD,EAEhC,CACJ,EACA8X,EAAclxB,UAAU+V,eAAiB,SAAU5Q,EAAIC,GAEnD,IADA,IAAI6sB,EAAaxyB,KAAK2xB,YACbpsB,EAAI,EAAGA,EAAIitB,EAAW/rB,OAAQlB,IAAK,CACxC,IAAIoU,EAAI6Y,EAAWjtB,GACfgR,EAAQvW,KAAK6xB,QAAQlY,GACpBpD,EAAM4a,aACPzrB,EAAG+K,KAAK9K,EAAS4Q,EAAOoD,EAEhC,CACJ,EACA8X,EAAclxB,UAAUo2B,UAAY,WAChC,OAAO32B,KAAK6xB,OAChB,EACAJ,EAAclxB,UAAU4zB,mBAAqB,SAAU1d,GAInD,SAASmgB,EAAgB5sB,GACjBssB,IACIA,EAAUrK,aAAejiB,IACzBssB,EAAUh1B,SAAU,GAExBg1B,EAAUrK,WAAajiB,EAE/B,CACA,GAXAhK,KAAK00B,kBAAiB,SAAUne,EAAOoD,GACnCpD,EAAMjV,QAAUiV,EAAMuV,QAAS,CACnC,IASI9rB,KAAKqyB,cACL,IAAK,IAAIwE,EAAM,EAAGA,EAAMpgB,EAAKhQ,OAAQowB,IAAO,CACxC,IAAI9pB,EAAK0J,EAAKogB,GACd,GAAI9pB,EAAG2M,SAAWjD,EAAKogB,EAAM,GAAGnd,QAAU3M,EAAG4e,YAAa,CACtD3rB,KAAK+xB,2BAA4B,EACjC,KACJ,CACJ,CAEJ,IAEI+E,EACAvxB,EAHA+wB,EAAY,KACZS,EAAwB,EAG5B,IAAKxxB,EAAI,EAAGA,EAAIkR,EAAKhQ,OAAQlB,IAAK,CAC1BwH,EAAK0J,EAAKlR,GAAd,IACImU,EAAS3M,EAAG2M,OACZnD,OAAQ,EACRugB,IAAepd,IACfod,EAAapd,EACbqd,EAAwB,GAExBhqB,EAAG4e,aACHpV,EAAQvW,KAAK+zB,SAASra,EAASuX,EAAiBjxB,KAAK+xB,2BACrDxb,EAAMoV,aAAc,EACpBoL,EAAwB,GAGxBxgB,EAAQvW,KAAK+zB,SAASra,GAAUqd,EAAwB,EAAI/F,EAA2B,GAAIhxB,KAAK+xB,2BAE/Fxb,EAAM4a,aACP/E,EAAKjjB,SAAS,UAAYuQ,EAAS,kCAAoCnD,EAAMtW,IAE7EsW,IAAU+f,IACV/f,EAAMuV,QAAS,EACXvV,EAAMyV,eAAiBzmB,IACvBgR,EAAMjV,SAAU,GAEpBiV,EAAMyV,aAAezmB,EAChBgR,EAAMoV,YAIPpV,EAAMwV,aAAe,EAHrBxV,EAAMwV,YAAcxmB,EAKxBqxB,EAAgBrxB,GAChB+wB,EAAY/f,GAEXxJ,EAAGzL,QAAU,OAAgByL,EAAGnE,YACjC2N,EAAMjV,SAAU,EACZiV,EAAMoV,aAAepV,EAAMwV,YAAc,IACzCxV,EAAMwV,YAAcxmB,GAGhC,CACAqxB,EAAgBrxB,GAChBvF,KAAK00B,kBAAiB,SAAUne,EAAOoD,IAC9BpD,EAAMuV,QAAUvV,EAAMoW,kBAAoB,IAC3CpW,EAAMjV,SAAU,EAChBiV,EAAMyV,aAAezV,EAAM0V,WAAa1V,EAAMwV,YAAc,GAE5DxV,EAAMjV,SAAWiV,EAAMwV,YAAc,IACrCxV,EAAMwV,YAAcxV,EAAMyV,aAElC,GACJ,EACAyF,EAAclxB,UAAU0X,MAAQ,WAE5B,OADAjY,KAAK00B,iBAAiB10B,KAAKg3B,aACpBh3B,IACX,EACAyxB,EAAclxB,UAAUy2B,YAAc,SAAUzgB,GAC5CA,EAAM0B,OACV,EACAwZ,EAAclxB,UAAU02B,mBAAqB,SAAUhyB,GACnDjF,KAAK2zB,iBAAmB1uB,EACxBmnB,EAAKwE,KAAK5wB,KAAK6xB,SAAS,SAAUtb,GAC9BA,EAAMyW,cACV,GACJ,EACAyE,EAAclxB,UAAU22B,YAAc,SAAUxd,EAAQgS,GACpD,GAAIA,EAAQ,CACR,IAAIyL,EAAcn3B,KAAK8xB,aAClBqF,EAAYzd,GAIb0S,EAAK+J,MAAMgB,EAAYzd,GAASgS,GAAQ,GAHxCyL,EAAYzd,GAAUgS,EAK1B,IAAK,IAAInmB,EAAI,EAAGA,EAAIvF,KAAK2xB,YAAYlrB,OAAQlB,IAAK,CAC9C,IAAI6xB,EAAUp3B,KAAK2xB,YAAYpsB,GAC/B,GAAI6xB,IAAY1d,GAAU0d,IAAY1d,EAASsX,EAA0B,CACrE,IAAIza,EAAQvW,KAAK6xB,QAAQuF,GACzBhL,EAAK+J,MAAM5f,EAAO4gB,EAAYzd,IAAS,EAC3C,CACJ,CACJ,CACJ,EACA+X,EAAclxB,UAAU82B,SAAW,SAAU3d,GACzC,IAAI+Y,EAASzyB,KAAK6xB,QACdW,EAAaxyB,KAAK2xB,YAClBpb,EAAQkc,EAAO/Y,GACdnD,IAGLA,EAAM6B,IAAIkf,WAAWC,YAAYhhB,EAAM6B,YAChCqa,EAAO/Y,GACd8Y,EAAWvoB,OAAOmiB,EAAKxoB,QAAQ4uB,EAAY9Y,GAAS,GACxD,EACA+X,EAAclxB,UAAUuV,OAAS,SAAU1S,EAAOC,GAC9C,GAAKrD,KAAK8yB,SAAS5H,MAQd,CACD,IAAImG,EAAUrxB,KAAK8yB,SACnBzB,EAAQnG,MAAMsM,QAAU,OACxB,IAAI7b,EAAO3b,KAAKmyB,MACZT,EAAO1xB,KAAK0xB,KAMhB,GALS,MAATtuB,IAAkBuY,EAAKvY,MAAQA,GACrB,MAAVC,IAAmBsY,EAAKtY,OAASA,GACjCD,GAAQ,QAAQsuB,EAAM,EAAG/V,GACzBtY,GAAS,QAAQquB,EAAM,EAAG/V,GAC1B0V,EAAQnG,MAAMsM,QAAU,GACpBx3B,KAAK2yB,SAAWvvB,GAASC,IAAWrD,KAAK4yB,QAAS,CAGlD,IAAK,IAAI3yB,KAFToxB,EAAQnG,MAAM9nB,MAAQA,EAAQ,KAC9BiuB,EAAQnG,MAAM7nB,OAASA,EAAS,KACjBrD,KAAK6xB,QACZ7xB,KAAK6xB,QAAQ4F,eAAex3B,IAC5BD,KAAK6xB,QAAQ5xB,GAAI6V,OAAO1S,EAAOC,GAGvCrD,KAAKsM,SAAQ,EACjB,CACAtM,KAAK2yB,OAASvvB,EACdpD,KAAK4yB,QAAUvvB,CACnB,KA9B0B,CACtB,GAAa,MAATD,GAA2B,MAAVC,EACjB,OAEJrD,KAAK2yB,OAASvvB,EACdpD,KAAK4yB,QAAUvvB,EACfrD,KAAK+zB,SAAShD,GAAejb,OAAO1S,EAAOC,EAC/C,CAwBA,OAAOrD,IACX,EACAyxB,EAAclxB,UAAUm3B,WAAa,SAAUhe,GAC3C,IAAInD,EAAQvW,KAAK6xB,QAAQnY,GACrBnD,GACAA,EAAM0B,OAEd,EACAwZ,EAAclxB,UAAUyT,QAAU,WAC9BhU,KAAK0xB,KAAKa,UAAY,GACtBvyB,KAAK0xB,KACD1xB,KAAKsU,QACDtU,KAAK8yB,SACD9yB,KAAK6xB,QAAU,IAC/B,EACAJ,EAAclxB,UAAUo3B,kBAAoB,SAAUhc,GAElD,GADAA,EAAOA,GAAQ,CAAC,EACZ3b,KAAKqyB,gBAAkBryB,KAAKu0B,mBAC5B,OAAOv0B,KAAK6xB,QAAQd,GAAe3Y,IAEvC,IAAIwf,EAAa,IAAI,EAAM,QAAS53B,KAAM2b,EAAKkc,YAAc73B,KAAK8qB,KAClE8M,EAAW/K,cACX+K,EAAW3f,OAAM,EAAO0D,EAAK1W,iBAAmBjF,KAAK2zB,kBACrD,IAAI7G,EAAM8K,EAAW9K,IACrB,GAAInR,EAAKkc,YAAc73B,KAAK8qB,IAAK,CAC7B9qB,KAAKsM,UACL,IAAIwrB,EAAUF,EAAWxf,IAAIhV,MACzB20B,EAAWH,EAAWxf,IAAI/U,OAC9BrD,KAAKw0B,WAAU,SAAUje,GACjBA,EAAM4a,YACNrE,EAAI6C,UAAUpZ,EAAM6B,IAAK,EAAG,EAAG0f,EAASC,GAEnCxhB,EAAMyhB,iBACXlL,EAAIyD,OACJha,EAAMyhB,eAAelL,GACrBA,EAAI4D,UAEZ,GACJ,MAQI,IANA,IAAIrjB,EAAQ,CACRb,SAAS,EACT+gB,UAAWvtB,KAAK2yB,OAChBnF,WAAYxtB,KAAK4yB,SAEjBzY,EAAcna,KAAKsU,QAAQoC,gBAAe,GACrCnR,EAAI,EAAG+D,EAAM6Q,EAAY1T,OAAQlB,EAAI+D,EAAK/D,IAAK,CACpD,IAAIwH,EAAKoN,EAAY5U,IACrB,QAAMunB,EAAK/f,EAAIM,EAAO9H,IAAM+D,EAAM,EACtC,CAEJ,OAAOsuB,EAAWxf,GACtB,EACAqZ,EAAclxB,UAAUuY,SAAW,WAC/B,OAAO9Y,KAAK2yB,MAChB,EACAlB,EAAclxB,UAAUwY,UAAY,WAChC,OAAO/Y,KAAK4yB,OAChB,EACOnB,CACX,CAzlBoB,GA0lBpB,G,uEC9nBO,SAASwG,EAAkBC,EAAUC,GACxC,OAAKD,GAAyB,UAAbA,GAA0BC,EAAY,EAGnC,WAAbD,EACD,CAAC,EAAIC,EAAW,EAAIA,GACP,WAAbD,EACI,CAACC,IACD,IAAA/T,UAAS8T,GACL,CAACA,IAAY,IAAAE,SAAQF,GAAYA,EAAW,KAP/C,IAQf,CACO,SAASG,EAAYtrB,GACxB,IAAIme,EAAQne,EAAGme,MACXoN,EAAWpN,EAAMoN,UAAYpN,EAAMiN,UAAY,GAAKF,EAAkB/M,EAAMoN,SAAUpN,EAAMiN,WAC5FI,EAAiBrN,EAAMqN,eAC3B,GAAID,EAAU,CACV,IAAIE,EAAetN,EAAMuN,eAAiB1rB,EAAG2rB,aAAgB3rB,EAAG2rB,eAAiB,EAC7EF,GAA+B,IAAhBA,IACfF,GAAW,IAAA5T,KAAI4T,GAAU,SAAUK,GAC/B,OAAOA,EAASH,CACpB,IACAD,GAAkBC,EAE1B,CACA,MAAO,CAACF,EAAUC,EACtB,C,mOCfIK,EAAmB,IAAI,KAAU,GACrC,SAASC,EAAe3N,GACpB,IAAItmB,EAASsmB,EAAMtmB,OACnB,QAAmB,MAAVA,GAA6B,SAAXA,KAAuBsmB,EAAMiN,UAAY,GACxE,CACA,SAASW,EAAuBC,GAC5B,MAA+B,kBAAjBA,GAA8C,SAAjBA,CAC/C,CACA,SAASC,EAAa9N,GAClB,IAAIvmB,EAAOumB,EAAMvmB,KACjB,OAAe,MAARA,GAAyB,SAATA,CAC3B,CACA,SAASs0B,EAAWnM,EAAK5B,GACrB,GAAyB,MAArBA,EAAMgO,aAA6C,IAAtBhO,EAAMgO,YAAmB,CACtD,IAAIC,EAAsBrM,EAAI6D,YAC9B7D,EAAI6D,YAAczF,EAAMgO,YAAchO,EAAMkO,QAC5CtM,EAAInoB,OACJmoB,EAAI6D,YAAcwI,CACtB,MAEIrM,EAAInoB,MAEZ,CACA,SAAS00B,EAAavM,EAAK5B,GACvB,GAA2B,MAAvBA,EAAMoO,eAAiD,IAAxBpO,EAAMoO,cAAqB,CAC1D,IAAIH,EAAsBrM,EAAI6D,YAC9B7D,EAAI6D,YAAczF,EAAMoO,cAAgBpO,EAAMkO,QAC9CtM,EAAIloB,SACJkoB,EAAI6D,YAAcwI,CACtB,MAEIrM,EAAIloB,QAEZ,CACO,SAAS20B,EAAoBzM,EAAK0M,EAASzsB,GAC9C,IAAI0sB,GAAQ,QAAoBD,EAAQC,MAAOD,EAAQE,QAAS3sB,GAChE,IAAI,QAAa0sB,GAAQ,CACrB,IAAIE,EAAgB7M,EAAI8M,cAAcH,EAAOD,EAAQK,QAAU,UAC/D,GAAyB,oBAAdC,WACJH,GACAA,EAAcI,aAAc,CAC/B,IAAIC,EAAS,IAAIF,UACjBE,EAAOC,cAAeT,EAAQ72B,GAAK,EAAK62B,EAAQ52B,GAAK,GACrDo3B,EAAOE,WAAW,EAAG,GAAIV,EAAQv2B,UAAY,GAAK,EAAAk3B,kBAClDH,EAAOI,UAAWZ,EAAQpJ,QAAU,EAAKoJ,EAAQnJ,QAAU,GAC3DsJ,EAAcI,aAAaC,EAC/B,CACA,OAAOL,CACX,CACJ,CACA,SAASU,EAAUvN,EAAK/f,EAAIme,EAAOoP,GAC/B,IAAIlG,EACAmG,EAAY1B,EAAe3N,GAC3BsP,EAAUxB,EAAa9N,GACvBuP,EAAgBvP,EAAMuP,cACtBC,EAAaD,EAAgB,EAC7BE,GAAa5tB,EAAG6tB,KACd7tB,EAAGiB,SAAU0sB,IAAeC,GAC9B5tB,EAAG8tB,kBAEP,IAAID,EAAO7tB,EAAG6tB,MAAQhC,EAClBkC,EAAY/tB,EAAGzL,QACnB,IAAKg5B,EAAS,CACV,IAAI31B,EAAOumB,EAAMvmB,KACbC,EAASsmB,EAAMtmB,OACfm2B,EAAkBP,KAAa71B,EAAK8f,WACpCuW,EAAoBT,KAAe31B,EAAO6f,WAC1CwW,EAAiBT,KAAa71B,EAAK80B,MACnCyB,EAAmBX,KAAe31B,EAAO60B,MACzC0B,OAAe,EACfC,OAAiB,EACjBC,OAAc,EACdC,OAAgB,EAChBvN,OAAO,GACPgN,GAAmBC,KACnBjN,EAAOhhB,EAAGvK,mBAEVu4B,IACAI,EAAeL,GACT,QAAkBhO,EAAKnoB,EAAMopB,GAC7BhhB,EAAGwuB,qBACTxuB,EAAGwuB,qBAAuBJ,GAE1BH,IACAI,EAAiBN,GACX,QAAkBhO,EAAKloB,EAAQmpB,GAC/BhhB,EAAGyuB,uBACTzuB,EAAGyuB,uBAAyBJ,GAE5BH,IACAI,EAAeP,IAAc/tB,EAAG0uB,oBAC1BlC,EAAoBzM,EAAKnoB,EAAMoI,GAC/BA,EAAG0uB,oBACT1uB,EAAG0uB,oBAAsBJ,GAEzBH,IACAI,EAAiBR,IAAc/tB,EAAG2uB,sBAC5BnC,EAAoBzM,EAAKloB,EAAQmI,GACjCA,EAAG2uB,sBACT3uB,EAAG2uB,sBAAwBL,GAE3BN,EACAjO,EAAI0D,UAAY2K,EAEXF,IACDI,EACAvO,EAAI0D,UAAY6K,EAGhBb,GAAU,GAGdQ,EACAlO,EAAI6O,YAAcP,EAEbF,IACDI,EACAxO,EAAI6O,YAAcL,EAGlBf,GAAY,EAGxB,CACA,IAEIjC,EACAC,EAHAnL,EAAQrgB,EAAG6uB,iBACfhB,EAAKiB,SAASzO,EAAM,GAAIA,EAAM,GAAIrgB,EAAG+uB,wBAGjChP,EAAIiP,aAAe7Q,EAAMoN,WACzBlE,GAAK,OAAYrnB,GAAKurB,EAAWlE,EAAG,GAAImE,EAAiBnE,EAAG,IAEhE,IAAI4H,GAAe,GACfrB,GAAcG,EAAY,QAC1BF,EAAKqB,OAAOnP,EAAIhC,KACZ4P,EACAE,EAAKsB,WAAW,OAGhBtB,EAAKsB,WAAWpP,GAChBkP,GAAe,GAEnBpB,EAAKuB,QACLpvB,EAAGqvB,UAAUxB,EAAM7tB,EAAGsvB,MAAO/B,GAC7BM,EAAK0B,WACLvvB,EAAGwvB,eAEHP,GACApB,EAAK4B,YAAY1P,EAAK4N,EAAaD,EAAgB,GAEnDnC,IACAxL,EAAIiP,YAAYzD,GAChBxL,EAAIyL,eAAiBA,GAEpB+B,IACGpP,EAAMuR,aACFlC,GACAlB,EAAavM,EAAK5B,GAElBsP,GACAvB,EAAWnM,EAAK5B,KAIhBsP,GACAvB,EAAWnM,EAAK5B,GAEhBqP,GACAlB,EAAavM,EAAK5B,KAI1BoN,GACAxL,EAAIiP,YAAY,GAExB,CACA,SAASW,EAAW5P,EAAK/f,EAAIme,GACzB,IAAIuO,EAAQ1sB,EAAG2sB,SAAU,QAAoBxO,EAAMuO,MAAO1sB,EAAG2sB,QAAS3sB,EAAIA,EAAG4vB,QAC7E,GAAKlD,IAAU,QAAaA,GAA5B,CAGA,IAAI92B,EAAIuoB,EAAMvoB,GAAK,EACfC,EAAIsoB,EAAMtoB,GAAK,EACfQ,EAAQ2J,EAAG+L,WACXzV,EAAS0J,EAAGgM,YACZ6jB,EAASnD,EAAMr2B,MAAQq2B,EAAMp2B,OAWjC,GAVa,MAATD,GAA2B,MAAVC,EACjBD,EAAQC,EAASu5B,EAEF,MAAVv5B,GAA2B,MAATD,EACvBC,EAASD,EAAQw5B,EAEH,MAATx5B,GAA2B,MAAVC,IACtBD,EAAQq2B,EAAMr2B,MACdC,EAASo2B,EAAMp2B,QAEf6nB,EAAM2R,QAAU3R,EAAM4R,QAAS,CAC/B,IAAIC,EAAK7R,EAAM6R,IAAM,EACjBC,EAAK9R,EAAM8R,IAAM,EACrBlQ,EAAI6C,UAAU8J,EAAOsD,EAAIC,EAAI9R,EAAM2R,OAAQ3R,EAAM4R,QAASn6B,EAAGC,EAAGQ,EAAOC,EAC3E,MACK,GAAI6nB,EAAM6R,IAAM7R,EAAM8R,GAAI,CACvBD,EAAK7R,EAAM6R,GACXC,EAAK9R,EAAM8R,GADf,IAEIH,EAASz5B,EAAQ25B,EACjBD,EAAUz5B,EAAS25B,EACvBlQ,EAAI6C,UAAU8J,EAAOsD,EAAIC,EAAIH,EAAQC,EAASn6B,EAAGC,EAAGQ,EAAOC,EAC/D,MAEIypB,EAAI6C,UAAU8J,EAAO92B,EAAGC,EAAGQ,EAAOC,EA7BtC,CA+BJ,CACA,SAAS45B,EAAUnQ,EAAK/f,EAAIme,GACxB,IAAIkJ,EACA8I,EAAOhS,EAAMgS,KAEjB,GADQ,MAARA,IAAiBA,GAAQ,IACrBA,EAAM,CACNpQ,EAAIqQ,KAAOjS,EAAMiS,MAAQ,KACzBrQ,EAAI/qB,UAAYmpB,EAAMnpB,UACtB+qB,EAAIsQ,aAAelS,EAAMkS,aACzB,IAAI9E,OAAW,EACXC,OAAiB,EACjBzL,EAAIiP,aAAe7Q,EAAMoN,WACzBlE,GAAK,OAAYrnB,GAAKurB,EAAWlE,EAAG,GAAImE,EAAiBnE,EAAG,IAE5DkE,IACAxL,EAAIiP,YAAYzD,GAChBxL,EAAIyL,eAAiBA,GAErBrN,EAAMuR,aACF5D,EAAe3N,IACf4B,EAAIuQ,WAAWH,EAAMhS,EAAMvoB,EAAGuoB,EAAMtoB,GAEpCo2B,EAAa9N,IACb4B,EAAIwQ,SAASJ,EAAMhS,EAAMvoB,EAAGuoB,EAAMtoB,KAIlCo2B,EAAa9N,IACb4B,EAAIwQ,SAASJ,EAAMhS,EAAMvoB,EAAGuoB,EAAMtoB,GAElCi2B,EAAe3N,IACf4B,EAAIuQ,WAAWH,EAAMhS,EAAMvoB,EAAGuoB,EAAMtoB,IAGxC01B,GACAxL,EAAIiP,YAAY,GAExB,CACJ,CACA,IAAIwB,EAAsB,CAAC,aAAc,gBAAiB,iBACtDC,EAAe,CACf,CAAC,UAAW,QAAS,CAAC,WAAY,SAAU,CAAC,aAAc,KAE/D,SAASC,EAAgB3Q,EAAK5B,EAAOwS,EAAWC,EAAatwB,GACzD,IAAIuwB,GAAe,EACnB,IAAKD,IACDD,EAAYA,GAAa,CAAC,EACtBxS,IAAUwS,GACV,OAAO,EAGf,GAAIC,GAAezS,EAAMkO,UAAYsE,EAAUtE,QAAS,CACpDyE,EAAe/Q,EAAKzf,GACpBuwB,GAAe,EACf,IAAIxE,EAAUhiB,KAAKyK,IAAIzK,KAAKmJ,IAAI2K,EAAMkO,QAAS,GAAI,GACnDtM,EAAI6D,YAAc3V,MAAMoe,GAAW,aAA+BA,CACtE,EACIuE,GAAezS,EAAM4S,QAAUJ,EAAUI,SACpCF,IACDC,EAAe/Q,EAAKzf,GACpBuwB,GAAe,GAEnB9Q,EAAI4C,yBAA2BxE,EAAM4S,OAAS,YAElD,IAAK,IAAIv4B,EAAI,EAAGA,EAAIg4B,EAAoB92B,OAAQlB,IAAK,CACjD,IAAI8d,EAAWka,EAAoBh4B,IAC/Bo4B,GAAezS,EAAM7H,KAAcqa,EAAUra,MACxCua,IACDC,EAAe/Q,EAAKzf,GACpBuwB,GAAe,GAEnB9Q,EAAIzJ,GAAYyJ,EAAIhC,KAAOI,EAAM7H,IAAa,GAEtD,CAQA,OAPIsa,GAAezS,EAAM6S,cAAgBL,EAAUK,eAC1CH,IACDC,EAAe/Q,EAAKzf,GACpBuwB,GAAe,GAEnB9Q,EAAIiR,YAAc7S,EAAM6S,aAAe,kBAEpCH,CACX,CACA,SAASI,EAA2BlR,EAAK/f,EAAIyoB,EAAQmI,EAAatwB,GAC9D,IAAI6d,EAAQ+S,EAASlxB,EAAIM,EAAMb,SAC3BkxB,EAAYC,EACV,KACCnI,GAAUyI,EAASzI,EAAQnoB,EAAMb,UAAY,CAAC,EACrD,GAAI0e,IAAUwS,EACV,OAAO,EAEX,IAAIE,EAAeH,EAAgB3Q,EAAK5B,EAAOwS,EAAWC,EAAatwB,GAsBvE,IArBIswB,GAAezS,EAAMvmB,OAAS+4B,EAAU/4B,QACnCi5B,IACDC,EAAe/Q,EAAKzf,GACpBuwB,GAAe,GAEnB9E,EAAuB5N,EAAMvmB,QAAUmoB,EAAI0D,UAAYtF,EAAMvmB,QAE7Dg5B,GAAezS,EAAMtmB,SAAW84B,EAAU94B,UACrCg5B,IACDC,EAAe/Q,EAAKzf,GACpBuwB,GAAe,GAEnB9E,EAAuB5N,EAAMtmB,UAAYkoB,EAAI6O,YAAczQ,EAAMtmB,UAEjE+4B,GAAezS,EAAMkO,UAAYsE,EAAUtE,WACtCwE,IACDC,EAAe/Q,EAAKzf,GACpBuwB,GAAe,GAEnB9Q,EAAI6D,YAA+B,MAAjBzF,EAAMkO,QAAkB,EAAIlO,EAAMkO,SAEpDrsB,EAAGwtB,YAAa,CAChB,IAAIpC,EAAYjN,EAAMiN,UAClB+F,EAAe/F,GAAcjN,EAAMuN,eAAiB1rB,EAAG2rB,aAAgB3rB,EAAG2rB,eAAiB,GAC3F5L,EAAIqL,YAAc+F,IACbN,IACDC,EAAe/Q,EAAKzf,GACpBuwB,GAAe,GAEnB9Q,EAAIqL,UAAY+F,EAExB,CACA,IAAK,IAAI34B,EAAI,EAAGA,EAAIi4B,EAAa/2B,OAAQlB,IAAK,CAC1C,IAAI44B,EAAOX,EAAaj4B,GACpB8d,EAAW8a,EAAK,IAChBR,GAAezS,EAAM7H,KAAcqa,EAAUra,MACxCua,IACDC,EAAe/Q,EAAKzf,GACpBuwB,GAAe,GAEnB9Q,EAAIzJ,GAAY6H,EAAM7H,IAAa8a,EAAK,GAEhD,CACA,OAAOP,CACX,CACA,SAASQ,EAAetR,EAAK/f,EAAIyoB,EAAQmI,EAAatwB,GAClD,OAAOowB,EAAgB3Q,EAAKmR,EAASlxB,EAAIM,EAAMb,SAAUgpB,GAAUyI,EAASzI,EAAQnoB,EAAMb,SAAUmxB,EAAatwB,EACrH,CACA,SAASgxB,EAAoBvR,EAAK/f,GAC9B,IAAIjM,EAAIiM,EAAGhM,UACP+pB,EAAMgC,EAAIhC,KAAO,EACjBhqB,EACAgsB,EAAIiN,aAAajP,EAAMhqB,EAAE,GAAIgqB,EAAMhqB,EAAE,GAAIgqB,EAAMhqB,EAAE,GAAIgqB,EAAMhqB,EAAE,GAAIgqB,EAAMhqB,EAAE,GAAIgqB,EAAMhqB,EAAE,IAGrFgsB,EAAIiN,aAAajP,EAAK,EAAG,EAAGA,EAAK,EAAG,EAE5C,CACA,SAASwT,EAAiB/jB,EAAWuS,EAAKzf,GAEtC,IADA,IAAIkoB,GAAa,EACRhwB,EAAI,EAAGA,EAAIgV,EAAU9T,OAAQlB,IAAK,CACvC,IAAImG,EAAW6O,EAAUhV,GACzBgwB,EAAaA,GAAc7pB,EAAS6yB,aACpCF,EAAoBvR,EAAKphB,GACzBohB,EAAI8I,YACJlqB,EAAS0wB,UAAUtP,EAAKphB,EAAS2wB,OACjCvP,EAAI5Q,MACR,CACA7O,EAAMkoB,WAAaA,CACvB,CACA,SAASiJ,EAAmBC,EAAIC,GAC5B,OAAID,GAAMC,EACCD,EAAG,KAAOC,EAAG,IACbD,EAAG,KAAOC,EAAG,IACbD,EAAG,KAAOC,EAAG,IACbD,EAAG,KAAOC,EAAG,IACbD,EAAG,KAAOC,EAAG,IACbD,EAAG,KAAOC,EAAG,MAEdD,IAAOC,EAIrB,CACA,IAAIC,EAAiB,EACjBC,EAAkB,EAClBC,EAAiB,EACjBC,EAAwB,EAC5B,SAASC,EAAa7T,GAClB,IAAIsP,EAAUxB,EAAa9N,GACvBqP,EAAY1B,EAAe3N,GAC/B,QAASA,EAAMoN,aACLkC,GAAWD,IACbC,GAAiC,kBAAftP,EAAMvmB,MACxB41B,GAAqC,kBAAjBrP,EAAMtmB,QAC3BsmB,EAAMuP,cAAgB,GACtBvP,EAAMoO,cAAgB,GACtBpO,EAAMgO,YAAc,EAC/B,CACA,SAAS2E,EAAe/Q,EAAKzf,GACzBA,EAAM2xB,WAAalS,EAAInoB,OACvB0I,EAAM4xB,aAAenS,EAAIloB,SACzByI,EAAM2xB,UAAY,GAClB3xB,EAAM4xB,YAAc,EACxB,CACA,SAAShB,EAASlxB,EAAIP,GAClB,OAAOA,GAAWO,EAAGmyB,cAA4BnyB,EAAGme,KACxD,CACO,SAASiU,EAAYrS,EAAK/f,GAC7BqyB,EAAMtS,EAAK/f,EAAI,CAAEP,SAAS,EAAO+gB,UAAW,EAAGC,WAAY,IAAK,EACpE,CACO,SAAS4R,EAAMtS,EAAK/f,EAAIM,EAAO2oB,GAClC,IAAIl1B,EAAIiM,EAAGhM,UACX,IAAKgM,EAAGgiB,gBAAgB1hB,EAAMkgB,UAAWlgB,EAAMmgB,YAAY,GAAO,GAG9D,OAFAzgB,EAAGzL,UAAY,UACfyL,EAAGkiB,cAAe,GAGtB,IAAI1U,EAAYxN,EAAGgO,YACf4a,EAAkBtoB,EAAMsoB,gBACxB0J,GAAoB,EACpBC,GAAgB,EAkBpB,GAjBK3J,KAAmB,QAAkBpb,EAAWob,KAC7CA,GAAmBA,EAAgBlvB,SACnCo3B,EAAe/Q,EAAKzf,GACpByf,EAAI4D,UACJ4O,EAAgBD,GAAoB,EACpChyB,EAAMsoB,gBAAkB,KACxBtoB,EAAMkoB,YAAa,EACnBloB,EAAMmoB,OAAS,MAEfjb,GAAaA,EAAU9T,SACvBo3B,EAAe/Q,EAAKzf,GACpByf,EAAIyD,OACJ+N,EAAiB/jB,EAAWuS,EAAKzf,GACjCgyB,GAAoB,GAExBhyB,EAAMsoB,gBAAkBpb,GAExBlN,EAAMkoB,WACNxoB,EAAGkiB,cAAe,MADtB,CAIAliB,EAAGwyB,aAAexyB,EAAGwyB,cACrBxyB,EAAGyyB,mBACH,IAAIhK,EAASnoB,EAAMmoB,OACdA,IACD8J,EAAgBD,GAAoB,GAExC,IAAII,EAAe1yB,aAAc,MAC1BA,EAAG2yB,WACHX,EAAahyB,EAAGme,OACnBmU,GAAqBb,EAAmB19B,EAAG00B,EAAOz0B,YAClD88B,EAAe/Q,EAAKzf,GACpBgxB,EAAoBvR,EAAK/f,IAEnB0yB,GACN5B,EAAe/Q,EAAKzf,GAExB,IAAI6d,EAAQ+S,EAASlxB,EAAIM,EAAMb,SAC3BO,aAAc,MACVM,EAAMsyB,eAAiBhB,IACvBW,GAAgB,EAChBjyB,EAAMsyB,aAAehB,GAEzBX,EAA2BlR,EAAK/f,EAAIyoB,EAAQ8J,EAAejyB,GACtDoyB,IAAkBpyB,EAAM2xB,WAAc3xB,EAAM4xB,cAC7CnS,EAAI8I,YAERyE,EAAUvN,EAAK/f,EAAIme,EAAOuU,GACtBA,IACApyB,EAAM2xB,UAAY9T,EAAMvmB,MAAQ,GAChC0I,EAAM4xB,YAAc/T,EAAMtmB,QAAU,KAIpCmI,aAAc,KACVM,EAAMsyB,eAAiBd,IACvBS,GAAgB,EAChBjyB,EAAMsyB,aAAed,GAEzBb,EAA2BlR,EAAK/f,EAAIyoB,EAAQ8J,EAAejyB,GAC3D4vB,EAAUnQ,EAAK/f,EAAIme,IAEdne,aAAc,MACfM,EAAMsyB,eAAiBf,IACvBU,GAAgB,EAChBjyB,EAAMsyB,aAAef,GAEzBR,EAAetR,EAAK/f,EAAIyoB,EAAQ8J,EAAejyB,GAC/CqvB,EAAW5P,EAAK/f,EAAIme,IAEfne,EAAG6yB,0BACJvyB,EAAMsyB,eAAiBb,IACvBQ,GAAgB,EAChBjyB,EAAMsyB,aAAeb,GAEzBe,EAAiB/S,EAAK/f,EAAIM,IAG9BoyB,GAAgBzJ,GAChB6H,EAAe/Q,EAAKzf,GAExBN,EAAG+yB,kBACH/yB,EAAG6f,YAAc7f,EAAG6f,aACpBvf,EAAMmoB,OAASzoB,EACfA,EAAGzL,QAAU,EACbyL,EAAGkiB,cAAe,CAjElB,CAkEJ,CACA,SAAS4Q,EAAiB/S,EAAK/f,EAAIM,GAC/B,IAAI0yB,EAAehzB,EAAGizB,kBAClBC,EAAuBlzB,EAAG6yB,0BAC9B9S,EAAIyD,OACJ,IAQIhrB,EACA+D,EATA42B,EAAa,CACbvK,gBAAiB,KACjBH,OAAQ,KACRD,YAAY,EACZhI,UAAWlgB,EAAMkgB,UACjBC,WAAYngB,EAAMmgB,WAClBhhB,QAASa,EAAMb,SAInB,IAAKjH,EAAIwH,EAAGozB,YAAa72B,EAAMy2B,EAAat5B,OAAQlB,EAAI+D,EAAK/D,IAAK,CAC9D,IAAIgT,EAAcwnB,EAAax6B,GAC/BgT,EAAYgnB,aAAehnB,EAAYgnB,cACvChnB,EAAYinB,mBACZJ,EAAMtS,EAAKvU,EAAa2nB,EAAY36B,IAAM+D,EAAM,GAChDiP,EAAYunB,kBACZvnB,EAAYqU,YAAcrU,EAAYqU,aACtCsT,EAAW1K,OAASjd,CACxB,CACA,IAAK,IAAIse,EAAM,EAAGuJ,EAAQH,EAAqBx5B,OAAQowB,EAAMuJ,EAAOvJ,IAAO,CACnEte,EAAc0nB,EAAqBpJ,GACvCte,EAAYgnB,aAAehnB,EAAYgnB,cACvChnB,EAAYinB,mBACZJ,EAAMtS,EAAKvU,EAAa2nB,EAAYrJ,IAAQuJ,EAAQ,GACpD7nB,EAAYunB,kBACZvnB,EAAYqU,YAAcrU,EAAYqU,aACtCsT,EAAW1K,OAASjd,CACxB,CACAxL,EAAGszB,4BACHtzB,EAAGooB,UAAW,EACdrI,EAAI4D,SACR,C,uBC7iBA,SAAS4P,EAAUC,GACf,OAAOvS,SAASuS,EACpB,CACO,SAASC,EAAqB1T,EAAKrtB,EAAKsuB,GAC3C,IAAIprB,EAAa,MAATlD,EAAIkD,EAAY,EAAIlD,EAAIkD,EAC5B+jB,EAAe,MAAVjnB,EAAIinB,GAAa,EAAIjnB,EAAIinB,GAC9B9jB,EAAa,MAATnD,EAAImD,EAAY,EAAInD,EAAImD,EAC5B+jB,EAAe,MAAVlnB,EAAIknB,GAAa,EAAIlnB,EAAIknB,GAC7BlnB,EAAIgnB,SACL9jB,EAAIA,EAAIorB,EAAK3qB,MAAQ2qB,EAAKprB,EAC1B+jB,EAAKA,EAAKqH,EAAK3qB,MAAQ2qB,EAAKprB,EAC5BC,EAAIA,EAAImrB,EAAK1qB,OAAS0qB,EAAKnrB,EAC3B+jB,EAAKA,EAAKoH,EAAK1qB,OAAS0qB,EAAKnrB,GAEjCD,EAAI29B,EAAU39B,GAAKA,EAAI,EACvB+jB,EAAK4Z,EAAU5Z,GAAMA,EAAK,EAC1B9jB,EAAI09B,EAAU19B,GAAKA,EAAI,EACvB+jB,EAAK2Z,EAAU3Z,GAAMA,EAAK,EAC1B,IAAI8Z,EAAiB3T,EAAI0T,qBAAqB79B,EAAGC,EAAG8jB,EAAIC,GACxD,OAAO8Z,CACX,CACO,SAASC,EAAqB5T,EAAKrtB,EAAKsuB,GAC3C,IAAI3qB,EAAQ2qB,EAAK3qB,MACbC,EAAS0qB,EAAK1qB,OACdkd,EAAMnJ,KAAKmJ,IAAInd,EAAOC,GACtBV,EAAa,MAATlD,EAAIkD,EAAY,GAAMlD,EAAIkD,EAC9BC,EAAa,MAATnD,EAAImD,EAAY,GAAMnD,EAAImD,EAC9B2U,EAAa,MAAT9X,EAAI8X,EAAY,GAAM9X,EAAI8X,EAC7B9X,EAAIgnB,SACL9jB,EAAIA,EAAIS,EAAQ2qB,EAAKprB,EACrBC,EAAIA,EAAIS,EAAS0qB,EAAKnrB,EACtB2U,GAAQgJ,GAEZ5d,EAAI29B,EAAU39B,GAAKA,EAAI,GACvBC,EAAI09B,EAAU19B,GAAKA,EAAI,GACvB2U,EAAIA,GAAK,GAAK+oB,EAAU/oB,GAAKA,EAAI,GACjC,IAAIkpB,EAAiB3T,EAAI4T,qBAAqB/9B,EAAGC,EAAG,EAAGD,EAAGC,EAAG2U,GAC7D,OAAOkpB,CACX,CACO,SAASE,EAAkB7T,EAAKrtB,EAAKsuB,GAKxC,IAJA,IAAI0S,EAA8B,WAAbhhC,EAAIsO,KACnB2yB,EAAqB5T,EAAKrtB,EAAKsuB,GAC/ByS,EAAqB1T,EAAKrtB,EAAKsuB,GACjCtJ,EAAahlB,EAAIglB,WACZlf,EAAI,EAAGA,EAAIkf,EAAWhe,OAAQlB,IACnCk7B,EAAeG,aAAanc,EAAWlf,GAAG9B,OAAQghB,EAAWlf,GAAGqc,OAEpE,OAAO6e,CACX,CACO,SAASI,EAAkBtmB,EAAWumB,GACzC,GAAIvmB,IAAcumB,IAAmBvmB,IAAcumB,EAC/C,OAAO,EAEX,IAAKvmB,IAAcumB,GAAkBvmB,EAAU9T,SAAWq6B,EAAcr6B,OACpE,OAAO,EAEX,IAAK,IAAIlB,EAAI,EAAGA,EAAIgV,EAAU9T,OAAQlB,IAClC,GAAIgV,EAAUhV,KAAOu7B,EAAcv7B,GAC/B,OAAO,EAGf,OAAO,CACX,CACA,SAASw7B,EAAWhyB,GAChB,OAAOiyB,SAASjyB,EAAK,GACzB,CACO,SAASkyB,EAAQvP,EAAMwP,EAAOvlB,GACjC,IAAIwlB,EAAK,CAAC,QAAS,UAAUD,GACzBE,EAAM,CAAC,cAAe,gBAAgBF,GACtCG,EAAM,CAAC,cAAe,cAAcH,GACpCI,EAAM,CAAC,eAAgB,iBAAiBJ,GAC5C,GAAgB,MAAZvlB,EAAKwlB,IAA4B,SAAbxlB,EAAKwlB,GACzB,OAAOI,WAAW5lB,EAAKwlB,IAE3B,IAAIK,EAAMlQ,SAASmQ,YAAYC,iBAAiBhQ,GAChD,OAASA,EAAK0P,IAAQL,EAAWS,EAAIL,KAAQJ,EAAWrP,EAAKxG,MAAMiW,MAC5DJ,EAAWS,EAAIH,KAAS,IACxBN,EAAWS,EAAIF,KAAS,GAAM,CACzC,C","sources":["webpack://databoard/./node_modules/zrender/lib/Element.js","webpack://databoard/./node_modules/zrender/lib/Handler.js","webpack://databoard/./node_modules/zrender/lib/Storage.js","webpack://databoard/./node_modules/zrender/lib/animation/Animation.js","webpack://databoard/./node_modules/zrender/lib/animation/easing.js","webpack://databoard/./node_modules/zrender/lib/animation/Clip.js","webpack://databoard/./node_modules/zrender/lib/animation/Animator.js","webpack://databoard/./node_modules/zrender/lib/animation/cubicEasing.js","webpack://databoard/./node_modules/zrender/lib/animation/requestAnimationFrame.js","webpack://databoard/./node_modules/zrender/lib/canvas/Layer.js","webpack://databoard/./node_modules/zrender/lib/canvas/Painter.js","webpack://databoard/./node_modules/zrender/lib/canvas/dashStyle.js","webpack://databoard/./node_modules/zrender/lib/canvas/graphic.js","webpack://databoard/./node_modules/zrender/lib/canvas/helper.js"],"sourcesContent":["import Transformable, { TRANSFORMABLE_PROPS } from './core/Transformable.js';\nimport Animator, { cloneValue } from './animation/Animator.js';\nimport BoundingRect from './core/BoundingRect.js';\nimport Eventful from './core/Eventful.js';\nimport { calculateTextPosition, parsePercent } from './contain/text.js';\nimport { guid, isObject, keys, extend, indexOf, logError, mixin, isArrayLike, isTypedArray, isGradientObject, filter, reduce } from './core/util.js';\nimport { LIGHT_LABEL_COLOR, DARK_LABEL_COLOR } from './config.js';\nimport { parse, stringify } from './tool/color.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nexport var PRESERVED_NORMAL_STATE = '__zr_normal__';\nvar PRIMARY_STATES_KEYS = TRANSFORMABLE_PROPS.concat(['ignore']);\nvar DEFAULT_ANIMATABLE_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n    obj[key] = true;\n    return obj;\n}, { ignore: false });\nvar tmpTextPosCalcRes = {};\nvar tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\nvar Element = (function () {\n    function Element(props) {\n        this.id = guid();\n        this.animators = [];\n        this.currentStates = [];\n        this.states = {};\n        this._init(props);\n    }\n    Element.prototype._init = function (props) {\n        this.attr(props);\n    };\n    Element.prototype.drift = function (dx, dy, e) {\n        switch (this.draggable) {\n            case 'horizontal':\n                dy = 0;\n                break;\n            case 'vertical':\n                dx = 0;\n                break;\n        }\n        var m = this.transform;\n        if (!m) {\n            m = this.transform = [1, 0, 0, 1, 0, 0];\n        }\n        m[4] += dx;\n        m[5] += dy;\n        this.decomposeTransform();\n        this.markRedraw();\n    };\n    Element.prototype.beforeUpdate = function () { };\n    Element.prototype.afterUpdate = function () { };\n    Element.prototype.update = function () {\n        this.updateTransform();\n        if (this.__dirty) {\n            this.updateInnerText();\n        }\n    };\n    Element.prototype.updateInnerText = function (forceUpdate) {\n        var textEl = this._textContent;\n        if (textEl && (!textEl.ignore || forceUpdate)) {\n            if (!this.textConfig) {\n                this.textConfig = {};\n            }\n            var textConfig = this.textConfig;\n            var isLocal = textConfig.local;\n            var innerTransformable = textEl.innerTransformable;\n            var textAlign = void 0;\n            var textVerticalAlign = void 0;\n            var textStyleChanged = false;\n            innerTransformable.parent = isLocal ? this : null;\n            var innerOrigin = false;\n            innerTransformable.copyTransform(textEl);\n            if (textConfig.position != null) {\n                var layoutRect = tmpBoundingRect;\n                if (textConfig.layoutRect) {\n                    layoutRect.copy(textConfig.layoutRect);\n                }\n                else {\n                    layoutRect.copy(this.getBoundingRect());\n                }\n                if (!isLocal) {\n                    layoutRect.applyTransform(this.transform);\n                }\n                if (this.calculateTextPosition) {\n                    this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                else {\n                    calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                innerTransformable.x = tmpTextPosCalcRes.x;\n                innerTransformable.y = tmpTextPosCalcRes.y;\n                textAlign = tmpTextPosCalcRes.align;\n                textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n                var textOrigin = textConfig.origin;\n                if (textOrigin && textConfig.rotation != null) {\n                    var relOriginX = void 0;\n                    var relOriginY = void 0;\n                    if (textOrigin === 'center') {\n                        relOriginX = layoutRect.width * 0.5;\n                        relOriginY = layoutRect.height * 0.5;\n                    }\n                    else {\n                        relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n                        relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n                    }\n                    innerOrigin = true;\n                    innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n                    innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n                }\n            }\n            if (textConfig.rotation != null) {\n                innerTransformable.rotation = textConfig.rotation;\n            }\n            var textOffset = textConfig.offset;\n            if (textOffset) {\n                innerTransformable.x += textOffset[0];\n                innerTransformable.y += textOffset[1];\n                if (!innerOrigin) {\n                    innerTransformable.originX = -textOffset[0];\n                    innerTransformable.originY = -textOffset[1];\n                }\n            }\n            var isInside = textConfig.inside == null\n                ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\n                : textConfig.inside;\n            var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n            var textFill = void 0;\n            var textStroke = void 0;\n            var autoStroke = void 0;\n            if (isInside && this.canBeInsideText()) {\n                textFill = textConfig.insideFill;\n                textStroke = textConfig.insideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getInsideTextFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getInsideTextStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            else {\n                textFill = textConfig.outsideFill;\n                textStroke = textConfig.outsideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getOutsideFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getOutsideStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            textFill = textFill || '#000';\n            if (textFill !== innerTextDefaultStyle.fill\n                || textStroke !== innerTextDefaultStyle.stroke\n                || autoStroke !== innerTextDefaultStyle.autoStroke\n                || textAlign !== innerTextDefaultStyle.align\n                || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\n                textStyleChanged = true;\n                innerTextDefaultStyle.fill = textFill;\n                innerTextDefaultStyle.stroke = textStroke;\n                innerTextDefaultStyle.autoStroke = autoStroke;\n                innerTextDefaultStyle.align = textAlign;\n                innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n                textEl.setDefaultTextStyle(innerTextDefaultStyle);\n            }\n            textEl.__dirty |= REDRAW_BIT;\n            if (textStyleChanged) {\n                textEl.dirtyStyle(true);\n            }\n        }\n    };\n    Element.prototype.canBeInsideText = function () {\n        return true;\n    };\n    Element.prototype.getInsideTextFill = function () {\n        return '#fff';\n    };\n    Element.prototype.getInsideTextStroke = function (textFill) {\n        return '#000';\n    };\n    Element.prototype.getOutsideFill = function () {\n        return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    };\n    Element.prototype.getOutsideStroke = function (textFill) {\n        var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n        var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\n        if (!colorArr) {\n            colorArr = [255, 255, 255, 1];\n        }\n        var alpha = colorArr[3];\n        var isDark = this.__zr.isDarkMode();\n        for (var i = 0; i < 3; i++) {\n            colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n        }\n        colorArr[3] = 1;\n        return stringify(colorArr, 'rgba');\n    };\n    Element.prototype.traverse = function (cb, context) { };\n    Element.prototype.attrKV = function (key, value) {\n        if (key === 'textConfig') {\n            this.setTextConfig(value);\n        }\n        else if (key === 'textContent') {\n            this.setTextContent(value);\n        }\n        else if (key === 'clipPath') {\n            this.setClipPath(value);\n        }\n        else if (key === 'extra') {\n            this.extra = this.extra || {};\n            extend(this.extra, value);\n        }\n        else {\n            this[key] = value;\n        }\n    };\n    Element.prototype.hide = function () {\n        this.ignore = true;\n        this.markRedraw();\n    };\n    Element.prototype.show = function () {\n        this.ignore = false;\n        this.markRedraw();\n    };\n    Element.prototype.attr = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.attrKV(keyOrObj, value);\n        }\n        else if (isObject(keyOrObj)) {\n            var obj = keyOrObj;\n            var keysArr = keys(obj);\n            for (var i = 0; i < keysArr.length; i++) {\n                var key = keysArr[i];\n                this.attrKV(key, keyOrObj[key]);\n            }\n        }\n        this.markRedraw();\n        return this;\n    };\n    Element.prototype.saveCurrentToNormalState = function (toState) {\n        this._innerSaveToNormal(toState);\n        var normalState = this._normalState;\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            var fromStateTransition = animator.__fromStateTransition;\n            if (animator.getLoop() || fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n                continue;\n            }\n            var targetName = animator.targetName;\n            var target = targetName\n                ? normalState[targetName] : normalState;\n            animator.saveTo(target);\n        }\n    };\n    Element.prototype._innerSaveToNormal = function (toState) {\n        var normalState = this._normalState;\n        if (!normalState) {\n            normalState = this._normalState = {};\n        }\n        if (toState.textConfig && !normalState.textConfig) {\n            normalState.textConfig = this.textConfig;\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\n        for (var i = 0; i < primaryKeys.length; i++) {\n            var key = primaryKeys[i];\n            if (toState[key] != null && !(key in normalState)) {\n                normalState[key] = this[key];\n            }\n        }\n    };\n    Element.prototype.hasState = function () {\n        return this.currentStates.length > 0;\n    };\n    Element.prototype.getState = function (name) {\n        return this.states[name];\n    };\n    Element.prototype.ensureState = function (name) {\n        var states = this.states;\n        if (!states[name]) {\n            states[name] = {};\n        }\n        return states[name];\n    };\n    Element.prototype.clearStates = function (noAnimation) {\n        this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n    };\n    Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation, forceUseHoverLayer) {\n        var toNormalState = stateName === PRESERVED_NORMAL_STATE;\n        var hasStates = this.hasState();\n        if (!hasStates && toNormalState) {\n            return;\n        }\n        var currentStates = this.currentStates;\n        var animationCfg = this.stateTransition;\n        if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n            return;\n        }\n        var state;\n        if (this.stateProxy && !toNormalState) {\n            state = this.stateProxy(stateName);\n        }\n        if (!state) {\n            state = (this.states && this.states[stateName]);\n        }\n        if (!state && !toNormalState) {\n            logError(\"State \" + stateName + \" not exists.\");\n            return;\n        }\n        if (!toNormalState) {\n            this.saveCurrentToNormalState(state);\n        }\n        var useHoverLayer = !!((state && state.hoverLayer) || forceUseHoverLayer);\n        if (useHoverLayer) {\n            this._toggleHoverLayerFlag(true);\n        }\n        this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (textGuide) {\n            textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (toNormalState) {\n            this.currentStates = [];\n            this._normalState = {};\n        }\n        else {\n            if (!keepCurrentStates) {\n                this.currentStates = [stateName];\n            }\n            else {\n                this.currentStates.push(stateName);\n            }\n        }\n        this._updateAnimationTargets();\n        this.markRedraw();\n        if (!useHoverLayer && this.__inHover) {\n            this._toggleHoverLayerFlag(false);\n            this.__dirty &= ~REDRAW_BIT;\n        }\n        return state;\n    };\n    Element.prototype.useStates = function (states, noAnimation, forceUseHoverLayer) {\n        if (!states.length) {\n            this.clearStates();\n        }\n        else {\n            var stateObjects = [];\n            var currentStates = this.currentStates;\n            var len = states.length;\n            var notChange = len === currentStates.length;\n            if (notChange) {\n                for (var i = 0; i < len; i++) {\n                    if (states[i] !== currentStates[i]) {\n                        notChange = false;\n                        break;\n                    }\n                }\n            }\n            if (notChange) {\n                return;\n            }\n            for (var i = 0; i < len; i++) {\n                var stateName = states[i];\n                var stateObj = void 0;\n                if (this.stateProxy) {\n                    stateObj = this.stateProxy(stateName, states);\n                }\n                if (!stateObj) {\n                    stateObj = this.states[stateName];\n                }\n                if (stateObj) {\n                    stateObjects.push(stateObj);\n                }\n            }\n            var lastStateObj = stateObjects[len - 1];\n            var useHoverLayer = !!((lastStateObj && lastStateObj.hoverLayer) || forceUseHoverLayer);\n            if (useHoverLayer) {\n                this._toggleHoverLayerFlag(true);\n            }\n            var mergedState = this._mergeStates(stateObjects);\n            var animationCfg = this.stateTransition;\n            this.saveCurrentToNormalState(mergedState);\n            this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n            var textContent = this._textContent;\n            var textGuide = this._textGuide;\n            if (textContent) {\n                textContent.useStates(states, noAnimation, useHoverLayer);\n            }\n            if (textGuide) {\n                textGuide.useStates(states, noAnimation, useHoverLayer);\n            }\n            this._updateAnimationTargets();\n            this.currentStates = states.slice();\n            this.markRedraw();\n            if (!useHoverLayer && this.__inHover) {\n                this._toggleHoverLayerFlag(false);\n                this.__dirty &= ~REDRAW_BIT;\n            }\n        }\n    };\n    Element.prototype._updateAnimationTargets = function () {\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            if (animator.targetName) {\n                animator.changeTarget(this[animator.targetName]);\n            }\n        }\n    };\n    Element.prototype.removeState = function (state) {\n        var idx = indexOf(this.currentStates, state);\n        if (idx >= 0) {\n            var currentStates = this.currentStates.slice();\n            currentStates.splice(idx, 1);\n            this.useStates(currentStates);\n        }\n    };\n    Element.prototype.replaceState = function (oldState, newState, forceAdd) {\n        var currentStates = this.currentStates.slice();\n        var idx = indexOf(currentStates, oldState);\n        var newStateExists = indexOf(currentStates, newState) >= 0;\n        if (idx >= 0) {\n            if (!newStateExists) {\n                currentStates[idx] = newState;\n            }\n            else {\n                currentStates.splice(idx, 1);\n            }\n        }\n        else if (forceAdd && !newStateExists) {\n            currentStates.push(newState);\n        }\n        this.useStates(currentStates);\n    };\n    Element.prototype.toggleState = function (state, enable) {\n        if (enable) {\n            this.useState(state, true);\n        }\n        else {\n            this.removeState(state);\n        }\n    };\n    Element.prototype._mergeStates = function (states) {\n        var mergedState = {};\n        var mergedTextConfig;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            extend(mergedState, state);\n            if (state.textConfig) {\n                mergedTextConfig = mergedTextConfig || {};\n                extend(mergedTextConfig, state.textConfig);\n            }\n        }\n        if (mergedTextConfig) {\n            mergedState.textConfig = mergedTextConfig;\n        }\n        return mergedState;\n    };\n    Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        if (state && state.textConfig) {\n            this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\n            extend(this.textConfig, state.textConfig);\n        }\n        else if (needsRestoreToNormal) {\n            if (normalState.textConfig) {\n                this.textConfig = normalState.textConfig;\n            }\n        }\n        var transitionTarget = {};\n        var hasTransition = false;\n        for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n            var key = PRIMARY_STATES_KEYS[i];\n            var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n            if (state && state[key] != null) {\n                if (propNeedsTransition) {\n                    hasTransition = true;\n                    transitionTarget[key] = state[key];\n                }\n                else {\n                    this[key] = state[key];\n                }\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    if (propNeedsTransition) {\n                        hasTransition = true;\n                        transitionTarget[key] = normalState[key];\n                    }\n                    else {\n                        this[key] = normalState[key];\n                    }\n                }\n            }\n        }\n        if (!transition) {\n            for (var i = 0; i < this.animators.length; i++) {\n                var animator = this.animators[i];\n                var targetName = animator.targetName;\n                if (!animator.getLoop()) {\n                    animator.__changeFinalValue(targetName\n                        ? (state || normalState)[targetName]\n                        : (state || normalState));\n                }\n            }\n        }\n        if (hasTransition) {\n            this._transitionState(stateName, transitionTarget, animationCfg);\n        }\n    };\n    Element.prototype._attachComponent = function (componentEl) {\n        if (componentEl.__zr && !componentEl.__hostTarget) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Text element has been added to zrender.');\n            }\n            return;\n        }\n        if (componentEl === this) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Recursive component attachment.');\n            }\n            return;\n        }\n        var zr = this.__zr;\n        if (zr) {\n            componentEl.addSelfToZr(zr);\n        }\n        componentEl.__zr = zr;\n        componentEl.__hostTarget = this;\n    };\n    Element.prototype._detachComponent = function (componentEl) {\n        if (componentEl.__zr) {\n            componentEl.removeSelfFromZr(componentEl.__zr);\n        }\n        componentEl.__zr = null;\n        componentEl.__hostTarget = null;\n    };\n    Element.prototype.getClipPath = function () {\n        return this._clipPath;\n    };\n    Element.prototype.setClipPath = function (clipPath) {\n        if (this._clipPath && this._clipPath !== clipPath) {\n            this.removeClipPath();\n        }\n        this._attachComponent(clipPath);\n        this._clipPath = clipPath;\n        this.markRedraw();\n    };\n    Element.prototype.removeClipPath = function () {\n        var clipPath = this._clipPath;\n        if (clipPath) {\n            this._detachComponent(clipPath);\n            this._clipPath = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextContent = function () {\n        return this._textContent;\n    };\n    Element.prototype.setTextContent = function (textEl) {\n        var previousTextContent = this._textContent;\n        if (previousTextContent === textEl) {\n            return;\n        }\n        if (previousTextContent && previousTextContent !== textEl) {\n            this.removeTextContent();\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (textEl.__zr && !textEl.__hostTarget) {\n                throw new Error('Text element has been added to zrender.');\n            }\n        }\n        textEl.innerTransformable = new Transformable();\n        this._attachComponent(textEl);\n        this._textContent = textEl;\n        this.markRedraw();\n    };\n    Element.prototype.setTextConfig = function (cfg) {\n        if (!this.textConfig) {\n            this.textConfig = {};\n        }\n        extend(this.textConfig, cfg);\n        this.markRedraw();\n    };\n    Element.prototype.removeTextConfig = function () {\n        this.textConfig = null;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextContent = function () {\n        var textEl = this._textContent;\n        if (textEl) {\n            textEl.innerTransformable = null;\n            this._detachComponent(textEl);\n            this._textContent = null;\n            this._innerTextDefaultStyle = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextGuideLine = function () {\n        return this._textGuide;\n    };\n    Element.prototype.setTextGuideLine = function (guideLine) {\n        if (this._textGuide && this._textGuide !== guideLine) {\n            this.removeTextGuideLine();\n        }\n        this._attachComponent(guideLine);\n        this._textGuide = guideLine;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextGuideLine = function () {\n        var textGuide = this._textGuide;\n        if (textGuide) {\n            this._detachComponent(textGuide);\n            this._textGuide = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.markRedraw = function () {\n        this.__dirty |= REDRAW_BIT;\n        var zr = this.__zr;\n        if (zr) {\n            if (this.__inHover) {\n                zr.refreshHover();\n            }\n            else {\n                zr.refresh();\n            }\n        }\n        if (this.__hostTarget) {\n            this.__hostTarget.markRedraw();\n        }\n    };\n    Element.prototype.dirty = function () {\n        this.markRedraw();\n    };\n    Element.prototype._toggleHoverLayerFlag = function (inHover) {\n        this.__inHover = inHover;\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.__inHover = inHover;\n        }\n        if (textGuide) {\n            textGuide.__inHover = inHover;\n        }\n    };\n    Element.prototype.addSelfToZr = function (zr) {\n        if (this.__zr === zr) {\n            return;\n        }\n        this.__zr = zr;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.addAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.addSelfToZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.addSelfToZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.addSelfToZr(zr);\n        }\n    };\n    Element.prototype.removeSelfFromZr = function (zr) {\n        if (!this.__zr) {\n            return;\n        }\n        this.__zr = null;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.removeAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.removeSelfFromZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.removeSelfFromZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.removeSelfFromZr(zr);\n        }\n    };\n    Element.prototype.animate = function (key, loop, allowDiscreteAnimation) {\n        var target = key ? this[key] : this;\n        if (process.env.NODE_ENV !== 'production') {\n            if (!target) {\n                logError('Property \"'\n                    + key\n                    + '\" is not existed in element '\n                    + this.id);\n                return;\n            }\n        }\n        var animator = new Animator(target, loop, allowDiscreteAnimation);\n        key && (animator.targetName = key);\n        this.addAnimator(animator, key);\n        return animator;\n    };\n    Element.prototype.addAnimator = function (animator, key) {\n        var zr = this.__zr;\n        var el = this;\n        animator.during(function () {\n            el.updateDuringAnimation(key);\n        }).done(function () {\n            var animators = el.animators;\n            var idx = indexOf(animators, animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n        this.animators.push(animator);\n        if (zr) {\n            zr.animation.addAnimator(animator);\n        }\n        zr && zr.wakeUp();\n    };\n    Element.prototype.updateDuringAnimation = function (key) {\n        this.markRedraw();\n    };\n    Element.prototype.stopAnimation = function (scope, forwardToLast) {\n        var animators = this.animators;\n        var len = animators.length;\n        var leftAnimators = [];\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            if (!scope || scope === animator.scope) {\n                animator.stop(forwardToLast);\n            }\n            else {\n                leftAnimators.push(animator);\n            }\n        }\n        this.animators = leftAnimators;\n        return this;\n    };\n    Element.prototype.animateTo = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps);\n    };\n    Element.prototype.animateFrom = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps, true);\n    };\n    Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\n        var animators = animateTo(this, target, cfg, animationProps);\n        for (var i = 0; i < animators.length; i++) {\n            animators[i].__fromStateTransition = stateName;\n        }\n    };\n    Element.prototype.getBoundingRect = function () {\n        return null;\n    };\n    Element.prototype.getPaintRect = function () {\n        return null;\n    };\n    Element.initDefaultProps = (function () {\n        var elProto = Element.prototype;\n        elProto.type = 'element';\n        elProto.name = '';\n        elProto.ignore =\n            elProto.silent =\n                elProto.isGroup =\n                    elProto.draggable =\n                        elProto.dragging =\n                            elProto.ignoreClip =\n                                elProto.__inHover = false;\n        elProto.__dirty = REDRAW_BIT;\n        var logs = {};\n        function logDeprecatedError(key, xKey, yKey) {\n            if (!logs[key + xKey + yKey]) {\n                console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\n                logs[key + xKey + yKey] = true;\n            }\n        }\n        function createLegacyProperty(key, privateKey, xKey, yKey) {\n            Object.defineProperty(elProto, key, {\n                get: function () {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    if (!this[privateKey]) {\n                        var pos = this[privateKey] = [];\n                        enhanceArray(this, pos);\n                    }\n                    return this[privateKey];\n                },\n                set: function (pos) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    this[xKey] = pos[0];\n                    this[yKey] = pos[1];\n                    this[privateKey] = pos;\n                    enhanceArray(this, pos);\n                }\n            });\n            function enhanceArray(self, pos) {\n                Object.defineProperty(pos, 0, {\n                    get: function () {\n                        return self[xKey];\n                    },\n                    set: function (val) {\n                        self[xKey] = val;\n                    }\n                });\n                Object.defineProperty(pos, 1, {\n                    get: function () {\n                        return self[yKey];\n                    },\n                    set: function (val) {\n                        self[yKey] = val;\n                    }\n                });\n            }\n        }\n        if (Object.defineProperty) {\n            createLegacyProperty('position', '_legacyPos', 'x', 'y');\n            createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n            createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n        }\n    })();\n    return Element;\n}());\nmixin(Element, Eventful);\nmixin(Element, Transformable);\nfunction animateTo(animatable, target, cfg, animationProps, reverse) {\n    cfg = cfg || {};\n    var animators = [];\n    animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\n    var finishCount = animators.length;\n    var doneHappened = false;\n    var cfgDone = cfg.done;\n    var cfgAborted = cfg.aborted;\n    var doneCb = function () {\n        doneHappened = true;\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    var abortedCb = function () {\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    if (!finishCount) {\n        cfgDone && cfgDone();\n    }\n    if (animators.length > 0 && cfg.during) {\n        animators[0].during(function (target, percent) {\n            cfg.during(percent);\n        });\n    }\n    for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        if (doneCb) {\n            animator.done(doneCb);\n        }\n        if (abortedCb) {\n            animator.aborted(abortedCb);\n        }\n        if (cfg.force) {\n            animator.duration(cfg.duration);\n        }\n        animator.start(cfg.easing);\n    }\n    return animators;\n}\nfunction copyArrShallow(source, target, len) {\n    for (var i = 0; i < len; i++) {\n        source[i] = target[i];\n    }\n}\nfunction is2DArray(value) {\n    return isArrayLike(value[0]);\n}\nfunction copyValue(target, source, key) {\n    if (isArrayLike(source[key])) {\n        if (!isArrayLike(target[key])) {\n            target[key] = [];\n        }\n        if (isTypedArray(source[key])) {\n            var len = source[key].length;\n            if (target[key].length !== len) {\n                target[key] = new (source[key].constructor)(len);\n                copyArrShallow(target[key], source[key], len);\n            }\n        }\n        else {\n            var sourceArr = source[key];\n            var targetArr = target[key];\n            var len0 = sourceArr.length;\n            if (is2DArray(sourceArr)) {\n                var len1 = sourceArr[0].length;\n                for (var i = 0; i < len0; i++) {\n                    if (!targetArr[i]) {\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n                    }\n                    else {\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\n                    }\n                }\n            }\n            else {\n                copyArrShallow(targetArr, sourceArr, len0);\n            }\n            targetArr.length = sourceArr.length;\n        }\n    }\n    else {\n        target[key] = source[key];\n    }\n}\nfunction isValueSame(val1, val2) {\n    return val1 === val2\n        || isArrayLike(val1) && isArrayLike(val2) && is1DArraySame(val1, val2);\n}\nfunction is1DArraySame(arr0, arr1) {\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (arr0[i] !== arr1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction animateToShallow(animatable, topKey, animateObj, target, cfg, animationProps, animators, reverse) {\n    var targetKeys = keys(target);\n    var duration = cfg.duration;\n    var delay = cfg.delay;\n    var additive = cfg.additive;\n    var setToFinal = cfg.setToFinal;\n    var animateAll = !isObject(animationProps);\n    var existsAnimators = animatable.animators;\n    var animationKeys = [];\n    for (var k = 0; k < targetKeys.length; k++) {\n        var innerKey = targetKeys[k];\n        var targetVal = target[innerKey];\n        if (targetVal != null && animateObj[innerKey] != null\n            && (animateAll || animationProps[innerKey])) {\n            if (isObject(targetVal)\n                && !isArrayLike(targetVal)\n                && !isGradientObject(targetVal)) {\n                if (topKey) {\n                    if (!reverse) {\n                        animateObj[innerKey] = targetVal;\n                        animatable.updateDuringAnimation(topKey);\n                    }\n                    continue;\n                }\n                animateToShallow(animatable, innerKey, animateObj[innerKey], targetVal, cfg, animationProps && animationProps[innerKey], animators, reverse);\n            }\n            else {\n                animationKeys.push(innerKey);\n            }\n        }\n        else if (!reverse) {\n            animateObj[innerKey] = targetVal;\n            animatable.updateDuringAnimation(topKey);\n            animationKeys.push(innerKey);\n        }\n    }\n    var keyLen = animationKeys.length;\n    if (!additive && keyLen) {\n        for (var i = 0; i < existsAnimators.length; i++) {\n            var animator = existsAnimators[i];\n            if (animator.targetName === topKey) {\n                var allAborted = animator.stopTracks(animationKeys);\n                if (allAborted) {\n                    var idx = indexOf(existsAnimators, animator);\n                    existsAnimators.splice(idx, 1);\n                }\n            }\n        }\n    }\n    if (!cfg.force) {\n        animationKeys = filter(animationKeys, function (key) { return !isValueSame(target[key], animateObj[key]); });\n        keyLen = animationKeys.length;\n    }\n    if (keyLen > 0\n        || (cfg.force && !animators.length)) {\n        var revertedSource = void 0;\n        var reversedTarget = void 0;\n        var sourceClone = void 0;\n        if (reverse) {\n            reversedTarget = {};\n            if (setToFinal) {\n                revertedSource = {};\n            }\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                reversedTarget[innerKey] = animateObj[innerKey];\n                if (setToFinal) {\n                    revertedSource[innerKey] = target[innerKey];\n                }\n                else {\n                    animateObj[innerKey] = target[innerKey];\n                }\n            }\n        }\n        else if (setToFinal) {\n            sourceClone = {};\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                sourceClone[innerKey] = cloneValue(animateObj[innerKey]);\n                copyValue(animateObj, target, innerKey);\n            }\n        }\n        var animator = new Animator(animateObj, false, false, additive ? filter(existsAnimators, function (animator) { return animator.targetName === topKey; }) : null);\n        animator.targetName = topKey;\n        if (cfg.scope) {\n            animator.scope = cfg.scope;\n        }\n        if (setToFinal && revertedSource) {\n            animator.whenWithKeys(0, revertedSource, animationKeys);\n        }\n        if (sourceClone) {\n            animator.whenWithKeys(0, sourceClone, animationKeys);\n        }\n        animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animationKeys).delay(delay || 0);\n        animatable.addAnimator(animator, topKey);\n        animators.push(animator);\n    }\n}\nexport default Element;\n","import { __extends } from \"tslib\";\nimport * as util from './core/util.js';\nimport * as vec2 from './core/vector.js';\nimport Draggable from './mixin/Draggable.js';\nimport Eventful from './core/Eventful.js';\nimport * as eventTool from './core/event.js';\nimport { GestureMgr } from './core/GestureMgr.js';\nimport BoundingRect from './core/BoundingRect.js';\nvar SILENT = 'silent';\nfunction makeEventPacket(eveType, targetInfo, event) {\n    return {\n        type: eveType,\n        event: event,\n        target: targetInfo.target,\n        topTarget: targetInfo.topTarget,\n        cancelBubble: false,\n        offsetX: event.zrX,\n        offsetY: event.zrY,\n        gestureEvent: event.gestureEvent,\n        pinchX: event.pinchX,\n        pinchY: event.pinchY,\n        pinchScale: event.pinchScale,\n        wheelDelta: event.zrDelta,\n        zrByTouch: event.zrByTouch,\n        which: event.which,\n        stop: stopEvent\n    };\n}\nfunction stopEvent() {\n    eventTool.stop(this.event);\n}\nvar EmptyProxy = (function (_super) {\n    __extends(EmptyProxy, _super);\n    function EmptyProxy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handler = null;\n        return _this;\n    }\n    EmptyProxy.prototype.dispose = function () { };\n    EmptyProxy.prototype.setCursor = function () { };\n    return EmptyProxy;\n}(Eventful));\nvar HoveredResult = (function () {\n    function HoveredResult(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return HoveredResult;\n}());\nvar handlerNames = [\n    'click', 'dblclick', 'mousewheel', 'mouseout',\n    'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n];\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar Handler = (function (_super) {\n    __extends(Handler, _super);\n    function Handler(storage, painter, proxy, painterRoot, pointerSize) {\n        var _this = _super.call(this) || this;\n        _this._hovered = new HoveredResult(0, 0);\n        _this.storage = storage;\n        _this.painter = painter;\n        _this.painterRoot = painterRoot;\n        _this._pointerSize = pointerSize;\n        proxy = proxy || new EmptyProxy();\n        _this.proxy = null;\n        _this.setHandlerProxy(proxy);\n        _this._draggingMgr = new Draggable(_this);\n        return _this;\n    }\n    Handler.prototype.setHandlerProxy = function (proxy) {\n        if (this.proxy) {\n            this.proxy.dispose();\n        }\n        if (proxy) {\n            util.each(handlerNames, function (name) {\n                proxy.on && proxy.on(name, this[name], this);\n            }, this);\n            proxy.handler = this;\n        }\n        this.proxy = proxy;\n    };\n    Handler.prototype.mousemove = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var lastHovered = this._hovered;\n        var lastHoveredTarget = lastHovered.target;\n        if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n            lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n            lastHoveredTarget = lastHovered.target;\n        }\n        var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n        var hoveredTarget = hovered.target;\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n        if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(lastHovered, 'mouseout', event);\n        }\n        this.dispatchToElement(hovered, 'mousemove', event);\n        if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(hovered, 'mouseover', event);\n        }\n    };\n    Handler.prototype.mouseout = function (event) {\n        var eventControl = event.zrEventControl;\n        if (eventControl !== 'only_globalout') {\n            this.dispatchToElement(this._hovered, 'mouseout', event);\n        }\n        if (eventControl !== 'no_globalout') {\n            this.trigger('globalout', { type: 'globalout', event: event });\n        }\n    };\n    Handler.prototype.resize = function () {\n        this._hovered = new HoveredResult(0, 0);\n    };\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\n        var handler = this[eventName];\n        handler && handler.call(this, eventArgs);\n    };\n    Handler.prototype.dispose = function () {\n        this.proxy.dispose();\n        this.storage = null;\n        this.proxy = null;\n        this.painter = null;\n    };\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(cursorStyle);\n    };\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n        targetInfo = targetInfo || {};\n        var el = targetInfo.target;\n        if (el && el.silent) {\n            return;\n        }\n        var eventKey = ('on' + eventName);\n        var eventPacket = makeEventPacket(eventName, targetInfo, event);\n        while (el) {\n            el[eventKey]\n                && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n            el.trigger(eventName, eventPacket);\n            el = el.__hostTarget ? el.__hostTarget : el.parent;\n            if (eventPacket.cancelBubble) {\n                break;\n            }\n        }\n        if (!eventPacket.cancelBubble) {\n            this.trigger(eventName, eventPacket);\n            if (this.painter && this.painter.eachOtherLayer) {\n                this.painter.eachOtherLayer(function (layer) {\n                    if (typeof (layer[eventKey]) === 'function') {\n                        layer[eventKey].call(layer, eventPacket);\n                    }\n                    if (layer.trigger) {\n                        layer.trigger(eventName, eventPacket);\n                    }\n                });\n            }\n        }\n    };\n    Handler.prototype.findHover = function (x, y, exclude) {\n        var list = this.storage.getDisplayList();\n        var out = new HoveredResult(x, y);\n        setHoverTarget(list, out, x, y, exclude);\n        if (this._pointerSize && !out.target) {\n            var candidates = [];\n            var pointerSize = this._pointerSize;\n            var targetSizeHalf = pointerSize / 2;\n            var pointerRect = new BoundingRect(x - targetSizeHalf, y - targetSizeHalf, pointerSize, pointerSize);\n            for (var i = list.length - 1; i >= 0; i--) {\n                var el = list[i];\n                if (el !== exclude\n                    && !el.ignore\n                    && !el.ignoreCoarsePointer\n                    && (!el.parent || !el.parent.ignoreCoarsePointer)) {\n                    tmpRect.copy(el.getBoundingRect());\n                    if (el.transform) {\n                        tmpRect.applyTransform(el.transform);\n                    }\n                    if (tmpRect.intersect(pointerRect)) {\n                        candidates.push(el);\n                    }\n                }\n            }\n            if (candidates.length) {\n                var rStep = 4;\n                var thetaStep = Math.PI / 12;\n                var PI2 = Math.PI * 2;\n                for (var r = 0; r < targetSizeHalf; r += rStep) {\n                    for (var theta = 0; theta < PI2; theta += thetaStep) {\n                        var x1 = x + r * Math.cos(theta);\n                        var y1 = y + r * Math.sin(theta);\n                        setHoverTarget(candidates, out, x1, y1, exclude);\n                        if (out.target) {\n                            return out;\n                        }\n                    }\n                }\n            }\n        }\n        return out;\n    };\n    Handler.prototype.processGesture = function (event, stage) {\n        if (!this._gestureMgr) {\n            this._gestureMgr = new GestureMgr();\n        }\n        var gestureMgr = this._gestureMgr;\n        stage === 'start' && gestureMgr.clear();\n        var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n        stage === 'end' && gestureMgr.clear();\n        if (gestureInfo) {\n            var type = gestureInfo.type;\n            event.gestureEvent = type;\n            var res = new HoveredResult();\n            res.target = gestureInfo.target;\n            this.dispatchToElement(res, type, gestureInfo.event);\n        }\n    };\n    return Handler;\n}(Eventful));\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n    Handler.prototype[name] = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var hovered;\n        var hoveredTarget;\n        if (name !== 'mouseup' || !isOutside) {\n            hovered = this.findHover(x, y);\n            hoveredTarget = hovered.target;\n        }\n        if (name === 'mousedown') {\n            this._downEl = hoveredTarget;\n            this._downPoint = [event.zrX, event.zrY];\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'mouseup') {\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'click') {\n            if (this._downEl !== this._upEl\n                || !this._downPoint\n                || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n                return;\n            }\n            this._downPoint = null;\n        }\n        this.dispatchToElement(hovered, name, event);\n    };\n});\nfunction isHover(displayable, x, y) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n        var el = displayable;\n        var isSilent = void 0;\n        var ignoreClip = false;\n        while (el) {\n            if (el.ignoreClip) {\n                ignoreClip = true;\n            }\n            if (!ignoreClip) {\n                var clipPath = el.getClipPath();\n                if (clipPath && !clipPath.contain(x, y)) {\n                    return false;\n                }\n                if (el.silent) {\n                    isSilent = true;\n                }\n            }\n            var hostEl = el.__hostTarget;\n            el = hostEl ? hostEl : el.parent;\n        }\n        return isSilent ? SILENT : true;\n    }\n    return false;\n}\nfunction setHoverTarget(list, out, x, y, exclude) {\n    for (var i = list.length - 1; i >= 0; i--) {\n        var el = list[i];\n        var hoverCheckResult = void 0;\n        if (el !== exclude\n            && !el.ignore\n            && (hoverCheckResult = isHover(el, x, y))) {\n            !out.topTarget && (out.topTarget = el);\n            if (hoverCheckResult !== SILENT) {\n                out.target = el;\n                break;\n            }\n        }\n    }\n}\nfunction isOutsideBoundary(handlerInstance, x, y) {\n    var painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\nexport default Handler;\n","import * as util from './core/util.js';\nimport timsort from './core/timsort.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nvar invalidZErrorLogged = false;\nfunction logInvalidZError() {\n    if (invalidZErrorLogged) {\n        return;\n    }\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n}\nfunction shapeCompareFunc(a, b) {\n    if (a.zlevel === b.zlevel) {\n        if (a.z === b.z) {\n            return a.z2 - b.z2;\n        }\n        return a.z - b.z;\n    }\n    return a.zlevel - b.zlevel;\n}\nvar Storage = (function () {\n    function Storage() {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        this.displayableSortFunc = shapeCompareFunc;\n    }\n    Storage.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._roots.length; i++) {\n            this._roots[i].traverse(cb, context);\n        }\n    };\n    Storage.prototype.getDisplayList = function (update, includeIgnore) {\n        includeIgnore = includeIgnore || false;\n        var displayList = this._displayList;\n        if (update || !displayList.length) {\n            this.updateDisplayList(includeIgnore);\n        }\n        return displayList;\n    };\n    Storage.prototype.updateDisplayList = function (includeIgnore) {\n        this._displayListLen = 0;\n        var roots = this._roots;\n        var displayList = this._displayList;\n        for (var i = 0, len = roots.length; i < len; i++) {\n            this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n        }\n        displayList.length = this._displayListLen;\n        timsort(displayList, shapeCompareFunc);\n    };\n    Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\n        if (el.ignore && !includeIgnore) {\n            return;\n        }\n        el.beforeUpdate();\n        el.update();\n        el.afterUpdate();\n        var userSetClipPath = el.getClipPath();\n        if (el.ignoreClip) {\n            clipPaths = null;\n        }\n        else if (userSetClipPath) {\n            if (clipPaths) {\n                clipPaths = clipPaths.slice();\n            }\n            else {\n                clipPaths = [];\n            }\n            var currentClipPath = userSetClipPath;\n            var parentClipPath = el;\n            while (currentClipPath) {\n                currentClipPath.parent = parentClipPath;\n                currentClipPath.updateTransform();\n                clipPaths.push(currentClipPath);\n                parentClipPath = currentClipPath;\n                currentClipPath = currentClipPath.getClipPath();\n            }\n        }\n        if (el.childrenRef) {\n            var children = el.childrenRef();\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                if (el.__dirty) {\n                    child.__dirty |= REDRAW_BIT;\n                }\n                this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n            }\n            el.__dirty = 0;\n        }\n        else {\n            var disp = el;\n            if (clipPaths && clipPaths.length) {\n                disp.__clipPaths = clipPaths;\n            }\n            else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\n                disp.__clipPaths = [];\n            }\n            if (isNaN(disp.z)) {\n                logInvalidZError();\n                disp.z = 0;\n            }\n            if (isNaN(disp.z2)) {\n                logInvalidZError();\n                disp.z2 = 0;\n            }\n            if (isNaN(disp.zlevel)) {\n                logInvalidZError();\n                disp.zlevel = 0;\n            }\n            this._displayList[this._displayListLen++] = disp;\n        }\n        var decalEl = el.getDecalElement && el.getDecalElement();\n        if (decalEl) {\n            this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);\n        }\n        var textGuide = el.getTextGuideLine();\n        if (textGuide) {\n            this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\n        }\n        var textEl = el.getTextContent();\n        if (textEl) {\n            this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\n        }\n    };\n    Storage.prototype.addRoot = function (el) {\n        if (el.__zr && el.__zr.storage === this) {\n            return;\n        }\n        this._roots.push(el);\n    };\n    Storage.prototype.delRoot = function (el) {\n        if (el instanceof Array) {\n            for (var i = 0, l = el.length; i < l; i++) {\n                this.delRoot(el[i]);\n            }\n            return;\n        }\n        var idx = util.indexOf(this._roots, el);\n        if (idx >= 0) {\n            this._roots.splice(idx, 1);\n        }\n    };\n    Storage.prototype.delAllRoots = function () {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        return;\n    };\n    Storage.prototype.getRoots = function () {\n        return this._roots;\n    };\n    Storage.prototype.dispose = function () {\n        this._displayList = null;\n        this._roots = null;\n    };\n    return Storage;\n}());\nexport default Storage;\n","import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful.js';\nimport requestAnimationFrame from './requestAnimationFrame.js';\nimport Animator from './Animator.js';\nexport function getTime() {\n    return new Date().getTime();\n}\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._head) {\n            this._head = this._tail = clip;\n        }\n        else {\n            this._tail.next = clip;\n            clip.prev = this._tail;\n            clip.next = null;\n            this._tail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._tail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += getTime() - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._head = this._tail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._head == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n","var easingFuncs = {\n    linear: function (k) {\n        return k;\n    },\n    quadraticIn: function (k) {\n        return k * k;\n    },\n    quadraticOut: function (k) {\n        return k * (2 - k);\n    },\n    quadraticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    },\n    cubicIn: function (k) {\n        return k * k * k;\n    },\n    cubicOut: function (k) {\n        return --k * k * k + 1;\n    },\n    cubicInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    quarticIn: function (k) {\n        return k * k * k * k;\n    },\n    quarticOut: function (k) {\n        return 1 - (--k * k * k * k);\n    },\n    quarticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    quinticIn: function (k) {\n        return k * k * k * k * k;\n    },\n    quinticOut: function (k) {\n        return --k * k * k * k * k + 1;\n    },\n    quinticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    sinusoidalIn: function (k) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    sinusoidalOut: function (k) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    sinusoidalInOut: function (k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    exponentialIn: function (k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    exponentialOut: function (k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    exponentialInOut: function (k) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n    circularIn: function (k) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    circularOut: function (k) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    circularInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return -0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    elasticIn: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return -(a * Math.pow(2, 10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    elasticOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, -10 * k)\n            * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    elasticInOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    backIn: function (k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    backOut: function (k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    backInOut: function (k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    bounceIn: function (k) {\n        return 1 - easingFuncs.bounceOut(1 - k);\n    },\n    bounceOut: function (k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        }\n        else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        }\n        else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    bounceInOut: function (k) {\n        if (k < 0.5) {\n            return easingFuncs.bounceIn(k * 2) * 0.5;\n        }\n        return easingFuncs.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\nexport default easingFuncs;\n","import easingFuncs from './easing.js';\nimport { isFunction, noop } from '../core/util.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nvar Clip = (function () {\n    function Clip(opts) {\n        this._inited = false;\n        this._startTime = 0;\n        this._pausedTime = 0;\n        this._paused = false;\n        this._life = opts.life || 1000;\n        this._delay = opts.delay || 0;\n        this.loop = opts.loop || false;\n        this.onframe = opts.onframe || noop;\n        this.ondestroy = opts.ondestroy || noop;\n        this.onrestart = opts.onrestart || noop;\n        opts.easing && this.setEasing(opts.easing);\n    }\n    Clip.prototype.step = function (globalTime, deltaTime) {\n        if (!this._inited) {\n            this._startTime = globalTime + this._delay;\n            this._inited = true;\n        }\n        if (this._paused) {\n            this._pausedTime += deltaTime;\n            return;\n        }\n        var life = this._life;\n        var elapsedTime = globalTime - this._startTime - this._pausedTime;\n        var percent = elapsedTime / life;\n        if (percent < 0) {\n            percent = 0;\n        }\n        percent = Math.min(percent, 1);\n        var easingFunc = this.easingFunc;\n        var schedule = easingFunc ? easingFunc(percent) : percent;\n        this.onframe(schedule);\n        if (percent === 1) {\n            if (this.loop) {\n                var remainder = elapsedTime % life;\n                this._startTime = globalTime - remainder;\n                this._pausedTime = 0;\n                this.onrestart();\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Clip.prototype.pause = function () {\n        this._paused = true;\n    };\n    Clip.prototype.resume = function () {\n        this._paused = false;\n    };\n    Clip.prototype.setEasing = function (easing) {\n        this.easing = easing;\n        this.easingFunc = isFunction(easing)\n            ? easing\n            : easingFuncs[easing] || createCubicEasingFunc(easing);\n    };\n    return Clip;\n}());\nexport default Clip;\n","import Clip from './Clip.js';\nimport * as color from '../tool/color.js';\nimport { eqNaN, extend, isArrayLike, isFunction, isGradientObject, isNumber, isString, keys, logError, map } from '../core/util.js';\nimport easingFuncs from './easing.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nimport { isLinearGradient, isRadialGradient } from '../svg/helper.js';\n;\nvar arraySlice = Array.prototype.slice;\nfunction interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n}\nfunction interpolate1DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n    return out;\n}\nfunction interpolate2DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n        }\n    }\n    return out;\n}\nfunction add1DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = p0[i] + p1[i] * sign;\n    }\n    return out;\n}\nfunction add2DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = p0[i][j] + p1[i][j] * sign;\n        }\n    }\n    return out;\n}\nfunction fillColorStops(val0, val1) {\n    var len0 = val0.length;\n    var len1 = val1.length;\n    var shorterArr = len0 > len1 ? val1 : val0;\n    var shorterLen = Math.min(len0, len1);\n    var last = shorterArr[shorterLen - 1] || { color: [0, 0, 0, 0], offset: 0 };\n    for (var i = shorterLen; i < Math.max(len0, len1); i++) {\n        shorterArr.push({\n            offset: last.offset,\n            color: last.color.slice()\n        });\n    }\n}\nfunction fillArray(val0, val1, arrDim) {\n    var arr0 = val0;\n    var arr1 = val1;\n    if (!arr0.push || !arr1.push) {\n        return;\n    }\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        var isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            arr0.length = arr1Len;\n        }\n        else {\n            for (var i = arr0Len; i < arr1Len; i++) {\n                arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n            }\n        }\n    }\n    var len2 = arr0[0] && arr0[0].length;\n    for (var i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i])) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (var j = 0; j < len2; j++) {\n                if (isNaN(arr0[i][j])) {\n                    arr0[i][j] = arr1[i][j];\n                }\n            }\n        }\n    }\n}\nexport function cloneValue(value) {\n    if (isArrayLike(value)) {\n        var len = value.length;\n        if (isArrayLike(value[0])) {\n            var ret = [];\n            for (var i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        }\n        return arraySlice.call(value);\n    }\n    return value;\n}\nfunction rgba2String(rgba) {\n    rgba[0] = Math.floor(rgba[0]) || 0;\n    rgba[1] = Math.floor(rgba[1]) || 0;\n    rgba[2] = Math.floor(rgba[2]) || 0;\n    rgba[3] = rgba[3] == null ? 1 : rgba[3];\n    return 'rgba(' + rgba.join(',') + ')';\n}\nfunction guessArrayDim(value) {\n    return isArrayLike(value && value[0]) ? 2 : 1;\n}\nvar VALUE_TYPE_NUMBER = 0;\nvar VALUE_TYPE_1D_ARRAY = 1;\nvar VALUE_TYPE_2D_ARRAY = 2;\nvar VALUE_TYPE_COLOR = 3;\nvar VALUE_TYPE_LINEAR_GRADIENT = 4;\nvar VALUE_TYPE_RADIAL_GRADIENT = 5;\nvar VALUE_TYPE_UNKOWN = 6;\nfunction isGradientValueType(valType) {\n    return valType === VALUE_TYPE_LINEAR_GRADIENT || valType === VALUE_TYPE_RADIAL_GRADIENT;\n}\nfunction isArrayValueType(valType) {\n    return valType === VALUE_TYPE_1D_ARRAY || valType === VALUE_TYPE_2D_ARRAY;\n}\nvar tmpRgba = [0, 0, 0, 0];\nvar Track = (function () {\n    function Track(propName) {\n        this.keyframes = [];\n        this.discrete = false;\n        this._invalid = false;\n        this._needsSort = false;\n        this._lastFr = 0;\n        this._lastFrP = 0;\n        this.propName = propName;\n    }\n    Track.prototype.isFinished = function () {\n        return this._finished;\n    };\n    Track.prototype.setFinished = function () {\n        this._finished = true;\n        if (this._additiveTrack) {\n            this._additiveTrack.setFinished();\n        }\n    };\n    Track.prototype.needsAnimate = function () {\n        return this.keyframes.length >= 1;\n    };\n    Track.prototype.getAdditiveTrack = function () {\n        return this._additiveTrack;\n    };\n    Track.prototype.addKeyframe = function (time, rawValue, easing) {\n        this._needsSort = true;\n        var keyframes = this.keyframes;\n        var len = keyframes.length;\n        var discrete = false;\n        var valType = VALUE_TYPE_UNKOWN;\n        var value = rawValue;\n        if (isArrayLike(rawValue)) {\n            var arrayDim = guessArrayDim(rawValue);\n            valType = arrayDim;\n            if (arrayDim === 1 && !isNumber(rawValue[0])\n                || arrayDim === 2 && !isNumber(rawValue[0][0])) {\n                discrete = true;\n            }\n        }\n        else {\n            if (isNumber(rawValue) && !eqNaN(rawValue)) {\n                valType = VALUE_TYPE_NUMBER;\n            }\n            else if (isString(rawValue)) {\n                if (!isNaN(+rawValue)) {\n                    valType = VALUE_TYPE_NUMBER;\n                }\n                else {\n                    var colorArray = color.parse(rawValue);\n                    if (colorArray) {\n                        value = colorArray;\n                        valType = VALUE_TYPE_COLOR;\n                    }\n                }\n            }\n            else if (isGradientObject(rawValue)) {\n                var parsedGradient = extend({}, value);\n                parsedGradient.colorStops = map(rawValue.colorStops, function (colorStop) { return ({\n                    offset: colorStop.offset,\n                    color: color.parse(colorStop.color)\n                }); });\n                if (isLinearGradient(rawValue)) {\n                    valType = VALUE_TYPE_LINEAR_GRADIENT;\n                }\n                else if (isRadialGradient(rawValue)) {\n                    valType = VALUE_TYPE_RADIAL_GRADIENT;\n                }\n                value = parsedGradient;\n            }\n        }\n        if (len === 0) {\n            this.valType = valType;\n        }\n        else if (valType !== this.valType || valType === VALUE_TYPE_UNKOWN) {\n            discrete = true;\n        }\n        this.discrete = this.discrete || discrete;\n        var kf = {\n            time: time,\n            value: value,\n            rawValue: rawValue,\n            percent: 0\n        };\n        if (easing) {\n            kf.easing = easing;\n            kf.easingFunc = isFunction(easing)\n                ? easing\n                : easingFuncs[easing] || createCubicEasingFunc(easing);\n        }\n        keyframes.push(kf);\n        return kf;\n    };\n    Track.prototype.prepare = function (maxTime, additiveTrack) {\n        var kfs = this.keyframes;\n        if (this._needsSort) {\n            kfs.sort(function (a, b) {\n                return a.time - b.time;\n            });\n        }\n        var valType = this.valType;\n        var kfsLen = kfs.length;\n        var lastKf = kfs[kfsLen - 1];\n        var isDiscrete = this.discrete;\n        var isArr = isArrayValueType(valType);\n        var isGradient = isGradientValueType(valType);\n        for (var i = 0; i < kfsLen; i++) {\n            var kf = kfs[i];\n            var value = kf.value;\n            var lastValue = lastKf.value;\n            kf.percent = kf.time / maxTime;\n            if (!isDiscrete) {\n                if (isArr && i !== kfsLen - 1) {\n                    fillArray(value, lastValue, valType);\n                }\n                else if (isGradient) {\n                    fillColorStops(value.colorStops, lastValue.colorStops);\n                }\n            }\n        }\n        if (!isDiscrete\n            && valType !== VALUE_TYPE_RADIAL_GRADIENT\n            && additiveTrack\n            && this.needsAnimate()\n            && additiveTrack.needsAnimate()\n            && valType === additiveTrack.valType\n            && !additiveTrack._finished) {\n            this._additiveTrack = additiveTrack;\n            var startValue = kfs[0].value;\n            for (var i = 0; i < kfsLen; i++) {\n                if (valType === VALUE_TYPE_NUMBER) {\n                    kfs[i].additiveValue = kfs[i].value - startValue;\n                }\n                else if (valType === VALUE_TYPE_COLOR) {\n                    kfs[i].additiveValue =\n                        add1DArray([], kfs[i].value, startValue, -1);\n                }\n                else if (isArrayValueType(valType)) {\n                    kfs[i].additiveValue = valType === VALUE_TYPE_1D_ARRAY\n                        ? add1DArray([], kfs[i].value, startValue, -1)\n                        : add2DArray([], kfs[i].value, startValue, -1);\n                }\n            }\n        }\n    };\n    Track.prototype.step = function (target, percent) {\n        if (this._finished) {\n            return;\n        }\n        if (this._additiveTrack && this._additiveTrack._finished) {\n            this._additiveTrack = null;\n        }\n        var isAdditive = this._additiveTrack != null;\n        var valueKey = isAdditive ? 'additiveValue' : 'value';\n        var valType = this.valType;\n        var keyframes = this.keyframes;\n        var kfsNum = keyframes.length;\n        var propName = this.propName;\n        var isValueColor = valType === VALUE_TYPE_COLOR;\n        var frameIdx;\n        var lastFrame = this._lastFr;\n        var mathMin = Math.min;\n        var frame;\n        var nextFrame;\n        if (kfsNum === 1) {\n            frame = nextFrame = keyframes[0];\n        }\n        else {\n            if (percent < 0) {\n                frameIdx = 0;\n            }\n            else if (percent < this._lastFrP) {\n                var start = mathMin(lastFrame + 1, kfsNum - 1);\n                for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n                    if (keyframes[frameIdx].percent <= percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx, kfsNum - 2);\n            }\n            else {\n                for (frameIdx = lastFrame; frameIdx < kfsNum; frameIdx++) {\n                    if (keyframes[frameIdx].percent > percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx - 1, kfsNum - 2);\n            }\n            nextFrame = keyframes[frameIdx + 1];\n            frame = keyframes[frameIdx];\n        }\n        if (!(frame && nextFrame)) {\n            return;\n        }\n        this._lastFr = frameIdx;\n        this._lastFrP = percent;\n        var interval = (nextFrame.percent - frame.percent);\n        var w = interval === 0 ? 1 : mathMin((percent - frame.percent) / interval, 1);\n        if (nextFrame.easingFunc) {\n            w = nextFrame.easingFunc(w);\n        }\n        var targetArr = isAdditive ? this._additiveValue\n            : (isValueColor ? tmpRgba : target[propName]);\n        if ((isArrayValueType(valType) || isValueColor) && !targetArr) {\n            targetArr = this._additiveValue = [];\n        }\n        if (this.discrete) {\n            target[propName] = w < 1 ? frame.rawValue : nextFrame.rawValue;\n        }\n        else if (isArrayValueType(valType)) {\n            valType === VALUE_TYPE_1D_ARRAY\n                ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w)\n                : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n        }\n        else if (isGradientValueType(valType)) {\n            var val = frame[valueKey];\n            var nextVal_1 = nextFrame[valueKey];\n            var isLinearGradient_1 = valType === VALUE_TYPE_LINEAR_GRADIENT;\n            target[propName] = {\n                type: isLinearGradient_1 ? 'linear' : 'radial',\n                x: interpolateNumber(val.x, nextVal_1.x, w),\n                y: interpolateNumber(val.y, nextVal_1.y, w),\n                colorStops: map(val.colorStops, function (colorStop, idx) {\n                    var nextColorStop = nextVal_1.colorStops[idx];\n                    return {\n                        offset: interpolateNumber(colorStop.offset, nextColorStop.offset, w),\n                        color: rgba2String(interpolate1DArray([], colorStop.color, nextColorStop.color, w))\n                    };\n                }),\n                global: nextVal_1.global\n            };\n            if (isLinearGradient_1) {\n                target[propName].x2 = interpolateNumber(val.x2, nextVal_1.x2, w);\n                target[propName].y2 = interpolateNumber(val.y2, nextVal_1.y2, w);\n            }\n            else {\n                target[propName].r = interpolateNumber(val.r, nextVal_1.r, w);\n            }\n        }\n        else if (isValueColor) {\n            interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n            if (!isAdditive) {\n                target[propName] = rgba2String(targetArr);\n            }\n        }\n        else {\n            var value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\n            if (isAdditive) {\n                this._additiveValue = value;\n            }\n            else {\n                target[propName] = value;\n            }\n        }\n        if (isAdditive) {\n            this._addToTarget(target);\n        }\n    };\n    Track.prototype._addToTarget = function (target) {\n        var valType = this.valType;\n        var propName = this.propName;\n        var additiveValue = this._additiveValue;\n        if (valType === VALUE_TYPE_NUMBER) {\n            target[propName] = target[propName] + additiveValue;\n        }\n        else if (valType === VALUE_TYPE_COLOR) {\n            color.parse(target[propName], tmpRgba);\n            add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\n            target[propName] = rgba2String(tmpRgba);\n        }\n        else if (valType === VALUE_TYPE_1D_ARRAY) {\n            add1DArray(target[propName], target[propName], additiveValue, 1);\n        }\n        else if (valType === VALUE_TYPE_2D_ARRAY) {\n            add2DArray(target[propName], target[propName], additiveValue, 1);\n        }\n    };\n    return Track;\n}());\nvar Animator = (function () {\n    function Animator(target, loop, allowDiscreteAnimation, additiveTo) {\n        this._tracks = {};\n        this._trackKeys = [];\n        this._maxTime = 0;\n        this._started = 0;\n        this._clip = null;\n        this._target = target;\n        this._loop = loop;\n        if (loop && additiveTo) {\n            logError('Can\\' use additive animation on looped animation.');\n            return;\n        }\n        this._additiveAnimators = additiveTo;\n        this._allowDiscrete = allowDiscreteAnimation;\n    }\n    Animator.prototype.getMaxTime = function () {\n        return this._maxTime;\n    };\n    Animator.prototype.getDelay = function () {\n        return this._delay;\n    };\n    Animator.prototype.getLoop = function () {\n        return this._loop;\n    };\n    Animator.prototype.getTarget = function () {\n        return this._target;\n    };\n    Animator.prototype.changeTarget = function (target) {\n        this._target = target;\n    };\n    Animator.prototype.when = function (time, props, easing) {\n        return this.whenWithKeys(time, props, keys(props), easing);\n    };\n    Animator.prototype.whenWithKeys = function (time, props, propNames, easing) {\n        var tracks = this._tracks;\n        for (var i = 0; i < propNames.length; i++) {\n            var propName = propNames[i];\n            var track = tracks[propName];\n            if (!track) {\n                track = tracks[propName] = new Track(propName);\n                var initialValue = void 0;\n                var additiveTrack = this._getAdditiveTrack(propName);\n                if (additiveTrack) {\n                    var addtiveTrackKfs = additiveTrack.keyframes;\n                    var lastFinalKf = addtiveTrackKfs[addtiveTrackKfs.length - 1];\n                    initialValue = lastFinalKf && lastFinalKf.value;\n                    if (additiveTrack.valType === VALUE_TYPE_COLOR && initialValue) {\n                        initialValue = rgba2String(initialValue);\n                    }\n                }\n                else {\n                    initialValue = this._target[propName];\n                }\n                if (initialValue == null) {\n                    continue;\n                }\n                if (time > 0) {\n                    track.addKeyframe(0, cloneValue(initialValue), easing);\n                }\n                this._trackKeys.push(propName);\n            }\n            track.addKeyframe(time, cloneValue(props[propName]), easing);\n        }\n        this._maxTime = Math.max(this._maxTime, time);\n        return this;\n    };\n    Animator.prototype.pause = function () {\n        this._clip.pause();\n        this._paused = true;\n    };\n    Animator.prototype.resume = function () {\n        this._clip.resume();\n        this._paused = false;\n    };\n    Animator.prototype.isPaused = function () {\n        return !!this._paused;\n    };\n    Animator.prototype.duration = function (duration) {\n        this._maxTime = duration;\n        this._force = true;\n        return this;\n    };\n    Animator.prototype._doneCallback = function () {\n        this._setTracksFinished();\n        this._clip = null;\n        var doneList = this._doneCbs;\n        if (doneList) {\n            var len = doneList.length;\n            for (var i = 0; i < len; i++) {\n                doneList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._abortedCallback = function () {\n        this._setTracksFinished();\n        var animation = this.animation;\n        var abortedList = this._abortedCbs;\n        if (animation) {\n            animation.removeClip(this._clip);\n        }\n        this._clip = null;\n        if (abortedList) {\n            for (var i = 0; i < abortedList.length; i++) {\n                abortedList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._setTracksFinished = function () {\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            tracks[tracksKeys[i]].setFinished();\n        }\n    };\n    Animator.prototype._getAdditiveTrack = function (trackName) {\n        var additiveTrack;\n        var additiveAnimators = this._additiveAnimators;\n        if (additiveAnimators) {\n            for (var i = 0; i < additiveAnimators.length; i++) {\n                var track = additiveAnimators[i].getTrack(trackName);\n                if (track) {\n                    additiveTrack = track;\n                }\n            }\n        }\n        return additiveTrack;\n    };\n    Animator.prototype.start = function (easing) {\n        if (this._started > 0) {\n            return;\n        }\n        this._started = 1;\n        var self = this;\n        var tracks = [];\n        var maxTime = this._maxTime || 0;\n        for (var i = 0; i < this._trackKeys.length; i++) {\n            var propName = this._trackKeys[i];\n            var track = this._tracks[propName];\n            var additiveTrack = this._getAdditiveTrack(propName);\n            var kfs = track.keyframes;\n            var kfsNum = kfs.length;\n            track.prepare(maxTime, additiveTrack);\n            if (track.needsAnimate()) {\n                if (!this._allowDiscrete && track.discrete) {\n                    var lastKf = kfs[kfsNum - 1];\n                    if (lastKf) {\n                        self._target[track.propName] = lastKf.rawValue;\n                    }\n                    track.setFinished();\n                }\n                else {\n                    tracks.push(track);\n                }\n            }\n        }\n        if (tracks.length || this._force) {\n            var clip = new Clip({\n                life: maxTime,\n                loop: this._loop,\n                delay: this._delay || 0,\n                onframe: function (percent) {\n                    self._started = 2;\n                    var additiveAnimators = self._additiveAnimators;\n                    if (additiveAnimators) {\n                        var stillHasAdditiveAnimator = false;\n                        for (var i = 0; i < additiveAnimators.length; i++) {\n                            if (additiveAnimators[i]._clip) {\n                                stillHasAdditiveAnimator = true;\n                                break;\n                            }\n                        }\n                        if (!stillHasAdditiveAnimator) {\n                            self._additiveAnimators = null;\n                        }\n                    }\n                    for (var i = 0; i < tracks.length; i++) {\n                        tracks[i].step(self._target, percent);\n                    }\n                    var onframeList = self._onframeCbs;\n                    if (onframeList) {\n                        for (var i = 0; i < onframeList.length; i++) {\n                            onframeList[i](self._target, percent);\n                        }\n                    }\n                },\n                ondestroy: function () {\n                    self._doneCallback();\n                }\n            });\n            this._clip = clip;\n            if (this.animation) {\n                this.animation.addClip(clip);\n            }\n            if (easing) {\n                clip.setEasing(easing);\n            }\n        }\n        else {\n            this._doneCallback();\n        }\n        return this;\n    };\n    Animator.prototype.stop = function (forwardToLast) {\n        if (!this._clip) {\n            return;\n        }\n        var clip = this._clip;\n        if (forwardToLast) {\n            clip.onframe(1);\n        }\n        this._abortedCallback();\n    };\n    Animator.prototype.delay = function (time) {\n        this._delay = time;\n        return this;\n    };\n    Animator.prototype.during = function (cb) {\n        if (cb) {\n            if (!this._onframeCbs) {\n                this._onframeCbs = [];\n            }\n            this._onframeCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.done = function (cb) {\n        if (cb) {\n            if (!this._doneCbs) {\n                this._doneCbs = [];\n            }\n            this._doneCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.aborted = function (cb) {\n        if (cb) {\n            if (!this._abortedCbs) {\n                this._abortedCbs = [];\n            }\n            this._abortedCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.getClip = function () {\n        return this._clip;\n    };\n    Animator.prototype.getTrack = function (propName) {\n        return this._tracks[propName];\n    };\n    Animator.prototype.getTracks = function () {\n        var _this = this;\n        return map(this._trackKeys, function (key) { return _this._tracks[key]; });\n    };\n    Animator.prototype.stopTracks = function (propNames, forwardToLast) {\n        if (!propNames.length || !this._clip) {\n            return true;\n        }\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < propNames.length; i++) {\n            var track = tracks[propNames[i]];\n            if (track && !track.isFinished()) {\n                if (forwardToLast) {\n                    track.step(this._target, 1);\n                }\n                else if (this._started === 1) {\n                    track.step(this._target, 0);\n                }\n                track.setFinished();\n            }\n        }\n        var allAborted = true;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            if (!tracks[tracksKeys[i]].isFinished()) {\n                allAborted = false;\n                break;\n            }\n        }\n        if (allAborted) {\n            this._abortedCallback();\n        }\n        return allAborted;\n    };\n    Animator.prototype.saveTo = function (target, trackKeys, firstOrLast) {\n        if (!target) {\n            return;\n        }\n        trackKeys = trackKeys || this._trackKeys;\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track || track.isFinished()) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            var kf = kfs[firstOrLast ? 0 : kfs.length - 1];\n            if (kf) {\n                target[propName] = cloneValue(kf.rawValue);\n            }\n        }\n    };\n    Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\n        trackKeys = trackKeys || keys(finalProps);\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            if (kfs.length > 1) {\n                var lastKf = kfs.pop();\n                track.addKeyframe(lastKf.time, finalProps[propName]);\n                track.prepare(this._maxTime, track.getAdditiveTrack());\n            }\n        }\n    };\n    return Animator;\n}());\nexport default Animator;\n","import { cubicAt, cubicRootAt } from '../core/curve.js';\nimport { trim } from '../core/util.js';\nvar regexp = /cubic-bezier\\(([0-9,\\.e ]+)\\)/;\nexport function createCubicEasingFunc(cubicEasingStr) {\n    var cubic = cubicEasingStr && regexp.exec(cubicEasingStr);\n    if (cubic) {\n        var points = cubic[1].split(',');\n        var a_1 = +trim(points[0]);\n        var b_1 = +trim(points[1]);\n        var c_1 = +trim(points[2]);\n        var d_1 = +trim(points[3]);\n        if (isNaN(a_1 + b_1 + c_1 + d_1)) {\n            return;\n        }\n        var roots_1 = [];\n        return function (p) {\n            return p <= 0\n                ? 0 : p >= 1\n                ? 1\n                : cubicRootAt(0, a_1, c_1, 1, p, roots_1) && cubicAt(0, b_1, d_1, 1, roots_1[0]);\n        };\n    }\n}\n","import env from '../core/env.js';\nvar requestAnimationFrame;\nrequestAnimationFrame = (env.hasGlobalWindow\n    && ((window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n        || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame)) || function (func) {\n    return setTimeout(func, 16);\n};\nexport default requestAnimationFrame;\n","import { __extends } from \"tslib\";\nimport * as util from '../core/util.js';\nimport { devicePixelRatio } from '../config.js';\nimport Eventful from '../core/Eventful.js';\nimport { getCanvasGradient } from './helper.js';\nimport { createCanvasPattern } from './graphic.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { platformApi } from '../core/platform.js';\nfunction createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            util.disableUserSelect(dom);\n            dom.onselectstart = function () { return false; };\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.painter = painter;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDRAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDRAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    var shouldCache = clearColor.global || (clearColor.__width === width\n                        && clearColor.__height === height);\n                    clearColorGradientOrPattern = shouldCache\n                        && clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                    clearColor.__width = width;\n                    clearColor.__height = height;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColor.scaleX = clearColor.scaleX || dpr;\n                    clearColor.scaleY = clearColor.scaleY || dpr;\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.__painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config.js';\nimport * as util from '../core/util.js';\nimport Layer from './Layer.js';\nimport requestAnimationFrame from '../animation/requestAnimationFrame.js';\nimport env from '../core/env.js';\nimport { brush, brushSingle } from './graphic.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { getSize } from './helper.js';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            util.disableUserSelect(root);\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = getSize(root, 0, opts);\n            this._height = getSize(root, 1, opts);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('ZLevel ' + zlevel + ' has been used already');\n            }\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            }\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.__painter = this;\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDRAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            var root = this.root;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","import { isArray, isNumber, map } from '../core/util.js';\nexport function normalizeLineDash(lineType, lineWidth) {\n    if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\n        return null;\n    }\n    return lineType === 'dashed'\n        ? [4 * lineWidth, 2 * lineWidth]\n        : lineType === 'dotted'\n            ? [lineWidth]\n            : isNumber(lineType)\n                ? [lineType] : isArray(lineType) ? lineType : null;\n}\nexport function getLineDash(el) {\n    var style = el.style;\n    var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n    var lineDashOffset = style.lineDashOffset;\n    if (lineDash) {\n        var lineScale_1 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\n        if (lineScale_1 && lineScale_1 !== 1) {\n            lineDash = map(lineDash, function (rawVal) {\n                return rawVal / lineScale_1;\n            });\n            lineDashOffset /= lineScale_1;\n        }\n    }\n    return [lineDash, lineDashOffset];\n}\n","import { DEFAULT_COMMON_STYLE } from '../graphic/Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { createOrUpdateImage, isImageReady } from '../graphic/helper/image.js';\nimport { getCanvasGradient, isClipPathChanged } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { RADIAN_TO_DEGREE } from '../core/util.js';\nimport { getLineDash } from './dashStyle.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT } from '../graphic/constants.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nvar pathProxyForDraw = new PathProxy(true);\nfunction styleHasStroke(style) {\n    var stroke = style.stroke;\n    return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n}\nfunction isValidStrokeFillStyle(strokeOrFill) {\n    return typeof strokeOrFill === 'string' && strokeOrFill !== 'none';\n}\nfunction styleHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== 'none';\n}\nfunction doFillPath(ctx, style) {\n    if (style.fillOpacity != null && style.fillOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.fillOpacity * style.opacity;\n        ctx.fill();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.fill();\n    }\n}\nfunction doStrokePath(ctx, style) {\n    if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.strokeOpacity * style.opacity;\n        ctx.stroke();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.stroke();\n    }\n}\nexport function createCanvasPattern(ctx, pattern, el) {\n    var image = createOrUpdateImage(pattern.image, pattern.__image, el);\n    if (isImageReady(image)) {\n        var canvasPattern = ctx.createPattern(image, pattern.repeat || 'repeat');\n        if (typeof DOMMatrix === 'function'\n            && canvasPattern\n            && canvasPattern.setTransform) {\n            var matrix = new DOMMatrix();\n            matrix.translateSelf((pattern.x || 0), (pattern.y || 0));\n            matrix.rotateSelf(0, 0, (pattern.rotation || 0) * RADIAN_TO_DEGREE);\n            matrix.scaleSelf((pattern.scaleX || 1), (pattern.scaleY || 1));\n            canvasPattern.setTransform(matrix);\n        }\n        return canvasPattern;\n    }\n}\nfunction brushPath(ctx, el, style, inBatch) {\n    var _a;\n    var hasStroke = styleHasStroke(style);\n    var hasFill = styleHasFill(style);\n    var strokePercent = style.strokePercent;\n    var strokePart = strokePercent < 1;\n    var firstDraw = !el.path;\n    if ((!el.silent || strokePart) && firstDraw) {\n        el.createPathProxy();\n    }\n    var path = el.path || pathProxyForDraw;\n    var dirtyFlag = el.__dirty;\n    if (!inBatch) {\n        var fill = style.fill;\n        var stroke = style.stroke;\n        var hasFillGradient = hasFill && !!fill.colorStops;\n        var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n        var hasFillPattern = hasFill && !!fill.image;\n        var hasStrokePattern = hasStroke && !!stroke.image;\n        var fillGradient = void 0;\n        var strokeGradient = void 0;\n        var fillPattern = void 0;\n        var strokePattern = void 0;\n        var rect = void 0;\n        if (hasFillGradient || hasStrokeGradient) {\n            rect = el.getBoundingRect();\n        }\n        if (hasFillGradient) {\n            fillGradient = dirtyFlag\n                ? getCanvasGradient(ctx, fill, rect)\n                : el.__canvasFillGradient;\n            el.__canvasFillGradient = fillGradient;\n        }\n        if (hasStrokeGradient) {\n            strokeGradient = dirtyFlag\n                ? getCanvasGradient(ctx, stroke, rect)\n                : el.__canvasStrokeGradient;\n            el.__canvasStrokeGradient = strokeGradient;\n        }\n        if (hasFillPattern) {\n            fillPattern = (dirtyFlag || !el.__canvasFillPattern)\n                ? createCanvasPattern(ctx, fill, el)\n                : el.__canvasFillPattern;\n            el.__canvasFillPattern = fillPattern;\n        }\n        if (hasStrokePattern) {\n            strokePattern = (dirtyFlag || !el.__canvasStrokePattern)\n                ? createCanvasPattern(ctx, stroke, el)\n                : el.__canvasStrokePattern;\n            el.__canvasStrokePattern = fillPattern;\n        }\n        if (hasFillGradient) {\n            ctx.fillStyle = fillGradient;\n        }\n        else if (hasFillPattern) {\n            if (fillPattern) {\n                ctx.fillStyle = fillPattern;\n            }\n            else {\n                hasFill = false;\n            }\n        }\n        if (hasStrokeGradient) {\n            ctx.strokeStyle = strokeGradient;\n        }\n        else if (hasStrokePattern) {\n            if (strokePattern) {\n                ctx.strokeStyle = strokePattern;\n            }\n            else {\n                hasStroke = false;\n            }\n        }\n    }\n    var scale = el.getGlobalScale();\n    path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\n    var lineDash;\n    var lineDashOffset;\n    if (ctx.setLineDash && style.lineDash) {\n        _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n    }\n    var needsRebuild = true;\n    if (firstDraw || (dirtyFlag & SHAPE_CHANGED_BIT)) {\n        path.setDPR(ctx.dpr);\n        if (strokePart) {\n            path.setContext(null);\n        }\n        else {\n            path.setContext(ctx);\n            needsRebuild = false;\n        }\n        path.reset();\n        el.buildPath(path, el.shape, inBatch);\n        path.toStatic();\n        el.pathUpdated();\n    }\n    if (needsRebuild) {\n        path.rebuildPath(ctx, strokePart ? strokePercent : 1);\n    }\n    if (lineDash) {\n        ctx.setLineDash(lineDash);\n        ctx.lineDashOffset = lineDashOffset;\n    }\n    if (!inBatch) {\n        if (style.strokeFirst) {\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n        }\n        else {\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n        }\n    }\n    if (lineDash) {\n        ctx.setLineDash([]);\n    }\n}\nfunction brushImage(ctx, el, style) {\n    var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\n    if (!image || !isImageReady(image)) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = el.getWidth();\n    var height = el.getHeight();\n    var aspect = image.width / image.height;\n    if (width == null && height != null) {\n        width = height * aspect;\n    }\n    else if (height == null && width != null) {\n        height = width / aspect;\n    }\n    else if (width == null && height == null) {\n        width = image.width;\n        height = image.height;\n    }\n    if (style.sWidth && style.sHeight) {\n        var sx = style.sx || 0;\n        var sy = style.sy || 0;\n        ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    }\n    else if (style.sx && style.sy) {\n        var sx = style.sx;\n        var sy = style.sy;\n        var sWidth = width - sx;\n        var sHeight = height - sy;\n        ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    }\n    else {\n        ctx.drawImage(image, x, y, width, height);\n    }\n}\nfunction brushText(ctx, el, style) {\n    var _a;\n    var text = style.text;\n    text != null && (text += '');\n    if (text) {\n        ctx.font = style.font || DEFAULT_FONT;\n        ctx.textAlign = style.textAlign;\n        ctx.textBaseline = style.textBaseline;\n        var lineDash = void 0;\n        var lineDashOffset = void 0;\n        if (ctx.setLineDash && style.lineDash) {\n            _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n        }\n        if (lineDash) {\n            ctx.setLineDash(lineDash);\n            ctx.lineDashOffset = lineDashOffset;\n        }\n        if (style.strokeFirst) {\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n        }\n        else {\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n        }\n        if (lineDash) {\n            ctx.setLineDash([]);\n        }\n    }\n}\nvar SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nvar STROKE_PROPS = [\n    ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]\n];\nfunction bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\n    var styleChanged = false;\n    if (!forceSetAll) {\n        prevStyle = prevStyle || {};\n        if (style === prevStyle) {\n            return false;\n        }\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n        var opacity = Math.max(Math.min(style.opacity, 1), 0);\n        ctx.globalAlpha = isNaN(opacity) ? DEFAULT_COMMON_STYLE.opacity : opacity;\n    }\n    if (forceSetAll || style.blend !== prevStyle.blend) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\n    }\n    for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\n        var propName = SHADOW_NUMBER_PROPS[i];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = ctx.dpr * (style[propName] || 0);\n        }\n    }\n    if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\n    }\n    return styleChanged;\n}\nfunction bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\n    var style = getStyle(el, scope.inHover);\n    var prevStyle = forceSetAll\n        ? null\n        : (prevEl && getStyle(prevEl, scope.inHover) || {});\n    if (style === prevStyle) {\n        return false;\n    }\n    var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\n    if (forceSetAll || style.fill !== prevStyle.fill) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.fill) && (ctx.fillStyle = style.fill);\n    }\n    if (forceSetAll || style.stroke !== prevStyle.stroke) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.stroke) && (ctx.strokeStyle = style.stroke);\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n    if (el.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var newLineWidth = lineWidth / ((style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1);\n        if (ctx.lineWidth !== newLineWidth) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx.lineWidth = newLineWidth;\n        }\n    }\n    for (var i = 0; i < STROKE_PROPS.length; i++) {\n        var prop = STROKE_PROPS[i];\n        var propName = prop[0];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = style[propName] || prop[1];\n        }\n    }\n    return styleChanged;\n}\nfunction bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\n    return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\n}\nfunction setContextTransform(ctx, el) {\n    var m = el.transform;\n    var dpr = ctx.dpr || 1;\n    if (m) {\n        ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n    }\n    else {\n        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    }\n}\nfunction updateClipStatus(clipPaths, ctx, scope) {\n    var allClipped = false;\n    for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        allClipped = allClipped || clipPath.isZeroArea();\n        setContextTransform(ctx, clipPath);\n        ctx.beginPath();\n        clipPath.buildPath(ctx, clipPath.shape);\n        ctx.clip();\n    }\n    scope.allClipped = allClipped;\n}\nfunction isTransformChanged(m0, m1) {\n    if (m0 && m1) {\n        return m0[0] !== m1[0]\n            || m0[1] !== m1[1]\n            || m0[2] !== m1[2]\n            || m0[3] !== m1[3]\n            || m0[4] !== m1[4]\n            || m0[5] !== m1[5];\n    }\n    else if (!m0 && !m1) {\n        return false;\n    }\n    return true;\n}\nvar DRAW_TYPE_PATH = 1;\nvar DRAW_TYPE_IMAGE = 2;\nvar DRAW_TYPE_TEXT = 3;\nvar DRAW_TYPE_INCREMENTAL = 4;\nfunction canPathBatch(style) {\n    var hasFill = styleHasFill(style);\n    var hasStroke = styleHasStroke(style);\n    return !(style.lineDash\n        || !(+hasFill ^ +hasStroke)\n        || (hasFill && typeof style.fill !== 'string')\n        || (hasStroke && typeof style.stroke !== 'string')\n        || style.strokePercent < 1\n        || style.strokeOpacity < 1\n        || style.fillOpacity < 1);\n}\nfunction flushPathDrawn(ctx, scope) {\n    scope.batchFill && ctx.fill();\n    scope.batchStroke && ctx.stroke();\n    scope.batchFill = '';\n    scope.batchStroke = '';\n}\nfunction getStyle(el, inHover) {\n    return inHover ? (el.__hoverStyle || el.style) : el.style;\n}\nexport function brushSingle(ctx, el) {\n    brush(ctx, el, { inHover: false, viewWidth: 0, viewHeight: 0 }, true);\n}\nexport function brush(ctx, el, scope, isLast) {\n    var m = el.transform;\n    if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {\n        el.__dirty &= ~REDRAW_BIT;\n        el.__isRendered = false;\n        return;\n    }\n    var clipPaths = el.__clipPaths;\n    var prevElClipPaths = scope.prevElClipPaths;\n    var forceSetTransform = false;\n    var forceSetStyle = false;\n    if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n        if (prevElClipPaths && prevElClipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.restore();\n            forceSetStyle = forceSetTransform = true;\n            scope.prevElClipPaths = null;\n            scope.allClipped = false;\n            scope.prevEl = null;\n        }\n        if (clipPaths && clipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.save();\n            updateClipStatus(clipPaths, ctx, scope);\n            forceSetTransform = true;\n        }\n        scope.prevElClipPaths = clipPaths;\n    }\n    if (scope.allClipped) {\n        el.__isRendered = false;\n        return;\n    }\n    el.beforeBrush && el.beforeBrush();\n    el.innerBeforeBrush();\n    var prevEl = scope.prevEl;\n    if (!prevEl) {\n        forceSetStyle = forceSetTransform = true;\n    }\n    var canBatchPath = el instanceof Path\n        && el.autoBatch\n        && canPathBatch(el.style);\n    if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\n        flushPathDrawn(ctx, scope);\n        setContextTransform(ctx, el);\n    }\n    else if (!canBatchPath) {\n        flushPathDrawn(ctx, scope);\n    }\n    var style = getStyle(el, scope.inHover);\n    if (el instanceof Path) {\n        if (scope.lastDrawType !== DRAW_TYPE_PATH) {\n            forceSetStyle = true;\n            scope.lastDrawType = DRAW_TYPE_PATH;\n        }\n        bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n        if (!canBatchPath || (!scope.batchFill && !scope.batchStroke)) {\n            ctx.beginPath();\n        }\n        brushPath(ctx, el, style, canBatchPath);\n        if (canBatchPath) {\n            scope.batchFill = style.fill || '';\n            scope.batchStroke = style.stroke || '';\n        }\n    }\n    else {\n        if (el instanceof TSpan) {\n            if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_TEXT;\n            }\n            bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushText(ctx, el, style);\n        }\n        else if (el instanceof ZRImage) {\n            if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_IMAGE;\n            }\n            bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushImage(ctx, el, style);\n        }\n        else if (el.getTemporalDisplayables) {\n            if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\n            }\n            brushIncremental(ctx, el, scope);\n        }\n    }\n    if (canBatchPath && isLast) {\n        flushPathDrawn(ctx, scope);\n    }\n    el.innerAfterBrush();\n    el.afterBrush && el.afterBrush();\n    scope.prevEl = el;\n    el.__dirty = 0;\n    el.__isRendered = true;\n}\nfunction brushIncremental(ctx, el, scope) {\n    var displayables = el.getDisplayables();\n    var temporalDisplayables = el.getTemporalDisplayables();\n    ctx.save();\n    var innerScope = {\n        prevElClipPaths: null,\n        prevEl: null,\n        allClipped: false,\n        viewWidth: scope.viewWidth,\n        viewHeight: scope.viewHeight,\n        inHover: scope.inHover\n    };\n    var i;\n    var len;\n    for (i = el.getCursor(), len = displayables.length; i < len; i++) {\n        var displayable = displayables[i];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i === len - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {\n        var displayable = temporalDisplayables[i_1];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    el.clearTemporalDisplayables();\n    el.notClear = true;\n    ctx.restore();\n}\n","function isSafeNum(num) {\n    return isFinite(num);\n}\nexport function createLinearGradient(ctx, obj, rect) {\n    var x = obj.x == null ? 0 : obj.x;\n    var x2 = obj.x2 == null ? 1 : obj.x2;\n    var y = obj.y == null ? 0 : obj.y;\n    var y2 = obj.y2 == null ? 0 : obj.y2;\n    if (!obj.global) {\n        x = x * rect.width + rect.x;\n        x2 = x2 * rect.width + rect.x;\n        y = y * rect.height + rect.y;\n        y2 = y2 * rect.height + rect.y;\n    }\n    x = isSafeNum(x) ? x : 0;\n    x2 = isSafeNum(x2) ? x2 : 1;\n    y = isSafeNum(y) ? y : 0;\n    y2 = isSafeNum(y2) ? y2 : 0;\n    var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n    return canvasGradient;\n}\nexport function createRadialGradient(ctx, obj, rect) {\n    var width = rect.width;\n    var height = rect.height;\n    var min = Math.min(width, height);\n    var x = obj.x == null ? 0.5 : obj.x;\n    var y = obj.y == null ? 0.5 : obj.y;\n    var r = obj.r == null ? 0.5 : obj.r;\n    if (!obj.global) {\n        x = x * width + rect.x;\n        y = y * height + rect.y;\n        r = r * min;\n    }\n    x = isSafeNum(x) ? x : 0.5;\n    y = isSafeNum(y) ? y : 0.5;\n    r = r >= 0 && isSafeNum(r) ? r : 0.5;\n    var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n    return canvasGradient;\n}\nexport function getCanvasGradient(ctx, obj, rect) {\n    var canvasGradient = obj.type === 'radial'\n        ? createRadialGradient(ctx, obj, rect)\n        : createLinearGradient(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n    for (var i = 0; i < colorStops.length; i++) {\n        canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n    return canvasGradient;\n}\nexport function isClipPathChanged(clipPaths, prevClipPaths) {\n    if (clipPaths === prevClipPaths || (!clipPaths && !prevClipPaths)) {\n        return false;\n    }\n    if (!clipPaths || !prevClipPaths || (clipPaths.length !== prevClipPaths.length)) {\n        return true;\n    }\n    for (var i = 0; i < clipPaths.length; i++) {\n        if (clipPaths[i] !== prevClipPaths[i]) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nexport function getSize(root, whIdx, opts) {\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n        return parseFloat(opts[wh]);\n    }\n    var stl = document.defaultView.getComputedStyle(root);\n    return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n        - (parseInt10(stl[plt]) || 0)\n        - (parseInt10(stl[prb]) || 0)) | 0;\n}\n"],"names":["PRESERVED_NORMAL_STATE","PRIMARY_STATES_KEYS","DEFAULT_ANIMATABLE_MAP","reduce","obj","key","ignore","tmpTextPosCalcRes","tmpBoundingRect","Element","props","this","id","guid","animators","currentStates","states","_init","prototype","attr","drift","dx","dy","e","draggable","m","transform","decomposeTransform","markRedraw","beforeUpdate","afterUpdate","update","updateTransform","__dirty","updateInnerText","forceUpdate","textEl","_textContent","textConfig","isLocal","local","innerTransformable","textAlign","textVerticalAlign","textStyleChanged","parent","innerOrigin","copyTransform","position","layoutRect","copy","getBoundingRect","applyTransform","calculateTextPosition","x","y","align","verticalAlign","textOrigin","origin","rotation","relOriginX","relOriginY","width","height","originX","originY","textOffset","offset","isInside","inside","indexOf","innerTextDefaultStyle","_innerTextDefaultStyle","textFill","textStroke","autoStroke","canBeInsideText","insideFill","insideStroke","getInsideTextFill","getInsideTextStroke","outsideFill","outsideStroke","getOutsideFill","getOutsideStroke","fill","stroke","setDefaultTextStyle","dirtyStyle","__zr","isDarkMode","backgroundColor","getBackgroundColor","colorArr","parse","alpha","isDark","i","stringify","traverse","cb","context","attrKV","value","setTextConfig","setTextContent","setClipPath","extra","extend","hide","show","keyOrObj","isObject","keysArr","keys","length","saveCurrentToNormalState","toState","_innerSaveToNormal","normalState","_normalState","animator","fromStateTransition","__fromStateTransition","getLoop","targetName","target","saveTo","_savePrimaryToNormal","primaryKeys","hasState","getState","name","ensureState","clearStates","noAnimation","useState","stateName","keepCurrentStates","forceUseHoverLayer","toNormalState","hasStates","animationCfg","stateTransition","state","stateProxy","useHoverLayer","hoverLayer","_toggleHoverLayerFlag","_applyStateObj","__inHover","duration","textContent","textGuide","_textGuide","push","_updateAnimationTargets","logError","useStates","stateObjects","len","notChange","stateObj","lastStateObj","mergedState","_mergeStates","join","slice","changeTarget","removeState","idx","splice","replaceState","oldState","newState","forceAdd","newStateExists","toggleState","enable","mergedTextConfig","transition","needsRestoreToNormal","transitionTarget","hasTransition","propNeedsTransition","__changeFinalValue","_transitionState","_attachComponent","componentEl","__hostTarget","zr","addSelfToZr","_detachComponent","removeSelfFromZr","getClipPath","_clipPath","clipPath","removeClipPath","getTextContent","previousTextContent","removeTextContent","cfg","removeTextConfig","getTextGuideLine","setTextGuideLine","guideLine","removeTextGuideLine","refreshHover","refresh","dirty","inHover","animation","addAnimator","removeAnimator","animate","loop","allowDiscreteAnimation","el","during","updateDuringAnimation","done","wakeUp","stopAnimation","scope","forwardToLast","leftAnimators","stop","animateTo","animationProps","animateFrom","getPaintRect","initDefaultProps","elProto","type","silent","isGroup","dragging","ignoreClip","createLegacyProperty","privateKey","xKey","yKey","enhanceArray","self","pos","Object","defineProperty","get","set","val","animatable","reverse","animateToShallow","finishCount","doneHappened","cfgDone","cfgAborted","aborted","doneCb","abortedCb","percent","force","start","easing","copyArrShallow","source","is2DArray","isArrayLike","copyValue","isTypedArray","sourceArr","targetArr","len0","len1","Array","call","isValueSame","val1","val2","is1DArraySame","arr0","arr1","topKey","animateObj","targetKeys","delay","additive","setToFinal","animateAll","existsAnimators","animationKeys","k","innerKey","targetVal","isGradientObject","keyLen","allAborted","stopTracks","filter","revertedSource","reversedTarget","sourceClone","whenWithKeys","mixin","SILENT","makeEventPacket","eveType","targetInfo","event","topTarget","cancelBubble","offsetX","zrX","offsetY","zrY","gestureEvent","pinchX","pinchY","pinchScale","wheelDelta","zrDelta","zrByTouch","which","stopEvent","EmptyProxy","_super","_this","apply","arguments","handler","dispose","setCursor","HoveredResult","handlerNames","tmpRect","Handler","storage","painter","proxy","painterRoot","pointerSize","_hovered","_pointerSize","setHandlerProxy","_draggingMgr","on","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","findHover","hovered","hoveredTarget","cursor","dispatchToElement","mouseout","eventControl","zrEventControl","trigger","resize","dispatch","eventName","eventArgs","setCursorStyle","cursorStyle","eventKey","eventPacket","eachOtherLayer","layer","exclude","list","getDisplayList","out","setHoverTarget","candidates","targetSizeHalf","pointerRect","ignoreCoarsePointer","intersect","rStep","thetaStep","Math","PI","PI2","r","theta","x1","cos","y1","sin","processGesture","stage","_gestureMgr","gestureMgr","clear","gestureInfo","recognize","dom","res","isHover","displayable","rectHover","isSilent","contain","hostEl","hoverCheckResult","handlerInstance","getWidth","getHeight","_downEl","_downPoint","_upEl","invalidZErrorLogged","logInvalidZError","console","warn","shapeCompareFunc","a","b","zlevel","z","z2","Storage","_roots","_displayList","_displayListLen","displayableSortFunc","includeIgnore","displayList","updateDisplayList","roots","_updateAndAddDisplayable","clipPaths","userSetClipPath","currentClipPath","parentClipPath","childrenRef","children","child","disp","__clipPaths","isNaN","decalEl","getDecalElement","addRoot","delRoot","l","delAllRoots","getRoots","getTime","Date","Animation","opts","_running","_time","_pausedTime","_pauseStart","_paused","addClip","clip","removeClip","_head","_tail","next","prev","getClip","notTriggerFrameAndStageUpdate","time","delta","nextClip","finished","step","ondestroy","_startLoop","pause","resume","isFinished","options","easingFuncs","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","sqrt","circularOut","circularInOut","elasticIn","s","p","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","Clip","_inited","_startTime","_life","life","_delay","onframe","noop","onrestart","setEasing","globalTime","deltaTime","elapsedTime","min","easingFunc","schedule","remainder","isFunction","arraySlice","interpolateNumber","p0","p1","interpolate1DArray","interpolate2DArray","len2","j","add1DArray","sign","add2DArray","fillColorStops","val0","shorterArr","shorterLen","last","color","max","fillArray","arrDim","arr0Len","arr1Len","isPreviousLarger","cloneValue","ret","rgba2String","rgba","floor","guessArrayDim","VALUE_TYPE_NUMBER","VALUE_TYPE_1D_ARRAY","VALUE_TYPE_2D_ARRAY","VALUE_TYPE_COLOR","VALUE_TYPE_LINEAR_GRADIENT","VALUE_TYPE_RADIAL_GRADIENT","VALUE_TYPE_UNKOWN","isGradientValueType","valType","isArrayValueType","tmpRgba","Track","propName","keyframes","discrete","_invalid","_needsSort","_lastFr","_lastFrP","_finished","setFinished","_additiveTrack","needsAnimate","getAdditiveTrack","addKeyframe","rawValue","arrayDim","isNumber","eqNaN","isString","colorArray","parsedGradient","colorStops","map","colorStop","kf","prepare","maxTime","additiveTrack","kfs","sort","kfsLen","lastKf","isDiscrete","isArr","isGradient","lastValue","startValue","additiveValue","frameIdx","frame","nextFrame","isAdditive","valueKey","kfsNum","isValueColor","lastFrame","mathMin","interval","w","_additiveValue","nextVal_1","isLinearGradient_1","nextColorStop","global","x2","y2","_addToTarget","Animator","additiveTo","_tracks","_trackKeys","_maxTime","_started","_clip","_target","_loop","_additiveAnimators","_allowDiscrete","getMaxTime","getDelay","getTarget","when","propNames","tracks","track","initialValue","_getAdditiveTrack","addtiveTrackKfs","lastFinalKf","isPaused","_force","_doneCallback","_setTracksFinished","doneList","_doneCbs","_abortedCallback","abortedList","_abortedCbs","tracksKeys","trackName","additiveAnimators","getTrack","stillHasAdditiveAnimator","onframeList","_onframeCbs","getTracks","trackKeys","firstOrLast","finalProps","pop","regexp","createCubicEasingFunc","cubicEasingStr","cubic","exec","points","split","a_1","trim","b_1","c_1","d_1","roots_1","requestAnimationFrame","window","bind","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","func","setTimeout","createDom","dpr","newDom","platform","newDomStyle","style","left","top","setAttribute","Layer","motionBlur","lastFrameAlpha","virtual","config","incremental","maxRepaintRectCount","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","util","domStyle","disableUserSelect","onselectstart","padding","margin","borderWidth","getElementCount","afterBrush","initContext","ctx","getContext","setUnpainted","createBackBuffer","domBack","ctxBack","scale","createRepaintRects","prevList","viewWidth","viewHeight","hasIntersections","mergedRepaintRects","full","pendingRect","BoundingRect","addRectToMergePool","rect","isFinite","isZero","boundingRect","isMerged","minDeltaArea","Infinity","bestRectToMergeIdx","mergedRect","pendingRect_1","union","aArea","bArea","pendingArea","deltaArea","shouldPaint","shouldBePainted","prevRect","__isRendered","getPrevPaintRect","curRect","_paintRects","debugGetPaintRects","clearAll","clearColor","repaintRects","haveMotionBLur","globalCompositeOperation","drawImage","doClear","clearRect","clearColorGradientOrPattern","shouldCache","__width","__height","__canvasGradient","isImagePatternObject","scaleX","scaleY","__painter","save","fillStyle","fillRect","restore","globalAlpha","each","Eventful","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","isLayerValid","__builtin__","createRoot","domRoot","document","createElement","cssText","CanvasPainter","root","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","nodeName","toUpperCase","_opts","devicePixelRatio","_singleCanvas","rootStyle","innerHTML","zlevelList","layers","rootCanvas","_width","_height","mainLayer","_domRoot","appendChild","getType","isSingleCanvas","getViewportRoot","getViewportRootOffset","viewportRoot","offsetLeft","offsetTop","paintAll","_redrawId","random","_paintList","_backgroundColor","useDirtyRect","_paintHoverList","_hoverlayer","getLayer","getHoverLayer","paintOne","redrawId","_updateLayerStatus","_a","_doPaintList","needsRefreshHover","_compositeManually","eachLayer","self_1","eachBuiltinLayer","layerList","zi","_loop_1","this_1","useTimer","now","startTime","firstEl","notClear","error","repaint","repaintRect","allClipped","prevEl","_doPaintEl","dTime","prevElClipPaths","beginPath","env","draw","currentLayer","isLast","paintRect","setPrevPaintRect","merge","insertLayer","layersMap","prevLayer","prevDom","nextSibling","insertBefore","firstChild","getLayers","updatePrevLayer","i_1","prevZlevel","incrementalLayerCount","_clearLayer","setBackgroundColor","configLayer","layerConfig","_zlevel","delLayer","parentNode","removeChild","display","hasOwnProperty","clearLayer","getRenderedCanvas","imageLayer","pixelRatio","width_1","height_1","renderToCanvas","normalizeLineDash","lineType","lineWidth","isArray","getLineDash","lineDash","lineDashOffset","lineScale_1","strokeNoScale","getLineScale","rawVal","pathProxyForDraw","styleHasStroke","isValidStrokeFillStyle","strokeOrFill","styleHasFill","doFillPath","fillOpacity","originalGlobalAlpha","opacity","doStrokePath","strokeOpacity","createCanvasPattern","pattern","image","__image","canvasPattern","createPattern","repeat","DOMMatrix","setTransform","matrix","translateSelf","rotateSelf","RADIAN_TO_DEGREE","scaleSelf","brushPath","inBatch","hasStroke","hasFill","strokePercent","strokePart","firstDraw","path","createPathProxy","dirtyFlag","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","__canvasFillGradient","__canvasStrokeGradient","__canvasFillPattern","__canvasStrokePattern","strokeStyle","getGlobalScale","setScale","segmentIgnoreThreshold","setLineDash","needsRebuild","setDPR","setContext","reset","buildPath","shape","toStatic","pathUpdated","rebuildPath","strokeFirst","brushImage","onload","aspect","sWidth","sHeight","sx","sy","brushText","text","font","textBaseline","strokeText","fillText","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","styleChanged","flushPathDrawn","blend","shadowColor","bindPathAndTextCommonStyle","getStyle","newLineWidth","prop","bindImageStyle","setContextTransform","updateClipStatus","isZeroArea","isTransformChanged","m0","m1","DRAW_TYPE_PATH","DRAW_TYPE_IMAGE","DRAW_TYPE_TEXT","DRAW_TYPE_INCREMENTAL","canPathBatch","batchFill","batchStroke","__hoverStyle","brushSingle","brush","forceSetTransform","forceSetStyle","beforeBrush","innerBeforeBrush","canBatchPath","autoBatch","lastDrawType","getTemporalDisplayables","brushIncremental","innerAfterBrush","displayables","getDisplayables","temporalDisplayables","innerScope","getCursor","len_1","clearTemporalDisplayables","isSafeNum","num","createLinearGradient","canvasGradient","createRadialGradient","getCanvasGradient","addColorStop","isClipPathChanged","prevClipPaths","parseInt10","parseInt","getSize","whIdx","wh","cwh","plt","prb","parseFloat","stl","defaultView","getComputedStyle"],"sourceRoot":""}
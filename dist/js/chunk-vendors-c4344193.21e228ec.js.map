{"version":3,"file":"js/chunk-vendors-c4344193.21e228ec.js","mappings":"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","sources":["webpack://databoard/./node_modules/echarts/lib/component/tooltip/seriesFormatTooltip.js","webpack://databoard/./node_modules/echarts/lib/component/tooltip/tooltipMarkup.js","webpack://databoard/./node_modules/echarts/lib/component/transform/filterTransform.js","webpack://databoard/./node_modules/echarts/lib/component/transform/sortTransform.js","webpack://databoard/./node_modules/echarts/lib/component/transform/install.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/VisualMapModel.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/VisualMapView.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/helper.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/install.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/visualMapAction.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/visualEncoding.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/preprocessor.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/installCommon.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/ContinuousModel.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/ContinuousView.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/installVisualMapContinuous.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/PiecewiseView.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/installVisualMapPiecewise.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { trim, isArray, each, reduce } from 'zrender/lib/core/util.js';\nimport { retrieveVisualColorForTooltipMarker, createTooltipMarkup } from './tooltipMarkup.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isNameSpecified } from '../../util/model.js';\nexport function defaultSeriesFormatTooltip(opt) {\n  var series = opt.series;\n  var dataIndex = opt.dataIndex;\n  var multipleSeries = opt.multipleSeries;\n  var data = series.getData();\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n  var tooltipDimLen = tooltipDims.length;\n  var value = series.getRawValue(dataIndex);\n  var isValueArr = isArray(value);\n  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex); // Complicated rule for pretty tooltip.\n\n  var inlineValue;\n  var inlineValueType;\n  var subBlocks;\n  var sortParam;\n\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n    inlineValue = formatArrResult.inlineValues;\n    inlineValueType = formatArrResult.inlineValueTypes;\n    subBlocks = formatArrResult.blocks; // Only support tooltip sort by the first inline value. It's enough in most cases.\n\n    sortParam = formatArrResult.inlineValues[0];\n  } else if (tooltipDimLen) {\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n    inlineValueType = dimInfo.type;\n  } else {\n    sortParam = inlineValue = isValueArr ? value[0] : value;\n  } // Do not show generated series name. It might not be readable.\n\n\n  var seriesNameSpecified = isNameSpecified(series);\n  var seriesName = seriesNameSpecified && series.name || '';\n  var itemName = data.getName(dataIndex);\n  var inlineName = multipleSeries ? seriesName : itemName;\n  return createTooltipMarkup('section', {\n    header: seriesName,\n    // When series name is not specified, do not show a header line with only '-'.\n    // This case always happens in tooltip.trigger: 'item'.\n    noHeader: multipleSeries || !seriesNameSpecified,\n    sortParam: sortParam,\n    blocks: [createTooltipMarkup('nameValue', {\n      markerType: 'item',\n      markerColor: markerColor,\n      // Do not mix display seriesName and itemName in one tooltip,\n      // which might confuses users.\n      name: inlineName,\n      // name dimension might be auto assigned, where the name might\n      // be not readable. So we check trim here.\n      noName: !trim(inlineName),\n      value: inlineValue,\n      valueType: inlineValueType\n    })].concat(subBlocks || [])\n  });\n}\n\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n  // check: category-no-encode-has-axis-data in dataset.html\n  var data = series.getData();\n  var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n    var dimItem = data.getDimensionInfo(idx);\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n  }, false);\n  var inlineValues = [];\n  var inlineValueTypes = [];\n  var blocks = [];\n  tooltipDims.length ? each(tooltipDims, function (dim) {\n    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n  }) // By default, all dims is used on tooltip.\n  : each(value, setEachItem);\n\n  function setEachItem(val, dim) {\n    var dimInfo = data.getDimensionInfo(dim); // If `dimInfo.tooltip` is not set, show tooltip.\n\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n      return;\n    }\n\n    if (isValueMultipleLine) {\n      blocks.push(createTooltipMarkup('nameValue', {\n        markerType: 'subItem',\n        markerColor: colorStr,\n        name: dimInfo.displayName,\n        value: val,\n        valueType: dimInfo.type\n      }));\n    } else {\n      inlineValues.push(val);\n      inlineValueTypes.push(dimInfo.type);\n    }\n  }\n\n  return {\n    inlineValues: inlineValues,\n    inlineValueTypes: inlineValueTypes,\n    blocks: blocks\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getTooltipMarker, encodeHTML, makeValueReadable, convertToColorString } from '../../util/format.js';\nimport { isString, each, hasOwn, isArray, map, assert, extend } from 'zrender/lib/core/util.js';\nimport { SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nimport { getRandomIdBase } from '../../util/number.js';\nvar TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1'; // TODO: more textStyle option\n\nfunction getTooltipTextStyle(textStyle, renderMode) {\n  var nameFontColor = textStyle.color || '#6e7079';\n  var nameFontSize = textStyle.fontSize || 12;\n  var nameFontWeight = textStyle.fontWeight || '400';\n  var valueFontColor = textStyle.color || '#464646';\n  var valueFontSize = textStyle.fontSize || 14;\n  var valueFontWeight = textStyle.fontWeight || '900';\n\n  if (renderMode === 'html') {\n    // `textStyle` is probably from user input, should be encoded to reduce security risk.\n    return {\n      // eslint-disable-next-line max-len\n      nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\n      // eslint-disable-next-line max-len\n      valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\n    };\n  } else {\n    return {\n      nameStyle: {\n        fontSize: nameFontSize,\n        fill: nameFontColor,\n        fontWeight: nameFontWeight\n      },\n      valueStyle: {\n        fontSize: valueFontSize,\n        fill: valueFontColor,\n        fontWeight: valueFontWeight\n      }\n    };\n  }\n} // See `TooltipMarkupLayoutIntent['innerGapLevel']`.\n// (value from UI design)\n\n\nvar HTML_GAPS = [0, 10, 20, 30];\nvar RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n']; // eslint-disable-next-line max-len\n\nexport function createTooltipMarkup(type, option) {\n  option.type = type;\n  return option;\n}\n\nfunction isSectionFragment(frag) {\n  return frag.type === 'section';\n}\n\nfunction getBuilder(frag) {\n  return isSectionFragment(frag) ? buildSection : buildNameValue;\n}\n\nfunction getBlockGapLevel(frag) {\n  if (isSectionFragment(frag)) {\n    var gapLevel_1 = 0;\n    var subBlockLen = frag.blocks.length;\n    var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\n    each(frag.blocks, function (subBlock) {\n      var subGapLevel = getBlockGapLevel(subBlock); // If the some of the sub-blocks have some gaps (like 10px) inside, this block\n      // should use a larger gap (like 20px) to distinguish those sub-blocks.\n\n      if (subGapLevel >= gapLevel_1) {\n        gapLevel_1 = subGapLevel + +(hasInnerGap_1 && ( // 0 always can not be readable gap level.\n        !subGapLevel // If no header, always keep the sub gap level. Otherwise\n        // look weird in case `multipleSeries`.\n        || isSectionFragment(subBlock) && !subBlock.noHeader));\n      }\n    });\n    return gapLevel_1;\n  }\n\n  return 0;\n}\n\nfunction buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var noHeader = fragment.noHeader;\n  var gaps = getGap(getBlockGapLevel(fragment));\n  var subMarkupTextList = [];\n  var subBlocks = fragment.blocks || [];\n  assert(!subBlocks || isArray(subBlocks));\n  subBlocks = subBlocks || [];\n  var orderMode = ctx.orderMode;\n\n  if (fragment.sortBlocks && orderMode) {\n    subBlocks = subBlocks.slice();\n    var orderMap = {\n      valueAsc: 'asc',\n      valueDesc: 'desc'\n    };\n\n    if (hasOwn(orderMap, orderMode)) {\n      var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\n      subBlocks.sort(function (a, b) {\n        return comparator_1.evaluate(a.sortParam, b.sortParam);\n      });\n    } // FIXME 'seriesDesc' necessary?\n    else if (orderMode === 'seriesDesc') {\n        subBlocks.reverse();\n      }\n  }\n\n  each(subBlocks, function (subBlock, idx) {\n    var valueFormatter = fragment.valueFormatter;\n    var subMarkupText = getBuilder(subBlock)( // Inherit valueFormatter\n    valueFormatter ? extend(extend({}, ctx), {\n      valueFormatter: valueFormatter\n    }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\n    subMarkupText != null && subMarkupTextList.push(subMarkupText);\n  });\n  var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\n\n  if (noHeader) {\n    return subMarkupText;\n  }\n\n  var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\n  var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\n\n  if (ctx.renderMode === 'richText') {\n    return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\n  } else {\n    return wrapBlockHTML(\"<div style=\\\"\" + nameStyle + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\n  }\n}\n\nfunction buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var renderMode = ctx.renderMode;\n  var noName = fragment.noName;\n  var noValue = fragment.noValue;\n  var noMarker = !fragment.markerType;\n  var name = fragment.name;\n  var useUTC = ctx.useUTC;\n\n  var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\n    value = isArray(value) ? value : [value];\n    return map(value, function (val, idx) {\n      return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\n    });\n  };\n\n  if (noName && noValue) {\n    return;\n  }\n\n  var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || '#333', renderMode);\n  var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\n  var valueTypeOption = fragment.valueType;\n  var readableValueList = noValue ? [] : valueFormatter(fragment.value);\n  var valueAlignRight = !noMarker || !noName; // It little weird if only value next to marker but far from marker.\n\n  var valueCloseToMarker = !noMarker && noName;\n\n  var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\n      nameStyle = _a.nameStyle,\n      valueStyle = _a.valueStyle;\n\n  return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle)) // Value has commas inside, so use ' ' as delimiter for multiple values.\n  + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML((noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\n}\n/**\n * @return markupText. null/undefined means no content.\n */\n\n\nexport function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\n  if (!fragment) {\n    return;\n  }\n\n  var builder = getBuilder(fragment);\n  var ctx = {\n    useUTC: useUTC,\n    renderMode: renderMode,\n    orderMode: orderMode,\n    markupStyleCreator: markupStyleCreator,\n    valueFormatter: fragment.valueFormatter\n  };\n  return builder(ctx, fragment, 0, toolTipTextStyle);\n}\n\nfunction getGap(gapLevel) {\n  return {\n    html: HTML_GAPS[gapLevel],\n    richText: RICH_TEXT_GAPS[gapLevel]\n  };\n}\n\nfunction wrapBlockHTML(encodedContent, topGap) {\n  var clearfix = '<div style=\"clear:both\"></div>';\n  var marginCSS = \"margin: \" + topGap + \"px 0 0\";\n  return \"<div style=\\\"\" + marginCSS + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodedContent + clearfix + '</div>';\n}\n\nfunction wrapInlineNameHTML(name, leftHasMarker, style) {\n  var marginCss = leftHasMarker ? 'margin-left:2px' : '';\n  return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\n}\n\nfunction wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\n  // Do not too close to marker, considering there are multiple values separated by spaces.\n  var paddingStr = valueCloseToMarker ? '10px' : '20px';\n  var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\n  valueList = isArray(valueList) ? valueList : [valueList];\n  return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\" // Value has commas inside, so use '  ' as delimiter for multiple values.\n  + map(valueList, function (value) {\n    return encodeHTML(value);\n  }).join('&nbsp;&nbsp;') + '</span>';\n}\n\nfunction wrapInlineNameRichText(ctx, name, style) {\n  return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\n}\n\nfunction wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\n  var styles = [style];\n  var paddingLeft = valueCloseToMarker ? 10 : 20;\n  alignRight && styles.push({\n    padding: [0, 0, 0, paddingLeft],\n    align: 'right'\n  }); // Value has commas inside, so use '  ' as delimiter for multiple values.\n\n  return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\n}\n\nexport function retrieveVisualColorForTooltipMarker(series, dataIndex) {\n  var style = series.getData().getItemVisual(dataIndex, 'style');\n  var color = style[series.visualDrawType];\n  return convertToColorString(color);\n}\nexport function getPaddingFromTooltipModel(model, renderMode) {\n  var padding = model.get('padding');\n  return padding != null ? padding // We give slightly different to look pretty.\n  : renderMode === 'richText' ? [8, 10] : 10;\n}\n/**\n * The major feature is generate styles for `renderMode: 'richText'`.\n * But it also serves `renderMode: 'html'` to provide\n * \"renderMode-independent\" API.\n */\n\nvar TooltipMarkupStyleCreator =\n/** @class */\nfunction () {\n  function TooltipMarkupStyleCreator() {\n    this.richTextStyles = {}; // Notice that \"generate a style name\" usually happens repeatedly when mouse is moving and\n    // a tooltip is displayed. So we put the `_nextStyleNameId` as a member of each creator\n    // rather than static shared by all creators (which will cause it increase to fast).\n\n    this._nextStyleNameId = getRandomIdBase();\n  }\n\n  TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\n    return '__EC_aUTo_' + this._nextStyleNameId++;\n  };\n\n  TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\n    var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\n    var marker = getTooltipMarker({\n      color: colorStr,\n      type: markerType,\n      renderMode: renderMode,\n      markerId: markerId\n    });\n\n    if (isString(marker)) {\n      return marker;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(markerId);\n      }\n\n      this.richTextStyles[markerId] = marker.style;\n      return marker.content;\n    }\n  };\n  /**\n   * @usage\n   * ```ts\n   * const styledText = markupStyleCreator.wrapRichTextStyle([\n   *     // The styles will be auto merged.\n   *     {\n   *         fontSize: 12,\n   *         color: 'blue'\n   *     },\n   *     {\n   *         padding: 20\n   *     }\n   * ]);\n   * ```\n   */\n\n\n  TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\n    var finalStl = {};\n\n    if (isArray(styles)) {\n      each(styles, function (stl) {\n        return extend(finalStl, stl);\n      });\n    } else {\n      extend(finalStl, styles);\n    }\n\n    var styleName = this._generateStyleName();\n\n    this.richTextStyles[styleName] = finalStl;\n    return \"{\" + styleName + \"|\" + text + \"}\";\n  };\n\n  return TooltipMarkupStyleCreator;\n}();\n\nexport { TooltipMarkupStyleCreator };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseConditionalExpression } from '../../util/conditionalExpression.js';\nimport { hasOwn, createHashMap } from 'zrender/lib/core/util.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nexport var filterTransform = {\n  type: 'echarts:filter',\n  // PENDING: enhance to filter by index rather than create new data\n  transform: function (params) {\n    // [Caveat] Fail-Fast:\n    // Do not return the whole dataset unless user config indicates it explicitly.\n    // For example, if no condition is specified by mistake, returning an empty result\n    // is better than returning the entire raw source for the user to find the mistake.\n    var upstream = params.upstream;\n    var rawItem;\n    var condition = parseConditionalExpression(params.config, {\n      valueGetterAttrMap: createHashMap({\n        dimension: true\n      }),\n      prepareGetValue: function (exprOption) {\n        var errMsg = '';\n        var dimLoose = exprOption.dimension;\n\n        if (!hasOwn(exprOption, 'dimension')) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Relation condition must has prop \"dimension\" specified.', 'Illegal condition:', exprOption);\n          }\n\n          throwError(errMsg);\n        }\n\n        var dimInfo = upstream.getDimensionInfo(dimLoose);\n\n        if (!dimInfo) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal condition:', exprOption, '.\\n');\n          }\n\n          throwError(errMsg);\n        }\n\n        return {\n          dimIdx: dimInfo.index\n        };\n      },\n      getValue: function (param) {\n        return upstream.retrieveValueFromItem(rawItem, param.dimIdx);\n      }\n    });\n    var resultData = [];\n\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      rawItem = upstream.getRawDataItem(i);\n\n      if (condition.evaluate()) {\n        resultData.push(rawItem);\n      }\n    }\n\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS } from '../../util/types.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { getRawValueParser, SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nvar sampleLog = '';\n\nif (process.env.NODE_ENV !== 'production') {\n  sampleLog = ['Valid config is like:', '{ dimension: \"age\", order: \"asc\" }', 'or [{ dimension: \"age\", order: \"asc\"], { dimension: \"date\", order: \"desc\" }]'].join(' ');\n}\n\nexport var sortTransform = {\n  type: 'echarts:sort',\n  transform: function (params) {\n    var upstream = params.upstream;\n    var config = params.config;\n    var errMsg = ''; // Normalize\n    // const orderExprList: OrderExpression[] = isArray(config[0])\n    //     ? config as OrderExpression[]\n    //     : [config as OrderExpression];\n\n    var orderExprList = normalizeToArray(config);\n\n    if (!orderExprList.length) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Empty `config` in sort transform.';\n      }\n\n      throwError(errMsg);\n    }\n\n    var orderDefList = [];\n    each(orderExprList, function (orderExpr) {\n      var dimLoose = orderExpr.dimension;\n      var order = orderExpr.order;\n      var parserName = orderExpr.parser;\n      var incomparable = orderExpr.incomparable;\n\n      if (dimLoose == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"dimension\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"order\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (incomparable && incomparable !== 'min' && incomparable !== 'max') {\n        var errMsg_1 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_1 = 'incomparable must be \"min\" or \"max\" rather than \"' + incomparable + '\".';\n        }\n\n        throwError(errMsg_1);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        var errMsg_2 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_2 = 'order must be \"asc\" or \"desc\" rather than \"' + order + '\".';\n        }\n\n        throwError(errMsg_2);\n      }\n\n      var dimInfo = upstream.getDimensionInfo(dimLoose);\n\n      if (!dimInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      var parser = parserName ? getRawValueParser(parserName) : null;\n\n      if (parserName && !parser) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Invalid parser name ' + parserName + '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      orderDefList.push({\n        dimIdx: dimInfo.index,\n        parser: parser,\n        comparator: new SortOrderComparator(order, incomparable)\n      });\n    }); // TODO: support it?\n\n    var sourceFormat = upstream.sourceFormat;\n\n    if (sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'sourceFormat \"' + sourceFormat + '\" is not supported yet';\n      }\n\n      throwError(errMsg);\n    } // Other upstream format are all array.\n\n\n    var resultData = [];\n\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      resultData.push(upstream.getRawDataItem(i));\n    }\n\n    resultData.sort(function (item0, item1) {\n      for (var i = 0; i < orderDefList.length; i++) {\n        var orderDef = orderDefList[i];\n        var val0 = upstream.retrieveValueFromItem(item0, orderDef.dimIdx);\n        var val1 = upstream.retrieveValueFromItem(item1, orderDef.dimIdx);\n\n        if (orderDef.parser) {\n          val0 = orderDef.parser(val0);\n          val1 = orderDef.parser(val1);\n        }\n\n        var result = orderDef.comparator.evaluate(val0, val1);\n\n        if (result !== 0) {\n          return result;\n        }\n      }\n\n      return 0;\n    });\n    return {\n      data: resultData\n    };\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { filterTransform } from './filterTransform.js';\nimport { sortTransform } from './sortTransform.js';\nexport function install(registers) {\n  registers.registerTransform(filterTransform);\n  registers.registerTransform(sortTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport * as modelUtil from '../../util/model.js';\nimport * as numberUtil from '../../util/number.js';\nimport ComponentModel from '../../model/Component.js';\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\n\nvar VisualMapModel =\n/** @class */\nfunction (_super) {\n  __extends(VisualMapModel, _super);\n\n  function VisualMapModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = VisualMapModel.type;\n    _this.stateList = ['inRange', 'outOfRange'];\n    _this.replacableOptionKeys = ['inRange', 'outOfRange', 'target', 'controller', 'color'];\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    /**\n     * [lowerBound, upperBound]\n     */\n\n    _this.dataBound = [-Infinity, Infinity];\n    _this.targetVisuals = {};\n    _this.controllerVisuals = {};\n    return _this;\n  }\n\n  VisualMapModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.resetVisual = function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  };\n  /**\n   * @public\n   */\n\n\n  VisualMapModel.prototype.getItemSymbol = function () {\n    return null;\n  };\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n\n\n  VisualMapModel.prototype.getTargetSeriesIndices = function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  };\n  /**\n   * @public\n   */\n\n\n  VisualMapModel.prototype.eachTargetSeries = function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      var seriesModel = this.ecModel.getSeriesByIndex(seriesIndex);\n\n      if (seriesModel) {\n        callback.call(context, seriesModel);\n      }\n    }, this);\n  };\n  /**\n   * @pubilc\n   */\n\n\n  VisualMapModel.prototype.isTargetSeries = function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  };\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param value Real value, or this.dataBound[0 or 1].\n   * @param isCategory Only available when value is number.\n   * @param edgeSymbols Open-close symbol when value is interval.\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.formatValueText = function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    var textValue = isCategory ? value // Value is string when isCategory\n    : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.resetExtent = function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  };\n  /**\n   * PENDING:\n   * delete this method if no outer usage.\n   *\n   * Return  Concrete dimension. If null/undefined is returned, no dimension is used.\n   */\n  // getDataDimension(data: SeriesData) {\n  //     const optDim = this.option.dimension;\n  //     if (optDim != null) {\n  //         return data.getDimension(optDim);\n  //     }\n  //     const dimNames = data.dimensions;\n  //     for (let i = dimNames.length - 1; i >= 0; i--) {\n  //         const dimName = dimNames[i];\n  //         const dimInfo = data.getDimensionInfo(dimName);\n  //         if (!dimInfo.isCalculationCoord) {\n  //             return dimName;\n  //         }\n  //     }\n  // }\n\n\n  VisualMapModel.prototype.getDataDimensionIndex = function (data) {\n    var optDim = this.option.dimension;\n\n    if (optDim != null) {\n      return data.getDimensionIndex(optDim);\n    }\n\n    var dimNames = data.dimensions;\n\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = data.getDimensionInfo(dimName);\n\n      if (!dimInfo.isCalculationCoord) {\n        return dimInfo.storeDimIndex;\n      }\n    }\n  };\n\n  VisualMapModel.prototype.getExtent = function () {\n    return this._dataExtent.slice();\n  };\n\n  VisualMapModel.prototype.completeVisualOption = function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a default color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the default color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      };\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      var itemSymbol = this.getItemSymbol();\n      var defaultSymbol = itemSymbol || 'roundRect';\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? defaultSymbol : [defaultSymbol]);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter none\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' ? defaultSymbol : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max_1 = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max_1 && (max_1 = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max_1], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  };\n\n  VisualMapModel.prototype.resetItemSize = function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  };\n\n  VisualMapModel.prototype.isCategory = function () {\n    return !!this.option.categories;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n\n\n  VisualMapModel.prototype.setSelected = function (selected) {};\n\n  VisualMapModel.prototype.getSelected = function () {\n    return null;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n\n\n  VisualMapModel.prototype.getValueState = function (value) {\n    return null;\n  };\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n\n\n  VisualMapModel.prototype.getVisualMeta = function (getColorVisual) {\n    return null;\n  };\n\n  VisualMapModel.type = 'visualMap';\n  VisualMapModel.dependencies = ['series'];\n  VisualMapModel.defaultOption = {\n    show: true,\n    // zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    min: 0,\n    max: 200,\n    left: 0,\n    right: null,\n    top: null,\n    bottom: 0,\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    padding: 5,\n    // css\n    textGap: 10,\n    precision: 0,\n    textStyle: {\n      color: '#333' // \n\n    }\n  };\n  return VisualMapModel;\n}(ComponentModel);\n\nexport default VisualMapModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { Rect } from '../../util/graphic.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as layout from '../../util/layout.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport ComponentView from '../../view/Component.js';\n\nvar VisualMapView =\n/** @class */\nfunction (_super) {\n  __extends(VisualMapView, _super);\n\n  function VisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = VisualMapView.type;\n    _this.autoPositionValues = {\n      left: 1,\n      right: 1,\n      top: 1,\n      bottom: 1\n    };\n    return _this;\n  }\n\n  VisualMapView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapView.prototype.render = function (visualMapModel, ecModel, api, payload // TODO: TYPE\n  ) {\n    this.visualMapModel = visualMapModel;\n\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    this.doRender(visualMapModel, ecModel, api, payload);\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapView.prototype.renderBackground = function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new Rect({\n      z2: -1,\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  };\n  /**\n   * @protected\n   * @param targetValue can be Infinity or -Infinity\n   * @param visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param opts\n   * @param opts.forceState Specify state, instead of using getValueState method.\n   * @param opts.convertOpacityToAlpha For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n\n\n  VisualMapView.prototype.getControllerVisual = function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {}; // Default values.\n\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n\n    function getter(key) {\n      return visualObj[key];\n    }\n\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  };\n\n  VisualMapView.prototype.positionGroup = function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n\n  VisualMapView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {};\n\n  VisualMapView.type = 'visualMap';\n  return VisualMapView;\n}(ComponentView);\n\nexport default VisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nvar paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n/**\n * @param visualMapModel\n * @param api\n * @param itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\n\nexport function getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  } // Auto decision align.\n\n\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n// TODO: TYPE more specified payload types.\n\nexport function makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installVisualMapContinuous } from './installVisualMapContinuous.js';\nimport { install as installVisualMapPiecewise } from './installVisualMapPiecewise.js';\nexport function install(registers) {\n  use(installVisualMapContinuous);\n  use(installVisualMapPiecewise); // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var visualMapActionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\nexport var visualMapActionHander = function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nexport var visualMapEncodingHandlers = [{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimensionIndex(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n}, // Only support color.\n{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var dimIdx = visualMapModel.getDataDimensionIndex(data);\n\n        if (dimIdx >= 0) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimIdx;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}]; // FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\n\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: getVisualFromData(seriesModel.getData(), 'color') // default color.\n\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n\n  return resultVisual.color;\n\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar each = zrUtil.each;\nexport default function visualMapPreprocessor(option) {\n  var visualMap = option && option.visualMap;\n\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    } // rename splitList to pieces\n\n\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n\n    var pieces = opt.pieces;\n\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\n\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { visualMapActionInfo, visualMapActionHander } from './visualMapAction.js';\nimport { visualMapEncodingHandlers } from './visualEncoding.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport preprocessor from './preprocessor.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n\n  installed = true;\n  registers.registerSubTypeDefaulter('visualMap', function (option) {\n    // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n    return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n  });\n  registers.registerAction(visualMapActionInfo, visualMapActionHander);\n  each(visualMapEncodingHandlers, function (handler) {\n    registers.registerVisual(registers.PRIORITY.VISUAL.COMPONENT, handler);\n  });\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport * as numberUtil from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js'; // Constant\n\nvar DEFAULT_BAR_BOUND = [20, 140];\n\nvar ContinuousModel =\n/** @class */\nfunction (_super) {\n  __extends(ContinuousModel, _super);\n\n  function ContinuousModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ContinuousModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n\n    this._resetRange();\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  ContinuousModel.prototype.resetItemSize = function () {\n    _super.prototype.resetItemSize.apply(this, arguments);\n\n    var itemSize = this.itemSize;\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  };\n  /**\n   * @private\n   */\n\n\n  ContinuousModel.prototype._resetRange = function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n\n    if (!range || range.auto) {\n      // `range` should always be array (so we don't use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  ContinuousModel.prototype.completeVisualOption = function () {\n    _super.prototype.completeVisualOption.apply(this, arguments);\n\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = symbolSize[1] / 3; // For good looking.\n      }\n    }, this);\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.setSelected = function (selected) {\n    this.option.range = selected.slice();\n\n    this._resetRange();\n  };\n  /**\n   * @public\n   */\n\n\n  ContinuousModel.prototype.getSelected = function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.getValueState = function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  };\n\n  ContinuousModel.prototype.findTargetDataIndices = function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @implement\n   */\n\n\n  ContinuousModel.prototype.getVisualMeta = function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  };\n\n  ContinuousModel.type = 'visualMap.continuous';\n  ContinuousModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    align: 'auto',\n    calculable: false,\n    hoverLink: true,\n    realtime: true,\n    handleIcon: 'path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z',\n    handleSize: '120%',\n    handleStyle: {\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    indicatorIcon: 'circle',\n    indicatorSize: '50%',\n    indicatorStyle: {\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0,0,0,0.2)'\n    } // emphasis: {\n    //     handleStyle: {\n    //         shadowBlur: 3,\n    //         shadowOffsetX: 1,\n    //         shadowOffsetY: 1,\n    //         shadowColor: 'rgba(0,0,0,0.2)'\n    //     }\n    // }\n\n  });\n  return ContinuousModel;\n}(VisualMapModel);\n\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\n\nexport default ContinuousModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport * as helper from './helper.js';\nimport * as modelUtil from '../../util/model.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { setAsHighDownDispatcher } from '../../util/states.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { findEventDispatcher } from '../../util/event.js';\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max; // Arbitrary value\n\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6; // Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\n\nvar ContinuousView =\n/** @class */\nfunction (_super) {\n  __extends(ContinuousView, _super);\n\n  function ContinuousView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ContinuousView.type;\n    _this._shapes = {};\n    _this._dataInterval = [];\n    _this._handleEnds = [];\n    _this._hoverLinkDataIndices = [];\n    return _this;\n  }\n\n  ContinuousView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {\n    this._api = api;\n\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  };\n\n  ContinuousView.prototype._buildView = function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n\n    this._resetInterval();\n\n    this._renderBar(thisGroup);\n\n    var dataRangeText = visualMapModel.get('text');\n\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n\n    this._renderEndsText(thisGroup, dataRangeText, 1); // Do this for background size calculation.\n\n\n    this._updateView(true); // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n\n\n    this.renderBackground(thisGroup); // Real update view\n\n    this._updateView();\n\n    this._enableHoverLinkToSeries();\n\n    this._enableHoverLinkFromSeries();\n\n    this.positionGroup(thisGroup);\n  };\n\n  ContinuousView.prototype._renderEndsText = function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    } // Compatible with ec2, text[0] map to high value, text[1] map low value.\n\n\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.mainGroup;\n\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: position[0],\n        y: position[1],\n        verticalAlign: orient === 'horizontal' ? 'middle' : align,\n        align: orient === 'horizontal' ? align : 'center',\n        text: text\n      })\n    }));\n  };\n\n  ContinuousView.prototype._renderBar = function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n\n    var mainGroup = shapes.mainGroup = this._createBarGroup(itemAlign);\n\n    var gradientBarGroup = new graphic.Group();\n    mainGroup.add(gradientBarGroup); // Bar\n\n    gradientBarGroup.add(shapes.outOfRange = createPolygon());\n    gradientBarGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true))); // A border radius clip.\n\n    gradientBarGroup.setClipPath(new graphic.Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: itemSize[0],\n        height: itemSize[1],\n        r: 3\n      }\n    }));\n    var textRect = visualMapModel.textStyleModel.getTextRect('');\n    var textSize = mathMax(textRect.width, textRect.height); // Handle\n\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n\n      this._createHandle(visualMapModel, mainGroup, 0, itemSize, textSize, orient);\n\n      this._createHandle(visualMapModel, mainGroup, 1, itemSize, textSize, orient);\n    }\n\n    this._createIndicator(visualMapModel, mainGroup, itemSize, textSize, orient);\n\n    targetGroup.add(mainGroup);\n  };\n\n  ContinuousView.prototype._createHandle = function (visualMapModel, mainGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleSize = parsePercent(visualMapModel.get('handleSize'), itemSize[0]);\n    var handleThumb = createSymbol(visualMapModel.get('handleIcon'), -handleSize / 2, -handleSize / 2, handleSize, handleSize, null, true);\n    var cursor = getCursor(this._orient);\n    handleThumb.attr({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      ondragend: onDragEnd,\n      onmousemove: function (e) {\n        eventTool.stop(e.event);\n      }\n    });\n    handleThumb.x = itemSize[0] / 2;\n    handleThumb.useStyle(visualMapModel.getModel('handleStyle').getItemStyle());\n    handleThumb.setStyle({\n      strokeNoScale: true,\n      strokeFirst: true\n    });\n    handleThumb.style.lineWidth *= 2;\n    handleThumb.ensureState('emphasis').style = visualMapModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n    setAsHighDownDispatcher(handleThumb, true);\n    mainGroup.add(handleThumb); // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function (e) {\n        // For mobile device, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    handleLabel.ensureState('blur').style = {\n      opacity: 0.1\n    };\n    handleLabel.stateTransition = {\n      duration: 200\n    };\n    this.group.add(handleLabel);\n    var handleLabelPoint = [handleSize, 0];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  };\n\n  ContinuousView.prototype._createIndicator = function (visualMapModel, mainGroup, itemSize, textSize, orient) {\n    var scale = parsePercent(visualMapModel.get('indicatorSize'), itemSize[0]);\n    var indicator = createSymbol(visualMapModel.get('indicatorIcon'), -scale / 2, -scale / 2, scale, scale, null, true);\n    indicator.attr({\n      cursor: 'move',\n      invisible: true,\n      silent: true,\n      x: itemSize[0] / 2\n    });\n    var indicatorStyle = visualMapModel.getModel('indicatorStyle').getItemStyle();\n\n    if (indicator instanceof ZRImage) {\n      var pathStyle = indicator.style;\n      indicator.useStyle(zrUtil.extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, indicatorStyle));\n    } else {\n      indicator.useStyle(indicatorStyle);\n    }\n\n    mainGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [(orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT) + itemSize[0] / 2, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n    this._firstShowIndicator = true;\n  };\n\n  ContinuousView.prototype._dragHandle = function (handleIndex, isEnd, // dx is event from ondragend if isEnd is true. It's not used\n  dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    this._dragging = !isEnd;\n\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.mainGroup, true);\n\n      this._updateInterval(handleIndex, vertex[1]);\n\n      this._hideIndicator(); // Considering realtime, update view should be executed\n      // before dispatch action.\n\n\n      this._updateView();\n    } // dragEnd do not dispatch action when realtime.\n\n\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  };\n\n  ContinuousView.prototype._resetInterval = function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  };\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n\n\n  ContinuousView.prototype._updateInterval = function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex, // cross is forbidden\n    0);\n    var dataExtent = visualMapModel.getExtent(); // Update data interval.\n\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  };\n\n  ContinuousView.prototype._updateView = function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor // opacity: visualInRange.opacity\n\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor // opacity: visualOutOfRange.opacity\n\n    }).setShape('points', visualOutOfRange.barPoints);\n\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  };\n\n  ContinuousView.prototype._createBarVisual = function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  };\n\n  ContinuousView.prototype._makeColorGradient = function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only calculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  };\n\n  ContinuousView.prototype._createBarPoints = function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  };\n\n  ContinuousView.prototype._createBarGroup = function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scaleX: itemAlign === 'bottom' ? 1 : -1,\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scaleX: itemAlign === 'bottom' ? -1 : 1,\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scaleX: itemAlign === 'left' ? 1 : -1,\n      scaleY: -1\n    } : {\n      scaleX: itemAlign === 'left' ? 1 : -1\n    });\n  };\n\n  ContinuousView.prototype._updateHandle = function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    var itemSize = visualMapModel.itemSize;\n    var dataExtent = visualMapModel.getExtent();\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.y = handleEnds[handleIndex];\n      var val = linearMap(handleEnds[handleIndex], [0, itemSize[1]], dataExtent, true);\n      var symbolSize = this.getControllerVisual(val, 'symbolSize');\n      handleThumb.scaleX = handleThumb.scaleY = symbolSize / itemSize[0];\n      handleThumb.x = itemSize[0] - symbolSize / 2; // Update handle label position.\n\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        verticalAlign: 'middle',\n        align: this._orient === 'vertical' ? this._applyTransform('left', shapes.mainGroup) : 'center'\n      });\n    }, this);\n  };\n\n  ContinuousView.prototype._showIndicator = function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n\n    if (!indicator) {\n      return;\n    }\n\n    indicator.attr('invisible', false);\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    var symbolSize = this.getControllerVisual(cursorValue, 'symbolSize');\n    var y = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var x = itemSize[0] - symbolSize / 2;\n    var oldIndicatorPos = {\n      x: indicator.x,\n      y: indicator.y\n    }; // Update handle label position.\n\n    indicator.y = y;\n    indicator.x = x;\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n\n    var align = this._applyTransform('left', shapes.mainGroup);\n\n    var orient = this._orient;\n    var isHorizontal = orient === 'horizontal';\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      verticalAlign: isHorizontal ? align : 'middle',\n      align: isHorizontal ? 'center' : align\n    });\n    var indicatorNewProps = {\n      x: x,\n      y: y,\n      style: {\n        fill: color\n      }\n    };\n    var labelNewProps = {\n      style: {\n        x: textPoint[0],\n        y: textPoint[1]\n      }\n    };\n\n    if (visualMapModel.ecModel.isAnimationEnabled() && !this._firstShowIndicator) {\n      var animationCfg = {\n        duration: 100,\n        easing: 'cubicInOut',\n        additive: true\n      };\n      indicator.x = oldIndicatorPos.x;\n      indicator.y = oldIndicatorPos.y;\n      indicator.animateTo(indicatorNewProps, animationCfg);\n      indicatorLabel.animateTo(labelNewProps, animationCfg);\n    } else {\n      indicator.attr(indicatorNewProps);\n      indicatorLabel.attr(labelNewProps);\n    }\n\n    this._firstShowIndicator = false;\n    var handleLabels = this._shapes.handleLabels;\n\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this._api.enterBlur(handleLabels[i]);\n      }\n    }\n  };\n\n  ContinuousView.prototype._enableHoverLinkToSeries = function () {\n    var self = this;\n\n    this._shapes.mainGroup.on('mousemove', function (e) {\n      self._hovering = true;\n\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.mainGroup, true, true); // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n\n\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  };\n\n  ContinuousView.prototype._enableHoverLinkFromSeries = function () {\n    var zr = this.api.getZr();\n\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  };\n\n  ContinuousView.prototype._doHoverLinkToSeries = function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent(); // For hover link show when hover handle, which might be below or upper than sizeExtent.\n\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)]; // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity); // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, ' ', halfHoverLinkSize);\n      }\n    } // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n\n\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  };\n\n  ContinuousView.prototype._hoverLinkFromSeriesMouseOver = function (e) {\n    var ecData;\n    findEventDispatcher(e.target, function (target) {\n      var currECData = getECData(target);\n\n      if (currECData.dataIndex != null) {\n        ecData = currECData;\n        return true;\n      }\n    }, true);\n\n    if (!ecData) {\n      return;\n    }\n\n    var dataModel = this.ecModel.getSeriesByIndex(ecData.seriesIndex);\n    var visualMapModel = this.visualMapModel;\n\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n\n    var data = dataModel.getData(ecData.dataType);\n    var value = data.getStore().get(visualMapModel.getDataDimensionIndex(data), ecData.dataIndex);\n\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  };\n\n  ContinuousView.prototype._hideIndicator = function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n    var handleLabels = this._shapes.handleLabels;\n\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this._api.leaveBlur(handleLabels[i]);\n      }\n    }\n  };\n\n  ContinuousView.prototype._clearHoverLinkToSeries = function () {\n    this._hideIndicator();\n\n    var indices = this._hoverLinkDataIndices;\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n\n    indices.length = 0;\n  };\n\n  ContinuousView.prototype._clearHoverLinkFromSeries = function () {\n    this._hideIndicator();\n\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  };\n\n  ContinuousView.prototype._applyTransform = function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return zrUtil.isArray(vertex) ? graphic.applyTransform(vertex, transform, inverse) : graphic.transformDirection(vertex, transform, inverse);\n  }; // TODO: TYPE more specified payload types.\n\n\n  ContinuousView.prototype._dispatchHighDown = function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousView.prototype.dispose = function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousView.prototype.remove = function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  };\n\n  ContinuousView.type = 'visualMap.continuous';\n  return ContinuousView;\n}(VisualMapView);\n\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function (e) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\n\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n\n  return halfHoverLinkSize;\n}\n\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nexport default ContinuousView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ContinuousModel from './ContinuousModel.js';\nimport ContinuousView from './ContinuousView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(ContinuousModel);\n  registers.registerComponentView(ContinuousView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport { reformIntervals } from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n\nvar PiecewiseModel =\n/** @class */\nfunction (_super) {\n  __extends(PiecewiseModel, _super);\n\n  function PiecewiseModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PiecewiseModel.type;\n    /**\n     * The order is always [low, ..., high].\n     * [{text: string, interval: Array.<number>}, ...]\n     */\n\n    _this._pieceList = [];\n    return _this;\n  }\n\n  PiecewiseModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    this.resetExtent();\n\n    var mode = this._mode = this._determineMode();\n\n    this._pieceList = [];\n\n    resetMethods[this._mode].call(this, this._pieceList);\n\n    this._resetSelected(newOption, isInit);\n\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          piece = zrUtil.clone(piece);\n\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n\n          return piece;\n        });\n      }\n    });\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  PiecewiseModel.prototype.completeVisualOption = function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = false;\n      zrUtil.each(this.stateList, function (state) {\n        exists = exists || has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n\n    function has(obj, state, visualType) {\n      return obj && obj[state] && obj[state].hasOwnProperty(visualType);\n    }\n\n    _super.prototype.completeVisualOption.apply(this, arguments);\n  };\n\n  PiecewiseModel.prototype._resetSelected = function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList; // Selected do not merge but all override.\n\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected; // Consider 'not specified' means true.\n\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel_1 = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n\n        if (selected[key]) {\n          hasSel_1 ? selected[key] = false : hasSel_1 = true;\n        }\n      }, this);\n    } // thisOption.selectedMode === 'multiple', default: all selected.\n\n  };\n  /**\n   * @public\n   */\n\n\n  PiecewiseModel.prototype.getItemSymbol = function () {\n    return this.get('itemSymbol');\n  };\n  /**\n   * @public\n   */\n\n\n  PiecewiseModel.prototype.getSelectedMapKey = function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  };\n  /**\n   * @public\n   */\n\n\n  PiecewiseModel.prototype.getPieceList = function () {\n    return this._pieceList;\n  };\n  /**\n   * @return {string}\n   */\n\n\n  PiecewiseModel.prototype._determineMode = function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  };\n  /**\n   * @override\n   */\n\n\n  PiecewiseModel.prototype.setSelected = function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  };\n  /**\n   * @override\n   */\n\n\n  PiecewiseModel.prototype.getValueState = function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  };\n  /**\n   * @public\n   * @param pieceIndex piece index in visualMapModel.getPieceList()\n   */\n\n\n  PiecewiseModel.prototype.findTargetDataIndices = function (pieceIndex) {\n    var result = [];\n    var pieceList = this._pieceList;\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @private\n   * @param piece piece.value or piece.interval is required.\n   * @return  Can be Infinity or -Infinity\n   */\n\n\n  PiecewiseModel.prototype.getRepresentValue = function (piece) {\n    var representValue;\n\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n\n    return representValue;\n  };\n\n  PiecewiseModel.prototype.getVisualMeta = function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n\n    var stops = [];\n    var outerColors = ['', ''];\n    var visualMapModel = this;\n\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      }); // Not category\n\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n\n      var color = getColorVisual(representValue, valueState);\n\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    } // Suplement\n\n\n    var pieceList = this._pieceList.slice();\n\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  };\n\n  PiecewiseModel.type = 'visualMap.piecewise';\n  PiecewiseModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    selected: null,\n    minOpen: false,\n    maxOpen: false,\n    align: 'auto',\n    itemWidth: 20,\n    itemHeight: 14,\n    itemSymbol: 'roundRect',\n    pieces: null,\n    categories: null,\n    splitNumber: 5,\n    selectedMode: 'multiple',\n    itemGap: 10,\n    hoverLink: true // Enable hover highlight.\n\n  });\n  return PiecewiseModel;\n}(VisualMapModel);\n\n;\n/**\n * Key is this._mode\n * @type {Object}\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\n */\n\nvar resetMethods = {\n  splitNumber: function (outPieceList) {\n    var thisOption = this.option;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber; // Precision auto-adaption\n\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n\n    if (thisOption.minOpen) {\n      outPieceList.push({\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n\n    for (var index = 0, curr = dataExtent[0]; index < splitNumber; curr += splitStep, index++) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      outPieceList.push({\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n\n    if (thisOption.maxOpen) {\n      outPieceList.push({\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece, index) {\n      piece.index = index;\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function (outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME categorypieceListvisualMappingpieceList\n      // \n      outPieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, outPieceList);\n  },\n  pieces: function (outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n\n      var item = {\n        text: '',\n        index: index\n      };\n\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommended.\n        var interval = item.interval = [];\n        var close_1 = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close_1[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n\n        useMinMax[0] && interval[1] === Infinity && (close_1[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close_1[1] = 0);\n\n        if (process.env.NODE_ENV !== 'production') {\n          if (interval[0] > interval[1]) {\n            console.warn('Piece ' + index + 'is illegal: ' + interval + ' lower bound should not greater then uppper bound.');\n          }\n        }\n\n        if (interval[0] === interval[1] && close_1[0] && close_1[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      outPieceList.push(item);\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, outPieceList); // Only pieces\n\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', ''][close[1]], ['>', ''][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\n\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\n\nexport default PiecewiseModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from './helper.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\n\nvar PiecewiseVisualMapView =\n/** @class */\nfunction (_super) {\n  __extends(PiecewiseVisualMapView, _super);\n\n  function PiecewiseVisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PiecewiseVisualMapView.type;\n    return _this;\n  }\n\n  PiecewiseVisualMapView.prototype.doRender = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var textStyleModel = visualMapModel.textStyleModel;\n    var textFont = textStyleModel.getFont();\n    var textFill = textStyleModel.getTextColor();\n\n    var itemAlign = this._getItemAlign();\n\n    var itemSize = visualMapModel.itemSize;\n\n    var viewData = this._getViewData();\n\n    var endsText = viewData.endsText;\n    var showLabel = zrUtil.retrieve(visualMapModel.get('showLabel', true), !endsText);\n    endsText && this._renderEndsText(thisGroup, endsText[0], itemSize, showLabel, itemAlign);\n    zrUtil.each(viewData.viewPieceList, function (item) {\n      var piece = item.piece;\n      var itemGroup = new graphic.Group();\n      itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece);\n\n      this._enableHoverLink(itemGroup, item.indexInModelPieceList); // TODO Category\n\n\n      var representValue = visualMapModel.getRepresentValue(piece);\n\n      this._createItemSymbol(itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]]);\n\n      if (showLabel) {\n        var visualState = this.visualMapModel.getValueState(representValue);\n        itemGroup.add(new graphic.Text({\n          style: {\n            x: itemAlign === 'right' ? -textGap : itemSize[0] + textGap,\n            y: itemSize[1] / 2,\n            text: piece.text,\n            verticalAlign: 'middle',\n            align: itemAlign,\n            font: textFont,\n            fill: textFill,\n            opacity: visualState === 'outOfRange' ? 0.5 : 1\n          }\n        }));\n      }\n\n      thisGroup.add(itemGroup);\n    }, this);\n    endsText && this._renderEndsText(thisGroup, endsText[1], itemSize, showLabel, itemAlign);\n    layout.box(visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap'));\n    this.renderBackground(thisGroup);\n    this.positionGroup(thisGroup);\n  };\n\n  PiecewiseVisualMapView.prototype._enableHoverLink = function (itemGroup, pieceIndex) {\n    var _this = this;\n\n    itemGroup.on('mouseover', function () {\n      return onHoverLink('highlight');\n    }).on('mouseout', function () {\n      return onHoverLink('downplay');\n    });\n\n    var onHoverLink = function (method) {\n      var visualMapModel = _this.visualMapModel; // TODO: TYPE More detailed action types\n\n      visualMapModel.option.hoverLink && _this.api.dispatchAction({\n        type: method,\n        batch: helper.makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex), visualMapModel)\n      });\n    };\n  };\n\n  PiecewiseVisualMapView.prototype._getItemAlign = function () {\n    var visualMapModel = this.visualMapModel;\n    var modelOption = visualMapModel.option;\n\n    if (modelOption.orient === 'vertical') {\n      return helper.getItemAlign(visualMapModel, this.api, visualMapModel.itemSize);\n    } else {\n      // horizontal, most case left unless specifying right.\n      var align = modelOption.align;\n\n      if (!align || align === 'auto') {\n        align = 'left';\n      }\n\n      return align;\n    }\n  };\n\n  PiecewiseVisualMapView.prototype._renderEndsText = function (group, text, itemSize, showLabel, itemAlign) {\n    if (!text) {\n      return;\n    }\n\n    var itemGroup = new graphic.Group();\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: showLabel ? itemAlign === 'right' ? itemSize[0] : 0 : itemSize[0] / 2,\n        y: itemSize[1] / 2,\n        verticalAlign: 'middle',\n        align: showLabel ? itemAlign : 'center',\n        text: text\n      })\n    }));\n    group.add(itemGroup);\n  };\n  /**\n   * @private\n   * @return {Object} {peiceList, endsText} The order is the same as screen pixel order.\n   */\n\n\n  PiecewiseVisualMapView.prototype._getViewData = function () {\n    var visualMapModel = this.visualMapModel;\n    var viewPieceList = zrUtil.map(visualMapModel.getPieceList(), function (piece, index) {\n      return {\n        piece: piece,\n        indexInModelPieceList: index\n      };\n    });\n    var endsText = visualMapModel.get('text'); // Consider orient and inverse.\n\n    var orient = visualMapModel.get('orient');\n    var inverse = visualMapModel.get('inverse'); // Order of model pieceList is always [low, ..., high]\n\n    if (orient === 'horizontal' ? inverse : !inverse) {\n      viewPieceList.reverse();\n    } // Origin order of endsText is [high, low]\n    else if (endsText) {\n        endsText = endsText.slice().reverse();\n      }\n\n    return {\n      viewPieceList: viewPieceList,\n      endsText: endsText\n    };\n  };\n\n  PiecewiseVisualMapView.prototype._createItemSymbol = function (group, representValue, shapeParam) {\n    group.add(createSymbol( // symbol will be string\n    this.getControllerVisual(representValue, 'symbol'), shapeParam[0], shapeParam[1], shapeParam[2], shapeParam[3], // color will be string\n    this.getControllerVisual(representValue, 'color')));\n  };\n\n  PiecewiseVisualMapView.prototype._onItemClick = function (piece) {\n    var visualMapModel = this.visualMapModel;\n    var option = visualMapModel.option;\n    var selectedMode = option.selectedMode;\n\n    if (!selectedMode) {\n      return;\n    }\n\n    var selected = zrUtil.clone(option.selected);\n    var newKey = visualMapModel.getSelectedMapKey(piece);\n\n    if (selectedMode === 'single' || selectedMode === true) {\n      selected[newKey] = true;\n      zrUtil.each(selected, function (o, key) {\n        selected[key] = key === newKey;\n      });\n    } else {\n      selected[newKey] = !selected[newKey];\n    }\n\n    this.api.dispatchAction({\n      type: 'selectDataRange',\n      from: this.uid,\n      visualMapId: this.visualMapModel.id,\n      selected: selected\n    });\n  };\n\n  PiecewiseVisualMapView.type = 'visualMap.piecewise';\n  return PiecewiseVisualMapView;\n}(VisualMapView);\n\nexport default PiecewiseVisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PiecewiseModel from './PiecewiseModel.js';\nimport PiecewiseView from './PiecewiseView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(PiecewiseModel);\n  registers.registerComponentView(PiecewiseView);\n  installCommon(registers);\n}"],"names":["defaultSeriesFormatTooltip","opt","inlineValue","inlineValueType","subBlocks","sortParam","series","dataIndex","multipleSeries","data","getData","tooltipDims","mapDimensionsAll","tooltipDimLen","length","value","getRawValue","isValueArr","isArray","markerColor","retrieveVisualColorForTooltipMarker","formatArrResult","formatTooltipArrayValue","inlineValues","inlineValueTypes","blocks","dimInfo","getDimensionInfo","retrieveRawValue","type","seriesNameSpecified","isNameSpecified","seriesName","name","itemName","getName","inlineName","createTooltipMarkup","header","noHeader","markerType","noName","trim","valueType","concat","colorStr","isValueMultipleLine","reduce","val","idx","dimItem","tooltip","displayName","setEachItem","dim","otherDims","push","each","TOOLTIP_LINE_HEIGHT_CSS","getTooltipTextStyle","textStyle","renderMode","nameFontColor","color","nameFontSize","fontSize","nameFontWeight","fontWeight","valueFontColor","valueFontSize","valueFontWeight","nameStyle","encodeHTML","valueStyle","fill","HTML_GAPS","RICH_TEXT_GAPS","option","isSectionFragment","frag","getBuilder","buildSection","buildNameValue","getBlockGapLevel","gapLevel_1","subBlockLen","hasInnerGap_1","subBlock","subGapLevel","ctx","fragment","topMarginForOuterGap","toolTipTextStyle","gaps","getGap","subMarkupTextList","assert","orderMode","sortBlocks","slice","orderMap","valueAsc","valueDesc","hasOwn","comparator_1","SortOrderComparator","sort","a","b","evaluate","reverse","valueFormatter","subMarkupText","extend","html","join","richText","wrapBlockHTML","displayableHeader","makeValueReadable","useUTC","wrapInlineNameRichText","noValue","noMarker","map","valueTypeOption","markerStr","markupStyleCreator","makeTooltipMarker","readableName","readableValueList","valueAlignRight","valueCloseToMarker","_a","wrapInlineValueRichText","wrapInlineNameHTML","wrapInlineValueHTML","buildTooltipMarkup","builder","gapLevel","encodedContent","topGap","clearfix","marginCSS","leftHasMarker","style","marginCss","valueList","alignRight","paddingStr","alignCSS","wrapRichTextStyle","values","styles","paddingLeft","padding","align","getItemVisual","visualDrawType","convertToColorString","getPaddingFromTooltipModel","model","get","TooltipMarkupStyleCreator","this","richTextStyles","_nextStyleNameId","getRandomIdBase","prototype","_generateStyleName","markerId","marker","getTooltipMarker","isString","content","text","finalStl","stl","styleName","filterTransform","transform","params","rawItem","upstream","condition","parseConditionalExpression","config","valueGetterAttrMap","createHashMap","dimension","prepareGetValue","exprOption","errMsg","dimLoose","throwError","dimIdx","index","getValue","param","retrieveValueFromItem","resultData","i","len","count","getRawDataItem","sortTransform","orderExprList","normalizeToArray","orderDefList","orderExpr","order","parserName","parser","incomparable","errMsg_1","process","errMsg_2","getRawValueParser","comparator","sourceFormat","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","item0","item1","orderDef","val0","val1","result","install","registers","registerTransform","mapVisual","VisualMapping","eachVisual","zrUtil","asc","numberUtil","linearMap","VisualMapModel","_super","_this","apply","arguments","stateList","replacableOptionKeys","layoutMode","ignoreSize","dataBound","Infinity","targetVisuals","controllerVisuals","__extends","init","parentModel","ecModel","mergeDefaultAndTheme","optionUpdated","newOption","isInit","thisOption","visualSolution","textStyleModel","getModel","resetItemSize","completeVisualOption","resetVisual","supplementVisualOption","controller","target","getItemSymbol","getTargetSeriesIndices","optionSeriesIndex","seriesIndex","seriesIndices","eachSeries","seriesModel","modelUtil","eachTargetSeries","callback","context","getSeriesByIndex","call","isTargetSeries","is","formatValueText","isCategory","edgeSymbols","isMinMax","precision","formatter","textValue","toFixed","replace","Math","min","resetExtent","extent","max","_dataExtent","getDataDimensionIndex","optDim","getDimensionIndex","dimNames","dimensions","dimName","isCalculationCoord","storeDimIndex","getExtent","base","inRange","outOfRange","completeSingle","completeInactive","stateExist","stateAbsent","optExist","optAbsent","visualData","visualType","defa","visualDefault","hasOwnProperty","opacity","completeController","symbolExists","symbol","symbolSizeExists","symbolSize","inactiveColor","itemSymbol","defaultSymbol","state","itemSize","visuals","max_1","parseFloat","categories","setSelected","selected","getSelected","getValueState","getVisualMeta","getColorVisual","dependencies","defaultOption","show","z","left","right","top","bottom","itemWidth","itemHeight","inverse","orient","backgroundColor","borderColor","contentColor","borderWidth","textGap","ComponentModel","VisualMapView","autoPositionValues","api","render","visualMapModel","payload","doRender","group","removeAll","renderBackground","formatUtil","rect","getBoundingRect","add","Rect","z2","silent","shape","x","y","width","height","stroke","lineWidth","getControllerVisual","targetValue","visualCluster","opts","forceState","visualObj","defaultColor","getter","key","setter","mappings","visualTypes","visualMapping","convertOpacityToAlpha","__alphaForOpacity","applyVisual","positionGroup","layout","getBoxLayoutParams","getWidth","getHeight","ComponentView","paramsSet","getItemAlign","modelOption","itemAlign","ecSize","realIndex","reals","fakeValue","layoutInput","rParam","getLayoutRect","margin","makeHighDownBatch","batch","batchItem","dataIndexInside","highlightKey","componentIndex","use","installVisualMapContinuous","installVisualMapPiecewise","visualMapActionInfo","event","update","visualMapActionHander","eachComponent","mainType","query","visualMapEncodingHandlers","createOnAllSeries","reset","resetDefines","pipelineContext","large","visualMetaList","visualMeta","stops","outerColors","setVisual","valueState","resultVisual","getVisualFromData","mapping","getVisual","visualMapPreprocessor","visualMap","has","pieces","splitList","piece","start","end","obj","installed","installCommon","registerSubTypeDefaulter","splitNumber","calculable","registerAction","handler","registerVisual","PRIORITY","VISUAL","COMPONENT","registerPreprocessor","preprocessor","DEFAULT_BAR_BOUND","ContinuousModel","mappingOption","mappingMethod","dataExtent","_resetRange","isNaN","range","auto","dataInterval","findTargetDataIndices","dataIndices","seriesId","id","oVals","getColorStopValues","iVals","setStop","iIdx","oIdx","iLen","oLen","first","stopsLen","inheritDefaultOption","hoverLink","realtime","handleIcon","handleSize","handleStyle","indicatorIcon","indicatorSize","indicatorStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","step","stopValues","mathMin","mathMax","HOVER_LINK_SIZE","HOVER_LINK_OUT","ContinuousView","_shapes","_dataInterval","_handleEnds","_hoverLinkDataIndices","_api","from","uid","_buildView","thisGroup","_orient","_useHandle","_resetInterval","_renderBar","dataRangeText","_renderEndsText","_updateView","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","endsIndex","barGroup","mainGroup","position","_applyTransform","graphic","createTextStyle","verticalAlign","targetGroup","shapes","useHandle","helper","_createBarGroup","gradientBarGroup","createPolygon","getCursor","_dragHandle","setClipPath","r","textRect","getTextRect","textSize","handleThumbs","handleLabels","handleLabelPoints","_createHandle","_createIndicator","handleIndex","onDrift","onDragEnd","parsePercent","handleThumb","createSymbol","cursor","attr","draggable","drift","ondragend","onmousemove","e","eventTool","useStyle","getItemStyle","setStyle","strokeNoScale","strokeFirst","ensureState","setAsHighDownDispatcher","handleLabel","stateTransition","duration","handleLabelPoint","scale","indicator","invisible","ZRImage","pathStyle","image","indicatorLabel","indicatorLabelPoint","_firstShowIndicator","isEnd","dx","dy","_dragging","vertex","_updateInterval","_hideIndicator","dispatchAction","visualMapId","_hovering","_clearHoverLinkToSeries","useHoverLinkOnHandle","_doHoverLinkToSeries","sizeExtent","delta","handleEnds","sliderMove","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","barColor","setShape","barPoints","_updateHandle","colorStops","_makeColorGradient","symbolSizes","_createBarPoints","LinearGradient","handlesColor","sampleNumber","offset","currValue","scaleX","rotation","PI","scaleY","textPoint","applyTransform","getTransform","_showIndicator","cursorValue","rangeSymbol","halfHoverLinkSize","oldIndicatorPos","isHorizontal","indicatorNewProps","labelNewProps","isAnimationEnabled","animationCfg","easing","additive","animateTo","enterBlur","self","on","pos","offsetX","offsetY","zr","getZr","_hoverLinkFromSeriesMouseOver","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","getHalfHoverLinkSize","hoverRange","valueRange","oldBatch","newBatch","resultBatches","_dispatchHighDown","ecData","findEventDispatcher","currECData","getECData","dataModel","dataType","getStore","leaveBlur","indices","off","element","global","transformDirection","dispose","remove","points","hoverLinkDataSize","hoverLinkOnHandle","registerComponentModel","registerComponentView","PiecewiseModel","_pieceList","mode","_mode","_determineMode","resetMethods","_resetSelected","pieceList","visual","visualTypesInPieces","v","exists","getSelectedMapKey","selectedMode","hasSel_1","getPieceList","pieceIndex","pIdx","getRepresentValue","representValue","pieceInterval","interval","edge","unshift","curr","minOpen","maxOpen","itemGap","outPieceList","parseInt","splitStep","close","reformIntervals","cate","normalizeReverse","pieceListItem","item","label","close_1","closeList","infinityList","useMinMax","lg","names","PiecewiseVisualMapView","textFont","getFont","textFill","getTextColor","_getItemAlign","viewData","_getViewData","endsText","showLabel","viewPieceList","itemGroup","onclick","_onItemClick","_enableHoverLink","indexInModelPieceList","_createItemSymbol","visualState","font","onHoverLink","method","shapeParam","newKey","o","PiecewiseView"],"sourceRoot":""}
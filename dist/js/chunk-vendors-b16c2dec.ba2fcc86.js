"use strict";(self["webpackChunkdataboard"]=self["webpackChunkdataboard"]||[]).push([[878],{84427:function(e,t,a){a.d(t,{N:function(){return z}});var n=a(57490),i=a(10712),r=function(){function e(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return e}(),o=function(e){function t(t){var a=e.call(this,t)||this;return a.type="pointer",a}return(0,n.ZT)(t,e),t.prototype.getDefaultShape=function(){return new r},t.prototype.buildPath=function(e,t){var a=Math.cos,n=Math.sin,i=t.r,r=t.width,o=t.angle,s=t.x-a(o)*r*(r>=i/3?1:2),l=t.y-n(o)*r*(r>=i/3?1:2);o=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+a(o)*r,t.y+n(o)*r),e.lineTo(t.x+a(t.angle)*i,t.y+n(t.angle)*i),e.lineTo(t.x-a(o)*r,t.y-n(o)*r),e.lineTo(s,l)},t}(i.ZP),s=o,l=a(97782),g=a(22095),u=a(96498),c=a(39572),d=a(38154),p=a(97193),h=a(55589),y=a(17296),f=a(33122),m=a(39227),v=a(20482),S=a(44535),x=a(33051),w=a(70915),M=a(14014);function b(e,t){var a=e.get("center"),n=t.getWidth(),i=t.getHeight(),r=Math.min(n,i),o=(0,f.GM)(a[0],t.getWidth()),s=(0,f.GM)(a[1],t.getHeight()),l=(0,f.GM)(e.get("radius"),r/2);return{cx:o,cy:s,r:l}}function I(e,t){var a=null==e?"":e+"";return t&&((0,x.isString)(t)?a=t.replace("{value}",a):(0,x.isFunction)(t)&&(a=t(e))),a}var _=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return(0,n.ZT)(t,e),t.prototype.render=function(e,t,a){this.group.removeAll();var n=e.get(["axisLine","lineStyle","color"]),i=b(e,a);this._renderMain(e,t,a,n,i),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,t,a,n,i){var r=this.group,o=e.get("clockwise"),s=-e.get("startAngle")/180*Math.PI,g=-e.get("endAngle")/180*Math.PI,u=e.getModel("axisLine"),c=u.get("roundCap"),d=c?m.Z:l.C,p=u.get("show"),h=u.getModel("lineStyle"),y=h.get("width"),f=[s,g];(0,M.L)(f,!o),s=f[0],g=f[1];for(var v=g-s,S=s,x=0;p&&x<n.length;x++){var w=Math.min(Math.max(n[x][0],0),1);g=s+v*w;var b=new d({shape:{startAngle:S,endAngle:g,cx:i.cx,cy:i.cy,clockwise:o,r0:i.r-y,r:i.r},silent:!0});b.setStyle({fill:n[x][1]}),b.setStyle(h.getLineStyle(["color","width"])),r.add(b),S=g}var I=function(e){if(e<=0)return n[0][1];var t;for(t=0;t<n.length;t++)if(n[t][0]>=e&&(0===t?0:n[t-1][0])<e)return n[t][1];return n[t-1][1]};this._renderTicks(e,t,a,I,i,s,g,o,y),this._renderTitleAndDetail(e,t,a,I,i),this._renderAnchor(e,i),this._renderPointer(e,t,a,I,i,s,g,o,y)},t.prototype._renderTicks=function(e,t,a,n,i,r,o,s,l){for(var c,d,p=this.group,y=i.cx,m=i.cy,v=i.r,S=+e.get("min"),x=+e.get("max"),w=e.getModel("splitLine"),M=e.getModel("axisTick"),b=e.getModel("axisLabel"),_=e.get("splitNumber"),A=M.get("splitNumber"),L=(0,f.GM)(w.get("length"),v),N=(0,f.GM)(M.get("length"),v),D=r,C=(o-r)/_,z=C/A,T=w.getModel("lineStyle").getLineStyle(),Z=M.getModel("lineStyle").getLineStyle(),P=w.get("distance"),E=0;E<=_;E++){if(c=Math.cos(D),d=Math.sin(D),w.get("show")){var k=P?P+l:l,V=new g.Z({shape:{x1:c*(v-k)+y,y1:d*(v-k)+m,x2:c*(v-L-k)+y,y2:d*(v-L-k)+m},style:T,silent:!0});"auto"===T.stroke&&V.setStyle({stroke:n(E/_)}),p.add(V)}if(b.get("show")){k=b.get("distance")+P;var G=I((0,f.NM)(E/_*(x-S)+S),b.get("formatter")),R=n(E/_);p.add(new u.ZP({style:(0,h.Lr)(b,{text:G,x:c*(v-L-k)+y,y:d*(v-L-k)+m,verticalAlign:d<-.8?"top":d>.8?"bottom":"middle",align:c<-.4?"left":c>.4?"right":"center"},{inheritColor:R}),silent:!0}))}if(M.get("show")&&E!==_){k=M.get("distance");k=k?k+l:l;for(var O=0;O<=A;O++){c=Math.cos(D),d=Math.sin(D);var B=new g.Z({shape:{x1:c*(v-k)+y,y1:d*(v-k)+m,x2:c*(v-N-k)+y,y2:d*(v-N-k)+m},silent:!0,style:Z});"auto"===Z.stroke&&B.setStyle({stroke:n((E+O/A)/_)}),p.add(B),D+=z}D-=z}else D+=C}},t.prototype._renderPointer=function(e,t,a,n,i,r,o,g,u){var d=this.group,h=this._data,y=this._progressEls,M=[],b=e.get(["pointer","show"]),I=e.getModel("progress"),_=I.get("show"),A=e.getData(),L=A.mapDimension("value"),N=+e.get("min"),D=+e.get("max"),C=[N,D],z=[r,o];function T(t,a){var n,r=A.getItemModel(t),o=r.getModel("pointer"),l=(0,f.GM)(o.get("width"),i.r),g=(0,f.GM)(o.get("length"),i.r),u=e.get(["pointer","icon"]),c=o.get("offsetCenter"),d=(0,f.GM)(c[0],i.r),p=(0,f.GM)(c[1],i.r),h=o.get("keepAspect");return n=u?(0,v.th)(u,d-l/2,p-g,l,g,null,h):new s({shape:{angle:-Math.PI/2,width:l,r:g,x:d,y:p}}),n.rotation=-(a+Math.PI/2),n.x=i.cx,n.y=i.cy,n}function Z(e,t){var a=I.get("roundCap"),n=a?m.Z:l.C,o=I.get("overlap"),s=o?I.get("width"):u/A.count(),c=o?i.r-s:i.r-(e+1)*s,d=o?i.r:i.r-e*s,p=new n({shape:{startAngle:r,endAngle:t,cx:i.cx,cy:i.cy,clockwise:g,r0:c,r:d}});return o&&(p.z2=D-A.get(L,e)%D),p}(_||b)&&(A.diff(h).add((function(t){var a=A.get(L,t);if(b){var n=T(t,r);c.KZ(n,{rotation:-((isNaN(+a)?z[0]:(0,f.NU)(a,C,z,!0))+Math.PI/2)},e),d.add(n),A.setItemGraphicEl(t,n)}if(_){var i=Z(t,r),o=I.get("clip");c.KZ(i,{shape:{endAngle:(0,f.NU)(a,C,z,o)}},e),d.add(i),(0,w.Q)(e.seriesIndex,A.dataType,t,i),M[t]=i}})).update((function(t,a){var n=A.get(L,t);if(b){var i=h.getItemGraphicEl(a),o=i?i.rotation:r,s=T(t,o);s.rotation=o,c.D(s,{rotation:-((isNaN(+n)?z[0]:(0,f.NU)(n,C,z,!0))+Math.PI/2)},e),d.add(s),A.setItemGraphicEl(t,s)}if(_){var l=y[a],g=l?l.shape.endAngle:r,u=Z(t,g),p=I.get("clip");c.D(u,{shape:{endAngle:(0,f.NU)(n,C,z,p)}},e),d.add(u),(0,w.Q)(e.seriesIndex,A.dataType,t,u),M[t]=u}})).execute(),A.each((function(e){var t=A.getItemModel(e),a=t.getModel("emphasis"),i=a.get("focus"),r=a.get("blurScope"),o=a.get("disabled");if(b){var s=A.getItemGraphicEl(e),l=A.getItemVisual(e,"style"),g=l.fill;if(s instanceof S.ZP){var u=s.style;s.useStyle((0,x.extend)({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},l))}else s.useStyle(l),"pointer"!==s.type&&s.setColor(g);s.setStyle(t.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===s.style.fill&&s.setStyle("fill",n((0,f.NU)(A.get(L,e),C,[0,1],!0))),s.z2EmphasisLift=0,(0,p.WO)(s,t),(0,p.k5)(s,i,r,o)}if(_){var c=M[e];c.useStyle(A.getItemVisual(e,"style")),c.setStyle(t.getModel(["progress","itemStyle"]).getItemStyle()),c.z2EmphasisLift=0,(0,p.WO)(c,t),(0,p.k5)(c,i,r,o)}})),this._progressEls=M)},t.prototype._renderAnchor=function(e,t){var a=e.getModel("anchor"),n=a.get("show");if(n){var i=a.get("size"),r=a.get("icon"),o=a.get("offsetCenter"),s=a.get("keepAspect"),l=(0,v.th)(r,t.cx-i/2+(0,f.GM)(o[0],t.r),t.cy-i/2+(0,f.GM)(o[1],t.r),i,i,null,s);l.z2=a.get("showAbove")?1:0,l.setStyle(a.getModel("itemStyle").getItemStyle()),this.group.add(l)}},t.prototype._renderTitleAndDetail=function(e,t,a,n,i){var r=this,o=e.getData(),s=o.mapDimension("value"),l=+e.get("min"),g=+e.get("max"),c=new d.Z,p=[],y=[],m=e.isAnimationEnabled(),v=e.get(["pointer","showAbove"]);o.diff(this._data).add((function(e){p[e]=new u.ZP({silent:!0}),y[e]=new u.ZP({silent:!0})})).update((function(e,t){p[e]=r._titleEls[t],y[e]=r._detailEls[t]})).execute(),o.each((function(t){var a=o.getItemModel(t),r=o.get(s,t),u=new d.Z,S=n((0,f.NU)(r,[l,g],[0,1],!0)),x=a.getModel("title");if(x.get("show")){var w=x.get("offsetCenter"),M=i.cx+(0,f.GM)(w[0],i.r),b=i.cy+(0,f.GM)(w[1],i.r),_=p[t];_.attr({z2:v?0:2,style:(0,h.Lr)(x,{x:M,y:b,text:o.getName(t),align:"center",verticalAlign:"middle"},{inheritColor:S})}),u.add(_)}var A=a.getModel("detail");if(A.get("show")){var L=A.get("offsetCenter"),N=i.cx+(0,f.GM)(L[0],i.r),D=i.cy+(0,f.GM)(L[1],i.r),C=(0,f.GM)(A.get("width"),i.r),z=(0,f.GM)(A.get("height"),i.r),T=e.get(["progress","show"])?o.getItemVisual(t,"style").fill:S,Z=(_=y[t],A.get("formatter"));_.attr({z2:v?0:2,style:(0,h.Lr)(A,{x:N,y:D,text:I(r,Z),width:isNaN(C)?null:C,height:isNaN(z)?null:z,align:"center",verticalAlign:"middle"},{inheritColor:T})}),(0,h.pe)(_,{normal:A},r,(function(e){return I(e,Z)})),m&&(0,h.tD)(_,t,o,e,{getFormattedLabel:function(e,t,a,n,i,o){return I(o?o.interpolatedValue:r,Z)}}),u.add(_)}c.add(u)})),this.group.add(c),this._titleEls=p,this._detailEls=y},t.type="gauge",t}(y.Z),A=_,L=a(52787),N=a(9863),D=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.visualStyleAccessPath="itemStyle",a}return(0,n.ZT)(t,e),t.prototype.getInitialData=function(e,t){return(0,L.Z)(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(N.Z),C=D;function z(e){e.registerChartView(A),e.registerSeriesModel(C)}},40177:function(e,t,a){a.d(t,{N:function(){return le}});var n=a(33051);function i(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",(function(e){var a=e.getCategoriesData(),i=e.getGraph(),r=i.data,o=a.mapArray(a.getName);r.filterSelf((function(e){var a=r.getItemModel(e),i=a.getShallow("category");if(null!=i){(0,n.isNumber)(i)&&(i=o[i]);for(var s=0;s<t.length;s++)if(!t[s].isSelected(i))return!1}return!0}))}))}function r(e){var t={};e.eachSeriesByType("graph",(function(e){var a=e.getCategoriesData(),i=e.getData(),r={};a.each((function(n){var i=a.getName(n);r["ec-"+i]=n;var o=a.getItemModel(n),s=o.getModel("itemStyle").getItemStyle();s.fill||(s.fill=e.getColorFromPalette(i,t)),a.setItemVisual(n,"style",s);for(var l=["symbol","symbolSize","symbolKeepAspect"],g=0;g<l.length;g++){var u=o.getShallow(l[g],!0);null!=u&&a.setItemVisual(n,l[g],u)}})),a.count()&&i.each((function(e){var t=i.getItemModel(e),o=t.getShallow("category");if(null!=o){(0,n.isString)(o)&&(o=r["ec-"+o]);var s=a.getItemVisual(o,"style"),l=i.ensureUniqueItemVisual(e,"style");(0,n.extend)(l,s);for(var g=["symbol","symbolSize","symbolKeepAspect"],u=0;u<g.length;u++)i.setItemVisual(e,g[u],a.getItemVisual(o,g[u]))}}))}))}function o(e){return e instanceof Array||(e=[e,e]),e}function s(e){e.eachSeriesByType("graph",(function(e){var t=e.getGraph(),a=e.getEdgeData(),i=o(e.get("edgeSymbol")),r=o(e.get("edgeSymbolSize"));a.setVisual("fromSymbol",i&&i[0]),a.setVisual("toSymbol",i&&i[1]),a.setVisual("fromSymbolSize",r&&r[0]),a.setVisual("toSymbolSize",r&&r[1]),a.setVisual("style",e.getModel("lineStyle").getLineStyle()),a.each((function(e){var i=a.getItemModel(e),r=t.getEdgeByIndex(e),s=o(i.getShallow("symbol",!0)),l=o(i.getShallow("symbolSize",!0)),g=i.getModel("lineStyle").getLineStyle(),u=a.ensureUniqueItemVisual(e,"style");switch((0,n.extend)(u,g),u.stroke){case"source":var c=r.node1.getVisual("style");u.stroke=c&&c.fill;break;case"target":c=r.node2.getVisual("style");u.stroke=c&&c.fill;break}s[0]&&r.setVisual("fromSymbol",s[0]),s[1]&&r.setVisual("toSymbol",s[1]),l[0]&&r.setVisual("fromSymbolSize",l[0]),l[1]&&r.setVisual("toSymbolSize",l[1])}))}))}a(57658);var l=a(45280),g=a(55698);function u(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var a=e.getGraph();a.eachNode((function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])})),c(a,e)}}function c(e,t){e.eachEdge((function(e,a){var i=n.retrieve3(e.getModel().get(["lineStyle","curveness"]),-(0,g.hA)(e,t,a,!0),0),r=l.clone(e.node1.getLayout()),o=l.clone(e.node2.getLayout()),s=[r,o];+i&&s.push([(r[0]+o[0])/2-(r[1]-o[1])*i,(r[1]+o[1])/2-(o[0]-r[0])*i]),e.setLayout(s)}))}function d(e,t){e.eachSeriesByType("graph",(function(e){var t=e.get("layout"),a=e.coordinateSystem;if(a&&"view"!==a.type){var i=e.getData(),r=[];(0,n.each)(a.dimensions,(function(e){r=r.concat(i.mapDimensionsAll(e))}));for(var o=0;o<i.count();o++){for(var s=[],l=!1,g=0;g<r.length;g++){var d=i.get(r[g],o);isNaN(d)||(l=!0),s.push(d)}l?i.setItemLayout(o,a.dataToPoint(s)):i.setItemLayout(o,[NaN,NaN])}c(i.graph,e)}else t&&"none"!==t||u(e)}))}function p(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var a=e.option.nodeScaleRatio,n=t.scaleX,i=t.getZoom(),r=(i-1)*a+1;return r/n}function h(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var y=Math.PI,f=[];function m(e,t){var a=e.coordinateSystem;if(!a||"view"===a.type){var i=a.getBoundingRect(),r=e.getData(),o=r.graph,s=i.width/2+i.x,u=i.height/2+i.y,c=Math.min(i.width,i.height)/2,d=r.count();r.setLayout({cx:s,cy:u}),d&&(v[t](e,o,r,c,s,u,d),o.eachEdge((function(t,a){var i,r=n.retrieve3(t.getModel().get(["lineStyle","curveness"]),(0,g.hA)(t,e,a),0),o=l.clone(t.node1.getLayout()),c=l.clone(t.node2.getLayout()),d=(o[0]+c[0])/2,p=(o[1]+c[1])/2;+r&&(r*=3,i=[s*r+d*(1-r),u*r+p*(1-r)]),t.setLayout([o,c,i])})))}}var v={value:function(e,t,a,n,i,r,o){var s=0,l=a.getSum("value"),g=2*Math.PI/(l||o);t.eachNode((function(e){var t=e.getValue("value"),a=g*(l?t:1)/2;s+=a,e.setLayout([n*Math.cos(s)+i,n*Math.sin(s)+r]),s+=a}))},symbolSize:function(e,t,a,n,i,r,o){var s=0;f.length=o;var l=p(e);t.eachNode((function(e){var t=h(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=l;var a=Math.asin(t/2/n);isNaN(a)&&(a=y/2),f[e.dataIndex]=a,s+=2*a}));var g=(2*y-s)/o/2,u=0;t.eachNode((function(e){var t=g+f[e.dataIndex];u+=t,e.setLayout([n*Math.cos(u)+i,n*Math.sin(u)+r]),u+=t}))}};function S(e){e.eachSeriesByType("graph",(function(e){"circular"===e.get("layout")&&m(e,"symbolSize")}))}var x=l.scaleAndAdd;function w(e,t,a){for(var n=e,i=t,r=a.rect,o=r.width,s=r.height,g=[r.x+o/2,r.y+s/2],u=null==a.gravity?.1:a.gravity,c=0;c<n.length;c++){var d=n[c];d.p||(d.p=l.create(o*(Math.random()-.5)+g[0],s*(Math.random()-.5)+g[1])),d.pp=l.clone(d.p),d.edges=null}var p,h,y=null==a.friction?.6:a.friction,f=y;return{warmUp:function(){f=.8*y},setFixed:function(e){n[e].fixed=!0},setUnfixed:function(e){n[e].fixed=!1},beforeStep:function(e){p=e},afterStep:function(e){h=e},step:function(e){p&&p(n,i);for(var t=[],a=n.length,r=0;r<i.length;r++){var o=i[r];if(!o.ignoreForceLayout){var s=o.n1,c=o.n2;l.sub(t,c.p,s.p);var d=l.len(t)-o.d,y=c.w/(s.w+c.w);isNaN(y)&&(y=0),l.normalize(t,t),!s.fixed&&x(s.p,s.p,t,y*d*f),!c.fixed&&x(c.p,c.p,t,-(1-y)*d*f)}}for(r=0;r<a;r++){var m=n[r];m.fixed||(l.sub(t,g,m.p),x(m.p,m.p,t,u*f))}for(r=0;r<a;r++){s=n[r];for(var v=r+1;v<a;v++){c=n[v];l.sub(t,c.p,s.p);d=l.len(t);0===d&&(l.set(t,Math.random()-.5,Math.random()-.5),d=1);var S=(s.rep+c.rep)/d/d;!s.fixed&&x(s.pp,s.pp,t,S),!c.fixed&&x(c.pp,c.pp,t,-S)}}var w=[];for(r=0;r<a;r++){m=n[r];m.fixed||(l.sub(w,m.p,m.pp),x(m.p,m.p,w,f),l.copy(m.pp,m.p))}f*=.992;var M=f<.01;h&&h(n,i,M),e&&e(M)}}}var M=a(33122);function b(e){e.eachSeriesByType("graph",(function(e){var t=e.coordinateSystem;if(!t||"view"===t.type)if("force"===e.get("layout")){var a=e.preservedPoints||{},i=e.getGraph(),r=i.data,o=i.edgeData,s=e.getModel("force"),c=s.get("initLayout");e.preservedPoints?r.each((function(e){var t=r.getId(e);r.setItemLayout(e,a[t]||[NaN,NaN])})):c&&"none"!==c?"circular"===c&&m(e,"value"):u(e);var d=r.getDataExtent("value"),p=o.getDataExtent("value"),h=s.get("repulsion"),y=s.get("edgeLength"),f=n.isArray(h)?h:[h,h],v=n.isArray(y)?y:[y,y];v=[v[1],v[0]];var S=r.mapArray("value",(function(e,t){var a=r.getItemLayout(t),n=(0,M.NU)(e,d,f);return isNaN(n)&&(n=(f[0]+f[1])/2),{w:n,rep:n,fixed:r.getItemModel(t).get("fixed"),p:!a||isNaN(a[0])||isNaN(a[1])?null:a}})),x=o.mapArray("value",(function(t,a){var r=i.getEdgeByIndex(a),o=(0,M.NU)(t,p,v);isNaN(o)&&(o=(v[0]+v[1])/2);var s=r.getModel(),l=n.retrieve3(r.getModel().get(["lineStyle","curveness"]),-(0,g.hA)(r,e,a,!0),0);return{n1:S[r.node1.dataIndex],n2:S[r.node2.dataIndex],d:o,curveness:l,ignoreForceLayout:s.get("ignoreForceLayout")}})),b=t.getBoundingRect(),I=w(S,x,{rect:b,gravity:s.get("gravity"),friction:s.get("friction")});I.beforeStep((function(e,t){for(var a=0,n=e.length;a<n;a++)e[a].fixed&&l.copy(e[a].p,i.getNodeByIndex(a).getLayout())})),I.afterStep((function(e,t,n){for(var o=0,s=e.length;o<s;o++)e[o].fixed||i.getNodeByIndex(o).setLayout(e[o].p),a[r.getId(o)]=e[o].p;for(o=0,s=t.length;o<s;o++){var g=t[o],u=i.getEdgeByIndex(o),c=g.n1.p,d=g.n2.p,p=u.getLayout();p=p?p.slice():[],p[0]=p[0]||[],p[1]=p[1]||[],l.copy(p[0],c),l.copy(p[1],d),+g.curveness&&(p[2]=[(c[0]+d[0])/2-(c[1]-d[1])*g.curveness,(c[1]+d[1])/2-(d[0]-c[0])*g.curveness]),u.setLayout(p)}})),e.forceLayout=I,e.preservedPoints=a,I.step()}else e.forceLayout=null}))}var I=a(44351),_=a(14925),A=a(3726);function L(e,t,a){var i=(0,n.extend)(e.getBoxLayoutParams(),{aspect:a});return(0,_.ME)(i,{width:t.getWidth(),height:t.getHeight()})}function N(e,t){var a=[];return e.eachSeriesByType("graph",(function(e){var n=e.get("coordinateSystem");if(!n||"view"===n){var i=e.getData(),r=i.mapArray((function(e){var t=i.getItemModel(e);return[+t.get("x"),+t.get("y")]})),o=[],s=[];A.zk(r,o,s),s[0]-o[0]===0&&(s[0]+=1,o[0]-=1),s[1]-o[1]===0&&(s[1]+=1,o[1]-=1);var l=(s[0]-o[0])/(s[1]-o[1]),g=L(e,t,l);isNaN(l)&&(o=[g.x,g.y],s=[g.x+g.width,g.y+g.height]);var u=s[0]-o[0],c=s[1]-o[1],d=g.width,p=g.height,h=e.coordinateSystem=new I.Z;h.zoomLimit=e.get("scaleLimit"),h.setBoundingRect(o[0],o[1],u,c),h.setViewRect(g.x,g.y,d,p),h.setCenter(e.get("center"),t),h.setZoom(e.get("zoom")),a.push(h)}})),a}var D=a(57490),C=a(50387),z=a(21115),T=a(72756),Z=a(58745),P=a(43074),E=a(39572),k=a(18554),V=[],G=[],R=[],O=k.Zm,B=l.distSquare,U=Math.abs;function W(e,t,a){for(var n,i=e[0],r=e[1],o=e[2],s=1/0,l=a*a,g=.1,u=.1;u<=.9;u+=.1){V[0]=O(i[0],r[0],o[0],u),V[1]=O(i[1],r[1],o[1],u);var c=U(B(V,t)-l);c<s&&(s=c,n=u)}for(var d=0;d<32;d++){var p=n+g;G[0]=O(i[0],r[0],o[0],n),G[1]=O(i[1],r[1],o[1],n),R[0]=O(i[0],r[0],o[0],p),R[1]=O(i[1],r[1],o[1],p);c=B(G,t)-l;if(U(c)<.01)break;var h=B(R,t)-l;g/=2,c<0?h>=0?n+=g:n-=g:h>=0?n-=g:n+=g}return n}function F(e,t){var a=[],n=k.Lx,i=[[],[],[]],r=[[],[]],o=[];t/=2,e.eachEdge((function(e,s){var g=e.getLayout(),u=e.getVisual("fromSymbol"),c=e.getVisual("toSymbol");g.__original||(g.__original=[l.clone(g[0]),l.clone(g[1])],g[2]&&g.__original.push(l.clone(g[2])));var d=g.__original;if(null!=g[2]){if(l.copy(i[0],d[0]),l.copy(i[1],d[2]),l.copy(i[2],d[1]),u&&"none"!==u){var p=h(e.node1),y=W(i,d[0],p*t);n(i[0][0],i[1][0],i[2][0],y,a),i[0][0]=a[3],i[1][0]=a[4],n(i[0][1],i[1][1],i[2][1],y,a),i[0][1]=a[3],i[1][1]=a[4]}if(c&&"none"!==c){p=h(e.node2),y=W(i,d[1],p*t);n(i[0][0],i[1][0],i[2][0],y,a),i[1][0]=a[1],i[2][0]=a[2],n(i[0][1],i[1][1],i[2][1],y,a),i[1][1]=a[1],i[2][1]=a[2]}l.copy(g[0],i[0]),l.copy(g[1],i[2]),l.copy(g[2],i[1])}else{if(l.copy(r[0],d[0]),l.copy(r[1],d[1]),l.sub(o,r[1],r[0]),l.normalize(o,o),u&&"none"!==u){p=h(e.node1);l.scaleAndAdd(r[0],r[0],o,p*t)}if(c&&"none"!==c){p=h(e.node2);l.scaleAndAdd(r[1],r[1],o,-p*t)}l.copy(g[0],r[0]),l.copy(g[1],r[1])}}))}var H=a(17296),j=a(70915);function X(e){return"view"===e.type}var Y=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return(0,D.ZT)(t,e),t.prototype.init=function(e,t){var a=new C.Z,n=new z.Z,i=this.group;this._controller=new T.Z(t.getZr()),this._controllerHost={target:i},i.add(a.group),i.add(n.group),this._symbolDraw=a,this._lineDraw=n,this._firstRender=!0},t.prototype.render=function(e,t,a){var i=this,r=e.coordinateSystem;this._model=e;var o=this._symbolDraw,s=this._lineDraw,l=this.group;if(X(r)){var g={x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY};this._firstRender?l.attr(g):E.D(l,g,e)}F(e.getGraph(),p(e));var u=e.getData();o.updateData(u);var c=e.getEdgeData();s.updateData(c),this._updateNodeAndLinkScale(),this._updateController(e,t,a),clearTimeout(this._layoutTimeout);var d=e.forceLayout,h=e.get(["force","layoutAnimation"]);d&&this._startForceLayoutIteration(d,h),u.graph.eachNode((function(e){var t=e.dataIndex,a=e.getGraphicEl(),n=e.getModel();if(a){a.off("drag").off("dragend");var r=n.get("draggable");r&&a.on("drag",(function(){d&&(d.warmUp(),!i._layouting&&i._startForceLayoutIteration(d,h),d.setFixed(t),u.setItemLayout(t,[a.x,a.y]))})).on("dragend",(function(){d&&d.setUnfixed(t)})),a.setDraggable(r&&!!d,!!n.get("cursor"));var o=n.get(["emphasis","focus"]);"adjacency"===o&&((0,j.A)(a).focus=e.getAdjacentDataIndices())}})),u.graph.eachEdge((function(e){var t=e.getGraphicEl(),a=e.getModel().get(["emphasis","focus"]);t&&"adjacency"===a&&((0,j.A)(t).focus={edge:[e.dataIndex],node:[e.node1.dataIndex,e.node2.dataIndex]})}));var y="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),f=u.getLayout("cx"),m=u.getLayout("cy");u.eachItemGraphicEl((function(e,t){var a=u.getItemModel(t),i=a.get(["label","rotate"])||0,r=e.getSymbolPath();if(y){var o=u.getItemLayout(t),s=Math.atan2(o[1]-m,o[0]-f);s<0&&(s=2*Math.PI+s);var l=o[0]<f;l&&(s-=Math.PI);var g=l?"left":"right";r.setTextConfig({rotation:-s,position:g,origin:"center"});var c=r.ensureState("emphasis");n.extend(c.textConfig||(c.textConfig={}),{position:g})}else r.setTextConfig({rotation:i*=Math.PI/180})})),this._firstRender=!1},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,t){var a=this;(function n(){e.step((function(e){a.updateLayout(a._model),(a._layouting=!e)&&(t?a._layoutTimeout=setTimeout(n,16):n())}))})()},t.prototype._updateController=function(e,t,a){var n=this,i=this._controller,r=this._controllerHost,o=this.group;i.setPointerChecker((function(t,n,i){var r=o.getBoundingRect();return r.applyTransform(o.transform),r.contain(n,i)&&!(0,P.l)(t,a,e)})),X(e.coordinateSystem)?(i.enable(e.get("roam")),r.zoomLimit=e.get("scaleLimit"),r.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(t){Z.e(r,t.dx,t.dy),a.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){Z.H(r,t.scale,t.originX,t.originY),a.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),n._updateNodeAndLinkScale(),F(e.getGraph(),p(e)),n._lineDraw.updateLayout(),a.updateLabelLayout()}))):i.disable()},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,t=e.getData(),a=p(e);t.eachItemGraphicEl((function(e,t){e&&e.setSymbolScale(a)}))},t.prototype.updateLayout=function(e){F(e.getGraph(),p(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(H.Z),q=Y,K=a(50250),Q=a(14035),J=a(34925),$=a(7117),ee=a(43035),te=a(9863),ae=a(35245),ne=a(55971),ie=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a.hasSymbolVisual=!0,a}return(0,D.ZT)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments);var a=this;function n(){return a._categoriesData}this.legendVisualProvider=new ee.Z(n,n),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(t){e.prototype.mergeDefaultAndTheme.apply(this,arguments),(0,Q.Cc)(t,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,t){var a=e.edges||e.links||[],i=e.data||e.nodes||[],r=this;if(i&&a){(0,g.eO)(this);var o=(0,$.Z)(i,a,this,!0,s);return n.each(o.edges,(function(e){(0,g.WK)(e.node1,e.node2,this,e.dataIndex)}),this),o.data}function s(e,t){e.wrapMethod("getItemModel",(function(e){var t=r._categoriesModels,a=e.getShallow("category"),n=t[a];return n&&(n.parentModel=e.parentModel,e.parentModel=n),e}));var a=J.Z.prototype.getModel;function n(e,t){var n=a.call(this,e,t);return n.resolveParentPath=i,n}function i(e){if(e&&("label"===e[0]||"label"===e[1])){var t=e.slice();return"label"===e[0]?t[0]="edgeLabel":"label"===e[1]&&(t[1]="edgeLabel"),t}return e}t.wrapMethod("getItemModel",(function(e){return e.resolveParentPath=i,e.getModel=n,e}))}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,t,a){if("edge"===a){var n=this.getData(),i=this.getDataParams(e,a),r=n.graph.getEdgeByIndex(e),o=n.getName(r.node1.dataIndex),s=n.getName(r.node2.dataIndex),l=[];return null!=o&&l.push(o),null!=s&&l.push(s),(0,ae.TX)("nameValue",{name:l.join(" > "),value:i.value,noValue:null==i.value})}var g=(0,ne.w)({series:this,dataIndex:e,multipleSeries:t});return g},t.prototype._updateCategoriesData=function(){var e=n.map(this.option.categories||[],(function(e){return null!=e.value?e:n.extend({value:0},e)})),t=new K.Z(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray((function(e){return t.getItemModel(e)}))},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(te.Z),re=ie,oe=a(88373),se={type:"graphRoam",event:"graphRoam",update:"none"};function le(e){e.registerChartView(q),e.registerSeriesModel(re),e.registerProcessor(i),e.registerVisual(r),e.registerVisual(s),e.registerLayout(d),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,S),e.registerLayout(b),e.registerCoordinateSystem("graphView",{dimensions:I.Z.dimensions,create:N}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},n.noop),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},n.noop),e.registerAction(se,(function(e,t,a){t.eachComponent({mainType:"series",query:e},(function(t){var n=t.coordinateSystem,i=(0,oe.A)(n,e,void 0,a);t.setCenter&&t.setCenter(i.center),t.setZoom&&t.setZoom(i.zoom)}))}))}},82314:function(e,t,a){a.d(t,{N:function(){return A}});a(21703),a(57658);var n=a(57490),i=a(92317),r=a(25293),o=a(44535),s=a(97193),l=(a(48675),a(63408),a(14590),a(3462),a(23132)),g=256,u=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=l.qW.createCanvas();this.canvas=e}return e.prototype.update=function(e,t,a,n,i,r){var o=this._getBrush(),s=this._getGradient(i,"inRange"),l=this._getGradient(i,"outOfRange"),u=this.pointSize+this.blurSize,c=this.canvas,d=c.getContext("2d"),p=e.length;c.width=t,c.height=a;for(var h=0;h<p;++h){var y=e[h],f=y[0],m=y[1],v=y[2],S=n(v);d.globalAlpha=S,d.drawImage(o,f-u,m-u)}if(!c.width||!c.height)return c;var x=d.getImageData(0,0,c.width,c.height),w=x.data,M=0,b=w.length,I=this.minOpacity,_=this.maxOpacity,A=_-I;while(M<b){S=w[M+3]/256;var L=4*Math.floor(S*(g-1));if(S>0){var N=r(S)?s:l;S>0&&(S=S*A+I),w[M++]=N[L],w[M++]=N[L+1],w[M++]=N[L+2],w[M++]=N[L+3]*S*256}else M+=4}return d.putImageData(x,0,0),c},e.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=l.qW.createCanvas()),t=this.pointSize+this.blurSize,a=2*t;e.width=a,e.height=a;var n=e.getContext("2d");return n.clearRect(0,0,a,a),n.shadowOffsetX=a,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-t,t,this.pointSize,0,2*Math.PI,!0),n.closePath(),n.fill(),e},e.prototype._getGradient=function(e,t){for(var a=this._gradientPixels,n=a[t]||(a[t]=new Uint8ClampedArray(1024)),i=[0,0,0,0],r=0,o=0;o<256;o++)e[t](o/255,!0,i),n[r++]=i[0],n[r++]=i[1],n[r++]=i[2],n[r++]=i[3];return n},e}(),c=u,d=a(33051),p=a(17296),h=a(20344),y=a(55589);function f(e,t,a){var n=e[1]-e[0];t=d.map(t,(function(t){return{interval:[(t.interval[0]-e[0])/n,(t.interval[1]-e[0])/n]}}));var i=t.length,r=0;return function(e){var n;for(n=r;n<i;n++){var o=t[n].interval;if(o[0]<=e&&e<=o[1]){r=n;break}}if(n===i)for(n=r-1;n>=0;n--){o=t[n].interval;if(o[0]<=e&&e<=o[1]){r=n;break}}return n>=0&&n<i&&a[n]}}function m(e,t){var a=e[1]-e[0];return t=[(t[0]-e[0])/a,(t[1]-e[0])/a],function(e){return e>=t[0]&&e<=t[1]}}function v(e){var t=e.dimensions;return"lng"===t[0]&&"lat"===t[1]}var S=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return(0,n.ZT)(t,e),t.prototype.render=function(e,t,a){var n;t.eachComponent("visualMap",(function(t){t.eachTargetSeries((function(a){a===e&&(n=t)}))})),this._progressiveEls=null,this.group.removeAll();var i=e.coordinateSystem;"cartesian2d"===i.type||"calendar"===i.type?this._renderOnCartesianAndCalendar(e,a,0,e.getData().count()):v(i)&&this._renderOnGeo(i,e,n,a)},t.prototype.incrementalPrepareRender=function(e,t,a){this.group.removeAll()},t.prototype.incrementalRender=function(e,t,a,n){var i=t.coordinateSystem;i&&(v(i)?this.render(t,a,n):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(t,n,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){i.traverseElements(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,t,a,n,i){var o,l,g,u,c=e.coordinateSystem,d=(0,h.H)(c,"cartesian2d");if(d){var p=c.getAxis("x"),f=c.getAxis("y");0,o=p.getBandWidth()+.5,l=f.getBandWidth()+.5,g=p.scale.getExtent(),u=f.scale.getExtent()}for(var m=this.group,v=e.getData(),S=e.getModel(["emphasis","itemStyle"]).getItemStyle(),x=e.getModel(["blur","itemStyle"]).getItemStyle(),w=e.getModel(["select","itemStyle"]).getItemStyle(),M=e.get(["itemStyle","borderRadius"]),b=(0,y.k3)(e),I=e.getModel("emphasis"),_=I.get("focus"),A=I.get("blurScope"),L=I.get("disabled"),N=d?[v.mapDimension("x"),v.mapDimension("y"),v.mapDimension("value")]:[v.mapDimension("time"),v.mapDimension("value")],D=a;D<n;D++){var C=void 0,z=v.getItemVisual(D,"style");if(d){var T=v.get(N[0],D),Z=v.get(N[1],D);if(isNaN(v.get(N[2],D))||T<g[0]||T>g[1]||Z<u[0]||Z>u[1])continue;var P=c.dataToPoint([T,Z]);C=new r.Z({shape:{x:P[0]-o/2,y:P[1]-l/2,width:o,height:l},style:z})}else{if(isNaN(v.get(N[1],D)))continue;C=new r.Z({z2:1,shape:c.dataToRect([v.get(N[0],D)]).contentShape,style:z})}if(v.hasItemOption){var E=v.getItemModel(D),k=E.getModel("emphasis");S=k.getModel("itemStyle").getItemStyle(),x=E.getModel(["blur","itemStyle"]).getItemStyle(),w=E.getModel(["select","itemStyle"]).getItemStyle(),M=E.get(["itemStyle","borderRadius"]),_=k.get("focus"),A=k.get("blurScope"),L=k.get("disabled"),b=(0,y.k3)(E)}C.shape.r=M;var V=e.getRawValue(D),G="-";V&&null!=V[2]&&(G=V[2]+""),(0,y.ni)(C,b,{labelFetcher:e,labelDataIndex:D,defaultOpacity:z.opacity,defaultText:G}),C.ensureState("emphasis").style=S,C.ensureState("blur").style=x,C.ensureState("select").style=w,(0,s.k5)(C,_,A,L),C.incremental=i,i&&(C.states.emphasis.hoverLayer=!0),m.add(C),v.setItemGraphicEl(D,C),this._progressiveEls&&this._progressiveEls.push(C)}},t.prototype._renderOnGeo=function(e,t,a,n){var i=a.targetVisuals.inRange,r=a.targetVisuals.outOfRange,s=t.getData(),l=this._hmLayer||this._hmLayer||new c;l.blurSize=t.get("blurSize"),l.pointSize=t.get("pointSize"),l.minOpacity=t.get("minOpacity"),l.maxOpacity=t.get("maxOpacity");var g=e.getViewRect().clone(),u=e.getRoamTransform();g.applyTransform(u);var d=Math.max(g.x,0),p=Math.max(g.y,0),h=Math.min(g.width+g.x,n.getWidth()),y=Math.min(g.height+g.y,n.getHeight()),v=h-d,S=y-p,x=[s.mapDimension("lng"),s.mapDimension("lat"),s.mapDimension("value")],w=s.mapArray(x,(function(t,a,n){var i=e.dataToPoint([t,a]);return i[0]-=d,i[1]-=p,i.push(n),i})),M=a.getExtent(),b="visualMap.continuous"===a.type?m(M,a.option.range):f(M,a.getPieceList(),a.option.selected);l.update(w,v,S,i.color.getNormalizer(),{inRange:i.color.getColorMapper(),outOfRange:r.color.getColorMapper()},b);var I=new o.ZP({style:{width:v,height:S,x:d,y:p,image:l.canvas},silent:!0});this.group.add(I)},t.type="heatmap",t}(p.Z),x=S,w=a(9863),M=a(79691),b=a(85341),I=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=t.type,a}return(0,n.ZT)(t,e),t.prototype.getInitialData=function(e,t){return(0,M.Z)(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=b.Z.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(w.Z),_=I;function A(e){e.registerChartView(x),e.registerSeriesModel(_)}}}]);
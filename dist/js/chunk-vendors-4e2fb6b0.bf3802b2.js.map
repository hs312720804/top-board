{"version":3,"file":"js/chunk-vendors-4e2fb6b0.bf3802b2.js","mappings":"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","sources":["webpack://databoard/./node_modules/echarts/lib/data/helper/SeriesDataSchema.js","webpack://databoard/./node_modules/echarts/lib/data/helper/createDimensions.js","webpack://databoard/./node_modules/echarts/lib/data/helper/dataProvider.js","webpack://databoard/./node_modules/echarts/lib/data/helper/dataStackHelper.js","webpack://databoard/./node_modules/echarts/lib/data/helper/dataValueHelper.js","webpack://databoard/./node_modules/echarts/lib/data/helper/dimensionHelper.js","webpack://databoard/./node_modules/echarts/lib/data/helper/linkSeriesData.js","webpack://databoard/./node_modules/echarts/lib/data/helper/sourceHelper.js","webpack://databoard/./node_modules/echarts/lib/data/helper/sourceManager.js","webpack://databoard/./node_modules/echarts/lib/data/helper/transform.js","webpack://databoard/./node_modules/echarts/lib/export/api/helper.js","webpack://databoard/./node_modules/echarts/lib/export/api.js","webpack://databoard/./node_modules/echarts/lib/export/core.js","webpack://databoard/./node_modules/echarts/lib/extension.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { shouldRetrieveDataByName } from '../Source.js';\nvar inner = makeInner();\nvar dimTypeShort = {\n  float: 'f',\n  int: 'i',\n  ordinal: 'o',\n  number: 'n',\n  time: 't'\n};\n/**\n * Represents the dimension requirement of a series.\n *\n * NOTICE:\n * When there are too many dimensions in dataset and many series, only the used dimensions\n * (i.e., used by coord sys and declared in `series.encode`) are add to `dimensionDefineList`.\n * But users may query data by other unused dimension names.\n * In this case, users can only query data if and only if they have defined dimension names\n * via ec option, so we provide `getDimensionIndexFromSource`, which only query them from\n * `source` dimensions.\n */\n\nvar SeriesDataSchema =\n/** @class */\nfunction () {\n  function SeriesDataSchema(opt) {\n    this.dimensions = opt.dimensions;\n    this._dimOmitted = opt.dimensionOmitted;\n    this.source = opt.source;\n    this._fullDimCount = opt.fullDimensionCount;\n\n    this._updateDimOmitted(opt.dimensionOmitted);\n  }\n\n  SeriesDataSchema.prototype.isDimensionOmitted = function () {\n    return this._dimOmitted;\n  };\n\n  SeriesDataSchema.prototype._updateDimOmitted = function (dimensionOmitted) {\n    this._dimOmitted = dimensionOmitted;\n\n    if (!dimensionOmitted) {\n      return;\n    }\n\n    if (!this._dimNameMap) {\n      this._dimNameMap = ensureSourceDimNameMap(this.source);\n    }\n  };\n  /**\n   * @caution Can only be used when `dimensionOmitted: true`.\n   *\n   * Get index by user defined dimension name (i.e., not internal generate name).\n   * That is, get index from `dimensionsDefine`.\n   * If no `dimensionsDefine`, or no name get, return -1.\n   */\n\n\n  SeriesDataSchema.prototype.getSourceDimensionIndex = function (dimName) {\n    return retrieve2(this._dimNameMap.get(dimName), -1);\n  };\n  /**\n   * @caution Can only be used when `dimensionOmitted: true`.\n   *\n   * Notice: may return `null`/`undefined` if user not specify dimension names.\n   */\n\n\n  SeriesDataSchema.prototype.getSourceDimension = function (dimIndex) {\n    var dimensionsDefine = this.source.dimensionsDefine;\n\n    if (dimensionsDefine) {\n      return dimensionsDefine[dimIndex];\n    }\n  };\n\n  SeriesDataSchema.prototype.makeStoreSchema = function () {\n    var dimCount = this._fullDimCount;\n    var willRetrieveDataByName = shouldRetrieveDataByName(this.source);\n    var makeHashStrict = !shouldOmitUnusedDimensions(dimCount); // If source don't have dimensions or series don't omit unsed dimensions.\n    // Generate from seriesDimList directly\n\n    var dimHash = '';\n    var dims = [];\n\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < dimCount; fullDimIdx++) {\n      var property = void 0;\n      var type = void 0;\n      var ordinalMeta = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx]; // The list has been sorted by `storeDimIndex` asc.\n\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        property = willRetrieveDataByName ? seriesDimDef.name : null;\n        type = seriesDimDef.type;\n        ordinalMeta = seriesDimDef.ordinalMeta;\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n\n        if (sourceDimDef) {\n          property = willRetrieveDataByName ? sourceDimDef.name : null;\n          type = sourceDimDef.type;\n        }\n      }\n\n      dims.push({\n        property: property,\n        type: type,\n        ordinalMeta: ordinalMeta\n      }); // If retrieving data by index,\n      //   use <index, type, ordinalMeta> to determine whether data can be shared.\n      //   (Because in this case there might be no dimension name defined in dataset, but indices always exists).\n      //   (Indices are always 0, 1, 2, ..., so we can ignore them to shorten the hash).\n      // Otherwise if retrieving data by property name (like `data: [{aa: 123, bb: 765}, ...]`),\n      //   use <property, type, ordinalMeta> in hash.\n\n      if (willRetrieveDataByName && property != null // For data stack, we have make sure each series has its own dim on this store.\n      // So we do not add property to hash to make sure they can share this store.\n      && (!seriesDimDef || !seriesDimDef.isCalculationCoord)) {\n        dimHash += makeHashStrict // Use escape character '`' in case that property name contains '$'.\n        ? property.replace(/\\`/g, '`1').replace(/\\$/g, '`2') // For better performance, when there are large dimensions, tolerant this defects that hardly meet.\n        : property;\n      }\n\n      dimHash += '$';\n      dimHash += dimTypeShort[type] || 'f';\n\n      if (ordinalMeta) {\n        dimHash += ordinalMeta.uid;\n      }\n\n      dimHash += '$';\n    } // Source from endpoint(usually series) will be read differently\n    // when seriesLayoutBy or startIndex(which is affected by sourceHeader) are different.\n    // So we use this three props as key.\n\n\n    var source = this.source;\n    var hash = [source.seriesLayoutBy, source.startIndex, dimHash].join('$$');\n    return {\n      dimensions: dims,\n      hash: hash\n    };\n  };\n\n  SeriesDataSchema.prototype.makeOutputDimensionNames = function () {\n    var result = [];\n\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < this._fullDimCount; fullDimIdx++) {\n      var name_1 = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx]; // The list has been sorted by `storeDimIndex` asc.\n\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        if (!seriesDimDef.isCalculationCoord) {\n          name_1 = seriesDimDef.name;\n        }\n\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n\n        if (sourceDimDef) {\n          name_1 = sourceDimDef.name;\n        }\n      }\n\n      result.push(name_1);\n    }\n\n    return result;\n  };\n\n  SeriesDataSchema.prototype.appendCalculationDimension = function (dimDef) {\n    this.dimensions.push(dimDef);\n    dimDef.isCalculationCoord = true;\n    this._fullDimCount++; // If append dimension on a data store, consider the store\n    // might be shared by different series, series dimensions not\n    // really map to store dimensions.\n\n    this._updateDimOmitted(true);\n  };\n\n  return SeriesDataSchema;\n}();\n\nexport { SeriesDataSchema };\nexport function isSeriesDataSchema(schema) {\n  return schema instanceof SeriesDataSchema;\n}\nexport function createDimNameMap(dimsDef) {\n  var dataDimNameMap = createHashMap();\n\n  for (var i = 0; i < (dimsDef || []).length; i++) {\n    var dimDefItemRaw = dimsDef[i];\n    var userDimName = isObject(dimDefItemRaw) ? dimDefItemRaw.name : dimDefItemRaw;\n\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      dataDimNameMap.set(userDimName, i);\n    }\n  }\n\n  return dataDimNameMap;\n}\nexport function ensureSourceDimNameMap(source) {\n  var innerSource = inner(source);\n  return innerSource.dimNameMap || (innerSource.dimNameMap = createDimNameMap(source.dimensionsDefine));\n}\nexport function shouldOmitUnusedDimensions(dimCount) {\n  return dimCount > 30;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\nimport SeriesDimensionDefine from '../SeriesDimensionDefine.js';\nimport { createHashMap, defaults, each, extend, isObject, isString } from 'zrender/lib/core/util.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { CtorInt32Array } from '../DataStore.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './sourceHelper.js';\nimport { createDimNameMap, ensureSourceDimNameMap, SeriesDataSchema, shouldOmitUnusedDimensions } from './SeriesDataSchema.js';\n/**\n * For outside usage compat (like echarts-gl are using it).\n */\n\nexport function createDimensions(source, opt) {\n  return prepareSeriesDataSchema(source, opt).dimensions;\n}\n/**\n * This method builds the relationship between:\n * + \"what the coord sys or series requires (see `coordDimensions`)\",\n * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimensionsDefine` and `opt.encodeDefine`)\"\n * + \"what the data source provids (see `source`)\".\n *\n * Some guess strategy will be adapted if user does not define something.\n * If no 'value' dimension specified, the first no-named dimension will be\n * named as 'value'.\n *\n * @return The results are always sorted by `storeDimIndex` asc.\n */\n\nexport default function prepareSeriesDataSchema( // TODO: TYPE completeDimensions type\nsource, opt) {\n  if (!isSourceInstance(source)) {\n    source = createSourceFromSeriesDataOption(source);\n  }\n\n  opt = opt || {};\n  var sysDims = opt.coordDimensions || [];\n  var dimsDef = opt.dimensionsDefine || source.dimensionsDefine || [];\n  var coordDimNameMap = createHashMap();\n  var resultList = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimensionsCount); // Try to ignore unused dimensions if sharing a high dimension datastore\n  // 30 is an experience value.\n\n  var omitUnusedDimensions = opt.canOmitUnusedDimensions && shouldOmitUnusedDimensions(dimCount);\n  var isUsingSourceDimensionsDef = dimsDef === source.dimensionsDefine;\n  var dataDimNameMap = isUsingSourceDimensionsDef ? ensureSourceDimNameMap(source) : createDimNameMap(dimsDef);\n  var encodeDef = opt.encodeDefine;\n\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n\n  var encodeDefMap = createHashMap(encodeDef);\n  var indicesMap = new CtorInt32Array(dimCount);\n\n  for (var i = 0; i < indicesMap.length; i++) {\n    indicesMap[i] = -1;\n  }\n\n  function getResultItem(dimIdx) {\n    var idx = indicesMap[dimIdx];\n\n    if (idx < 0) {\n      var dimDefItemRaw = dimsDef[dimIdx];\n      var dimDefItem = isObject(dimDefItemRaw) ? dimDefItemRaw : {\n        name: dimDefItemRaw\n      };\n      var resultItem = new SeriesDimensionDefine();\n      var userDimName = dimDefItem.name;\n\n      if (userDimName != null && dataDimNameMap.get(userDimName) != null) {\n        // Only if `series.dimensions` is defined in option\n        // displayName, will be set, and dimension will be displayed vertically in\n        // tooltip by default.\n        resultItem.name = resultItem.displayName = userDimName;\n      }\n\n      dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n      dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n      var newIdx = resultList.length;\n      indicesMap[dimIdx] = newIdx;\n      resultItem.storeDimIndex = dimIdx;\n      resultList.push(resultItem);\n      return resultItem;\n    }\n\n    return resultList[idx];\n  }\n\n  if (!omitUnusedDimensions) {\n    for (var i = 0; i < dimCount; i++) {\n      getResultItem(i);\n    }\n  } // Set `coordDim` and `coordDimIndex` by `encodeDefMap` and normalize `encodeDefMap`.\n\n\n  encodeDefMap.each(function (dataDimsRaw, coordDim) {\n    var dataDims = normalizeToArray(dataDimsRaw).slice(); // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n    // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n    // this case.\n\n    if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDefMap.set(coordDim, false);\n      return;\n    }\n\n    var validDataDims = encodeDefMap.set(coordDim, []);\n    each(dataDims, function (resultDimIdxOrName, idx) {\n      // The input resultDimIdx can be dim name or index.\n      var resultDimIdx = isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(getResultItem(resultDimIdx), coordDim, idx);\n      }\n    });\n  }); // Apply templates and default order from `sysDims`.\n\n  var availDimIdx = 0;\n  each(sysDims, function (sysDimItemRaw) {\n    var coordDim;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n    var sysDimItem;\n\n    if (isString(sysDimItemRaw)) {\n      coordDim = sysDimItemRaw;\n      sysDimItem = {};\n    } else {\n      sysDimItem = sysDimItemRaw;\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = extend({}, sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta; // `coordDimIndex` should not be set directly.\n\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n\n    var dataDims = encodeDefMap.get(coordDim); // negative resultDimIdx means no need to mapping.\n\n    if (dataDims === false) {\n      return;\n    }\n\n    dataDims = normalizeToArray(dataDims); // dimensions provides default dim sequences.\n\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < dimCount && getResultItem(availDimIdx).coordDim != null) {\n          availDimIdx++;\n        }\n\n        availDimIdx < dimCount && dataDims.push(availDimIdx++);\n      }\n    } // Apply templates.\n\n\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = getResultItem(resultDimIdx); // Coordinate system has a higher priority on dim type than source.\n\n      if (isUsingSourceDimensionsDef && sysDimItem.type != null) {\n        resultItem.type = sysDimItem.type;\n      }\n\n      applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      } // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n\n\n      sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (VISUAL_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  } // Make sure the first extra dim is 'value'.\n\n\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value';\n\n  function ifNoNameFillWithCoordName(resultItem) {\n    if (resultItem.name == null) {\n      // Duplication will be removed in the next step.\n      resultItem.name = resultItem.coordDim;\n    }\n  } // Set dim `name` and other `coordDim` and other props.\n\n\n  if (!omitUnusedDimensions) {\n    for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n      var resultItem = getResultItem(resultDimIdx);\n      var coordDim = resultItem.coordDim;\n\n      if (coordDim == null) {\n        // TODO no need to generate coordDim for isExtraCoord?\n        resultItem.coordDim = genCoordDimName(extra, coordDimNameMap, fromZero);\n        resultItem.coordDimIndex = 0; // Series specified generateCoord is using out.\n\n        if (!generateCoord || generateCoordCount <= 0) {\n          resultItem.isExtraCoord = true;\n        }\n\n        generateCoordCount--;\n      }\n\n      ifNoNameFillWithCoordName(resultItem);\n\n      if (resultItem.type == null && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must // Consider the case:\n      // {\n      //    dataset: {source: [\n      //        ['2001', 123],\n      //        ['2002', 456],\n      //        ...\n      //        ['The others', 987],\n      //    ]},\n      //    series: {type: 'pie'}\n      // }\n      // The first column should better be treated as a \"ordinal\" although it\n      // might not be detected as an \"ordinal\" by `guessOrdinal`.\n      || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n        resultItem.type = 'ordinal';\n      }\n    }\n  } else {\n    each(resultList, function (resultItem) {\n      // PENDING: guessOrdinal or let user specify type: 'ordinal' manually?\n      ifNoNameFillWithCoordName(resultItem);\n    }); // Sort dimensions: there are some rule that use the last dim as label,\n    // and for some latter travel process easier.\n\n    resultList.sort(function (item0, item1) {\n      return item0.storeDimIndex - item1.storeDimIndex;\n    });\n  }\n\n  removeDuplication(resultList);\n  return new SeriesDataSchema({\n    source: source,\n    dimensions: resultList,\n    fullDimensionCount: dimCount,\n    dimensionOmitted: omitUnusedDimensions\n  });\n}\n\nfunction removeDuplication(result) {\n  var duplicationMap = createHashMap();\n\n  for (var i = 0; i < result.length; i++) {\n    var dim = result[i];\n    var dimOriginalName = dim.name;\n    var count = duplicationMap.get(dimOriginalName) || 0;\n\n    if (count > 0) {\n      // Starts from 0.\n      dim.name = dimOriginalName + (count - 1);\n    }\n\n    count++;\n    duplicationMap.set(dimOriginalName, count);\n  }\n} // ??? TODO\n// Originally detect dimCount by data[0]. Should we\n// optimize it to only by sysDims and dimensions and encode.\n// So only necessary dims will be initialized.\n// But\n// (1) custom series should be considered. where other dims\n// may be visited.\n// (2) sometimes user need to calculate bubble size or use visualMap\n// on other dimensions besides coordSys needed.\n// So, dims that is not used by system, should be shared in data store?\n\n\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  // Note that the result dimCount should not small than columns count\n  // of data, otherwise `dataDimNameMap` checking will be incorrect.\n  var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef;\n\n    if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n      dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n    }\n  });\n  return dimCount;\n}\n\nfunction genCoordDimName(name, map, fromZero) {\n  if (fromZero || map.hasKey(name)) {\n    var i = 0;\n\n    while (map.hasKey(name + i)) {\n      i++;\n    }\n\n    name += i;\n  }\n\n  map.set(name, true);\n  return name;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _a, _b, _c; // TODO\n// ??? refactor? check the outer usage of data provider.\n// merge with defaultDimValueGetter?\n\n\nimport { isTypedArray, extend, assert, each, isObject, bind } from 'zrender/lib/core/util.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SERIES_LAYOUT_BY_COLUMN, SERIES_LAYOUT_BY_ROW } from '../../util/types.js';\nvar providerMethods;\nvar mountMethods;\n/**\n * If normal array used, mutable chunk size is supported.\n * If typed array used, chunk size must be fixed.\n */\n\nvar DefaultDataProvider =\n/** @class */\nfunction () {\n  function DefaultDataProvider(sourceParam, dimSize) {\n    // let source: Source;\n    var source = !isSourceInstance(sourceParam) ? createSourceFromSeriesDataOption(sourceParam) : sourceParam; // declare source is Source;\n\n    this._source = source;\n    var data = this._data = source.data; // Typed array. TODO IE10+?\n\n    if (source.sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (dimSize == null) {\n          throw new Error('Typed array data must specify dimension size');\n        }\n      }\n\n      this._offset = 0;\n      this._dimSize = dimSize;\n      this._data = data;\n    }\n\n    mountMethods(this, data, source);\n  }\n\n  DefaultDataProvider.prototype.getSource = function () {\n    return this._source;\n  };\n\n  DefaultDataProvider.prototype.count = function () {\n    return 0;\n  };\n\n  DefaultDataProvider.prototype.getItem = function (idx, out) {\n    return;\n  };\n\n  DefaultDataProvider.prototype.appendData = function (newData) {};\n\n  DefaultDataProvider.prototype.clean = function () {};\n\n  DefaultDataProvider.protoInitialize = function () {\n    // PENDING: To avoid potential incompat (e.g., prototype\n    // is visited somewhere), still init them on prototype.\n    var proto = DefaultDataProvider.prototype;\n    proto.pure = false;\n    proto.persistent = true;\n  }();\n\n  DefaultDataProvider.internalField = function () {\n    var _a;\n\n    mountMethods = function (provider, data, source) {\n      var sourceFormat = source.sourceFormat;\n      var seriesLayoutBy = source.seriesLayoutBy;\n      var startIndex = source.startIndex;\n      var dimsDef = source.dimensionsDefine;\n      var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\n      }\n\n      extend(provider, methods);\n\n      if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n        provider.getItem = getItemForTypedArray;\n        provider.count = countForTypedArray;\n        provider.fillStorage = fillStorageForTypedArray;\n      } else {\n        var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\n        provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\n        var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\n        provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\n      }\n    };\n\n    var getItemForTypedArray = function (idx, out) {\n      idx = idx - this._offset;\n      out = out || [];\n      var data = this._data;\n      var dimSize = this._dimSize;\n      var offset = dimSize * idx;\n\n      for (var i = 0; i < dimSize; i++) {\n        out[i] = data[offset + i];\n      }\n\n      return out;\n    };\n\n    var fillStorageForTypedArray = function (start, end, storage, extent) {\n      var data = this._data;\n      var dimSize = this._dimSize;\n\n      for (var dim = 0; dim < dimSize; dim++) {\n        var dimExtent = extent[dim];\n        var min = dimExtent[0] == null ? Infinity : dimExtent[0];\n        var max = dimExtent[1] == null ? -Infinity : dimExtent[1];\n        var count = end - start;\n        var arr = storage[dim];\n\n        for (var i = 0; i < count; i++) {\n          // appendData with TypedArray will always do replace in provider.\n          var val = data[i * dimSize + dim];\n          arr[start + i] = val;\n          val < min && (min = val);\n          val > max && (max = val);\n        }\n\n        dimExtent[0] = min;\n        dimExtent[1] = max;\n      }\n    };\n\n    var countForTypedArray = function () {\n      return this._data ? this._data.length / this._dimSize : 0;\n    };\n\n    providerMethods = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\n      pure: true,\n      appendData: function () {\n        throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\n      }\n    }, _a[SOURCE_FORMAT_OBJECT_ROWS] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\n      pure: true,\n      appendData: function (newData) {\n        var data = this._data;\n        each(newData, function (newCol, key) {\n          var oldCol = data[key] || (data[key] = []);\n\n          for (var i = 0; i < (newCol || []).length; i++) {\n            oldCol.push(newCol[i]);\n          }\n        });\n      }\n    }, _a[SOURCE_FORMAT_ORIGINAL] = {\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_TYPED_ARRAY] = {\n      persistent: false,\n      pure: true,\n      appendData: function (newData) {\n        if (process.env.NODE_ENV !== 'production') {\n          assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\n        }\n\n        this._data = newData;\n      },\n      // Clean self if data is already used.\n      clean: function () {\n        // PENDING\n        this._offset += this.count();\n        this._data = null;\n      }\n    }, _a);\n\n    function appendDataSimply(newData) {\n      for (var i = 0; i < newData.length; i++) {\n        this._data.push(newData[i]);\n      }\n    }\n  }();\n\n  return DefaultDataProvider;\n}();\n\nexport { DefaultDataProvider };\n\nvar getItemSimply = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx];\n};\n\nvar rawSourceItemGetterMap = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx + startIndex];\n}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx, out) {\n  idx += startIndex;\n  var item = out || [];\n  var data = rawData;\n\n  for (var i = 0; i < data.length; i++) {\n    var row = data[i];\n    item[i] = row ? row[idx] : null;\n  }\n\n  return item;\n}, _a[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply, _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx, out) {\n  var item = out || [];\n\n  for (var i = 0; i < dimsDef.length; i++) {\n    var dimName = dimsDef[i].name;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (dimName == null) {\n        throw new Error();\n      }\n    }\n\n    var col = rawData[dimName];\n    item[i] = col ? col[idx] : null;\n  }\n\n  return item;\n}, _a[SOURCE_FORMAT_ORIGINAL] = getItemSimply, _a);\nexport function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n\n  return method;\n}\n\nvar countSimply = function (rawData, startIndex, dimsDef) {\n  return rawData.length;\n};\n\nvar rawSourceDataCounterMap = (_b = {}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\n  return Math.max(0, rawData.length - startIndex);\n}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\n  var row = rawData[0];\n  return row ? Math.max(0, row.length - startIndex) : 0;\n}, _b[SOURCE_FORMAT_OBJECT_ROWS] = countSimply, _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\n  var dimName = dimsDef[0].name;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (dimName == null) {\n      throw new Error();\n    }\n  }\n\n  var col = rawData[dimName];\n  return col ? col.length : 0;\n}, _b[SOURCE_FORMAT_ORIGINAL] = countSimply, _b);\nexport function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n\n  return method;\n}\n\nvar getRawValueSimply = function (dataItem, dimIndex, property) {\n  return dataItem[dimIndex];\n};\n\nvar rawSourceValueGetterMap = (_c = {}, _c[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply, _c[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, property) {\n  return dataItem[property];\n}, _c[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply, _c[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, property) {\n  // FIXME: In some case (markpoint in geo (geo-map.html)),\n  // dataItem is {coord: [...]}\n  var value = getDataItemValue(dataItem);\n  return !(value instanceof Array) ? value : value[dimIndex];\n}, _c[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply, _c);\nexport function getRawSourceValueGetter(sourceFormat) {\n  var method = rawSourceValueGetterMap[sourceFormat];\n\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get value on \"' + sourceFormat + '\".');\n  }\n\n  return method;\n}\n\nfunction getMethodMapKey(sourceFormat, seriesLayoutBy) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + '_' + seriesLayoutBy : sourceFormat;\n} // ??? FIXME can these logic be more neat: getRawValue, getRawDataItem,\n// Consider persistent.\n// Caution: why use raw value to display on label or tooltip?\n// A reason is to avoid format. For example time value we do not know\n// how to format is expected. More over, if stack is used, calculated\n// value may be 0.91000000001, which have brings trouble to display.\n// TODO: consider how to treat null/undefined/NaN when display?\n\n\nexport function retrieveRawValue(data, dataIndex, // If dimIndex is null/undefined, return OptionDataItem.\n// Otherwise, return OptionDataValue.\ndim) {\n  if (!data) {\n    return;\n  } // Consider data may be not persistent.\n\n\n  var dataItem = data.getRawDataItem(dataIndex);\n\n  if (dataItem == null) {\n    return;\n  }\n\n  var store = data.getStore();\n  var sourceFormat = store.getSource().sourceFormat;\n\n  if (dim != null) {\n    var dimIndex = data.getDimensionIndex(dim);\n    var property = store.getDimensionProperty(dimIndex);\n    return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, property);\n  } else {\n    var result = dataItem;\n\n    if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      result = getDataItemValue(dataItem);\n    }\n\n    return result;\n  }\n}\n/**\n * Compatible with some cases (in pie, map) like:\n * data: [{name: 'xx', value: 5, selected: true}, ...]\n * where only sourceFormat is 'original' and 'objectRows' supported.\n *\n * // TODO\n * Supported detail options in data item when using 'arrayRows'.\n *\n * @param data\n * @param dataIndex\n * @param attr like 'selected'\n */\n\nexport function retrieveRawAttr(data, dataIndex, attr) {\n  if (!data) {\n    return;\n  }\n\n  var sourceFormat = data.getStore().getSource().sourceFormat;\n\n  if (sourceFormat !== SOURCE_FORMAT_ORIGINAL && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n    return;\n  }\n\n  var dataItem = data.getRawDataItem(dataIndex);\n\n  if (sourceFormat === SOURCE_FORMAT_ORIGINAL && !isObject(dataItem)) {\n    dataItem = null;\n  }\n\n  if (dataItem) {\n    return dataItem[attr];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isString } from 'zrender/lib/core/util.js';\nimport { isSeriesDataSchema } from './SeriesDataSchema.js';\n/**\n * Note that it is too complicated to support 3d stack by value\n * (have to create two-dimension inverted index), so in 3d case\n * we just support that stacked by index.\n *\n * @param seriesModel\n * @param dimensionsInput The same as the input of <module:echarts/data/SeriesData>.\n *        The input will be modified.\n * @param opt\n * @param opt.stackedCoordDimension Specify a coord dimension if needed.\n * @param opt.byIndex=false\n * @return calculationInfo\n * {\n *     stackedDimension: string\n *     stackedByDimension: string\n *     isStackedByIndex: boolean\n *     stackedOverDimension: string\n *     stackResultDimension: string\n * }\n */\n\nexport function enableDataStack(seriesModel, dimensionsInput, opt) {\n  opt = opt || {};\n  var byIndex = opt.byIndex;\n  var stackedCoordDimension = opt.stackedCoordDimension;\n  var dimensionDefineList;\n  var schema;\n  var store;\n\n  if (isLegacyDimensionsInput(dimensionsInput)) {\n    dimensionDefineList = dimensionsInput;\n  } else {\n    schema = dimensionsInput.schema;\n    dimensionDefineList = schema.dimensions;\n    store = dimensionsInput.store;\n  } // Compatibal: when `stack` is set as '', do not stack.\n\n\n  var mayStack = !!(seriesModel && seriesModel.get('stack'));\n  var stackedByDimInfo;\n  var stackedDimInfo;\n  var stackResultDimension;\n  var stackedOverDimension;\n  each(dimensionDefineList, function (dimensionInfo, index) {\n    if (isString(dimensionInfo)) {\n      dimensionDefineList[index] = dimensionInfo = {\n        name: dimensionInfo\n      };\n    }\n\n    if (mayStack && !dimensionInfo.isExtraCoord) {\n      // Find the first ordinal dimension as the stackedByDimInfo.\n      if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\n        stackedByDimInfo = dimensionInfo;\n      } // Find the first stackable dimension as the stackedDimInfo.\n\n\n      if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\n        stackedDimInfo = dimensionInfo;\n      }\n    }\n  });\n\n  if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\n    // Compatible with previous design, value axis (time axis) only stack by index.\n    // It may make sense if the user provides elaborately constructed data.\n    byIndex = true;\n  } // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\n  // That put stack logic in List is for using conveniently in echarts extensions, but it\n  // might not be a good way.\n\n\n  if (stackedDimInfo) {\n    // Use a weird name that not duplicated with other names.\n    // Also need to use seriesModel.id as postfix because different\n    // series may share same data store. The stack dimension needs to be distinguished.\n    stackResultDimension = '__\\0ecstackresult_' + seriesModel.id;\n    stackedOverDimension = '__\\0ecstackedover_' + seriesModel.id; // Create inverted index to fast query index by value.\n\n    if (stackedByDimInfo) {\n      stackedByDimInfo.createInvertedIndices = true;\n    }\n\n    var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\n    var stackedDimType = stackedDimInfo.type;\n    var stackedDimCoordIndex_1 = 0;\n    each(dimensionDefineList, function (dimensionInfo) {\n      if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\n        stackedDimCoordIndex_1++;\n      }\n    });\n    var stackedOverDimensionDefine = {\n      name: stackResultDimension,\n      coordDim: stackedDimCoordDim_1,\n      coordDimIndex: stackedDimCoordIndex_1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length\n    };\n    var stackResultDimensionDefine = {\n      name: stackedOverDimension,\n      // This dimension contains stack base (generally, 0), so do not set it as\n      // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\n      coordDim: stackedOverDimension,\n      coordDimIndex: stackedDimCoordIndex_1 + 1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length + 1\n    };\n\n    if (schema) {\n      if (store) {\n        stackedOverDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackedOverDimension, stackedDimType);\n        stackResultDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackResultDimension, stackedDimType);\n      }\n\n      schema.appendCalculationDimension(stackedOverDimensionDefine);\n      schema.appendCalculationDimension(stackResultDimensionDefine);\n    } else {\n      dimensionDefineList.push(stackedOverDimensionDefine);\n      dimensionDefineList.push(stackResultDimensionDefine);\n    }\n  }\n\n  return {\n    stackedDimension: stackedDimInfo && stackedDimInfo.name,\n    stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\n    isStackedByIndex: byIndex,\n    stackedOverDimension: stackedOverDimension,\n    stackResultDimension: stackResultDimension\n  };\n}\n\nfunction isLegacyDimensionsInput(dimensionsInput) {\n  return !isSeriesDataSchema(dimensionsInput.schema);\n}\n\nexport function isDimensionStacked(data, stackedDim) {\n  // Each single series only maps to one pair of axis. So we do not need to\n  // check stackByDim, whatever stacked by a dimension or stacked by index.\n  return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\n}\nexport function getStackedDimension(data, targetDim) {\n  return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseDate, numericToNumber } from '../../util/number.js';\nimport { createHashMap, trim, hasOwn, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { throwError } from '../../util/log.js';\n/**\n * Convert raw the value in to inner value in List.\n *\n * [Performance sensitive]\n *\n * [Caution]: this is the key logic of user value parser.\n * For backward compatibility, do not modify it until you have to!\n */\n\nexport function parseDataValue(value, // For high performance, do not omit the second param.\nopt) {\n  // Performance sensitive.\n  var dimType = opt && opt.type;\n\n  if (dimType === 'ordinal') {\n    // If given value is a category string\n    return value;\n  }\n\n  if (dimType === 'time' // spead up when using timestamp\n  && !isNumber(value) && value != null && value !== '-') {\n    value = +parseDate(value);\n  } // dimType defaults 'number'.\n  // If dimType is not ordinal and value is null or undefined or NaN or '-',\n  // parse to NaN.\n  // number-like string (like ' 123 ') can be converted to a number.\n  // where null/undefined or other string will be converted to NaN.\n\n\n  return value == null || value === '' ? NaN // If string (like '-'), using '+' parse to NaN\n  // If object, also parse to NaN\n  : +value;\n}\n;\nvar valueParserMap = createHashMap({\n  'number': function (val) {\n    // Do not use `numericToNumber` here. We have `numericToNumber` by default.\n    // Here the number parser can have loose rule:\n    // enable to cut suffix: \"120px\" => 120, \"14%\" => 14.\n    return parseFloat(val);\n  },\n  'time': function (val) {\n    // return timestamp.\n    return +parseDate(val);\n  },\n  'trim': function (val) {\n    return isString(val) ? trim(val) : val;\n  }\n});\nexport function getRawValueParser(type) {\n  return valueParserMap.get(type);\n}\nvar ORDER_COMPARISON_OP_MAP = {\n  lt: function (lval, rval) {\n    return lval < rval;\n  },\n  lte: function (lval, rval) {\n    return lval <= rval;\n  },\n  gt: function (lval, rval) {\n    return lval > rval;\n  },\n  gte: function (lval, rval) {\n    return lval >= rval;\n  }\n};\n\nvar FilterOrderComparator =\n/** @class */\nfunction () {\n  function FilterOrderComparator(op, rval) {\n    if (!isNumber(rval)) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'rvalue of \"<\", \">\", \"<=\", \">=\" can only be number in filter.';\n      }\n\n      throwError(errMsg);\n    }\n\n    this._opFn = ORDER_COMPARISON_OP_MAP[op];\n    this._rvalFloat = numericToNumber(rval);\n  } // Performance sensitive.\n\n\n  FilterOrderComparator.prototype.evaluate = function (lval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    return isNumber(lval) ? this._opFn(lval, this._rvalFloat) : this._opFn(numericToNumber(lval), this._rvalFloat);\n  };\n\n  return FilterOrderComparator;\n}();\n\nvar SortOrderComparator =\n/** @class */\nfunction () {\n  /**\n   * @param order by default: 'asc'\n   * @param incomparable by default: Always on the tail.\n   *        That is, if 'asc' => 'max', if 'desc' => 'min'\n   *        See the definition of \"incomparable\" in [SORT_COMPARISON_RULE].\n   */\n  function SortOrderComparator(order, incomparable) {\n    var isDesc = order === 'desc';\n    this._resultLT = isDesc ? 1 : -1;\n\n    if (incomparable == null) {\n      incomparable = isDesc ? 'min' : 'max';\n    }\n\n    this._incomparable = incomparable === 'min' ? -Infinity : Infinity;\n  } // See [SORT_COMPARISON_RULE].\n  // Performance sensitive.\n\n\n  SortOrderComparator.prototype.evaluate = function (lval, rval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    var lvalFloat = isNumber(lval) ? lval : numericToNumber(lval);\n    var rvalFloat = isNumber(rval) ? rval : numericToNumber(rval);\n    var lvalNotNumeric = isNaN(lvalFloat);\n    var rvalNotNumeric = isNaN(rvalFloat);\n\n    if (lvalNotNumeric) {\n      lvalFloat = this._incomparable;\n    }\n\n    if (rvalNotNumeric) {\n      rvalFloat = this._incomparable;\n    }\n\n    if (lvalNotNumeric && rvalNotNumeric) {\n      var lvalIsStr = isString(lval);\n      var rvalIsStr = isString(rval);\n\n      if (lvalIsStr) {\n        lvalFloat = rvalIsStr ? lval : 0;\n      }\n\n      if (rvalIsStr) {\n        rvalFloat = lvalIsStr ? rval : 0;\n      }\n    }\n\n    return lvalFloat < rvalFloat ? this._resultLT : lvalFloat > rvalFloat ? -this._resultLT : 0;\n  };\n\n  return SortOrderComparator;\n}();\n\nexport { SortOrderComparator };\n\nvar FilterEqualityComparator =\n/** @class */\nfunction () {\n  function FilterEqualityComparator(isEq, rval) {\n    this._rval = rval;\n    this._isEQ = isEq;\n    this._rvalTypeof = typeof rval;\n    this._rvalFloat = numericToNumber(rval);\n  } // Performance sensitive.\n\n\n  FilterEqualityComparator.prototype.evaluate = function (lval) {\n    var eqResult = lval === this._rval;\n\n    if (!eqResult) {\n      var lvalTypeof = typeof lval;\n\n      if (lvalTypeof !== this._rvalTypeof && (lvalTypeof === 'number' || this._rvalTypeof === 'number')) {\n        eqResult = numericToNumber(lval) === this._rvalFloat;\n      }\n    }\n\n    return this._isEQ ? eqResult : !eqResult;\n  };\n\n  return FilterEqualityComparator;\n}();\n/**\n * [FILTER_COMPARISON_RULE]\n * `lt`|`lte`|`gt`|`gte`:\n * + rval must be a number. And lval will be converted to number (`numericToNumber`) to compare.\n * `eq`:\n * + If same type, compare with `===`.\n * + If there is one number, convert to number (`numericToNumber`) to compare.\n * + Else return `false`.\n * `ne`:\n * + Not `eq`.\n *\n *\n * [SORT_COMPARISON_RULE]\n * All the values are grouped into three categories:\n * + \"numeric\" (number and numeric string)\n * + \"non-numeric-string\" (string that excluding numeric string)\n * + \"others\"\n * \"numeric\" vs \"numeric\": values are ordered by number order.\n * \"non-numeric-string\" vs \"non-numeric-string\": values are ordered by ES spec (#sec-abstract-relational-comparison).\n * \"others\" vs \"others\": do not change order (always return 0).\n * \"numeric\" vs \"non-numeric-string\": \"non-numeric-string\" is treated as \"incomparable\".\n * \"number\" vs \"others\": \"others\" is treated as \"incomparable\".\n * \"non-numeric-string\" vs \"others\": \"others\" is treated as \"incomparable\".\n * \"incomparable\" will be seen as -Infinity or Infinity (depends on the settings).\n * MEMO:\n *   Non-numeric string sort makes sense when we need to put the items with the same tag together.\n *   But if we support string sort, we still need to avoid the misleading like `'2' > '12'`,\n *   So we treat \"numeric-string\" sorted by number order rather than string comparison.\n *\n *\n * [CHECK_LIST_OF_THE_RULE_DESIGN]\n * + Do not support string comparison until required. And also need to\n *   avoid the misleading of \"2\" > \"12\".\n * + Should avoid the misleading case:\n *   `\" 22 \" gte \"22\"` is `true` but `\" 22 \" eq \"22\"` is `false`.\n * + JS bad case should be avoided: null <= 0, [] <= 0, ' ' <= 0, ...\n * + Only \"numeric\" can be converted to comparable number, otherwise converted to NaN.\n *   See `util/number.ts#numericToNumber`.\n *\n * @return If `op` is not `RelationalOperator`, return null;\n */\n\n\nexport function createFilterComparator(op, rval) {\n  return op === 'eq' || op === 'ne' ? new FilterEqualityComparator(op === 'eq', rval) : hasOwn(ORDER_COMPARISON_OP_MAP, op) ? new FilterOrderComparator(op, rval) : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, createHashMap, assert, map } from 'zrender/lib/core/util.js';\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\n\nvar DimensionUserOuput =\n/** @class */\nfunction () {\n  function DimensionUserOuput(encode, dimRequest) {\n    this._encode = encode;\n    this._schema = dimRequest;\n  }\n\n  DimensionUserOuput.prototype.get = function () {\n    return {\n      // Do not generate full dimension name until fist used.\n      fullDimensions: this._getFullDimensionNames(),\n      encode: this._encode\n    };\n  };\n  /**\n   * Get all data store dimension names.\n   * Theoretically a series data store is defined both by series and used dataset (if any).\n   * If some dimensions are omitted for performance reason in `this.dimensions`,\n   * the dimension name may not be auto-generated if user does not specify a dimension name.\n   * In this case, the dimension name is `null`/`undefined`.\n   */\n\n\n  DimensionUserOuput.prototype._getFullDimensionNames = function () {\n    if (!this._cachedDimNames) {\n      this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : [];\n    }\n\n    return this._cachedDimNames;\n  };\n\n  return DimensionUserOuput;\n}();\n\n;\nexport function summarizeDimensions(data, schema) {\n  var summary = {};\n  var encode = summary.encode = {};\n  var notExtraCoordDimMap = createHashMap();\n  var defaultedLabel = [];\n  var defaultedTooltip = [];\n  var userOutputEncode = {};\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n    var coordDim = dimItem.coordDim;\n\n    if (coordDim) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(VISUAL_DIMENSIONS.get(coordDim) == null);\n      }\n\n      var coordDimIndex = dimItem.coordDimIndex;\n      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n\n      if (!dimItem.isExtraCoord) {\n        notExtraCoordDimMap.set(coordDim, 1); // Use the last coord dim (and label friendly) as default label,\n        // because when dataset is used, it is hard to guess which dimension\n        // can be value dimension. If both show x, y on label is not look good,\n        // and conventionally y axis is focused more.\n\n        if (mayLabelDimType(dimItem.type)) {\n          defaultedLabel[0] = dimName;\n        } // User output encode do not contain generated coords.\n        // And it only has index. User can use index to retrieve value from the raw item array.\n\n\n        getOrCreateEncodeArr(userOutputEncode, coordDim)[coordDimIndex] = data.getDimensionIndex(dimItem.name);\n      }\n\n      if (dimItem.defaultTooltip) {\n        defaultedTooltip.push(dimName);\n      }\n    }\n\n    VISUAL_DIMENSIONS.each(function (v, otherDim) {\n      var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n      var dimIndex = dimItem.otherDims[otherDim];\n\n      if (dimIndex != null && dimIndex !== false) {\n        encodeArr[dimIndex] = dimItem.name;\n      }\n    });\n  });\n  var dataDimsOnCoord = [];\n  var encodeFirstDimNotExtra = {};\n  notExtraCoordDimMap.each(function (v, coordDim) {\n    var dimArr = encode[coordDim];\n    encodeFirstDimNotExtra[coordDim] = dimArr[0]; // Not necessary to remove duplicate, because a data\n    // dim canot on more than one coordDim.\n\n    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n  });\n  summary.dataDimsOnCoord = dataDimsOnCoord;\n  summary.dataDimIndicesOnCoord = map(dataDimsOnCoord, function (dimName) {\n    return data.getDimensionInfo(dimName).storeDimIndex;\n  });\n  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n  var encodeLabel = encode.label; // FIXME `encode.label` is not recommended, because formatter cannot be set\n  // in this way. Use label.formatter instead. Maybe remove this approach someday.\n\n  if (encodeLabel && encodeLabel.length) {\n    defaultedLabel = encodeLabel.slice();\n  }\n\n  var encodeTooltip = encode.tooltip;\n\n  if (encodeTooltip && encodeTooltip.length) {\n    defaultedTooltip = encodeTooltip.slice();\n  } else if (!defaultedTooltip.length) {\n    defaultedTooltip = defaultedLabel.slice();\n  }\n\n  encode.defaultedLabel = defaultedLabel;\n  encode.defaultedTooltip = defaultedTooltip;\n  summary.userOutput = new DimensionUserOuput(userOutputEncode, schema);\n  return summary;\n}\n\nfunction getOrCreateEncodeArr(encode, dim) {\n  if (!encode.hasOwnProperty(dim)) {\n    encode[dim] = [];\n  }\n\n  return encode[dim];\n} // FIXME:TS should be type `AxisType`\n\n\nexport function getDimensionTypeByAxis(axisType) {\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n}\n\nfunction mayLabelDimType(dimType) {\n  // In most cases, ordinal and time do not suitable for label.\n  // Ordinal info can be displayed on axis. Time is too long.\n  return !(dimType === 'ordinal' || dimType === 'time');\n} // function findTheLastDimMayLabel(data) {\n//     // Get last value dim\n//     let dimensions = data.dimensions.slice();\n//     let valueType;\n//     let valueDim;\n//     while (dimensions.length && (\n//         valueDim = dimensions.pop(),\n//         valueType = data.getDimensionInfo(valueDim).type,\n//         valueType === 'ordinal' || valueType === 'time'\n//     )) {} // jshint ignore:line\n//     return valueDim;\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Link lists and struct (graph or tree)\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\n\nfunction linkSeriesData(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt); // Porxy data original methods.\n\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  }); // Beyond transfer, additional features should be added to `cloneShallow`.\n\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt)); // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  }); // Make sure datas contains mainData.\n\n  assert(datas[mainData.dataType] === mainData);\n}\n\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n\n  return res;\n}\n\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\n\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param [dataType] If not specified, return mainData.\n */\n\n\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\n * Get list of all linked data\n */\n\n\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\n\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\n\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\n\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  } // Supplement method.\n\n\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\n\nexport default linkSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner, getDataItemValue, queryReferringComponents, SINGLE_REFERRING } from '../../util/model.js';\nimport { createHashMap, each, isArray, isString, isObject, isTypedArray } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW, SOURCE_FORMAT_KEYED_COLUMNS } from '../../util/types.js'; // The result of `guessOrdinal`.\n\nexport var BE_ORDINAL = {\n  Must: 1,\n  Might: 2,\n  Not: 3 // Other cases\n\n};\nvar innerGlobalModel = makeInner();\n/**\n * MUST be called before mergeOption of all series.\n */\n\nexport function resetSourceDefaulter(ecModel) {\n  // `datasetMap` is used to make default encode.\n  innerGlobalModel(ecModel).datasetMap = createHashMap();\n}\n/**\n * [The strategy of the arrengment of data dimensions for dataset]:\n * \"value way\": all axes are non-category axes. So series one by one take\n *     several (the number is coordSysDims.length) dimensions from dataset.\n *     The result of data arrengment of data dimensions like:\n *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\n * \"category way\": at least one axis is category axis. So the the first data\n *     dimension is always mapped to the first category axis and shared by\n *     all of the series. The other data dimensions are taken by series like\n *     \"value way\" does.\n *     The result of data arrengment of data dimensions like:\n *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\n *\n * @return encode Never be `null/undefined`.\n */\n\nexport function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n  if (!datasetModel || !coordDimensions) {\n    return encode;\n  }\n\n  var encodeItemName = [];\n  var encodeSeriesName = [];\n  var ecModel = seriesModel.ecModel;\n  var datasetMap = innerGlobalModel(ecModel).datasetMap;\n  var key = datasetModel.uid + '_' + source.seriesLayoutBy;\n  var baseCategoryDimIndex;\n  var categoryWayValueDimStart;\n  coordDimensions = coordDimensions.slice();\n  each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\n    var coordDimInfo = isObject(coordDimInfoLoose) ? coordDimInfoLoose : coordDimensions[coordDimIdx] = {\n      name: coordDimInfoLoose\n    };\n\n    if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\n      baseCategoryDimIndex = coordDimIdx;\n      categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\n    }\n\n    encode[coordDimInfo.name] = [];\n  });\n  var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\n    categoryWayDim: categoryWayValueDimStart,\n    valueWayDim: 0\n  }); // TODO\n  // Auto detect first time axis and do arrangement.\n\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n    var coordDimName = coordDimInfo.name;\n    var count = getDataDimCountOnCoordDim(coordDimInfo); // In value way.\n\n    if (baseCategoryDimIndex == null) {\n      var start = datasetRecord.valueWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.valueWayDim += count; // ??? TODO give a better default series name rule?\n      // especially when encode x y specified.\n      // consider: when multiple series share one dimension\n      // category axis, series name should better use\n      // the other dimension name. On the other hand, use\n      // both dimensions name.\n    } // In category way, the first category axis.\n    else if (baseCategoryDimIndex === coordDimIdx) {\n        pushDim(encode[coordDimName], 0, count);\n        pushDim(encodeItemName, 0, count);\n      } // In category way, the other axis.\n      else {\n          var start = datasetRecord.categoryWayDim;\n          pushDim(encode[coordDimName], start, count);\n          pushDim(encodeSeriesName, start, count);\n          datasetRecord.categoryWayDim += count;\n        }\n  });\n\n  function pushDim(dimIdxArr, idxFrom, idxCount) {\n    for (var i = 0; i < idxCount; i++) {\n      dimIdxArr.push(idxFrom + i);\n    }\n  }\n\n  function getDataDimCountOnCoordDim(coordDimInfo) {\n    var dimsDef = coordDimInfo.dimsDef;\n    return dimsDef ? dimsDef.length : 1;\n  }\n\n  encodeItemName.length && (encode.itemName = encodeItemName);\n  encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\n  return encode;\n}\n/**\n * Work for data like [{name: ..., value: ...}, ...].\n *\n * @return encode Never be `null/undefined`.\n */\n\nexport function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n  if (!datasetModel) {\n    return encode;\n  }\n\n  var sourceFormat = source.sourceFormat;\n  var dimensionsDefine = source.dimensionsDefine;\n  var potentialNameDimIndex;\n\n  if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    each(dimensionsDefine, function (dim, idx) {\n      if ((isObject(dim) ? dim.name : dim) === 'name') {\n        potentialNameDimIndex = idx;\n      }\n    });\n  }\n\n  var idxResult = function () {\n    var idxRes0 = {};\n    var idxRes1 = {};\n    var guessRecords = []; // 5 is an experience value.\n\n    for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\n      var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\n      guessRecords.push(guessResult);\n      var isPureNumber = guessResult === BE_ORDINAL.Not; // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\n      // and then find a name dim with the priority:\n      // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\n\n      if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\n        idxRes0.v = i;\n      }\n\n      if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\n        idxRes0.n = i;\n      }\n\n      if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\n        return idxRes0;\n      } // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\n      // find the first BE_ORDINAL.Might as the value dim,\n      // and then find a name dim with the priority:\n      // \"other dim\" > \"the value dim itself\".\n      // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\n      // treated as number.\n\n\n      if (!isPureNumber) {\n        if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\n          idxRes1.v = i;\n        }\n\n        if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\n          idxRes1.n = i;\n        }\n      }\n    }\n\n    function fulfilled(idxResult) {\n      return idxResult.v != null && idxResult.n != null;\n    }\n\n    return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\n  }();\n\n  if (idxResult) {\n    encode.value = [idxResult.v]; // `potentialNameDimIndex` has highest priority.\n\n    var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n; // By default, label uses itemName in charts.\n    // So we don't set encodeLabel here.\n\n    encode.itemName = [nameDimIndex];\n    encode.seriesName = [nameDimIndex];\n  }\n\n  return encode;\n}\n/**\n * @return If return null/undefined, indicate that should not use datasetModel.\n */\n\nexport function querySeriesUpstreamDatasetModel(seriesModel) {\n  // Caution: consider the scenario:\n  // A dataset is declared and a series is not expected to use the dataset,\n  // and at the beginning `setOption({series: { noData })` (just prepare other\n  // option but no data), then `setOption({series: {data: [...]}); In this case,\n  // the user should set an empty array to avoid that dataset is used by default.\n  var thisData = seriesModel.get('data', true);\n\n  if (!thisData) {\n    return queryReferringComponents(seriesModel.ecModel, 'dataset', {\n      index: seriesModel.get('datasetIndex', true),\n      id: seriesModel.get('datasetId', true)\n    }, SINGLE_REFERRING).models[0];\n  }\n}\n/**\n * @return Always return an array event empty.\n */\n\nexport function queryDatasetUpstreamDatasetModels(datasetModel) {\n  // Only these attributes declared, we by defualt reference to `datasetIndex: 0`.\n  // Otherwise, no reference.\n  if (!datasetModel.get('transform', true) && !datasetModel.get('fromTransformResult', true)) {\n    return [];\n  }\n\n  return queryReferringComponents(datasetModel.ecModel, 'dataset', {\n    index: datasetModel.get('fromDatasetIndex', true),\n    id: datasetModel.get('fromDatasetId', true)\n  }, SINGLE_REFERRING).models;\n}\n/**\n * The rule should not be complex, otherwise user might not\n * be able to known where the data is wrong.\n * The code is ugly, but how to make it neat?\n */\n\nexport function guessOrdinal(source, dimIndex) {\n  return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\n} // dimIndex may be overflow source data.\n// return {BE_ORDINAL}\n\nfunction doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\n  var result; // Experience value.\n\n  var maxLoop = 5;\n\n  if (isTypedArray(data)) {\n    return BE_ORDINAL.Not;\n  } // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\n  // always exists in source.\n\n\n  var dimName;\n  var dimType;\n\n  if (dimensionsDefine) {\n    var dimDefItem = dimensionsDefine[dimIndex];\n\n    if (isObject(dimDefItem)) {\n      dimName = dimDefItem.name;\n      dimType = dimDefItem.type;\n    } else if (isString(dimDefItem)) {\n      dimName = dimDefItem;\n    }\n  }\n\n  if (dimType != null) {\n    return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\n  }\n\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data;\n\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n      var sample = dataArrayRows[dimIndex];\n\n      for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\n        if ((result = detectValue(sample[startIndex + i])) != null) {\n          return result;\n        }\n      }\n    } else {\n      for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\n        var row = dataArrayRows[startIndex + i];\n\n        if (row && (result = detectValue(row[dimIndex])) != null) {\n          return result;\n        }\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var dataObjectRows = data;\n\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n\n    for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\n      var item = dataObjectRows[i];\n\n      if (item && (result = detectValue(item[dimName])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    var dataKeyedColumns = data;\n\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n\n    var sample = dataKeyedColumns[dimName];\n\n    if (!sample || isTypedArray(sample)) {\n      return BE_ORDINAL.Not;\n    }\n\n    for (var i = 0; i < sample.length && i < maxLoop; i++) {\n      if ((result = detectValue(sample[i])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var dataOriginal = data;\n\n    for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\n      var item = dataOriginal[i];\n      var val = getDataItemValue(item);\n\n      if (!isArray(val)) {\n        return BE_ORDINAL.Not;\n      }\n\n      if ((result = detectValue(val[dimIndex])) != null) {\n        return result;\n      }\n    }\n  }\n\n  function detectValue(val) {\n    var beStr = isString(val); // Consider usage convenience, '1', '2' will be treated as \"number\".\n    // `isFinit('')` get `true`.\n\n    if (val != null && isFinite(val) && val !== '') {\n      return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\n    } else if (beStr && val !== '-') {\n      return BE_ORDINAL.Must;\n    }\n  }\n\n  return BE_ORDINAL.Not;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { setAsPrimitive, map, isTypedArray, assert, each, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createSource, cloneSourceShallow } from '../Source.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nimport { querySeriesUpstreamDatasetModel, queryDatasetUpstreamDatasetModels } from './sourceHelper.js';\nimport { applyDataTransform } from './transform.js';\nimport DataStore from '../DataStore.js';\nimport { DefaultDataProvider } from './dataProvider.js';\n/**\n * [REQUIREMENT_MEMO]:\n * (0) `metaRawOption` means `dimensions`/`sourceHeader`/`seriesLayoutBy` in raw option.\n * (1) Keep support the feature: `metaRawOption` can be specified both on `series` and\n * `root-dataset`. Them on `series` has higher priority.\n * (2) Do not support to set `metaRawOption` on a `non-root-dataset`, because it might\n * confuse users: whether those props indicate how to visit the upstream source or visit\n * the transform result source, and some transforms has nothing to do with these props,\n * and some transforms might have multiple upstream.\n * (3) Transforms should specify `metaRawOption` in each output, just like they can be\n * declared in `root-dataset`.\n * (4) At present only support visit source in `SERIES_LAYOUT_BY_COLUMN` in transforms.\n * That is for reducing complexity in transforms.\n * PENDING: Whether to provide transposition transform?\n *\n * [IMPLEMENTAION_MEMO]:\n * \"sourceVisitConfig\" are calculated from `metaRawOption` and `data`.\n * They will not be calculated until `source` is about to be visited (to prevent from\n * duplicate calcuation). `source` is visited only in series and input to transforms.\n *\n * [DIMENSION_INHERIT_RULE]:\n * By default the dimensions are inherited from ancestors, unless a transform return\n * a new dimensions definition.\n * Consider the case:\n * ```js\n * dataset: [{\n *     source: [ ['Product', 'Sales', 'Prise'], ['Cookies', 321, 44.21], ...]\n * }, {\n *     transform: { type: 'filter', ... }\n * }]\n * dataset: [{\n *     dimension: ['Product', 'Sales', 'Prise'],\n *     source: [ ['Cookies', 321, 44.21], ...]\n * }, {\n *     transform: { type: 'filter', ... }\n * }]\n * ```\n * The two types of option should have the same behavior after transform.\n *\n *\n * [SCENARIO]:\n * (1) Provide source data directly:\n * ```js\n * series: {\n *     encode: {...},\n *     dimensions: [...]\n *     seriesLayoutBy: 'row',\n *     data: [[...]]\n * }\n * ```\n * (2) Series refer to dataset.\n * ```js\n * series: [{\n *     encode: {...}\n *     // Ignore datasetIndex means `datasetIndex: 0`\n *     // and the dimensions defination in dataset is used\n * }, {\n *     encode: {...},\n *     seriesLayoutBy: 'column',\n *     datasetIndex: 1\n * }]\n * ```\n * (3) dataset transform\n * ```js\n * dataset: [{\n *     source: [...]\n * }, {\n *     source: [...]\n * }, {\n *     // By default from 0.\n *     transform: { type: 'filter', config: {...} }\n * }, {\n *     // Piped.\n *     transform: [\n *         { type: 'filter', config: {...} },\n *         { type: 'sort', config: {...} }\n *     ]\n * }, {\n *     id: 'regressionData',\n *     fromDatasetIndex: 1,\n *     // Third-party transform\n *     transform: { type: 'ecStat:regression', config: {...} }\n * }, {\n *     // retrieve the extra result.\n *     id: 'regressionFormula',\n *     fromDatasetId: 'regressionData',\n *     fromTransformResult: 1\n * }]\n * ```\n */\n\nvar SourceManager =\n/** @class */\nfunction () {\n  function SourceManager(sourceHost) {\n    // Cached source. Do not repeat calculating if not dirty.\n    this._sourceList = [];\n    this._storeList = []; // version sign of each upstream source manager.\n\n    this._upstreamSignList = [];\n    this._versionSignBase = 0;\n    this._dirty = true;\n    this._sourceHost = sourceHost;\n  }\n  /**\n   * Mark dirty.\n   */\n\n\n  SourceManager.prototype.dirty = function () {\n    this._setLocalSource([], []);\n\n    this._storeList = [];\n    this._dirty = true;\n  };\n\n  SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\n    this._sourceList = sourceList;\n    this._upstreamSignList = upstreamSignList;\n    this._versionSignBase++;\n\n    if (this._versionSignBase > 9e10) {\n      this._versionSignBase = 0;\n    }\n  };\n  /**\n   * For detecting whether the upstream source is dirty, so that\n   * the local cached source (in `_sourceList`) should be discarded.\n   */\n\n\n  SourceManager.prototype._getVersionSign = function () {\n    return this._sourceHost.uid + '_' + this._versionSignBase;\n  };\n  /**\n   * Always return a source instance. Otherwise throw error.\n   */\n\n\n  SourceManager.prototype.prepareSource = function () {\n    // For the case that call `setOption` multiple time but no data changed,\n    // cache the result source to prevent from repeating transform.\n    if (this._isDirty()) {\n      this._createSource();\n\n      this._dirty = false;\n    }\n  };\n\n  SourceManager.prototype._createSource = function () {\n    this._setLocalSource([], []);\n\n    var sourceHost = this._sourceHost;\n\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n\n    var hasUpstream = !!upSourceMgrList.length;\n    var resultSourceList;\n    var upstreamSignList;\n\n    if (isSeries(sourceHost)) {\n      var seriesModel = sourceHost;\n      var data = void 0;\n      var sourceFormat = void 0;\n      var upSource = void 0; // Has upstream dataset\n\n      if (hasUpstream) {\n        var upSourceMgr = upSourceMgrList[0];\n        upSourceMgr.prepareSource();\n        upSource = upSourceMgr.getSource();\n        data = upSource.data;\n        sourceFormat = upSource.sourceFormat;\n        upstreamSignList = [upSourceMgr._getVersionSign()];\n      } // Series data is from own.\n      else {\n          data = seriesModel.get('data', true);\n          sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\n          upstreamSignList = [];\n        } // See [REQUIREMENT_MEMO], merge settings on series and parent dataset if it is root.\n\n\n      var newMetaRawOption = this._getSourceMetaRawOption() || {};\n      var upMetaRawOption = upSource && upSource.metaRawOption || {};\n      var seriesLayoutBy = retrieve2(newMetaRawOption.seriesLayoutBy, upMetaRawOption.seriesLayoutBy) || null;\n      var sourceHeader = retrieve2(newMetaRawOption.sourceHeader, upMetaRawOption.sourceHeader); // Note here we should not use `upSource.dimensionsDefine`. Consider the case:\n      // `upSource.dimensionsDefine` is detected by `seriesLayoutBy: 'column'`,\n      // but series need `seriesLayoutBy: 'row'`.\n\n      var dimensions = retrieve2(newMetaRawOption.dimensions, upMetaRawOption.dimensions); // We share source with dataset as much as possible\n      // to avoid extra memory cost of high dimensional data.\n\n      var needsCreateSource = seriesLayoutBy !== upMetaRawOption.seriesLayoutBy || !!sourceHeader !== !!upMetaRawOption.sourceHeader || dimensions;\n      resultSourceList = needsCreateSource ? [createSource(data, {\n        seriesLayoutBy: seriesLayoutBy,\n        sourceHeader: sourceHeader,\n        dimensions: dimensions\n      }, sourceFormat)] : [];\n    } else {\n      var datasetModel = sourceHost; // Has upstream dataset.\n\n      if (hasUpstream) {\n        var result = this._applyTransform(upSourceMgrList);\n\n        resultSourceList = result.sourceList;\n        upstreamSignList = result.upstreamSignList;\n      } // Is root dataset.\n      else {\n          var sourceData = datasetModel.get('source', true);\n          resultSourceList = [createSource(sourceData, this._getSourceMetaRawOption(), null)];\n          upstreamSignList = [];\n        }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(resultSourceList && upstreamSignList);\n    }\n\n    this._setLocalSource(resultSourceList, upstreamSignList);\n  };\n\n  SourceManager.prototype._applyTransform = function (upMgrList) {\n    var datasetModel = this._sourceHost;\n    var transformOption = datasetModel.get('transform', true);\n    var fromTransformResult = datasetModel.get('fromTransformResult', true);\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(fromTransformResult != null || transformOption != null);\n    }\n\n    if (fromTransformResult != null) {\n      var errMsg = '';\n\n      if (upMgrList.length !== 1) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\n        }\n\n        doThrow(errMsg);\n      }\n    }\n\n    var sourceList;\n    var upSourceList = [];\n    var upstreamSignList = [];\n    each(upMgrList, function (upMgr) {\n      upMgr.prepareSource();\n      var upSource = upMgr.getSource(fromTransformResult || 0);\n      var errMsg = '';\n\n      if (fromTransformResult != null && !upSource) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Can not retrieve result by `fromTransformResult`: ' + fromTransformResult;\n        }\n\n        doThrow(errMsg);\n      }\n\n      upSourceList.push(upSource);\n      upstreamSignList.push(upMgr._getVersionSign());\n    });\n\n    if (transformOption) {\n      sourceList = applyDataTransform(transformOption, upSourceList, {\n        datasetIndex: datasetModel.componentIndex\n      });\n    } else if (fromTransformResult != null) {\n      sourceList = [cloneSourceShallow(upSourceList[0])];\n    }\n\n    return {\n      sourceList: sourceList,\n      upstreamSignList: upstreamSignList\n    };\n  };\n\n  SourceManager.prototype._isDirty = function () {\n    if (this._dirty) {\n      return true;\n    } // All sourceList is from the some upstream.\n\n\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n\n    for (var i = 0; i < upSourceMgrList.length; i++) {\n      var upSrcMgr = upSourceMgrList[i];\n\n      if ( // Consider the case that there is ancestor diry, call it recursively.\n      // The performance is probably not an issue because usually the chain is not long.\n      upSrcMgr._isDirty() || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\n        return true;\n      }\n    }\n  };\n  /**\n   * @param sourceIndex By default 0, means \"main source\".\n   *                    In most cases there is only one source.\n   */\n\n\n  SourceManager.prototype.getSource = function (sourceIndex) {\n    sourceIndex = sourceIndex || 0;\n    var source = this._sourceList[sourceIndex];\n\n    if (!source) {\n      // Series may share source instance with dataset.\n      var upSourceMgrList = this._getUpstreamSourceManagers();\n\n      return upSourceMgrList[0] && upSourceMgrList[0].getSource(sourceIndex);\n    }\n\n    return source;\n  };\n  /**\n   *\n   * Get a data store which can be shared across series.\n   * Only available for series.\n   *\n   * @param seriesDimRequest Dimensions that are generated in series.\n   *        Should have been sorted by `storeDimIndex` asc.\n   */\n\n\n  SourceManager.prototype.getSharedDataStore = function (seriesDimRequest) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isSeries(this._sourceHost), 'Can only call getDataStore on series source manager.');\n    }\n\n    var schema = seriesDimRequest.makeStoreSchema();\n    return this._innerGetDataStore(schema.dimensions, seriesDimRequest.source, schema.hash);\n  };\n\n  SourceManager.prototype._innerGetDataStore = function (storeDims, seriesSource, sourceReadKey) {\n    // TODO Can use other sourceIndex?\n    var sourceIndex = 0;\n    var storeList = this._storeList;\n    var cachedStoreMap = storeList[sourceIndex];\n\n    if (!cachedStoreMap) {\n      cachedStoreMap = storeList[sourceIndex] = {};\n    }\n\n    var cachedStore = cachedStoreMap[sourceReadKey];\n\n    if (!cachedStore) {\n      var upSourceMgr = this._getUpstreamSourceManagers()[0];\n\n      if (isSeries(this._sourceHost) && upSourceMgr) {\n        cachedStore = upSourceMgr._innerGetDataStore(storeDims, seriesSource, sourceReadKey);\n      } else {\n        cachedStore = new DataStore(); // Always create store from source of series.\n\n        cachedStore.initData(new DefaultDataProvider(seriesSource, storeDims.length), storeDims);\n      }\n\n      cachedStoreMap[sourceReadKey] = cachedStore;\n    }\n\n    return cachedStore;\n  };\n  /**\n   * PENDING: Is it fast enough?\n   * If no upstream, return empty array.\n   */\n\n\n  SourceManager.prototype._getUpstreamSourceManagers = function () {\n    // Always get the relationship from the raw option.\n    // Do not cache the link of the dependency graph, so that\n    // there is no need to update them when change happens.\n    var sourceHost = this._sourceHost;\n\n    if (isSeries(sourceHost)) {\n      var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\n      return !datasetModel ? [] : [datasetModel.getSourceManager()];\n    } else {\n      return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) {\n        return datasetModel.getSourceManager();\n      });\n    }\n  };\n\n  SourceManager.prototype._getSourceMetaRawOption = function () {\n    var sourceHost = this._sourceHost;\n    var seriesLayoutBy;\n    var sourceHeader;\n    var dimensions;\n\n    if (isSeries(sourceHost)) {\n      seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\n      sourceHeader = sourceHost.get('sourceHeader', true);\n      dimensions = sourceHost.get('dimensions', true);\n    } // See [REQUIREMENT_MEMO], `non-root-dataset` do not support them.\n    else if (!this._getUpstreamSourceManagers().length) {\n        var model = sourceHost;\n        seriesLayoutBy = model.get('seriesLayoutBy', true);\n        sourceHeader = model.get('sourceHeader', true);\n        dimensions = model.get('dimensions', true);\n      }\n\n    return {\n      seriesLayoutBy: seriesLayoutBy,\n      sourceHeader: sourceHeader,\n      dimensions: dimensions\n    };\n  };\n\n  return SourceManager;\n}();\n\nexport { SourceManager }; // Call this method after `super.init` and `super.mergeOption` to\n// disable the transform merge, but do not disable transform clone from rawOption.\n\nexport function disableTransformOptionMerge(datasetModel) {\n  var transformOption = datasetModel.option.transform;\n  transformOption && setAsPrimitive(datasetModel.option.transform);\n}\n\nfunction isSeries(sourceHost) {\n  // Avoid circular dependency with Series.ts\n  return sourceHost.mainType === 'series';\n}\n\nfunction doThrow(errMsg) {\n  throw new Error(errMsg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createHashMap, bind, each, hasOwn, map, clone, isObject, extend, isNumber } from 'zrender/lib/core/util.js';\nimport { getRawSourceItemGetter, getRawSourceDataCounter, getRawSourceValueGetter } from './dataProvider.js';\nimport { parseDataValue } from './dataValueHelper.js';\nimport { log, makePrintable, throwError } from '../../util/log.js';\nimport { createSource, detectSourceFormat } from '../Source.js';\n/**\n * TODO: disable writable.\n * This structure will be exposed to users.\n */\n\nvar ExternalSource =\n/** @class */\nfunction () {\n  function ExternalSource() {}\n\n  ExternalSource.prototype.getRawData = function () {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n\n  ExternalSource.prototype.getRawDataItem = function (dataIndex) {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n\n  ExternalSource.prototype.cloneRawData = function () {\n    return;\n  };\n  /**\n   * @return If dimension not found, return null/undefined.\n   */\n\n\n  ExternalSource.prototype.getDimensionInfo = function (dim) {\n    return;\n  };\n  /**\n   * dimensions defined if and only if either:\n   * (a) dataset.dimensions are declared.\n   * (b) dataset data include dimensions definitions in data (detected or via specified `sourceHeader`).\n   * If dimensions are defined, `dimensionInfoAll` is corresponding to\n   * the defined dimensions.\n   * Otherwise, `dimensionInfoAll` is determined by data columns.\n   * @return Always return an array (even empty array).\n   */\n\n\n  ExternalSource.prototype.cloneAllDimensionInfo = function () {\n    return;\n  };\n\n  ExternalSource.prototype.count = function () {\n    return;\n  };\n  /**\n   * Only support by dimension index.\n   * No need to support by dimension name in transform function,\n   * because transform function is not case-specific, no need to use name literally.\n   */\n\n\n  ExternalSource.prototype.retrieveValue = function (dataIndex, dimIndex) {\n    return;\n  };\n\n  ExternalSource.prototype.retrieveValueFromItem = function (dataItem, dimIndex) {\n    return;\n  };\n\n  ExternalSource.prototype.convertValue = function (rawVal, dimInfo) {\n    return parseDataValue(rawVal, dimInfo);\n  };\n\n  return ExternalSource;\n}();\n\nexport { ExternalSource };\n\nfunction createExternalSource(internalSource, externalTransform) {\n  var extSource = new ExternalSource();\n  var data = internalSource.data;\n  var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;\n  var sourceHeaderCount = internalSource.startIndex;\n  var errMsg = '';\n\n  if (internalSource.seriesLayoutBy !== SERIES_LAYOUT_BY_COLUMN) {\n    // For the logic simplicity in transformer, only 'culumn' is\n    // supported in data transform. Otherwise, the `dimensionsDefine`\n    // might be detected by 'row', which probably confuses users.\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`seriesLayoutBy` of upstream dataset can only be \"column\" in data transform.';\n    }\n\n    throwError(errMsg);\n  } // [MEMO]\n  // Create a new dimensions structure for exposing.\n  // Do not expose all dimension info to users directly.\n  // Because the dimension is probably auto detected from data and not might reliable.\n  // Should not lead the transformers to think that is reliable and return it.\n  // See [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n\n\n  var dimensions = [];\n  var dimsByName = {};\n  var dimsDef = internalSource.dimensionsDefine;\n\n  if (dimsDef) {\n    each(dimsDef, function (dimDef, idx) {\n      var name = dimDef.name;\n      var dimDefExt = {\n        index: idx,\n        name: name,\n        displayName: dimDef.displayName\n      };\n      dimensions.push(dimDefExt); // Users probably do not specify dimension name. For simplicity, data transform\n      // does not generate dimension name.\n\n      if (name != null) {\n        // Dimension name should not be duplicated.\n        // For simplicity, data transform forbids name duplication, do not generate\n        // new name like module `completeDimensions.ts` did, but just tell users.\n        var errMsg_1 = '';\n\n        if (hasOwn(dimsByName, name)) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg_1 = 'dimension name \"' + name + '\" duplicated.';\n          }\n\n          throwError(errMsg_1);\n        }\n\n        dimsByName[name] = dimDefExt;\n      }\n    });\n  } // If dimension definitions are not defined and can not be detected.\n  // e.g., pure data `[[11, 22], ...]`.\n  else {\n      for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {\n        // Do not generete name or anything others. The consequence process in\n        // `transform` or `series` probably have there own name generation strategry.\n        dimensions.push({\n          index: i\n        });\n      }\n    } // Implement public methods:\n\n\n  var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n\n  if (externalTransform.__isBuiltIn) {\n    extSource.getRawDataItem = function (dataIndex) {\n      return rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    };\n\n    extSource.getRawData = bind(getRawData, null, internalSource);\n  }\n\n  extSource.cloneRawData = bind(cloneRawData, null, internalSource);\n  var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n  extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\n  var rawValueGetter = getRawSourceValueGetter(sourceFormat);\n\n  extSource.retrieveValue = function (dataIndex, dimIndex) {\n    var rawItem = rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    return retrieveValueFromItem(rawItem, dimIndex);\n  };\n\n  var retrieveValueFromItem = extSource.retrieveValueFromItem = function (dataItem, dimIndex) {\n    if (dataItem == null) {\n      return;\n    }\n\n    var dimDef = dimensions[dimIndex]; // When `dimIndex` is `null`, `rawValueGetter` return the whole item.\n\n    if (dimDef) {\n      return rawValueGetter(dataItem, dimIndex, dimDef.name);\n    }\n  };\n\n  extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\n  extSource.cloneAllDimensionInfo = bind(cloneAllDimensionInfo, null, dimensions);\n  return extSource;\n}\n\nfunction getRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`getRawData` is not supported in source format ' + sourceFormat;\n    }\n\n    throwError(errMsg);\n  }\n\n  return upstream.data;\n}\n\nfunction cloneRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n  var data = upstream.data;\n\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`cloneRawData` is not supported in source format ' + sourceFormat;\n    }\n\n    throwError(errMsg);\n  }\n\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var result = [];\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(data[i].slice());\n    }\n\n    return result;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var result = [];\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(extend({}, data[i]));\n    }\n\n    return result;\n  }\n}\n\nfunction getDimensionInfo(dimensions, dimsByName, dim) {\n  if (dim == null) {\n    return;\n  } // Keep the same logic as `List::getDimension` did.\n\n\n  if (isNumber(dim) // If being a number-like string but not being defined a dimension name.\n  || !isNaN(dim) && !hasOwn(dimsByName, dim)) {\n    return dimensions[dim];\n  } else if (hasOwn(dimsByName, dim)) {\n    return dimsByName[dim];\n  }\n}\n\nfunction cloneAllDimensionInfo(dimensions) {\n  return clone(dimensions);\n}\n\nvar externalTransformMap = createHashMap();\nexport function registerExternalTransform(externalTransform) {\n  externalTransform = clone(externalTransform);\n  var type = externalTransform.type;\n  var errMsg = '';\n\n  if (!type) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have a `type` when `registerTransform`.';\n    }\n\n    throwError(errMsg);\n  }\n\n  var typeParsed = type.split(':');\n\n  if (typeParsed.length !== 2) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Name must include namespace like \"ns:regression\".';\n    }\n\n    throwError(errMsg);\n  } // Namespace 'echarts:xxx' is official namespace, where the transforms should\n  // be called directly via 'xxx' rather than 'echarts:xxx'.\n\n\n  var isBuiltIn = false;\n\n  if (typeParsed[0] === 'echarts') {\n    type = typeParsed[1];\n    isBuiltIn = true;\n  }\n\n  externalTransform.__isBuiltIn = isBuiltIn;\n  externalTransformMap.set(type, externalTransform);\n}\nexport function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\n  var pipedTransOption = normalizeToArray(rawTransOption);\n  var pipeLen = pipedTransOption.length;\n  var errMsg = '';\n\n  if (!pipeLen) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'If `transform` declared, it should at least contain one transform.';\n    }\n\n    throwError(errMsg);\n  }\n\n  for (var i = 0, len = pipeLen; i < len; i++) {\n    var transOption = pipedTransOption[i];\n    sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, pipeLen === 1 ? null : i); // piped transform only support single input, except the fist one.\n    // piped transform only support single output, except the last one.\n\n    if (i !== len - 1) {\n      sourceList.length = Math.max(sourceList.length, 1);\n    }\n  }\n\n  return sourceList;\n}\n\nfunction applySingleDataTransform(transOption, upSourceList, infoForPrint, // If `pipeIndex` is null/undefined, no piped transform.\npipeIndex) {\n  var errMsg = '';\n\n  if (!upSourceList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have at least one upstream dataset.';\n    }\n\n    throwError(errMsg);\n  }\n\n  if (!isObject(transOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'transform declaration must be an object rather than ' + typeof transOption + '.';\n    }\n\n    throwError(errMsg);\n  }\n\n  var transType = transOption.type;\n  var externalTransform = externalTransformMap.get(transType);\n\n  if (!externalTransform) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Can not find transform on type \"' + transType + '\".';\n    }\n\n    throwError(errMsg);\n  } // Prepare source\n\n\n  var extUpSourceList = map(upSourceList, function (upSource) {\n    return createExternalSource(upSource, externalTransform);\n  });\n  var resultList = normalizeToArray(externalTransform.transform({\n    upstream: extUpSourceList[0],\n    upstreamList: extUpSourceList,\n    config: clone(transOption.config)\n  }));\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (transOption.print) {\n      var printStrArr = map(resultList, function (extSource) {\n        var pipeIndexStr = pipeIndex != null ? ' === pipe index: ' + pipeIndex : '';\n        return ['=== dataset index: ' + infoForPrint.datasetIndex + pipeIndexStr + ' ===', '- transform result data:', makePrintable(extSource.data), '- transform result dimensions:', makePrintable(extSource.dimensions)].join('\\n');\n      }).join('\\n');\n      log(printStrArr);\n    }\n  }\n\n  return map(resultList, function (result, resultIndex) {\n    var errMsg = '';\n\n    if (!isObject(result)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'A transform should not return some empty results.';\n      }\n\n      throwError(errMsg);\n    }\n\n    if (!result.data) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be not be null or undefined';\n      }\n\n      throwError(errMsg);\n    }\n\n    var sourceFormat = detectSourceFormat(result.data);\n\n    if (!isSupportedSourceFormat(sourceFormat)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be array rows or object rows.';\n      }\n\n      throwError(errMsg);\n    }\n\n    var resultMetaRawOption;\n    var firstUpSource = upSourceList[0];\n    /**\n     * Intuitively, the end users known the content of the original `dataset.source`,\n     * calucating the transform result in mind.\n     * Suppose the original `dataset.source` is:\n     * ```js\n     * [\n     *     ['product', '2012', '2013', '2014', '2015'],\n     *     ['AAA', 41.1, 30.4, 65.1, 53.3],\n     *     ['BBB', 86.5, 92.1, 85.7, 83.1],\n     *     ['CCC', 24.1, 67.2, 79.5, 86.4]\n     * ]\n     * ```\n     * The dimension info have to be detected from the source data.\n     * Some of the transformers (like filter, sort) will follow the dimension info\n     * of upstream, while others use new dimensions (like aggregate).\n     * Transformer can output a field `dimensions` to define the its own output dimensions.\n     * We also allow transformers to ignore the output `dimensions` field, and\n     * inherit the upstream dimensions definition. It can reduce the burden of handling\n     * dimensions in transformers.\n     *\n     * See also [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n     */\n\n    if (firstUpSource && resultIndex === 0 // If transformer returns `dimensions`, it means that the transformer has different\n    // dimensions definitions. We do not inherit anything from upstream.\n    && !result.dimensions) {\n      var startIndex = firstUpSource.startIndex; // We copy the header of upstream to the result, because:\n      // (1) The returned data always does not contain header line and can not be used\n      // as dimension-detection. In this case we can not use \"detected dimensions\" of\n      // upstream directly, because it might be detected based on different `seriesLayoutBy`.\n      // (2) We should support that the series read the upstream source in `seriesLayoutBy: 'row'`.\n      // So the original detected header should be add to the result, otherwise they can not be read.\n\n      if (startIndex) {\n        result.data = firstUpSource.data.slice(0, startIndex).concat(result.data);\n      }\n\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: startIndex,\n        dimensions: firstUpSource.metaRawOption.dimensions\n      };\n    } else {\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: 0,\n        dimensions: result.dimensions\n      };\n    }\n\n    return createSource(result.data, resultMetaRawOption, null);\n  });\n}\n\nfunction isSupportedSourceFormat(sourceFormat) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS || sourceFormat === SOURCE_FORMAT_OBJECT_ROWS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * This module exposes helper functions for developing extensions.\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport createSeriesData from '../../chart/helper/createSeriesData.js'; // import createGraphFromNodeEdge from './chart/helper/createGraphFromNodeEdge.js';\n\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport { AxisModelCommonMixin } from '../../coord/axisModelCommonMixin.js';\nimport Model from '../../model/Model.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport { enableDataStack, isDimensionStacked, getStackedDimension } from '../../data/helper/dataStackHelper.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle as innerCreateTextStyle } from '../../label/labelStyle.js';\n/**\n * Create a multi dimension List structure from seriesModel.\n */\n\nexport function createList(seriesModel) {\n  return createSeriesData(null, seriesModel);\n} // export function createGraph(seriesModel) {\n//     let nodes = seriesModel.get('data');\n//     let links = seriesModel.get('links');\n//     return createGraphFromNodeEdge(nodes, links, seriesModel);\n// }\n\nexport { getLayoutRect };\nexport { createDimensions } from '../../data/helper/createDimensions.js';\nexport var dataStack = {\n  isDimensionStacked: isDimensionStacked,\n  enableDataStack: enableDataStack,\n  getStackedDimension: getStackedDimension\n};\n/**\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\n * @param {string} symbolDesc\n * @param {number} x\n * @param {number} y\n * @param {number} w\n * @param {number} h\n * @param {string} color\n */\n\nexport { createSymbol } from '../../util/symbol.js';\n/**\n * Create scale\n * @param {Array.<number>} dataExtent\n * @param {Object|module:echarts/Model} option If `optoin.type`\n *        is secified, it can only be `'value'` currently.\n */\n\nexport function createScale(dataExtent, option) {\n  var axisModel = option;\n\n  if (!(option instanceof Model)) {\n    axisModel = new Model(option); // FIXME\n    // Currently AxisModelCommonMixin has nothing to do with the\n    // the requirements of `axisHelper.createScaleByModel`. For\n    // example the methods `getCategories` and `getOrdinalMeta`\n    // are required for `'category'` axis, and ecModel is required\n    // for `'time'` axis. But occasionally echarts-gl happened\n    // to only use `'value'` axis.\n    // zrUtil.mixin(axisModel, AxisModelCommonMixin);\n  }\n\n  var scale = axisHelper.createScaleByModel(axisModel);\n  scale.setExtent(dataExtent[0], dataExtent[1]);\n  axisHelper.niceScaleExtent(scale, axisModel);\n  return scale;\n}\n/**\n * Mixin common methods to axis model,\n *\n * Include methods\n * `getFormattedLabels() => Array.<string>`\n * `getCategories() => Array.<string>`\n * `getMin(origin: boolean) => number`\n * `getMax(origin: boolean) => number`\n * `getNeedCrossZero() => boolean`\n */\n\nexport function mixinAxisModelCommonMethods(Model) {\n  zrUtil.mixin(Model, AxisModelCommonMixin);\n}\nexport { getECData };\nexport { enableHoverEmphasis } from '../../util/states.js';\nexport function createTextStyle(textStyleModel, opts) {\n  opts = opts || {};\n  return innerCreateTextStyle(textStyleModel, null, null, opts.state !== 'normal');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// These APIs are for more advanced usages\n// For example extend charts and components, creating graphic elements, formatting.\nimport ComponentModel from '../model/Component.js';\nimport ComponentView from '../view/Component.js';\nimport SeriesModel from '../model/Series.js';\nimport ChartView from '../view/Chart.js';\nimport SeriesData from '../data/SeriesData.js';\nimport * as zrender_1 from 'zrender/lib/zrender.js';\nexport { zrender_1 as zrender };\nimport * as matrix_1 from 'zrender/lib/core/matrix.js';\nexport { matrix_1 as matrix };\nimport * as vector_1 from 'zrender/lib/core/vector.js';\nexport { vector_1 as vector };\nimport * as zrUtil_1 from 'zrender/lib/core/util.js';\nexport { zrUtil_1 as zrUtil };\nimport * as color_1 from 'zrender/lib/tool/color.js';\nexport { color_1 as color };\nexport { throttle } from '../util/throttle.js';\nimport * as helper_1 from './api/helper.js';\nexport { helper_1 as helper };\nexport { use } from '../extension.js';\nexport { setPlatformAPI } from 'zrender/lib/core/platform.js'; // --------------------- Helper Methods ---------------------\n\nexport { default as parseGeoJSON } from '../coord/geo/parseGeoJson.js';\nexport { default as parseGeoJson } from '../coord/geo/parseGeoJson.js';\nimport * as number_1 from './api/number.js';\nexport { number_1 as number };\nimport * as time_1 from './api/time.js';\nexport { time_1 as time };\nimport * as graphic_1 from './api/graphic.js';\nexport { graphic_1 as graphic };\nimport * as format_1 from './api/format.js';\nexport { format_1 as format };\nimport * as util_1 from './api/util.js';\nexport { util_1 as util };\nexport { default as env } from 'zrender/lib/core/env.js'; // --------------------- Export for Extension Usage ---------------------\n// export {SeriesData};\n\nexport { SeriesData as List }; // TODO: Compatitable with exists echarts-gl code\n\nexport { default as Model } from '../model/Model.js';\nexport { default as Axis } from '../coord/Axis.js';\nexport { ComponentModel, ComponentView, SeriesModel, ChartView }; // Only for GL\n\nexport { brushSingle as innerDrawElementOnCanvas } from 'zrender/lib/canvas/graphic.js'; // --------------------- Deprecated Extension Methods ---------------------\n// Should use `ComponentModel.extend` or `class XXXX extend ComponentModel` to create class.\n// Then use `registerComponentModel` in `install` parameter when `use` this extension. For example:\n// class Bar3DModel extends ComponentModel {}\n// export function install(registers) { registers.registerComponentModel(Bar3DModel); }\n// echarts.use(install);\n\nexport function extendComponentModel(proto) {\n  var Model = ComponentModel.extend(proto);\n  ComponentModel.registerClass(Model);\n  return Model;\n}\nexport function extendComponentView(proto) {\n  var View = ComponentView.extend(proto);\n  ComponentView.registerClass(View);\n  return View;\n}\nexport function extendSeriesModel(proto) {\n  var Model = SeriesModel.extend(proto);\n  SeriesModel.registerClass(Model);\n  return Model;\n}\nexport function extendChartView(proto) {\n  var View = ChartView.extend(proto);\n  ChartView.registerClass(View);\n  return View;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Core API from echarts/src/echarts\nexport * from '../core/echarts.js';\nexport * from './api.js';\nimport { use } from '../extension.js'; // Import label layout by default.\n// TODO will be treeshaked.\n\nimport { installLabelLayout } from '../label/installLabelLayout.js';\nuse(installLabelLayout);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { registerPreprocessor, registerProcessor, registerPostInit, registerPostUpdate, registerAction, registerCoordinateSystem, registerLayout, registerVisual, registerTransform, registerLoading, registerMap, registerUpdateLifecycle, PRIORITY } from './core/echarts.js';\nimport ComponentView from './view/Component.js';\nimport ChartView from './view/Chart.js';\nimport ComponentModel from './model/Component.js';\nimport SeriesModel from './model/Series.js';\nimport { isFunction, indexOf, isArray, each } from 'zrender/lib/core/util.js';\nimport { registerImpl } from './core/impl.js';\nimport { registerPainter } from 'zrender/lib/zrender.js';\nvar extensions = [];\nvar extensionRegisters = {\n  registerPreprocessor: registerPreprocessor,\n  registerProcessor: registerProcessor,\n  registerPostInit: registerPostInit,\n  registerPostUpdate: registerPostUpdate,\n  registerUpdateLifecycle: registerUpdateLifecycle,\n  registerAction: registerAction,\n  registerCoordinateSystem: registerCoordinateSystem,\n  registerLayout: registerLayout,\n  registerVisual: registerVisual,\n  registerTransform: registerTransform,\n  registerLoading: registerLoading,\n  registerMap: registerMap,\n  registerImpl: registerImpl,\n  PRIORITY: PRIORITY,\n  ComponentModel: ComponentModel,\n  ComponentView: ComponentView,\n  SeriesModel: SeriesModel,\n  ChartView: ChartView,\n  // TODO Use ComponentModel and SeriesModel instead of Constructor\n  registerComponentModel: function (ComponentModelClass) {\n    ComponentModel.registerClass(ComponentModelClass);\n  },\n  registerComponentView: function (ComponentViewClass) {\n    ComponentView.registerClass(ComponentViewClass);\n  },\n  registerSeriesModel: function (SeriesModelClass) {\n    SeriesModel.registerClass(SeriesModelClass);\n  },\n  registerChartView: function (ChartViewClass) {\n    ChartView.registerClass(ChartViewClass);\n  },\n  registerSubTypeDefaulter: function (componentType, defaulter) {\n    ComponentModel.registerSubTypeDefaulter(componentType, defaulter);\n  },\n  registerPainter: function (painterType, PainterCtor) {\n    registerPainter(painterType, PainterCtor);\n  }\n};\nexport function use(ext) {\n  if (isArray(ext)) {\n    // use([ChartLine, ChartBar]);\n    each(ext, function (singleExt) {\n      use(singleExt);\n    });\n    return;\n  }\n\n  if (indexOf(extensions, ext) >= 0) {\n    return;\n  }\n\n  extensions.push(ext);\n\n  if (isFunction(ext)) {\n    ext = {\n      install: ext\n    };\n  }\n\n  ext.install(extensionRegisters);\n}"],"names":["inner","makeInner","dimTypeShort","float","int","ordinal","number","time","SeriesDataSchema","opt","this","dimensions","_dimOmitted","dimensionOmitted","source","_fullDimCount","fullDimensionCount","_updateDimOmitted","prototype","isDimensionOmitted","_dimNameMap","ensureSourceDimNameMap","getSourceDimensionIndex","dimName","retrieve2","get","getSourceDimension","dimIndex","dimensionsDefine","makeStoreSchema","dimCount","willRetrieveDataByName","shouldRetrieveDataByName","makeHashStrict","shouldOmitUnusedDimensions","dimHash","dims","fullDimIdx","seriesDimIdx","property","type","ordinalMeta","seriesDimDef","storeDimIndex","name","sourceDimDef","push","isCalculationCoord","replace","uid","hash","seriesLayoutBy","startIndex","join","makeOutputDimensionNames","result","name_1","appendCalculationDimension","dimDef","isSeriesDataSchema","schema","createDimNameMap","dimsDef","dataDimNameMap","createHashMap","i","length","dimDefItemRaw","userDimName","isObject","set","innerSource","dimNameMap","createDimensions","prepareSeriesDataSchema","isSourceInstance","createSourceFromSeriesDataOption","sysDims","coordDimensions","coordDimNameMap","resultList","getDimCount","dimensionsCount","omitUnusedDimensions","canOmitUnusedDimensions","isUsingSourceDimensionsDef","encodeDef","encodeDefine","encodeDefaulter","encodeDefMap","indicesMap","CtorInt32Array","getResultItem","dimIdx","idx","dimDefItem","resultItem","SeriesDimensionDefine","displayName","newIdx","each","dataDimsRaw","coordDim","dataDims","normalizeToArray","slice","isString","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","coordDimIndex","VISUAL_DIMENSIONS","otherDims","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","extend","defaults","sysDimItemDimsDefItem","defaultTooltip","generateCoord","generateCoordCount","fromZero","extra","ifNoNameFillWithCoordName","sort","item0","item1","genCoordDimName","isExtraCoord","guessOrdinal","BE_ORDINAL","itemName","seriesName","removeDuplication","duplicationMap","dim","dimOriginalName","count","optDimCount","Math","max","dimensionsDetectedCount","map","hasKey","_a","_b","_c","providerMethods","mountMethods","DefaultDataProvider","sourceParam","dimSize","_source","data","_data","sourceFormat","SOURCE_FORMAT_TYPED_ARRAY","_offset","_dimSize","getSource","getItem","out","appendData","newData","clean","protoInitialize","proto","pure","persistent","internalField","provider","methods","getMethodMapKey","getItemForTypedArray","countForTypedArray","fillStorage","fillStorageForTypedArray","rawItemGetter","getRawSourceItemGetter","bind","rawCounter","getRawSourceDataCounter","offset","start","end","storage","extent","dimExtent","min","Infinity","arr","val","appendDataSimply","SOURCE_FORMAT_ARRAY_ROWS","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","Error","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","newCol","key","oldCol","SOURCE_FORMAT_ORIGINAL","getItemSimply","rawData","rawSourceItemGetterMap","item","row","process","col","method","countSimply","rawSourceDataCounterMap","getRawValueSimply","dataItem","rawSourceValueGetterMap","value","getDataItemValue","Array","getRawSourceValueGetter","retrieveRawValue","dataIndex","getRawDataItem","store","getStore","getDimensionIndex","getDimensionProperty","enableDataStack","seriesModel","dimensionsInput","dimensionDefineList","byIndex","stackedCoordDimension","isLegacyDimensionsInput","stackedByDimInfo","stackedDimInfo","stackResultDimension","stackedOverDimension","mayStack","dimensionInfo","index","id","createInvertedIndices","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","stackedOverDimensionDefine","stackResultDimensionDefine","ensureCalculationDimension","stackedDimension","stackedByDimension","isStackedByIndex","isDimensionStacked","stackedDim","getCalculationInfo","getStackedDimension","targetDim","parseDataValue","dimType","isNumber","parseDate","NaN","valueParserMap","parseFloat","trim","getRawValueParser","ORDER_COMPARISON_OP_MAP","lt","lval","rval","lte","gt","gte","FilterOrderComparator","op","errMsg","throwError","_opFn","_rvalFloat","numericToNumber","evaluate","SortOrderComparator","order","incomparable","isDesc","_resultLT","_incomparable","lvalFloat","rvalFloat","lvalNotNumeric","isNaN","rvalNotNumeric","lvalIsStr","rvalIsStr","FilterEqualityComparator","isEq","_rval","_isEQ","_rvalTypeof","eqResult","lvalTypeof","createFilterComparator","hasOwn","DimensionUserOuput","encode","dimRequest","_encode","_schema","fullDimensions","_getFullDimensionNames","_cachedDimNames","summarizeDimensions","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","userOutputEncode","dimItem","getDimensionInfo","getOrCreateEncodeArr","mayLabelDimType","v","otherDim","encodeArr","dataDimsOnCoord","encodeFirstDimNotExtra","dimArr","concat","dataDimIndicesOnCoord","encodeLabel","label","encodeTooltip","tooltip","userOutput","hasOwnProperty","getDimensionTypeByAxis","axisType","linkSeriesData","mainData","datas","main","datasAttr","linkAll","TRANSFERABLE_METHODS","methodName","wrapMethod","curry","transferInjection","cloneShallowInjection","CHANGABLE_METHODS","changeInjection","assert","dataType","res","isMainData","linkSingle","struct","update","cloneShallow","getLinkedData","getLinkedDataAll","keys","structAttr","Must","Might","Not","innerGlobalModel","resetSourceDefaulter","ecModel","datasetMap","makeSeriesEncodeForAxisCoordSys","datasetModel","querySeriesUpstreamDatasetModel","baseCategoryDimIndex","categoryWayValueDimStart","encodeItemName","encodeSeriesName","coordDimInfoLoose","coordDimIdx","coordDimInfo","getDataDimCountOnCoordDim","datasetRecord","categoryWayDim","valueWayDim","pushDim","dimIdxArr","idxFrom","idxCount","coordDimName","makeSeriesEncodeForNameBased","potentialNameDimIndex","idxResult","idxRes0","idxRes1","guessRecords","len","guessResult","doGuessOrdinal","isPureNumber","n","fulfilled","nameDimIndex","thisData","queryReferringComponents","SINGLE_REFERRING","models","queryDatasetUpstreamDatasetModels","maxLoop","isTypedArray","dataArrayRows","sample","detectValue","dataObjectRows","dataKeyedColumns","dataOriginal","isArray","beStr","isFinite","SourceManager","sourceHost","_sourceList","_storeList","_upstreamSignList","_versionSignBase","_dirty","_sourceHost","dirty","_setLocalSource","sourceList","upstreamSignList","_getVersionSign","prepareSource","_isDirty","_createSource","resultSourceList","upSourceMgrList","_getUpstreamSourceManagers","hasUpstream","isSeries","upSource","upSourceMgr","newMetaRawOption","_getSourceMetaRawOption","upMetaRawOption","metaRawOption","sourceHeader","needsCreateSource","createSource","_applyTransform","sourceData","upMgrList","transformOption","fromTransformResult","doThrow","upSourceList","upMgr","applyDataTransform","datasetIndex","componentIndex","cloneSourceShallow","upSrcMgr","sourceIndex","getSharedDataStore","seriesDimRequest","_innerGetDataStore","storeDims","seriesSource","sourceReadKey","storeList","cachedStoreMap","cachedStore","DataStore","initData","getSourceManager","model","disableTransformOptionMerge","option","transform","setAsPrimitive","mainType","ExternalSource","getRawData","cloneRawData","cloneAllDimensionInfo","retrieveValue","retrieveValueFromItem","convertValue","rawVal","dimInfo","createExternalSource","internalSource","externalTransform","extSource","sourceHeaderCount","dimsByName","dimDefExt","errMsg_1","__isBuiltIn","rawValueGetter","rawItem","upstream","isSupportedSourceFormat","clone","externalTransformMap","registerExternalTransform","typeParsed","split","isBuiltIn","rawTransOption","infoForPrint","pipedTransOption","pipeLen","transOption","applySingleDataTransform","pipeIndex","transType","extUpSourceList","upstreamList","config","resultIndex","resultMetaRawOption","detectSourceFormat","firstUpSource","createList","createSeriesData","dataStack","createScale","dataExtent","axisModel","Model","scale","axisHelper","setExtent","mixinAxisModelCommonMethods","zrUtil","AxisModelCommonMixin","createTextStyle","textStyleModel","opts","innerCreateTextStyle","state","extendComponentModel","ComponentModel","extendComponentView","View","ComponentView","extendSeriesModel","SeriesModel","extendChartView","ChartView","use","installLabelLayout","extensions","extensionRegisters","registerPreprocessor","registerProcessor","registerPostInit","registerPostUpdate","registerUpdateLifecycle","registerAction","registerCoordinateSystem","registerLayout","registerVisual","registerTransform","registerLoading","registerMap","registerImpl","PRIORITY","registerComponentModel","ComponentModelClass","registerComponentView","ComponentViewClass","registerSeriesModel","SeriesModelClass","registerChartView","ChartViewClass","registerSubTypeDefaulter","componentType","defaulter","registerPainter","painterType","PainterCtor","ext","singleExt","indexOf","isFunction","install"],"sourceRoot":""}
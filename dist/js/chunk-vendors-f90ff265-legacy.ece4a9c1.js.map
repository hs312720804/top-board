{"version":3,"file":"js/chunk-vendors-f90ff265-legacy.ece4a9c1.js","mappings":"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","sources":["webpack://databoard/./node_modules/echarts/lib/core/ExtensionAPI.js","webpack://databoard/./node_modules/echarts/lib/core/Scheduler.js","webpack://databoard/./node_modules/echarts/lib/core/lifecycle.js","webpack://databoard/./node_modules/echarts/lib/core/echarts.js","webpack://databoard/./node_modules/echarts/lib/core/impl.js","webpack://databoard/./node_modules/echarts/lib/core/locale.js","webpack://databoard/./node_modules/echarts/lib/core/task.js"],"sourcesContent":["/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar availableMethods = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isSSR', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL',\n// 'getModel',\n'getOption',\n// 'getViewOfComponentModel',\n// 'getViewOfSeriesModel',\n'getId', 'updateLabelLayout'];\nvar ExtensionAPI = /** @class */\nfunction () {\n  function ExtensionAPI(ecInstance) {\n    zrUtil.each(availableMethods, function (methodName) {\n      this[methodName] = zrUtil.bind(ecInstance[methodName], ecInstance);\n    }, this);\n  }\n  return ExtensionAPI;\n}();\nexport default ExtensionAPI;","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.concat.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map, isFunction, createHashMap, noop, assert } from 'zrender/lib/core/util.js';\nimport { createTask } from './task.js';\nimport { getUID } from '../util/component.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport { normalizeToArray } from '../util/model.js';\n;\nvar Scheduler = /** @class */\nfunction () {\n  function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n    // key: handlerUID\n    this._stageTaskMap = createHashMap();\n    this.ecInstance = ecInstance;\n    this.api = api; // Fix current processors in case that in some rear cases that\n    // processors might be registered after echarts instance created.\n    // Register processors incrementally for a echarts instance is\n    // not supported by this stream architecture.\n\n    dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n    visualHandlers = this._visualHandlers = visualHandlers.slice();\n    this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n  }\n  Scheduler.prototype.restoreData = function (ecModel, payload) {\n    // TODO: Only restore needed series and components, but not all components.\n    // Currently `restoreData` of all of the series and component will be called.\n    // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n    // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n    // and some components like coordinate system, axes, dataZoom, visualMap only\n    // need their target series refresh.\n    // (1) If we are implementing this feature some day, we should consider these cases:\n    // if a data processor depends on a component (e.g., dataZoomProcessor depends\n    // on the settings of `dataZoom`), it should be re-performed if the component\n    // is modified by `setOption`.\n    // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n    // it should be re-performed when the result array of `getTargetSeries` changed.\n    // We use `dependencies` to cover these issues.\n    // (3) How to update target series when coordinate system related components modified.\n    // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n    // and this case all of the tasks will be set as dirty.\n    ecModel.restoreData(payload); // Theoretically an overall task not only depends on each of its target series, but also\n    // depends on all of the series.\n    // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n    // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n    // that the overall task is set as dirty and to be performed, otherwise it probably cause\n    // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n    // probably cause state chaos (consider `dataZoomProcessor`).\n\n    this._stageTaskMap.each(function (taskRecord) {\n      var overallTask = taskRecord.overallTask;\n      overallTask && overallTask.dirty();\n    });\n  }; // If seriesModel provided, incremental threshold is check by series data.\n\n  Scheduler.prototype.getPerformArgs = function (task, isBlock) {\n    // For overall task\n    if (!task.__pipeline) {\n      return;\n    }\n    var pipeline = this._pipelineMap.get(task.__pipeline.id);\n    var pCtx = pipeline.context;\n    var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n    var step = incremental ? pipeline.step : null;\n    var modDataCount = pCtx && pCtx.modDataCount;\n    var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n    return {\n      step: step,\n      modBy: modBy,\n      modDataCount: modDataCount\n    };\n  };\n  Scheduler.prototype.getPipeline = function (pipelineId) {\n    return this._pipelineMap.get(pipelineId);\n  };\n  /**\n   * Current, progressive rendering starts from visual and layout.\n   * Always detect render mode in the same stage, avoiding that incorrect\n   * detection caused by data filtering.\n   * Caution:\n   * `updateStreamModes` use `seriesModel.getData()`.\n   */\n\n  Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\n    var pipeline = this._pipelineMap.get(seriesModel.uid);\n    var data = seriesModel.getData();\n    var dataLen = data.count(); // `progressiveRender` means that can render progressively in each\n    // animation frame. Note that some types of series do not provide\n    // `view.incrementalPrepareRender` but support `chart.appendData`. We\n    // use the term `incremental` but not `progressive` to describe the\n    // case that `chart.appendData`.\n\n    var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n    var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold'); // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n    // see `test/candlestick-large3.html`\n\n    var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n    seriesModel.pipelineContext = pipeline.context = {\n      progressiveRender: progressiveRender,\n      modDataCount: modDataCount,\n      large: large\n    };\n  };\n  Scheduler.prototype.restorePipelines = function (ecModel) {\n    var scheduler = this;\n    var pipelineMap = scheduler._pipelineMap = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var progressive = seriesModel.getProgressive();\n      var pipelineId = seriesModel.uid;\n      pipelineMap.set(pipelineId, {\n        id: pipelineId,\n        head: null,\n        tail: null,\n        threshold: seriesModel.getProgressiveThreshold(),\n        progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n        blockIndex: -1,\n        step: Math.round(progressive || 700),\n        count: 0\n      });\n      scheduler._pipe(seriesModel, seriesModel.dataTask);\n    });\n  };\n  Scheduler.prototype.prepareStageTasks = function () {\n    var stageTaskMap = this._stageTaskMap;\n    var ecModel = this.api.getModel();\n    var api = this.api;\n    each(this._allHandlers, function (handler) {\n      var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        // Currently do not need to support to sepecify them both.\n        errMsg = '\"reset\" and \"overallReset\" must not be both specified.';\n      }\n      assert(!(handler.reset && handler.overallReset), errMsg);\n      handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\n      handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\n    }, this);\n  };\n  Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\n    var renderTask = view.renderTask;\n    var context = renderTask.context;\n    context.model = model;\n    context.ecModel = ecModel;\n    context.api = api;\n    renderTask.__block = !view.incrementalPrepareRender;\n    this._pipe(model, renderTask);\n  };\n  Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\n    // If we do not use `block` here, it should be considered when to update modes.\n    this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, {\n      block: true\n    });\n  };\n  Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\n    this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\n  };\n  Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\n    opt = opt || {};\n    var unfinished = false;\n    var scheduler = this;\n    each(stageHandlers, function (stageHandler, idx) {\n      if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n        return;\n      }\n      var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n      var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n      var overallTask = stageHandlerRecord.overallTask;\n      if (overallTask) {\n        var overallNeedDirty_1;\n        var agentStubMap = overallTask.agentStubMap;\n        agentStubMap.each(function (stub) {\n          if (needSetDirty(opt, stub)) {\n            stub.dirty();\n            overallNeedDirty_1 = true;\n          }\n        });\n        overallNeedDirty_1 && overallTask.dirty();\n        scheduler.updatePayload(overallTask, payload);\n        var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block); // Execute stubs firstly, which may set the overall task dirty,\n        // then execute the overall task. And stub will call seriesModel.setData,\n        // which ensures that in the overallTask seriesModel.getData() will not\n        // return incorrect data.\n\n        agentStubMap.each(function (stub) {\n          stub.perform(performArgs_1);\n        });\n        if (overallTask.perform(performArgs_1)) {\n          unfinished = true;\n        }\n      } else if (seriesTaskMap) {\n        seriesTaskMap.each(function (task, pipelineId) {\n          if (needSetDirty(opt, task)) {\n            task.dirty();\n          }\n          var performArgs = scheduler.getPerformArgs(task, opt.block); // FIXME\n          // if intending to declare `performRawSeries` in handlers, only\n          // stream-independent (specifically, data item independent) operations can be\n          // performed. Because if a series is filtered, most of the tasks will not\n          // be performed. A stream-dependent operation probably cause wrong biz logic.\n          // Perhaps we should not provide a separate callback for this case instead\n          // of providing the config `performRawSeries`. The stream-dependent operations\n          // and stream-independent operations should better not be mixed.\n\n          performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n          scheduler.updatePayload(task, payload);\n          if (task.perform(performArgs)) {\n            unfinished = true;\n          }\n        });\n      }\n    });\n    function needSetDirty(opt, task) {\n      return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n    }\n    this.unfinished = unfinished || this.unfinished;\n  };\n  Scheduler.prototype.performSeriesTasks = function (ecModel) {\n    var unfinished;\n    ecModel.eachSeries(function (seriesModel) {\n      // Progress to the end for dataInit and dataRestore.\n      unfinished = seriesModel.dataTask.perform() || unfinished;\n    });\n    this.unfinished = unfinished || this.unfinished;\n  };\n  Scheduler.prototype.plan = function () {\n    // Travel pipelines, check block.\n    this._pipelineMap.each(function (pipeline) {\n      var task = pipeline.tail;\n      do {\n        if (task.__block) {\n          pipeline.blockIndex = task.__idxInPipeline;\n          break;\n        }\n        task = task.getUpstream();\n      } while (task);\n    });\n  };\n  Scheduler.prototype.updatePayload = function (task, payload) {\n    payload !== 'remain' && (task.context.payload = payload);\n  };\n  Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var oldSeriesTaskMap = stageHandlerRecord.seriesTaskMap; // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n\n    var newSeriesTaskMap = stageHandlerRecord.seriesTaskMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries; // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n    // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n    // it works but it may cause other irrelevant charts blocked.\n\n    if (stageHandler.createOnAllSeries) {\n      ecModel.eachRawSeries(create);\n    } else if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, create);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(create);\n    }\n    function create(seriesModel) {\n      var pipelineId = seriesModel.uid; // Init tasks for each seriesModel only once.\n      // Reuse original task instance.\n\n      var task = newSeriesTaskMap.set(pipelineId, oldSeriesTaskMap && oldSeriesTaskMap.get(pipelineId) || createTask({\n        plan: seriesTaskPlan,\n        reset: seriesTaskReset,\n        count: seriesTaskCount\n      }));\n      task.context = {\n        model: seriesModel,\n        ecModel: ecModel,\n        api: api,\n        // PENDING: `useClearVisual` not used?\n        useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n        plan: stageHandler.plan,\n        reset: stageHandler.reset,\n        scheduler: scheduler\n      };\n      scheduler._pipe(seriesModel, task);\n    }\n  };\n  Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask // For overall task, the function only be called on reset stage.\n    || createTask({\n      reset: overallTaskReset\n    });\n    overallTask.context = {\n      ecModel: ecModel,\n      api: api,\n      overallReset: stageHandler.overallReset,\n      scheduler: scheduler\n    };\n    var oldAgentStubMap = overallTask.agentStubMap; // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n\n    var newAgentStubMap = overallTask.agentStubMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries;\n    var overallProgress = true;\n    var shouldOverallTaskDirty = false; // FIXME:TS never used, so comment it\n    // let modifyOutputEnd = stageHandler.modifyOutputEnd;\n    // An overall task with seriesType detected or has `getTargetSeries`, we add\n    // stub in each pipelines, it will set the overall task dirty when the pipeline\n    // progress. Moreover, to avoid call the overall task each frame (too frequent),\n    // we set the pipeline block.\n\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '\"createOnAllSeries\" is not supported for \"overallReset\", ' + 'because it will block all streams.';\n    }\n    assert(!stageHandler.createOnAllSeries, errMsg);\n    if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, createStub);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(createStub);\n    } // Otherwise, (usually it is legacy case), the overall task will only be\n    // executed when upstream is dirty. Otherwise the progressive rendering of all\n    // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n    // dirty info from upstream.\n    else {\n      overallProgress = false;\n      each(ecModel.getSeries(), createStub);\n    }\n    function createStub(seriesModel) {\n      var pipelineId = seriesModel.uid;\n      var stub = newAgentStubMap.set(pipelineId, oldAgentStubMap && oldAgentStubMap.get(pipelineId) || (\n      // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n      shouldOverallTaskDirty = true, createTask({\n        reset: stubReset,\n        onDirty: stubOnDirty\n      })));\n      stub.context = {\n        model: seriesModel,\n        overallProgress: overallProgress // FIXME:TS never used, so comment it\n        // modifyOutputEnd: modifyOutputEnd\n      };\n\n      stub.agent = overallTask;\n      stub.__block = overallProgress;\n      scheduler._pipe(seriesModel, stub);\n    }\n    if (shouldOverallTaskDirty) {\n      overallTask.dirty();\n    }\n  };\n  Scheduler.prototype._pipe = function (seriesModel, task) {\n    var pipelineId = seriesModel.uid;\n    var pipeline = this._pipelineMap.get(pipelineId);\n    !pipeline.head && (pipeline.head = task);\n    pipeline.tail && pipeline.tail.pipe(task);\n    pipeline.tail = task;\n    task.__idxInPipeline = pipeline.count++;\n    task.__pipeline = pipeline;\n  };\n  Scheduler.wrapStageHandler = function (stageHandler, visualType) {\n    if (isFunction(stageHandler)) {\n      stageHandler = {\n        overallReset: stageHandler,\n        seriesType: detectSeriseType(stageHandler)\n      };\n    }\n    stageHandler.uid = getUID('stageHandler');\n    visualType && (stageHandler.visualType = visualType);\n    return stageHandler;\n  };\n  ;\n  return Scheduler;\n}();\nfunction overallTaskReset(context) {\n  context.overallReset(context.ecModel, context.api, context.payload);\n}\nfunction stubReset(context) {\n  return context.overallProgress && stubProgress;\n}\nfunction stubProgress() {\n  this.agent.dirty();\n  this.getDownstream().dirty();\n}\nfunction stubOnDirty() {\n  this.agent && this.agent.dirty();\n}\nfunction seriesTaskPlan(context) {\n  return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\n}\nfunction seriesTaskReset(context) {\n  if (context.useClearVisual) {\n    context.data.clearAllVisual();\n  }\n  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n  return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n    return makeSeriesTaskProgress(idx);\n  }) : singleSeriesTaskProgress;\n}\nvar singleSeriesTaskProgress = makeSeriesTaskProgress(0);\nfunction makeSeriesTaskProgress(resetDefineIdx) {\n  return function (params, context) {\n    var data = context.data;\n    var resetDefine = context.resetDefines[resetDefineIdx];\n    if (resetDefine && resetDefine.dataEach) {\n      for (var i = params.start; i < params.end; i++) {\n        resetDefine.dataEach(data, i);\n      }\n    } else if (resetDefine && resetDefine.progress) {\n      resetDefine.progress(params, data);\n    }\n  };\n}\nfunction seriesTaskCount(context) {\n  return context.data.count();\n}\n/**\n * Only some legacy stage handlers (usually in echarts extensions) are pure function.\n * To ensure that they can work normally, they should work in block mode, that is,\n * they should not be started util the previous tasks finished. So they cause the\n * progressive rendering disabled. We try to detect the series type, to narrow down\n * the block range to only the series type they concern, but not all series.\n */\n\nfunction detectSeriseType(legacyFunc) {\n  seriesType = null;\n  try {\n    // Assume there is no async when calling `eachSeriesByType`.\n    legacyFunc(ecModelMock, apiMock);\n  } catch (e) {}\n  return seriesType;\n}\nvar ecModelMock = {};\nvar apiMock = {};\nvar seriesType;\nmockMethods(ecModelMock, GlobalModel);\nmockMethods(apiMock, ExtensionAPI);\necModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n  seriesType = type;\n};\necModelMock.eachComponent = function (cond) {\n  if (cond.mainType === 'series' && cond.subType) {\n    seriesType = cond.subType;\n  }\n};\nfunction mockMethods(target, Clz) {\n  /* eslint-disable */\n  for (var name_1 in Clz.prototype) {\n    // Do not use hasOwnProperty\n    target[name_1] = noop;\n  }\n  /* eslint-enable */\n}\n\nexport default Scheduler;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Eventful from 'zrender/lib/core/Eventful.js';\n;\nvar lifecycle = new Eventful();\nexport default lifecycle;","import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.string.sub.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.array.slice.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nimport * as zrender from 'zrender/lib/zrender.js';\nimport { assert, each, isFunction, isObject, indexOf, bind, clone, setAsPrimitive, extend, createHashMap, map, defaults, isDom, isArray, noop, isString, retrieve2 } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport timsort from 'zrender/lib/core/timsort.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport CoordinateSystemManager from './CoordinateSystem.js';\nimport OptionManager from '../model/OptionManager.js';\nimport backwardCompat from '../preprocessor/backwardCompat.js';\nimport dataStack from '../processor/dataStack.js';\nimport SeriesModel from '../model/Series.js';\nimport ComponentView from '../view/Component.js';\nimport ChartView from '../view/Chart.js';\nimport * as graphic from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, blurSeriesFromHighlightPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur, allLeaveBlur, findComponentHighDownDispatchers, blurComponent, handleGlobalMouseOverForHighDown, handleGlobalMouseOutForHighDown } from '../util/states.js';\nimport * as modelUtil from '../util/model.js';\nimport { throttle } from '../util/throttle.js';\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from '../visual/style.js';\nimport loadingDefault from '../loading/default.js';\nimport Scheduler from './Scheduler.js';\nimport lightTheme from '../theme/light.js';\nimport darkTheme from '../theme/dark.js';\nimport { parseClassType } from '../util/clazz.js';\nimport { ECEventProcessor } from '../util/ECEventProcessor.js';\nimport { seriesSymbolTask, dataSymbolTask } from '../visual/symbol.js';\nimport { getVisualFromData, getItemVisualFromData } from '../visual/helper.js';\nimport { deprecateLog, deprecateReplaceLog, error, warn } from '../util/log.js';\nimport { handleLegacySelectEvents } from '../legacy/dataSelectAction.js';\nimport { registerExternalTransform } from '../data/helper/transform.js';\nimport { createLocaleObject, SYSTEM_LANG } from './locale.js';\nimport { findEventDispatcher } from '../util/event.js';\nimport decal from '../visual/decal.js';\nimport lifecycle from './lifecycle.js';\nimport { platformApi, setPlatformAPI } from 'zrender/lib/core/platform.js';\nimport { getImpl } from './impl.js';\nexport var version = '5.4.2';\nexport var dependencies = {\n  zrender: '5.4.3'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800; // Some data processors depends on the stack result dimension (to calculate data extent).\n// So data stack stage should be in front of data processing stage.\n\nvar PRIORITY_PROCESSOR_DATASTACK = 900; // \"Data filter\" will block the stream, so it should be\n// put at the beginning of data processing.\n\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000; // Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\n// overwrite the viusal result of component (like `visualMap`)\n// using data item specific setting (like itemStyle.xxx on data item)\n\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500; // Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\n// visual result like `symbolSize`.\n\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY_VISUAL_ARIA = 6000;\nvar PRIORITY_VISUAL_DECAL = 7000;\nexport var PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH,\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n    ARIA: PRIORITY_VISUAL_ARIA,\n    DECAL: PRIORITY_VISUAL_DECAL\n  }\n}; // Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\n\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\nvar PENDING_UPDATE = '__pendingUpdate';\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\nvar CONNECT_STATUS_PENDING = 0;\nvar CONNECT_STATUS_UPDATING = 1;\nvar CONNECT_STATUS_UPDATED = 2;\n;\n;\nfunction createRegisterEventWithLowercaseECharts(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (this.isDisposed()) {\n      disposedWarning(this.id);\n      return;\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction toLowercaseNameAndCallEventful(host, method, args) {\n  // `args[0]` is event name. Event name is all lowercase.\n  args[0] = args[0] && args[0].toLowerCase();\n  return Eventful.prototype[method].apply(host, args);\n}\nvar MessageCenter = /** @class */\nfunction (_super) {\n  __extends(MessageCenter, _super);\n  function MessageCenter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return MessageCenter;\n}(Eventful);\nvar messageCenterProto = MessageCenter.prototype;\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off'); // ---------------------------------------\n// Internal method names for class ECharts\n// ---------------------------------------\n\nvar prepare;\nvar prepareView;\nvar updateDirectly;\nvar updateMethods;\nvar doConvertPixel;\nvar updateStreamModes;\nvar doDispatchAction;\nvar flushPendingActions;\nvar triggerUpdatedEvent;\nvar bindRenderedEvent;\nvar bindMouseEvent;\nvar render;\nvar renderComponents;\nvar renderSeries;\nvar createExtensionAPI;\nvar enableConnect;\nvar markStatusToUpdate;\nvar applyChangedStates;\nvar ECharts = /** @class */\nfunction (_super) {\n  __extends(ECharts, _super);\n  function ECharts(dom,\n  // Theme name or themeOption.\n  theme, opts) {\n    var _this = _super.call(this, new ECEventProcessor()) || this;\n    _this._chartsViews = [];\n    _this._chartsMap = {};\n    _this._componentsViews = [];\n    _this._componentsMap = {}; // Can't dispatch action during rendering procedure\n\n    _this._pendingActions = [];\n    opts = opts || {}; // Get theme by name\n\n    if (isString(theme)) {\n      theme = themeStorage[theme];\n    }\n    _this._dom = dom;\n    var defaultRenderer = 'canvas';\n    var defaultCoarsePointer = 'auto';\n    var defaultUseDirtyRect = false;\n    if (process.env.NODE_ENV !== 'production') {\n      var root = /* eslint-disable-next-line */\n      env.hasGlobalWindow ? window : global;\n      defaultRenderer = root.__ECHARTS__DEFAULT__RENDERER__ || defaultRenderer;\n      defaultCoarsePointer = retrieve2(root.__ECHARTS__DEFAULT__COARSE_POINTER, defaultCoarsePointer);\n      var devUseDirtyRect = root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__;\n      defaultUseDirtyRect = devUseDirtyRect == null ? defaultUseDirtyRect : devUseDirtyRect;\n    }\n    var zr = _this._zr = zrender.init(dom, {\n      renderer: opts.renderer || defaultRenderer,\n      devicePixelRatio: opts.devicePixelRatio,\n      width: opts.width,\n      height: opts.height,\n      ssr: opts.ssr,\n      useDirtyRect: retrieve2(opts.useDirtyRect, defaultUseDirtyRect),\n      useCoarsePointer: retrieve2(opts.useCoarsePointer, defaultCoarsePointer),\n      pointerSize: opts.pointerSize\n    });\n    _this._ssr = opts.ssr; // Expect 60 fps.\n\n    _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\n    theme = clone(theme);\n    theme && backwardCompat(theme, true);\n    _this._theme = theme;\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n    _this._coordSysMgr = new CoordinateSystemManager();\n    var api = _this._api = createExtensionAPI(_this); // Sort on demand\n\n    function prioritySortFunc(a, b) {\n      return a.__prio - b.__prio;\n    }\n    timsort(visualFuncs, prioritySortFunc);\n    timsort(dataProcessorFuncs, prioritySortFunc);\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n    _this._messageCenter = new MessageCenter(); // Init mouse events\n\n    _this._initEvents(); // In case some people write `window.onresize = chart.resize`\n\n    _this.resize = bind(_this.resize, _this);\n    zr.animation.on('frame', _this._onframe, _this);\n    bindRenderedEvent(zr, _this);\n    bindMouseEvent(zr, _this); // ECharts instance can be used as value.\n\n    setAsPrimitive(_this);\n    return _this;\n  }\n  ECharts.prototype._onframe = function () {\n    if (this._disposed) {\n      return;\n    }\n    applyChangedStates(this);\n    var scheduler = this._scheduler; // Lazy update\n\n    if (this[PENDING_UPDATE]) {\n      var silent = this[PENDING_UPDATE].silent;\n      this[IN_MAIN_PROCESS_KEY] = true;\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\n      } catch (e) {\n        this[IN_MAIN_PROCESS_KEY] = false;\n        this[PENDING_UPDATE] = null;\n        throw e;\n      } // At present, in each frame, zrender performs:\n      //   (1) animation step forward.\n      //   (2) trigger('frame') (where this `_onframe` is called)\n      //   (3) zrender flush (render).\n      // If we do nothing here, since we use `setToFinal: true`, the step (3) above\n      // will render the final state of the elements before the real animation started.\n\n      this._zr.flush();\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this[PENDING_UPDATE] = null;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    } // Avoid do both lazy update and progress in one frame.\n    else if (scheduler.unfinished) {\n      // Stream progress.\n      var remainTime = TEST_FRAME_REMAIN_TIME;\n      var ecModel = this._model;\n      var api = this._api;\n      scheduler.unfinished = false;\n      do {\n        var startTime = +new Date();\n        scheduler.performSeriesTasks(ecModel); // Currently dataProcessorFuncs do not check threshold.\n\n        scheduler.performDataProcessorTasks(ecModel);\n        updateStreamModes(this, ecModel); // Do not update coordinate system here. Because that coord system update in\n        // each frame is not a good user experience. So we follow the rule that\n        // the extent of the coordinate system is determined in the first frame (the\n        // frame is executed immediately after task reset.\n        // this._coordSysMgr.update(ecModel, api);\n        // console.log('--- ec frame visual ---', remainTime);\n\n        scheduler.performVisualTasks(ecModel);\n        renderSeries(this, this._model, api, 'remain', {});\n        remainTime -= +new Date() - startTime;\n      } while (remainTime > 0 && scheduler.unfinished); // Call flush explicitly for trigger finished event.\n\n      if (!scheduler.unfinished) {\n        this._zr.flush();\n      } // Else, zr flushing be ensue within the same frame,\n      // because zr flushing is after onframe event.\n    }\n  };\n\n  ECharts.prototype.getDom = function () {\n    return this._dom;\n  };\n  ECharts.prototype.getId = function () {\n    return this.id;\n  };\n  ECharts.prototype.getZr = function () {\n    return this._zr;\n  };\n  ECharts.prototype.isSSR = function () {\n    return this._ssr;\n  };\n  /* eslint-disable-next-line */\n\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`setOption` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var silent;\n    var replaceMerge;\n    var transitionOpt;\n    if (isObject(notMerge)) {\n      lazyUpdate = notMerge.lazyUpdate;\n      silent = notMerge.silent;\n      replaceMerge = notMerge.replaceMerge;\n      transitionOpt = notMerge.transition;\n      notMerge = notMerge.notMerge;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    if (!this._model || notMerge) {\n      var optionManager = new OptionManager(this._api);\n      var theme = this._theme;\n      var ecModel = this._model = new GlobalModel();\n      ecModel.scheduler = this._scheduler;\n      ecModel.ssr = this._ssr;\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\n    }\n    this._model.setOption(option, {\n      replaceMerge: replaceMerge\n    }, optionPreprocessorFuncs);\n    var updateParams = {\n      seriesTransition: transitionOpt,\n      optionChanged: true\n    };\n    if (lazyUpdate) {\n      this[PENDING_UPDATE] = {\n        silent: silent,\n        updateParams: updateParams\n      };\n      this[IN_MAIN_PROCESS_KEY] = false; // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\n      // It should wake it up to make sure zrender start to render at the next frame.\n\n      this.getZr().wakeUp();\n    } else {\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, updateParams);\n      } catch (e) {\n        this[PENDING_UPDATE] = null;\n        this[IN_MAIN_PROCESS_KEY] = false;\n        throw e;\n      } // Ensure zr refresh sychronously, and then pixel in canvas can be\n      // fetched after `setOption`.\n\n      if (!this._ssr) {\n        // not use flush when using ssr mode.\n        this._zr.flush();\n      }\n      this[PENDING_UPDATE] = null;\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n  };\n  /**\n   * @deprecated\n   */\n\n  ECharts.prototype.setTheme = function () {\n    deprecateLog('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n  }; // We don't want developers to use getModel directly.\n\n  ECharts.prototype.getModel = function () {\n    return this._model;\n  };\n  ECharts.prototype.getOption = function () {\n    return this._model && this._model.getOption();\n  };\n  ECharts.prototype.getWidth = function () {\n    return this._zr.getWidth();\n  };\n  ECharts.prototype.getHeight = function () {\n    return this._zr.getHeight();\n  };\n  ECharts.prototype.getDevicePixelRatio = function () {\n    return this._zr.painter.dpr\n    /* eslint-disable-next-line */ || env.hasGlobalWindow && window.devicePixelRatio || 1;\n  };\n  /**\n   * Get canvas which has all thing rendered\n   * @deprecated Use renderToCanvas instead.\n   */\n\n  ECharts.prototype.getRenderedCanvas = function (opts) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\n    }\n    return this.renderToCanvas(opts);\n  };\n  ECharts.prototype.renderToCanvas = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'canvas') {\n        throw new Error('renderToCanvas can only be used in the canvas renderer.');\n      }\n    }\n    return painter.getRenderedCanvas({\n      backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\n      pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\n    });\n  };\n  ECharts.prototype.renderToSVGString = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'svg') {\n        throw new Error('renderToSVGString can only be used in the svg renderer.');\n      }\n    }\n    return painter.renderToString({\n      useViewBox: opts.useViewBox\n    });\n  };\n  /**\n   * Get svg data url\n   */\n\n  ECharts.prototype.getSvgDataURL = function () {\n    if (!env.svgSupported) {\n      return;\n    }\n    var zr = this._zr;\n    var list = zr.storage.getDisplayList(); // Stop animations\n\n    each(list, function (el) {\n      el.stopAnimation(null, true);\n    });\n    return zr.painter.toDataURL();\n  };\n  ECharts.prototype.getDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    opts = opts || {};\n    var excludeComponents = opts.excludeComponents;\n    var ecModel = this._model;\n    var excludesComponentViews = [];\n    var self = this;\n    each(excludeComponents, function (componentType) {\n      ecModel.eachComponent({\n        mainType: componentType\n      }, function (component) {\n        var view = self._componentsMap[component.__viewId];\n        if (!view.group.ignore) {\n          excludesComponentViews.push(view);\n          view.group.ignore = true;\n        }\n      });\n    });\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n    each(excludesComponentViews, function (view) {\n      view.group.ignore = false;\n    });\n    return url;\n  };\n  ECharts.prototype.getConnectedDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var isSvg = opts.type === 'svg';\n    var groupId = this.group;\n    var mathMin = Math.min;\n    var mathMax = Math.max;\n    var MAX_NUMBER = Infinity;\n    if (connectedGroups[groupId]) {\n      var left_1 = MAX_NUMBER;\n      var top_1 = MAX_NUMBER;\n      var right_1 = -MAX_NUMBER;\n      var bottom_1 = -MAX_NUMBER;\n      var canvasList_1 = [];\n      var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\n      each(instances, function (chart, id) {\n        if (chart.group === groupId) {\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\n          var boundingRect = chart.getDom().getBoundingClientRect();\n          left_1 = mathMin(boundingRect.left, left_1);\n          top_1 = mathMin(boundingRect.top, top_1);\n          right_1 = mathMax(boundingRect.right, right_1);\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n          canvasList_1.push({\n            dom: canvas,\n            left: boundingRect.left,\n            top: boundingRect.top\n          });\n        }\n      });\n      left_1 *= dpr_1;\n      top_1 *= dpr_1;\n      right_1 *= dpr_1;\n      bottom_1 *= dpr_1;\n      var width = right_1 - left_1;\n      var height = bottom_1 - top_1;\n      var targetCanvas = platformApi.createCanvas();\n      var zr_1 = zrender.init(targetCanvas, {\n        renderer: isSvg ? 'svg' : 'canvas'\n      });\n      zr_1.resize({\n        width: width,\n        height: height\n      });\n      if (isSvg) {\n        var content_1 = '';\n        each(canvasList_1, function (item) {\n          var x = item.left - left_1;\n          var y = item.top - top_1;\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n        });\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\n        if (opts.connectedBackgroundColor) {\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n        }\n        zr_1.refreshImmediately();\n        return zr_1.painter.toDataURL();\n      } else {\n        // Background between the charts\n        if (opts.connectedBackgroundColor) {\n          zr_1.add(new graphic.Rect({\n            shape: {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            },\n            style: {\n              fill: opts.connectedBackgroundColor\n            }\n          }));\n        }\n        each(canvasList_1, function (item) {\n          var img = new graphic.Image({\n            style: {\n              x: item.left * dpr_1 - left_1,\n              y: item.top * dpr_1 - top_1,\n              image: item.dom\n            }\n          });\n          zr_1.add(img);\n        });\n        zr_1.refreshImmediately();\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n      }\n    } else {\n      return this.getDataURL(opts);\n    }\n  };\n  ECharts.prototype.convertToPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertToPixel', finder, value);\n  };\n  ECharts.prototype.convertFromPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertFromPixel', finder, value);\n  };\n  /**\n   * Is the specified coordinate systems or components contain the given pixel point.\n   * @param {Array|number} value\n   * @return {boolean} result\n   */\n\n  ECharts.prototype.containPixel = function (finder, value) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var ecModel = this._model;\n    var result;\n    var findResult = modelUtil.parseFinder(ecModel, finder);\n    each(findResult, function (models, key) {\n      key.indexOf('Models') >= 0 && each(models, function (model) {\n        var coordSys = model.coordinateSystem;\n        if (coordSys && coordSys.containPoint) {\n          result = result || !!coordSys.containPoint(value);\n        } else if (key === 'seriesModels') {\n          var view = this._chartsMap[model.__viewId];\n          if (view && view.containPoint) {\n            result = result || view.containPoint(value, model);\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n            }\n          }\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            warn(key + ': containPoint is not supported');\n          }\n        }\n      }, this);\n    }, this);\n    return !!result;\n  };\n  /**\n   * Get visual from series or data.\n   * @param finder\n   *        If string, e.g., 'series', means {seriesIndex: 0}.\n   *        If Object, could contain some of these properties below:\n   *        {\n   *            seriesIndex / seriesId / seriesName,\n   *            dataIndex / dataIndexInside\n   *        }\n   *        If dataIndex is not specified, series visual will be fetched,\n   *        but not data item visual.\n   *        If all of seriesIndex, seriesId, seriesName are not specified,\n   *        visual will be fetched from first series.\n   * @param visualType 'color', 'symbol', 'symbolSize'\n   */\n\n  ECharts.prototype.getVisual = function (finder, visualType) {\n    var ecModel = this._model;\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\n      defaultMainType: 'series'\n    });\n    var seriesModel = parsedFinder.seriesModel;\n    if (process.env.NODE_ENV !== 'production') {\n      if (!seriesModel) {\n        warn('There is no specified series model');\n      }\n    }\n    var data = seriesModel.getData();\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n  };\n  /**\n   * Get view of corresponding component model\n   */\n\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n    return this._componentsMap[componentModel.__viewId];\n  };\n  /**\n   * Get view of corresponding series model\n   */\n\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n    return this._chartsMap[seriesModel.__viewId];\n  };\n  ECharts.prototype._initEvents = function () {\n    var _this = this;\n    each(MOUSE_EVENT_NAMES, function (eveName) {\n      var handler = function handler(e) {\n        var ecModel = _this.getModel();\n        var el = e.target;\n        var params;\n        var isGlobalOut = eveName === 'globalout'; // no e.target when 'globalout'.\n\n        if (isGlobalOut) {\n          params = {};\n        } else {\n          el && findEventDispatcher(el, function (parent) {\n            var ecData = getECData(parent);\n            if (ecData && ecData.dataIndex != null) {\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType) || {};\n              return true;\n            } // If element has custom eventData of components\n            else if (ecData.eventData) {\n              params = extend({}, ecData.eventData);\n              return true;\n            }\n          }, true);\n        } // Contract: if params prepared in mouse event,\n        // these properties must be specified:\n        // {\n        //    componentType: string (component main type)\n        //    componentIndex: number\n        // }\n        // Otherwise event query can not work.\n\n        if (params) {\n          var componentType = params.componentType;\n          var componentIndex = params.componentIndex; // Special handling for historic reason: when trigger by\n          // markLine/markPoint/markArea, the componentType is\n          // 'markLine'/'markPoint'/'markArea', but we should better\n          // enable them to be queried by seriesIndex, since their\n          // option is set in each series.\n\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n            componentType = 'series';\n            componentIndex = params.seriesIndex;\n          }\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n          if (process.env.NODE_ENV !== 'production') {\n            // `event.componentType` and `event[componentTpype + 'Index']` must not\n            // be missed, otherwise there is no way to distinguish source component.\n            // See `dataFormat.getDataParams`.\n            if (!isGlobalOut && !(model && view)) {\n              warn('model or view can not be found by params');\n            }\n          }\n          params.event = e;\n          params.type = eveName;\n          _this._$eventProcessor.eventInfo = {\n            targetEl: el,\n            packedEvent: params,\n            model: model,\n            view: view\n          };\n          _this.trigger(eveName, params);\n        }\n      }; // Consider that some component (like tooltip, brush, ...)\n      // register zr event handler, but user event handler might\n      // do anything, such as call `setOption` or `dispatchAction`,\n      // which probably update any of the content and probably\n      // cause problem if it is called previous other inner handlers.\n\n      handler.zrEventfulCallAtLast = true;\n      _this._zr.on(eveName, handler, _this);\n    });\n    each(eventActionMap, function (actionType, eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    }); // Extra events\n    // TODO register?\n\n    each(['selectchanged'], function (eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    handleLegacySelectEvents(this._messageCenter, this, this._api);\n  };\n  ECharts.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n  ECharts.prototype.clear = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this.setOption({\n      series: []\n    }, true);\n  };\n  ECharts.prototype.dispose = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._disposed = true;\n    var dom = this.getDom();\n    if (dom) {\n      modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n    }\n    var chart = this;\n    var api = chart._api;\n    var ecModel = chart._model;\n    each(chart._componentsViews, function (component) {\n      component.dispose(ecModel, api);\n    });\n    each(chart._chartsViews, function (chart) {\n      chart.dispose(ecModel, api);\n    }); // Dispose after all views disposed\n\n    chart._zr.dispose(); // Set properties to null.\n    // To reduce the memory cost in case the top code still holds this instance unexpectedly.\n\n    chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\n    delete instances[chart.id];\n  };\n  /**\n   * Resize the chart\n   */\n\n  ECharts.prototype.resize = function (opts) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`resize` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._zr.resize(opts);\n    var ecModel = this._model; // Resize loading effect\n\n    this._loadingFX && this._loadingFX.resize();\n    if (!ecModel) {\n      return;\n    }\n    var needPrepare = ecModel.resetOption('media');\n    var silent = opts && opts.silent; // There is some real cases that:\n    // chart.setOption(option, { lazyUpdate: true });\n    // chart.resize();\n\n    if (this[PENDING_UPDATE]) {\n      if (silent == null) {\n        silent = this[PENDING_UPDATE].silent;\n      }\n      needPrepare = true;\n      this[PENDING_UPDATE] = null;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    try {\n      needPrepare && prepare(this);\n      updateMethods.update.call(this, {\n        type: 'resize',\n        animation: extend({\n          // Disable animation\n          duration: 0\n        }, opts && opts.animation)\n      });\n    } catch (e) {\n      this[IN_MAIN_PROCESS_KEY] = false;\n      throw e;\n    }\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.showLoading = function (name, cfg) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (isObject(name)) {\n      cfg = name;\n      name = '';\n    }\n    name = name || 'default';\n    this.hideLoading();\n    if (!loadingEffects[name]) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Loading effects ' + name + ' not exists.');\n      }\n      return;\n    }\n    var el = loadingEffects[name](this._api, cfg);\n    var zr = this._zr;\n    this._loadingFX = el;\n    zr.add(el);\n  };\n  /**\n   * Hide loading effect\n   */\n\n  ECharts.prototype.hideLoading = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._loadingFX && this._zr.remove(this._loadingFX);\n    this._loadingFX = null;\n  };\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\n    var payload = extend({}, eventObj);\n    payload.type = eventActionMap[eventObj.type];\n    return payload;\n  };\n  /**\n   * @param opt If pass boolean, means opt.silent\n   * @param opt.silent Default `false`. Whether trigger events.\n   * @param opt.flush Default `undefined`.\n   *        true: Flush immediately, and then pixel in canvas can be fetched\n   *            immediately. Caution: it might affect performance.\n   *        false: Not flush.\n   *        undefined: Auto decide whether perform flush.\n   */\n\n  ECharts.prototype.dispatchAction = function (payload, opt) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (!isObject(opt)) {\n      opt = {\n        silent: !!opt\n      };\n    }\n    if (!actions[payload.type]) {\n      return;\n    } // Avoid dispatch action before setOption. Especially in `connect`.\n\n    if (!this._model) {\n      return;\n    } // May dispatchAction in rendering procedure\n\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      this._pendingActions.push(payload);\n      return;\n    }\n    var silent = opt.silent;\n    doDispatchAction.call(this, payload, silent);\n    var flush = opt.flush;\n    if (flush) {\n      this._zr.flush();\n    } else if (flush !== false && env.browser.weChat) {\n      // In WeChat embedded browser, `requestAnimationFrame` and `setInterval`\n      // hang when sliding page (on touch event), which cause that zr does not\n      // refresh until user interaction finished, which is not expected.\n      // But `dispatchAction` may be called too frequently when pan on touch\n      // screen, which impacts performance if do not throttle them.\n      this._throttledZrFlush();\n    }\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.updateLabelLayout = function () {\n    lifecycle.trigger('series:layoutlabels', this._model, this._api, {\n      // Not adding series labels.\n      // TODO\n      updatedSeries: []\n    });\n  };\n  ECharts.prototype.appendData = function (params) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var seriesIndex = params.seriesIndex;\n    var ecModel = this.getModel();\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (process.env.NODE_ENV !== 'production') {\n      assert(params.data && seriesModel);\n    }\n    seriesModel.appendData(params); // Note: `appendData` does not support that update extent of coordinate\n    // system, util some scenario require that. In the expected usage of\n    // `appendData`, the initial extent of coordinate system should better\n    // be fixed by axis `min`/`max` setting or initial data, otherwise if\n    // the extent changed while `appendData`, the location of the painted\n    // graphic elements have to be changed, which make the usage of\n    // `appendData` meaningless.\n\n    this._scheduler.unfinished = true;\n    this.getZr().wakeUp();\n  }; // A work around for no `internal` modifier in ts yet but\n  // need to strictly hide private methods to JS users.\n\n  ECharts.internalField = function () {\n    prepare = function prepare(ecIns) {\n      var scheduler = ecIns._scheduler;\n      scheduler.restorePipelines(ecIns._model);\n      scheduler.prepareStageTasks();\n      prepareView(ecIns, true);\n      prepareView(ecIns, false);\n      scheduler.plan();\n    };\n    /**\n     * Prepare view instances of charts and components\n     */\n\n    prepareView = function prepareView(ecIns, isComponent) {\n      var ecModel = ecIns._model;\n      var scheduler = ecIns._scheduler;\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n      var zr = ecIns._zr;\n      var api = ecIns._api;\n      for (var i = 0; i < viewList.length; i++) {\n        viewList[i].__alive = false;\n      }\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\n        componentType !== 'series' && doPrepare(model);\n      }) : ecModel.eachSeries(doPrepare);\n      function doPrepare(model) {\n        // By default view will be reused if possible for the case that `setOption` with \"notMerge\"\n        // mode and need to enable transition animation. (Usually, when they have the same id, or\n        // especially no id but have the same type & name & index. See the `model.id` generation\n        // rule in `makeIdAndName` and `viewId` generation rule here).\n        // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\n        // the new model has nothing to do with the old model.\n        var requireNewView = model.__requireNewView; // This command should not work twice.\n\n        model.__requireNewView = false; // Consider: id same and type changed.\n\n        var viewId = '_ec_' + model.id + '_' + model.type;\n        var view = !requireNewView && viewMap[viewId];\n        if (!view) {\n          var classType = parseClassType(model.type);\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) :\n          // FIXME:TS\n          // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\n          // For backward compat, still support a chart type declared as only subType\n          // like \"liquidfill\", but recommend \"series.liquidfill\"\n          // But need a base class to make a type series.\n          ChartView.getClass(classType.sub);\n          if (process.env.NODE_ENV !== 'production') {\n            assert(Clazz, classType.sub + ' does not exist.');\n          }\n          view = new Clazz();\n          view.init(ecModel, api);\n          viewMap[viewId] = view;\n          viewList.push(view);\n          zr.add(view.group);\n        }\n        model.__viewId = view.__id = viewId;\n        view.__alive = true;\n        view.__model = model;\n        view.group.__ecComponentInfo = {\n          mainType: model.mainType,\n          index: model.componentIndex\n        };\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\n      }\n      for (var i = 0; i < viewList.length;) {\n        var view = viewList[i];\n        if (!view.__alive) {\n          !isComponent && view.renderTask.dispose();\n          zr.remove(view.group);\n          view.dispose(ecModel, api);\n          viewList.splice(i, 1);\n          if (viewMap[view.__id] === view) {\n            delete viewMap[view.__id];\n          }\n          view.__id = view.group.__ecComponentInfo = null;\n        } else {\n          i++;\n        }\n      }\n    };\n    updateDirectly = function updateDirectly(ecIns, method, payload, mainType, subType) {\n      var ecModel = ecIns._model;\n      ecModel.setUpdatePayload(payload); // broadcast\n\n      if (!mainType) {\n        // FIXME\n        // Chart will not be update directly here, except set dirty.\n        // But there is no such scenario now.\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n        return;\n      }\n      var query = {};\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\n      var condition = {\n        mainType: mainType,\n        query: query\n      };\n      subType && (condition.subType = subType); // subType may be '' by parseClassType;\n\n      var excludeSeriesId = payload.excludeSeriesId;\n      var excludeSeriesIdMap;\n      if (excludeSeriesId != null) {\n        excludeSeriesIdMap = createHashMap();\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\n          var modelId = modelUtil.convertOptionIdName(id, null);\n          if (modelId != null) {\n            excludeSeriesIdMap.set(modelId, true);\n          }\n        });\n      } // If dispatchAction before setOption, do nothing.\n\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        if (isHighDownPayload(payload)) {\n          if (model instanceof SeriesModel) {\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\n              blurSeriesFromHighlightPayload(model, payload, ecIns._api);\n            }\n          } else {\n            var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\n              focusSelf = _a.focusSelf,\n              dispatchers = _a.dispatchers;\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\n              blurComponent(model.mainType, model.componentIndex, ecIns._api);\n            } // PENDING:\n            // Whether to put this \"enter emphasis\" code in `ComponentView`,\n            // which will be the same as `ChartView` but might be not necessary\n            // and will be far from this logic.\n\n            if (dispatchers) {\n              each(dispatchers, function (dispatcher) {\n                payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\n              });\n            }\n          }\n        } else if (isSelectChangePayload(payload)) {\n          // TODO geo\n          if (model instanceof SeriesModel) {\n            toggleSelectionFromPayload(model, payload, ecIns._api);\n            updateSeriesElementSelection(model);\n            markStatusToUpdate(ecIns);\n          }\n        }\n      }, ecIns);\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n      }, ecIns);\n      function callView(view) {\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n      }\n    };\n    updateMethods = {\n      prepareAndUpdate: function prepareAndUpdate(payload) {\n        prepare(this);\n        updateMethods.update.call(this, payload, {\n          // Needs to mark option changed if newOption is given.\n          // It's from MagicType.\n          // TODO If use a separate flag optionChanged in payload?\n          optionChanged: payload.newOption != null\n        });\n      },\n      update: function update(payload, updateParams) {\n        var ecModel = this._model;\n        var api = this._api;\n        var zr = this._zr;\n        var coordSysMgr = this._coordSysMgr;\n        var scheduler = this._scheduler; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        scheduler.restoreData(ecModel, payload);\n        scheduler.performSeriesTasks(ecModel); // TODO\n        // Save total ecModel here for undo/redo (after restoring data and before processing data).\n        // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n        // Create new coordinate system each update\n        // In LineView may save the old coordinate system and use it to get the original point.\n\n        coordSysMgr.create(ecModel, api);\n        scheduler.performDataProcessorTasks(ecModel, payload); // Current stream render is not supported in data process. So we can update\n        // stream modes after data processing, where the filtered data is used to\n        // determine whether to use progressive rendering.\n\n        updateStreamModes(this, ecModel); // We update stream modes before coordinate system updated, then the modes info\n        // can be fetched when coord sys updating (consider the barGrid extent fix). But\n        // the drawback is the full coord info can not be fetched. Fortunately this full\n        // coord is not required in stream mode updater currently.\n\n        coordSysMgr.update(ecModel, api);\n        clearColorPalette(ecModel);\n        scheduler.performVisualTasks(ecModel, payload);\n        render(this, ecModel, api, payload, updateParams); // Set background\n\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n        var darkMode = ecModel.get('darkMode');\n        zr.setBackgroundColor(backgroundColor); // Force set dark mode.\n\n        if (darkMode != null && darkMode !== 'auto') {\n          zr.setDarkMode(darkMode);\n        }\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateTransform: function updateTransform(payload) {\n        var _this = this;\n        var ecModel = this._model;\n        var api = this._api; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload); // ChartView.markUpdateMethod(payload, 'updateTransform');\n\n        var componentDirtyList = [];\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType === 'series') {\n            return;\n          }\n          var componentView = _this.getViewOfComponentModel(componentModel);\n          if (componentView && componentView.__alive) {\n            if (componentView.updateTransform) {\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n              result && result.update && componentDirtyList.push(componentView);\n            } else {\n              componentDirtyList.push(componentView);\n            }\n          }\n        });\n        var seriesDirtyMap = createHashMap();\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          if (chartView.updateTransform) {\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n          } else {\n            seriesDirtyMap.set(seriesModel.uid, 1);\n          }\n        });\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true,\n          dirtyMap: seriesDirtyMap\n        }); // Currently, not call render of components. Geo render cost a lot.\n        // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n\n        renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateView: function updateView(payload) {\n        var ecModel = this._model; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        ChartView.markUpdateMethod(payload, 'updateView');\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true\n        });\n        render(this, ecModel, this._api, payload, {});\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateVisual: function updateVisual(payload) {\n        // updateMethods.update.call(this, payload);\n        var _this = this;\n        var ecModel = this._model; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload); // clear all visual\n\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.getData().clearAllVisual();\n        }); // Perform visual\n\n        ChartView.markUpdateMethod(payload, 'updateVisual');\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          visualType: 'visual',\n          setDirty: true\n        });\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType !== 'series') {\n            var componentView = _this.getViewOfComponentModel(componentModel);\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n          }\n        });\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n        });\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateLayout: function updateLayout(payload) {\n        updateMethods.update.call(this, payload);\n      }\n    };\n    doConvertPixel = function doConvertPixel(ecIns, methodName, finder, value) {\n      if (ecIns._disposed) {\n        disposedWarning(ecIns.id);\n        return;\n      }\n      var ecModel = ecIns._model;\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n      var result;\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\n      for (var i = 0; i < coordSysList.length; i++) {\n        var coordSys = coordSysList[i];\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\n          return result;\n        }\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n      }\n    };\n    updateStreamModes = function updateStreamModes(ecIns, ecModel) {\n      var chartsMap = ecIns._chartsMap;\n      var scheduler = ecIns._scheduler;\n      ecModel.eachSeries(function (seriesModel) {\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n      });\n    };\n    doDispatchAction = function doDispatchAction(payload, silent) {\n      var _this = this;\n      var ecModel = this.getModel();\n      var payloadType = payload.type;\n      var escapeConnect = payload.escapeConnect;\n      var actionWrap = actions[payloadType];\n      var actionInfo = actionWrap.actionInfo;\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\n      var updateMethod = cptTypeTmp.pop();\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n      this[IN_MAIN_PROCESS_KEY] = true;\n      var payloads = [payload];\n      var batched = false; // Batch action\n\n      if (payload.batch) {\n        batched = true;\n        payloads = map(payload.batch, function (item) {\n          item = defaults(extend({}, item), payload);\n          item.batch = null;\n          return item;\n        });\n      }\n      var eventObjBatch = [];\n      var eventObj;\n      var isSelectChange = isSelectChangePayload(payload);\n      var isHighDown = isHighDownPayload(payload); // Only leave blur once if there are multiple batches.\n\n      if (isHighDown) {\n        allLeaveBlur(this._api);\n      }\n      each(payloads, function (batchItem) {\n        // Action can specify the event by return it.\n        eventObj = actionWrap.action(batchItem, _this._model, _this._api); // Emit event outside\n\n        eventObj = eventObj || extend({}, batchItem); // Convert type to eventType\n\n        eventObj.type = actionInfo.event || eventObj.type;\n        eventObjBatch.push(eventObj); // light update does not perform data process, layout and visual.\n\n        if (isHighDown) {\n          var _a = modelUtil.preParseFinder(payload),\n            queryOptionMap = _a.queryOptionMap,\n            mainTypeSpecified = _a.mainTypeSpecified;\n          var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\n          updateDirectly(_this, updateMethod, batchItem, componentMainType);\n          markStatusToUpdate(_this);\n        } else if (isSelectChange) {\n          // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\n          // geo still use 'geoselect'.\n          updateDirectly(_this, updateMethod, batchItem, 'series');\n          markStatusToUpdate(_this);\n        } else if (cptType) {\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n        }\n      });\n      if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\n        try {\n          // Still dirty\n          if (this[PENDING_UPDATE]) {\n            prepare(this);\n            updateMethods.update.call(this, payload);\n            this[PENDING_UPDATE] = null;\n          } else {\n            updateMethods[updateMethod].call(this, payload);\n          }\n        } catch (e) {\n          this[IN_MAIN_PROCESS_KEY] = false;\n          throw e;\n        }\n      } // Follow the rule of action batch\n\n      if (batched) {\n        eventObj = {\n          type: actionInfo.event || payloadType,\n          escapeConnect: escapeConnect,\n          batch: eventObjBatch\n        };\n      } else {\n        eventObj = eventObjBatch[0];\n      }\n      this[IN_MAIN_PROCESS_KEY] = false;\n      if (!silent) {\n        var messageCenter = this._messageCenter;\n        messageCenter.trigger(eventObj.type, eventObj); // Extra triggered 'selectchanged' event\n\n        if (isSelectChange) {\n          var newObj = {\n            type: 'selectchanged',\n            escapeConnect: escapeConnect,\n            selected: getAllSelectedIndices(ecModel),\n            isFromClick: payload.isFromClick || false,\n            fromAction: payload.type,\n            fromActionPayload: payload\n          };\n          messageCenter.trigger(newObj.type, newObj);\n        }\n      }\n    };\n    flushPendingActions = function flushPendingActions(silent) {\n      var pendingActions = this._pendingActions;\n      while (pendingActions.length) {\n        var payload = pendingActions.shift();\n        doDispatchAction.call(this, payload, silent);\n      }\n    };\n    triggerUpdatedEvent = function triggerUpdatedEvent(silent) {\n      !silent && this.trigger('updated');\n    };\n    /**\n     * Event `rendered` is triggered when zr\n     * rendered. It is useful for realtime\n     * snapshot (reflect animation).\n     *\n     * Event `finished` is triggered when:\n     * (1) zrender rendering finished.\n     * (2) initial animation finished.\n     * (3) progressive rendering finished.\n     * (4) no pending action.\n     * (5) no delayed setOption needs to be processed.\n     */\n\n    bindRenderedEvent = function bindRenderedEvent(zr, ecIns) {\n      zr.on('rendered', function (params) {\n        ecIns.trigger('rendered', params); // The `finished` event should not be triggered repeatedly,\n        // so it should only be triggered when rendering indeed happens\n        // in zrender. (Consider the case that dipatchAction is keep\n        // triggering when mouse move).\n\n        if (\n        // Although zr is dirty if initial animation is not finished\n        // and this checking is called on frame, we also check\n        // animation finished for robustness.\n        zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n          ecIns.trigger('finished');\n        }\n      });\n    };\n    bindMouseEvent = function bindMouseEvent(zr, ecIns) {\n      zr.on('mouseover', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('mouseout', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('click', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, function (target) {\n          return getECData(target).dataIndex != null;\n        }, true);\n        if (dispatcher) {\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\n          var ecData = getECData(dispatcher);\n          ecIns._api.dispatchAction({\n            type: actionType,\n            dataType: ecData.dataType,\n            dataIndexInside: ecData.dataIndex,\n            seriesIndex: ecData.seriesIndex,\n            isFromClick: true\n          });\n        }\n      });\n    };\n    function clearColorPalette(ecModel) {\n      ecModel.clearColorPalette();\n      ecModel.eachSeries(function (seriesModel) {\n        seriesModel.clearColorPalette();\n      });\n    }\n    ; // Allocate zlevels for series and components\n\n    function allocateZlevels(ecModel) {\n      ;\n      var componentZLevels = [];\n      var seriesZLevels = [];\n      var hasSeperateZLevel = false;\n      ecModel.eachComponent(function (componentType, componentModel) {\n        var zlevel = componentModel.get('zlevel') || 0;\n        var z = componentModel.get('z') || 0;\n        var zlevelKey = componentModel.getZLevelKey();\n        hasSeperateZLevel = hasSeperateZLevel || !!zlevelKey;\n        (componentType === 'series' ? seriesZLevels : componentZLevels).push({\n          zlevel: zlevel,\n          z: z,\n          idx: componentModel.componentIndex,\n          type: componentType,\n          key: zlevelKey\n        });\n      });\n      if (hasSeperateZLevel) {\n        // Series after component\n        var zLevels = componentZLevels.concat(seriesZLevels);\n        var lastSeriesZLevel_1;\n        var lastSeriesKey_1;\n        timsort(zLevels, function (a, b) {\n          if (a.zlevel === b.zlevel) {\n            return a.z - b.z;\n          }\n          return a.zlevel - b.zlevel;\n        });\n        each(zLevels, function (item) {\n          var componentModel = ecModel.getComponent(item.type, item.idx);\n          var zlevel = item.zlevel;\n          var key = item.key;\n          if (lastSeriesZLevel_1 != null) {\n            zlevel = Math.max(lastSeriesZLevel_1, zlevel);\n          }\n          if (key) {\n            if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = key;\n          } else if (lastSeriesKey_1) {\n            if (zlevel === lastSeriesZLevel_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = '';\n          }\n          lastSeriesZLevel_1 = zlevel;\n          componentModel.setZLevel(zlevel);\n        });\n      }\n    }\n    render = function render(ecIns, ecModel, api, payload, updateParams) {\n      allocateZlevels(ecModel);\n      renderComponents(ecIns, ecModel, api, payload, updateParams);\n      each(ecIns._chartsViews, function (chart) {\n        chart.__alive = false;\n      });\n      renderSeries(ecIns, ecModel, api, payload, updateParams); // Remove groups of unrendered charts\n\n      each(ecIns._chartsViews, function (chart) {\n        if (!chart.__alive) {\n          chart.remove(ecModel, api);\n        }\n      });\n    };\n    renderComponents = function renderComponents(ecIns, ecModel, api, payload, updateParams, dirtyList) {\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\n        var componentModel = componentView.__model;\n        clearStates(componentModel, componentView);\n        componentView.render(componentModel, ecModel, api, payload);\n        updateZ(componentModel, componentView);\n        updateStates(componentModel, componentView);\n      });\n    };\n    /**\n     * Render each chart and component\n     */\n\n    renderSeries = function renderSeries(ecIns, ecModel, api, payload, updateParams, dirtyMap) {\n      // Render all charts\n      var scheduler = ecIns._scheduler;\n      updateParams = extend(updateParams || {}, {\n        updatedSeries: ecModel.getSeries()\n      }); // TODO progressive?\n\n      lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\n      var unfinished = false;\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        chartView.__alive = true;\n        var renderTask = chartView.renderTask;\n        scheduler.updatePayload(renderTask, payload); // TODO states on marker.\n\n        clearStates(seriesModel, chartView);\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n          renderTask.dirty();\n        }\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n          unfinished = true;\n        }\n        chartView.group.silent = !!seriesModel.get('silent'); // Should not call markRedraw on group, because it will disable zrender\n        // incremental render (always render from the __startIndex each frame)\n        // chartView.group.markRedraw();\n\n        updateBlend(seriesModel, chartView);\n        updateSeriesElementSelection(seriesModel);\n      });\n      scheduler.unfinished = unfinished || scheduler.unfinished;\n      lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams); // transition after label is layouted.\n\n      lifecycle.trigger('series:transition', ecModel, api, updateParams);\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId]; // Update Z after labels updated. Before applying states.\n\n        updateZ(seriesModel, chartView); // NOTE: Update states after label is updated.\n        // label should be in normal status when layouting.\n\n        updateStates(seriesModel, chartView);\n      }); // If use hover layer\n\n      updateHoverLayerStatus(ecIns, ecModel);\n      lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\n    };\n    markStatusToUpdate = function markStatusToUpdate(ecIns) {\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true; // Wake up zrender if it's sleep. Let it update states in the next frame.\n\n      ecIns.getZr().wakeUp();\n    };\n    applyChangedStates = function applyChangedStates(ecIns) {\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n        return;\n      }\n      ecIns.getZr().storage.traverse(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        applyElementStates(el);\n      });\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n    };\n    function applyElementStates(el) {\n      var newStates = [];\n      var oldStates = el.currentStates; // Keep other states.\n\n      for (var i = 0; i < oldStates.length; i++) {\n        var stateName = oldStates[i];\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n          newStates.push(stateName);\n        }\n      } // Only use states when it's exists.\n\n      if (el.selected && el.states.select) {\n        newStates.push('select');\n      }\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n        newStates.push('emphasis');\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n        newStates.push('blur');\n      }\n      el.useStates(newStates);\n    }\n    function updateHoverLayerStatus(ecIns, ecModel) {\n      var zr = ecIns._zr;\n      var storage = zr.storage;\n      var elCount = 0;\n      storage.traverse(function (el) {\n        if (!el.isGroup) {\n          elCount++;\n        }\n      });\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n        ecModel.eachSeries(function (seriesModel) {\n          if (seriesModel.preventUsingHoverLayer) {\n            return;\n          }\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n          if (chartView.__alive) {\n            chartView.eachRendered(function (el) {\n              if (el.states.emphasis) {\n                el.states.emphasis.hoverLayer = true;\n              }\n            });\n          }\n        });\n      }\n    }\n    ;\n    /**\n     * Update chart and blend.\n     */\n\n    function updateBlend(seriesModel, chartView) {\n      var blendMode = seriesModel.get('blendMode') || null;\n      chartView.eachRendered(function (el) {\n        // FIXME marker and other components\n        if (!el.isGroup) {\n          // DON'T mark the element dirty. In case element is incremental and don't want to rerender.\n          el.style.blend = blendMode;\n        }\n      });\n    }\n    ;\n    function updateZ(model, view) {\n      if (model.preventAutoZ) {\n        return;\n      }\n      var z = model.get('z') || 0;\n      var zlevel = model.get('zlevel') || 0; // Set z and zlevel\n\n      view.eachRendered(function (el) {\n        doUpdateZ(el, z, zlevel, -Infinity); // Don't traverse the children because it has been traversed in _updateZ.\n\n        return true;\n      });\n    }\n    ;\n    function doUpdateZ(el, z, zlevel, maxZ2) {\n      // Group may also have textContent\n      var label = el.getTextContent();\n      var labelLine = el.getTextGuideLine();\n      var isGroup = el.isGroup;\n      if (isGroup) {\n        // set z & zlevel of children elements of Group\n        var children = el.childrenRef();\n        for (var i = 0; i < children.length; i++) {\n          maxZ2 = Math.max(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\n        }\n      } else {\n        // not Group\n        el.z = z;\n        el.zlevel = zlevel;\n        maxZ2 = Math.max(el.z2, maxZ2);\n      } // always set z and zlevel if label/labelLine exists\n\n      if (label) {\n        label.z = z;\n        label.zlevel = zlevel; // lift z2 of text content\n        // TODO if el.emphasis.z2 is spcefied, what about textContent.\n\n        isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\n      }\n      if (labelLine) {\n        var textGuideLineConfig = el.textGuideLineConfig;\n        labelLine.z = z;\n        labelLine.zlevel = zlevel;\n        isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\n      }\n      return maxZ2;\n    } // Clear states without animation.\n    // TODO States on component.\n\n    function clearStates(model, view) {\n      view.eachRendered(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        var textContent = el.getTextContent();\n        var textGuide = el.getTextGuideLine();\n        if (el.stateTransition) {\n          el.stateTransition = null;\n        }\n        if (textContent && textContent.stateTransition) {\n          textContent.stateTransition = null;\n        }\n        if (textGuide && textGuide.stateTransition) {\n          textGuide.stateTransition = null;\n        } // TODO If el is incremental.\n\n        if (el.hasState()) {\n          el.prevStates = el.currentStates;\n          el.clearStates();\n        } else if (el.prevStates) {\n          el.prevStates = null;\n        }\n      });\n    }\n    function updateStates(model, view) {\n      var stateAnimationModel = model.getModel('stateAnimation');\n      var enableAnimation = model.isAnimationEnabled();\n      var duration = stateAnimationModel.get('duration');\n      var stateTransition = duration > 0 ? {\n        duration: duration,\n        delay: stateAnimationModel.get('delay'),\n        easing: stateAnimationModel.get('easing') // additive: stateAnimationModel.get('additive')\n      } : null;\n      view.eachRendered(function (el) {\n        if (el.states && el.states.emphasis) {\n          // Not applied on removed elements, it may still in fading.\n          if (graphic.isElementRemoved(el)) {\n            return;\n          }\n          if (el instanceof graphic.Path) {\n            savePathStates(el);\n          } // Only updated on changed element. In case element is incremental and don't want to rerender.\n          // TODO, a more proper way?\n\n          if (el.__dirty) {\n            var prevStates = el.prevStates; // Restore states without animation\n\n            if (prevStates) {\n              el.useStates(prevStates);\n            }\n          } // Update state transition and enable animation again.\n\n          if (enableAnimation) {\n            el.stateTransition = stateTransition;\n            var textContent = el.getTextContent();\n            var textGuide = el.getTextGuideLine(); // TODO Is it necessary to animate label?\n\n            if (textContent) {\n              textContent.stateTransition = stateTransition;\n            }\n            if (textGuide) {\n              textGuide.stateTransition = stateTransition;\n            }\n          } // Use highlighted and selected flag to toggle states.\n\n          if (el.__dirty) {\n            applyElementStates(el);\n          }\n        }\n      });\n    }\n    ;\n    createExtensionAPI = function createExtensionAPI(ecIns) {\n      return new ( /** @class */\n      function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.getCoordinateSystems = function () {\n          return ecIns._coordSysMgr.getCoordinateSystems();\n        };\n        class_1.prototype.getComponentByElement = function (el) {\n          while (el) {\n            var modelInfo = el.__ecComponentInfo;\n            if (modelInfo != null) {\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n            }\n            el = el.parent;\n          }\n        };\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n          enterEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n          leaveEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterBlur = function (el) {\n          enterBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveBlur = function (el) {\n          leaveBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterSelect = function (el) {\n          enterSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveSelect = function (el) {\n          leaveSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.getModel = function () {\n          return ecIns.getModel();\n        };\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\n          return ecIns.getViewOfComponentModel(componentModel);\n        };\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n          return ecIns.getViewOfSeriesModel(seriesModel);\n        };\n        return class_1;\n      }(ExtensionAPI))(ecIns);\n    };\n    enableConnect = function enableConnect(chart) {\n      function updateConnectedChartsStatus(charts, status) {\n        for (var i = 0; i < charts.length; i++) {\n          var otherChart = charts[i];\n          otherChart[CONNECT_STATUS_KEY] = status;\n        }\n      }\n      each(eventActionMap, function (actionType, eventType) {\n        chart._messageCenter.on(eventType, function (event) {\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n            if (event && event.escapeConnect) {\n              return;\n            }\n            var action_1 = chart.makeActionFromEvent(event);\n            var otherCharts_1 = [];\n            each(instances, function (otherChart) {\n              if (otherChart !== chart && otherChart.group === chart.group) {\n                otherCharts_1.push(otherChart);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n            each(otherCharts_1, function (otherChart) {\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                otherChart.dispatchAction(action_1);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n          }\n        });\n      });\n    };\n  }();\n  return ECharts;\n}(Eventful);\nvar echartsProto = ECharts.prototype;\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\n/**\n * @deprecated\n */\n// @ts-ignore\n\nechartsProto.one = function (eventName, cb, ctx) {\n  var self = this;\n  deprecateLog('ECharts#one is deprecated.');\n  function wrapped() {\n    var args2 = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args2[_i] = arguments[_i];\n    }\n    cb && cb.apply && cb.apply(this, args2); // @ts-ignore\n\n    self.off(eventName, wrapped);\n  }\n  ; // @ts-ignore\n\n  this.on.call(this, eventName, wrapped, ctx);\n};\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\nfunction disposedWarning(id) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('Instance ' + id + ' has been disposed');\n  }\n}\nvar actions = {};\n/**\n * Map eventType to actionType\n */\n\nvar eventActionMap = {};\nvar dataProcessorFuncs = [];\nvar optionPreprocessorFuncs = [];\nvar visualFuncs = [];\nvar themeStorage = {};\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = +new Date() - 0;\nvar groupIdBase = +new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n/**\n * @param opts.devicePixelRatio Use window.devicePixelRatio by default\n * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\n * @param opts.width Use clientWidth of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.height Use clientHeight of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.locale Specify the locale.\n * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\n */\n\nexport function init(dom, theme, opts) {\n  var isClient = !(opts && opts.ssr);\n  if (isClient) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!dom) {\n        throw new Error('Initialize failed: invalid dom.');\n      }\n    }\n    var existInstance = getInstanceByDom(dom);\n    if (existInstance) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('There is a chart instance already initialized on the dom.');\n      }\n      return existInstance;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n        warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n      }\n    }\n  }\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  isClient && modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  lifecycle.trigger('afterinit', chart);\n  return chart;\n}\n/**\n * @usage\n * (A)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * chart1.group = 'xxx';\n * chart2.group = 'xxx';\n * echarts.connect('xxx');\n * ```\n * (B)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * echarts.connect('xxx', [chart1, chart2]);\n * ```\n */\n\nexport function connect(groupId) {\n  // Is array of charts\n  if (isArray(groupId)) {\n    var charts = groupId;\n    groupId = null; // If any chart has group\n\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n  connectedGroups[groupId] = true;\n  return groupId;\n}\n/**\n * @deprecated\n */\n\nexport function disConnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\n * Alias and backward compatibility\n */\n\nexport var disconnect = disConnect;\n/**\n * Dispose a chart instance\n */\n\nexport function dispose(chart) {\n  if (isString(chart)) {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\nexport function getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\nexport function getInstanceById(key) {\n  return instances[key];\n}\n/**\n * Register theme\n */\n\nexport function registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\n * Register option preprocessor\n */\n\nexport function registerPreprocessor(preprocessorFunc) {\n  if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\n    optionPreprocessorFuncs.push(preprocessorFunc);\n  }\n}\nexport function registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n}\n/**\n * Register postIniter\n * @param {Function} postInitFunc\n */\n\nexport function registerPostInit(postInitFunc) {\n  registerUpdateLifecycle('afterinit', postInitFunc);\n}\n/**\n * Register postUpdater\n * @param {Function} postUpdateFunc\n */\n\nexport function registerPostUpdate(postUpdateFunc) {\n  registerUpdateLifecycle('afterupdate', postUpdateFunc);\n}\nexport function registerUpdateLifecycle(name, cb) {\n  lifecycle.on(name, cb);\n}\nexport function registerAction(actionInfo, eventName, action) {\n  if (isFunction(eventName)) {\n    action = eventName;\n    eventName = '';\n  }\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0]; // Event name is all lowercase\n\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event;\n  if (eventActionMap[eventName]) {\n    // Already registered.\n    return;\n  } // Validate action type and event name.\n\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n  eventActionMap[eventName] = actionType;\n}\nexport function registerCoordinateSystem(type, coordSysCreator) {\n  CoordinateSystemManager.register(type, coordSysCreator);\n}\n/**\n * Get dimensions of specified coordinate system.\n * @param {string} type\n * @return {Array.<string|Object>}\n */\n\nexport function getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\nexport { registerLocale } from './locale.js';\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\nexport { registerLayout, registerVisual };\nvar registeredTasks = [];\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNaN(priority) || priority == null) {\n      throw new Error('Illegal priority');\n    } // Check duplicate\n\n    each(targetList, function (wrap) {\n      assert(wrap.__raw !== fn);\n    });\n  } // Already registered\n\n  if (indexOf(registeredTasks, fn) >= 0) {\n    return;\n  }\n  registeredTasks.push(fn);\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n}\nexport function registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\n * ZRender need a canvas context to do measureText.\n * But in node environment canvas may be created by node-canvas.\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n *\n *\n * @deprecated use setPlatformAPI({ createCanvas }) instead.\n *\n * @example\n *     let Canvas = require('canvas');\n *     let echarts = require('echarts');\n *     echarts.setCanvasCreator(function () {\n *         // Small size is enough.\n *         return new Canvas(32, 32);\n *     });\n */\n\nexport function setCanvasCreator(creator) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\n  }\n  setPlatformAPI({\n    createCanvas: creator\n  });\n}\n/**\n * The parameters and usage: see `geoSourceManager.registerMap`.\n * Compatible with previous `echarts.registerMap`.\n */\n\nexport function registerMap(mapName, geoJson, specialAreas) {\n  var registerMap = getImpl('registerMap');\n  registerMap && registerMap(mapName, geoJson, specialAreas);\n}\nexport function getMap(mapName) {\n  var getMap = getImpl('getMap');\n  return getMap && getMap(mapName);\n}\nexport var registerTransform = registerExternalTransform;\n/**\n * Globa dispatchAction to a specified chart instance.\n */\n// export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\n//     if (!payload || !payload.chartId) {\n//         // Must have chartId to find chart\n//         return;\n//     }\n//     const chart = instances[payload.chartId];\n//     if (chart) {\n//         chart.dispatchAction(payload, opt);\n//     }\n// }\n// Builtin global visual\n\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault); // Default actions\n\nregisterAction({\n  type: HIGHLIGHT_ACTION_TYPE,\n  event: HIGHLIGHT_ACTION_TYPE,\n  update: HIGHLIGHT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: DOWNPLAY_ACTION_TYPE,\n  event: DOWNPLAY_ACTION_TYPE,\n  update: DOWNPLAY_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: SELECT_ACTION_TYPE,\n  event: SELECT_ACTION_TYPE,\n  update: SELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: UNSELECT_ACTION_TYPE,\n  event: UNSELECT_ACTION_TYPE,\n  update: UNSELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: TOGGLE_SELECT_ACTION_TYPE,\n  event: TOGGLE_SELECT_ACTION_TYPE,\n  update: TOGGLE_SELECT_ACTION_TYPE\n}, noop); // Default theme\n\nregisterTheme('light', lightTheme);\nregisterTheme('dark', darkTheme); // For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\n\nexport var dataTool = {};","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { error } from '../util/log.js'; // Implementation of exported APIs. For example registerMap, getMap.\n// The implementations will be registered when installing the component.\n// Avoid these code being bundled to the core module.\n\nvar implsStore = {}; // TODO Type\n\nexport function registerImpl(name, impl) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (implsStore[name]) {\n      error(\"Already has an implementation of \" + name + \".\");\n    }\n  }\n  implsStore[name] = impl;\n}\nexport function getImpl(name) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!implsStore[name]) {\n      error(\"Implementation of \" + name + \" doesn't exists.\");\n    }\n  }\n  return implsStore[name];\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Model from '../model/Model.js';\nimport env from 'zrender/lib/core/env.js'; // default import ZH and EN lang\n\nimport langEN from '../i18n/langEN.js';\nimport langZH from '../i18n/langZH.js';\nimport { isString, clone, merge } from 'zrender/lib/core/util.js';\nvar LOCALE_ZH = 'ZH';\nvar LOCALE_EN = 'EN';\nvar DEFAULT_LOCALE = LOCALE_EN;\nvar localeStorage = {};\nvar localeModels = {};\nexport var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : function () {\n  var langStr = ( /* eslint-disable-next-line */\n  document.documentElement.lang || navigator.language || navigator.browserLanguage).toUpperCase();\n  return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\n}();\nexport function registerLocale(locale, localeObj) {\n  locale = locale.toUpperCase();\n  localeModels[locale] = new Model(localeObj);\n  localeStorage[locale] = localeObj;\n} // export function getLocale(locale: string) {\n//     return localeStorage[locale];\n// }\n\nexport function createLocaleObject(locale) {\n  if (isString(locale)) {\n    var localeObj = localeStorage[locale.toUpperCase()] || {};\n    if (locale === LOCALE_ZH || locale === LOCALE_EN) {\n      return clone(localeObj);\n    } else {\n      return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\n    }\n  } else {\n    return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\n  }\n}\nexport function getLocaleModel(lang) {\n  return localeModels[lang];\n}\nexport function getDefaultLocaleModel() {\n  return localeModels[DEFAULT_LOCALE];\n} // Default locale\n\nregisterLocale(LOCALE_EN, langEN);\nregisterLocale(LOCALE_ZH, langZH);","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, isArray } from 'zrender/lib/core/util.js';\n;\n/**\n * @param {Object} define\n * @return See the return of `createTask`.\n */\n\nexport function createTask(define) {\n  return new Task(define);\n}\nvar Task = /** @class */\nfunction () {\n  function Task(define) {\n    define = define || {};\n    this._reset = define.reset;\n    this._plan = define.plan;\n    this._count = define.count;\n    this._onDirty = define.onDirty;\n    this._dirty = true;\n  }\n  /**\n   * @param step Specified step.\n   * @param skip Skip customer perform call.\n   * @param modBy Sampling window size.\n   * @param modDataCount Sampling count.\n   * @return whether unfinished.\n   */\n\n  Task.prototype.perform = function (performArgs) {\n    var upTask = this._upstream;\n    var skip = performArgs && performArgs.skip; // TODO some refactor.\n    // Pull data. Must pull data each time, because context.data\n    // may be updated by Series.setData.\n\n    if (this._dirty && upTask) {\n      var context = this.context;\n      context.data = context.outputData = upTask.context.outputData;\n    }\n    if (this.__pipeline) {\n      this.__pipeline.currentTask = this;\n    }\n    var planResult;\n    if (this._plan && !skip) {\n      planResult = this._plan(this.context);\n    } // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n    // elements uniformed distributed when progress, especially when moving or zooming.\n\n    var lastModBy = normalizeModBy(this._modBy);\n    var lastModDataCount = this._modDataCount || 0;\n    var modBy = normalizeModBy(performArgs && performArgs.modBy);\n    var modDataCount = performArgs && performArgs.modDataCount || 0;\n    if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n      planResult = 'reset';\n    }\n    function normalizeModBy(val) {\n      !(val >= 1) && (val = 1); // jshint ignore:line\n\n      return val;\n    }\n    var forceFirstProgress;\n    if (this._dirty || planResult === 'reset') {\n      this._dirty = false;\n      forceFirstProgress = this._doReset(skip);\n    }\n    this._modBy = modBy;\n    this._modDataCount = modDataCount;\n    var step = performArgs && performArgs.step;\n    if (upTask) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(upTask._outputDueEnd != null);\n      }\n      this._dueEnd = upTask._outputDueEnd;\n    } // DataTask or overallTask\n    else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!this._progress || this._count);\n      }\n      this._dueEnd = this._count ? this._count(this.context) : Infinity;\n    } // Note: Stubs, that its host overall task let it has progress, has progress.\n    // If no progress, pass index from upstream to downstream each time plan called.\n\n    if (this._progress) {\n      var start = this._dueIndex;\n      var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n      if (!skip && (forceFirstProgress || start < end)) {\n        var progress = this._progress;\n        if (isArray(progress)) {\n          for (var i = 0; i < progress.length; i++) {\n            this._doProgress(progress[i], start, end, modBy, modDataCount);\n          }\n        } else {\n          this._doProgress(progress, start, end, modBy, modDataCount);\n        }\n      }\n      this._dueIndex = end; // If no `outputDueEnd`, assume that output data and\n      // input data is the same, so use `dueIndex` as `outputDueEnd`.\n\n      var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n      if (process.env.NODE_ENV !== 'production') {\n        // ??? Can not rollback.\n        assert(outputDueEnd >= this._outputDueEnd);\n      }\n      this._outputDueEnd = outputDueEnd;\n    } else {\n      // (1) Some overall task has no progress.\n      // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n      // This should always be performed so it can be passed to downstream.\n      this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n    }\n    return this.unfinished();\n  };\n  Task.prototype.dirty = function () {\n    this._dirty = true;\n    this._onDirty && this._onDirty(this.context);\n  };\n  Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\n    iterator.reset(start, end, modBy, modDataCount);\n    this._callingProgress = progress;\n    this._callingProgress({\n      start: start,\n      end: end,\n      count: end - start,\n      next: iterator.next\n    }, this.context);\n  };\n  Task.prototype._doReset = function (skip) {\n    this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\n    this._settedOutputEnd = null;\n    var progress;\n    var forceFirstProgress;\n    if (!skip && this._reset) {\n      progress = this._reset(this.context);\n      if (progress && progress.progress) {\n        forceFirstProgress = progress.forceFirstProgress;\n        progress = progress.progress;\n      } // To simplify no progress checking, array must has item.\n\n      if (isArray(progress) && !progress.length) {\n        progress = null;\n      }\n    }\n    this._progress = progress;\n    this._modBy = this._modDataCount = null;\n    var downstream = this._downstream;\n    downstream && downstream.dirty();\n    return forceFirstProgress;\n  };\n  Task.prototype.unfinished = function () {\n    return this._progress && this._dueIndex < this._dueEnd;\n  };\n  /**\n   * @param downTask The downstream task.\n   * @return The downstream task.\n   */\n\n  Task.prototype.pipe = function (downTask) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(downTask && !downTask._disposed && downTask !== this);\n    } // If already downstream, do not dirty downTask.\n\n    if (this._downstream !== downTask || this._dirty) {\n      this._downstream = downTask;\n      downTask._upstream = this;\n      downTask.dirty();\n    }\n  };\n  Task.prototype.dispose = function () {\n    if (this._disposed) {\n      return;\n    }\n    this._upstream && (this._upstream._downstream = null);\n    this._downstream && (this._downstream._upstream = null);\n    this._dirty = false;\n    this._disposed = true;\n  };\n  Task.prototype.getUpstream = function () {\n    return this._upstream;\n  };\n  Task.prototype.getDownstream = function () {\n    return this._downstream;\n  };\n  Task.prototype.setOutputEnd = function (end) {\n    // This only happens in dataTask, dataZoom, map, currently.\n    // where dataZoom do not set end each time, but only set\n    // when reset. So we should record the set end, in case\n    // that the stub of dataZoom perform again and earse the\n    // set end by upstream.\n    this._outputDueEnd = this._settedOutputEnd = end;\n  };\n  return Task;\n}();\nexport { Task };\nvar iterator = function () {\n  var end;\n  var current;\n  var modBy;\n  var modDataCount;\n  var winCount;\n  var it = {\n    reset: function reset(s, e, sStep, sCount) {\n      current = s;\n      end = e;\n      modBy = sStep;\n      modDataCount = sCount;\n      winCount = Math.ceil(modDataCount / modBy);\n      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n    }\n  };\n  return it;\n  function sequentialNext() {\n    return current < end ? current++ : null;\n  }\n  function modNext() {\n    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n    var result = current >= end ? null : dataIndex < modDataCount ? dataIndex // If modDataCount is smaller than data.count() (consider `appendData` case),\n    // Use normal linear rendering mode.\n    : current;\n    current++;\n    return result;\n  }\n}(); // -----------------------------------------------------------------------------\n// For stream debug (Should be commented out after used!)\n// @usage: printTask(this, 'begin');\n// @usage: printTask(this, null, {someExtraProp});\n// @usage: Use `__idxInPipeline` as conditional breakpiont.\n//\n// window.printTask = function (task: any, prefix: string, extra: { [key: string]: unknown }): void {\n//     window.ecTaskUID == null && (window.ecTaskUID = 0);\n//     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n//     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n//     let props = [];\n//     if (task.__pipeline) {\n//         let val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n//         props.push({text: '__idxInPipeline/total', value: val});\n//     } else {\n//         let stubCount = 0;\n//         task.agentStubMap.each(() => stubCount++);\n//         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n//     }\n//     props.push({text: 'uid', value: task.uidDebug});\n//     if (task.__pipeline) {\n//         props.push({text: 'pipelineId', value: task.__pipeline.id});\n//         task.agent && props.push(\n//             {text: 'stubFor', value: task.agent.uidDebug}\n//         );\n//     }\n//     props.push(\n//         {text: 'dirty', value: task._dirty},\n//         {text: 'dueIndex', value: task._dueIndex},\n//         {text: 'dueEnd', value: task._dueEnd},\n//         {text: 'outputDueEnd', value: task._outputDueEnd}\n//     );\n//     if (extra) {\n//         Object.keys(extra).forEach(key => {\n//             props.push({text: key, value: extra[key]});\n//         });\n//     }\n//     let args = ['color: blue'];\n//     let msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n//         args.push('color: green', 'color: red'),\n//         `${item.text}: %c${item.value}`\n//     )).join('%c, ');\n//     console.log.apply(console, [msg].concat(args));\n//     // console.log(this);\n// };\n// window.printPipeline = function (task: any, prefix: string) {\n//     const pipeline = task.__pipeline;\n//     let currTask = pipeline.head;\n//     while (currTask) {\n//         window.printTask(currTask, prefix);\n//         currTask = currTask._downstream;\n//     }\n// };\n// window.showChain = function (chainHeadTask) {\n//     var chain = [];\n//     var task = chainHeadTask;\n//     while (task) {\n//         chain.push({\n//             task: task,\n//             up: task._upstream,\n//             down: task._downstream,\n//             idxInPipeline: task.__idxInPipeline\n//         });\n//         task = task._downstream;\n//     }\n//     return chain;\n// };\n// window.findTaskInChain = function (task, chainHeadTask) {\n//     let chain = window.showChain(chainHeadTask);\n//     let result = [];\n//     for (let i = 0; i < chain.length; i++) {\n//         let chainItem = chain[i];\n//         if (chainItem.task === task) {\n//             result.push(i);\n//         }\n//     }\n//     return result;\n// };\n// window.printChainAEachInChainB = function (chainHeadTaskA, chainHeadTaskB) {\n//     let chainA = window.showChain(chainHeadTaskA);\n//     for (let i = 0; i < chainA.length; i++) {\n//         console.log('chainAIdx:', i, 'inChainB:', window.findTaskInChain(chainA[i].task, chainHeadTaskB));\n//     }\n// };"],"names":["availableMethods","ExtensionAPI","ecInstance","methodName","this","Scheduler","api","dataProcessorHandlers","visualHandlers","_stageTaskMap","createHashMap","_dataProcessorHandlers","slice","_visualHandlers","_allHandlers","concat","prototype","restoreData","ecModel","payload","each","taskRecord","overallTask","dirty","getPerformArgs","task","isBlock","__pipeline","pipeline","_pipelineMap","get","id","pCtx","context","incremental","progressiveEnabled","progressiveRender","__idxInPipeline","blockIndex","step","modDataCount","modBy","Math","ceil","getPipeline","pipelineId","updateStreamModes","seriesModel","view","uid","data","getData","dataLen","count","incrementalPrepareRender","threshold","large","pipelineContext","restorePipelines","scheduler","pipelineMap","eachSeries","progressive","getProgressive","set","head","tail","getProgressiveThreshold","preventIncremental","round","_pipe","dataTask","prepareStageTasks","stageTaskMap","getModel","handler","record","errMsg","assert","reset","overallReset","_createSeriesStageTask","_createOverallStageTask","prepareView","model","renderTask","__block","performDataProcessorTasks","_performStageTasks","block","performVisualTasks","opt","stageHandlers","unfinished","needSetDirty","setDirty","dirtyMap","stageHandler","idx","visualType","stageHandlerRecord","seriesTaskMap","overallNeedDirty_1","agentStubMap","stub","updatePayload","performArgs_1","perform","performArgs","skip","performRawSeries","isSeriesFiltered","performSeriesTasks","plan","getUpstream","oldSeriesTaskMap","newSeriesTaskMap","seriesType","getTargetSeries","create","seriesTaskPlan","seriesTaskReset","seriesTaskCount","useClearVisual","isVisual","isLayout","createOnAllSeries","eachRawSeries","eachRawSeriesByType","overallTaskReset","oldAgentStubMap","newAgentStubMap","overallProgress","shouldOverallTaskDirty","createStub","stubReset","onDirty","stubOnDirty","agent","getSeries","pipe","wrapStageHandler","isFunction","detectSeriseType","stubProgress","getDownstream","clearAllVisual","resetDefines","length","map","v","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","params","resetDefine","dataEach","i","start","end","progress","legacyFunc","ecModelMock","apiMock","e","mockMethods","target","Clz","name_1","noop","Global","eachSeriesByType","type","eachComponent","cond","mainType","subType","lifecycle","Eventful","version","dependencies","zrender","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_BRUSH","PRIORITY_VISUAL_ARIA","PRIORITY_VISUAL_DECAL","PRIORITY","PROCESSOR","FILTER","SERIES_FILTER","STATISTIC","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","CHART_ITEM","ARIA","DECAL","IN_MAIN_PROCESS_KEY","PENDING_UPDATE","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","method","args","_i","arguments","isDisposed","toLowercaseNameAndCallEventful","disposedWarning","createRegisterEventWithLowercaseMessageCenter","host","toLowerCase","apply","prepare","updateDirectly","updateMethods","doConvertPixel","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","render","renderComponents","renderSeries","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","MessageCenter","_super","messageCenterProto","on","off","ECharts","dom","theme","opts","_this","call","ECEventProcessor","_chartsViews","_chartsMap","_componentsViews","_componentsMap","_pendingActions","isString","themeStorage","_dom","defaultRenderer","defaultCoarsePointer","defaultUseDirtyRect","zr","_zr","init","renderer","devicePixelRatio","width","height","ssr","useDirtyRect","retrieve2","useCoarsePointer","pointerSize","_ssr","_throttledZrFlush","throttle","bind","flush","clone","backwardCompat","_theme","_locale","locale","_coordSysMgr","CoordinateSystem","_api","prioritySortFunc","a","b","__prio","timsort","visualFuncs","dataProcessorFuncs","_scheduler","_messageCenter","_initEvents","resize","animation","_onframe","setAsPrimitive","_disposed","silent","update","updateParams","remainTime","_model","startTime","Date","getDom","getId","getZr","isSSR","setOption","option","notMerge","lazyUpdate","replaceMerge","transitionOpt","isObject","transition","optionManager","OptionManager","optionPreprocessorFuncs","seriesTransition","optionChanged","wakeUp","setTheme","getOption","getWidth","getHeight","getDevicePixelRatio","painter","dpr","env","window","getRenderedCanvas","renderToCanvas","backgroundColor","pixelRatio","renderToSVGString","renderToString","useViewBox","getSvgDataURL","list","storage","getDisplayList","el","stopAnimation","toDataURL","getDataURL","excludeComponents","excludesComponentViews","self","componentType","component","__viewId","group","ignore","push","url","getType","getConnectedDataURL","isSvg","groupId","mathMin","min","mathMax","max","MAX_NUMBER","Infinity","connectedGroups","left_1","top_1","right_1","bottom_1","canvasList_1","dpr_1","instances","chart","canvas","getSvgDom","innerHTML","boundingRect","getBoundingClientRect","left","top","right","bottom","targetCanvas","platform","zr_1","content_1","item","x","y","getSvgRoot","connectedBackgroundColor","setBackgroundColor","refreshImmediately","add","shape","style","fill","img","image","convertToPixel","finder","value","convertFromPixel","containPixel","result","findResult","models","key","indexOf","coordSys","coordinateSystem","containPoint","getVisual","parsedFinder","defaultMainType","dataIndexInside","hasOwnProperty","indexOfRawIndex","dataIndex","getViewOfComponentModel","componentModel","getViewOfSeriesModel","MOUSE_EVENT_NAMES","eveName","isGlobalOut","parent","ecData","dataModel","getSeriesByIndex","seriesIndex","getDataParams","dataType","eventData","extend","componentIndex","getComponent","event","_$eventProcessor","eventInfo","targetEl","packedEvent","trigger","zrEventfulCallAtLast","eventActionMap","actionType","eventType","clear","series","dispose","DOM_ATTRIBUTE_KEY","_loadingFX","needPrepare","resetOption","duration","showLoading","name","cfg","hideLoading","loadingEffects","remove","makeActionFromEvent","eventObj","dispatchAction","actions","updateLabelLayout","updatedSeries","appendData","internalField","clearColorPalette","allocateZlevels","componentZLevels","seriesZLevels","hasSeperateZLevel","zlevel","z","zlevelKey","getZLevelKey","lastSeriesZLevel_1","lastSeriesKey_1","zLevels","setZLevel","applyElementStates","newStates","oldStates","currentStates","stateName","selected","states","select","hoverState","emphasis","blur","useStates","updateHoverLayerStatus","ecIns","elCount","traverse","isGroup","preventUsingHoverLayer","chartView","__alive","eachRendered","hoverLayer","updateBlend","blendMode","blend","updateZ","preventAutoZ","doUpdateZ","maxZ2","label","getTextContent","labelLine","getTextGuideLine","children","childrenRef","z2","isFinite","textGuideLineConfig","showAbove","clearStates","textContent","textGuide","stateTransition","hasState","prevStates","updateStates","stateAnimationModel","enableAnimation","isAnimationEnabled","delay","easing","__dirty","isComponent","viewList","viewMap","doPrepare","requireNewView","__requireNewView","viewId","classType","Clazz","Component","main","sub","Chart","__id","__model","__ecComponentInfo","index","splice","setUpdatePayload","query","condition","excludeSeriesIdMap","excludeSeriesId","modelId","isExcluded","Series","notBlur","_a","focusSelf","dispatchers","dispatcher","callView","prepareAndUpdate","newOption","coordSysMgr","darkMode","setDarkMode","updateTransform","componentDirtyList","componentView","seriesDirtyMap","updateView","updateVisual","updateLayout","coordSysList","getCoordinateSystems","chartsMap","payloadType","escapeConnect","actionWrap","actionInfo","cptTypeTmp","split","updateMethod","pop","cptType","payloads","batched","batch","defaults","eventObjBatch","isSelectChange","isHighDown","batchItem","action","queryOptionMap","mainTypeSpecified","componentMainType","keys","messageCenter","newObj","isFromClick","fromAction","fromActionPayload","pendingActions","shift","isFinished","dirtyList","class_1","getComponentByElement","modelInfo","enterEmphasis","highlightDigit","leaveEmphasis","enterBlur","leaveBlur","enterSelect","leaveSelect","updateConnectedChartsStatus","charts","status","otherChart","action_1","otherCharts_1","echartsProto","one","eventName","cb","ctx","wrapped","args2","idBase","groupIdBase","isClient","existInstance","getInstanceByDom","connect","isArray","disConnect","disconnect","getInstanceById","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerPostInit","postInitFunc","registerUpdateLifecycle","registerPostUpdate","postUpdateFunc","registerAction","test","registerCoordinateSystem","coordSysCreator","getCoordinateSystemDimensions","getDimensionsInfo","dimensions","registerLayout","layoutTask","registerVisual","visualTask","registeredTasks","targetList","fn","defaultPriority","__raw","registerLoading","loadingFx","setCanvasCreator","creator","createCanvas","registerMap","mapName","geoJson","specialAreas","getMap","registerTransform","decal","dataStack","light","dark","dataTool","implsStore","registerImpl","impl","getImpl","LOCALE_ZH","LOCALE_EN","DEFAULT_LOCALE","localeStorage","localeModels","SYSTEM_LANG","langStr","document","documentElement","lang","navigator","language","browserLanguage","toUpperCase","registerLocale","localeObj","createLocaleObject","merge","getLocaleModel","getDefaultLocaleModel","createTask","define","Task","_reset","_plan","_count","_onDirty","_dirty","planResult","upTask","_upstream","outputData","currentTask","forceFirstProgress","lastModBy","normalizeModBy","_modBy","lastModDataCount","_modDataCount","val","_doReset","_dueEnd","_outputDueEnd","_progress","_dueIndex","_doProgress","outputDueEnd","_settedOutputEnd","iterator","_callingProgress","next","downstream","_downstream","downTask","setOutputEnd","current","winCount","it","s","sStep","sCount","modNext","sequentialNext"],"sourceRoot":""}
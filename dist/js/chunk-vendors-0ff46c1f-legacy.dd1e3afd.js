"use strict";(self["webpackChunkdataboard"]=self["webpackChunkdataboard"]||[]).push([[895],{57124:function(e,t,o){o.d(t,{N:function(){return f}});var r=o(19097),i=o(39549);o(57658);function n(e,t,o){var r,i=[e],n=[];while(r=i.pop())if(n.push(r),r.isExpand){var a=r.children;if(a.length)for(var l=0;l<a.length;l++)i.push(a[l])}while(r=n.pop())t(r,o)}function a(e,t){var o,r=[e];while(o=r.pop())if(t(o),o.isExpand){var i=o.children;if(i.length)for(var n=i.length-1;n>=0;n--)r.push(i[n])}}var l=o(12438);function d(e,t){e.eachSeriesByType("tree",(function(e){s(e,t)}))}function s(e,t){var o=(0,l.pn)(e,t);e.layoutInfo=o;var r=e.get("layout"),i=0,d=0,s=null;"radial"===r?(i=2*Math.PI,d=Math.min(o.height,o.width)/2,s=(0,l.nK)((function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth}))):(i=o.width,d=o.height,s=(0,l.nK)());var h=e.getData().tree.root,u=h.children[0];if(u){(0,l.S1)(h),n(u,l.Kq,s),h.hierNode.modifier=-u.hierNode.prelim,a(u,l.Tv);var p=u,c=u,f=u;a(u,(function(e){var t=e.getLayout().x;t<p.getLayout().x&&(p=e),t>c.getLayout().x&&(c=e),e.depth>f.depth&&(f=e)}));var g=p===c?1:s(p,c)/2,v=g-p.getLayout().x,y=0,m=0,x=0,w=0;if("radial"===r)y=i/(c.getLayout().x+g+v),m=d/(f.depth-1||1),a(u,(function(e){x=(e.getLayout().x+v)*y,w=(e.depth-1)*m;var t=(0,l.FC)(x,w);e.setLayout({x:t.x,y:t.y,rawX:x,rawY:w},!0)}));else{var N=e.getOrient();"RL"===N||"LR"===N?(m=d/(c.getLayout().x+g+v),y=i/(f.depth-1||1),a(u,(function(e){w=(e.getLayout().x+v)*m,x="LR"===N?(e.depth-1)*y:i-(e.depth-1)*y,e.setLayout({x:x,y:w},!0)}))):"TB"!==N&&"BT"!==N||(y=i/(c.getLayout().x+g+v),m=d/(f.depth-1||1),a(u,(function(e){x=(e.getLayout().x+v)*y,w="TB"===N?(e.depth-1)*m:d-(e.depth-1)*m,e.setLayout({x:x,y:w},!0)})))}}}var h=o(33051);function u(e){e.eachSeriesByType("tree",(function(e){var t=e.getData(),o=t.tree;o.eachNode((function(e){var o=e.getModel(),r=o.getModel("itemStyle").getItemStyle(),i=t.ensureUniqueItemVisual(e.dataIndex,"style");(0,h.extend)(i,r)}))}))}var p=o(88373);function c(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var o=e.dataIndex,r=t.getData().tree,i=r.getNodeByDataIndex(o);i.isExpand=!i.isExpand}))})),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(e,t,o){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var r=t.coordinateSystem,i=(0,p.A)(r,e,void 0,o);t.setCenter&&t.setCenter(i.center),t.setZoom&&t.setZoom(i.zoom)}))}))}function f(e){e.registerChartView(r.Z),e.registerSeriesModel(i.Z),e.registerLayout(d),e.registerVisual(u),c(e)}},12438:function(e,t,o){o.d(t,{FC:function(){return d},Kq:function(){return n},S1:function(){return i},Tv:function(){return a},nK:function(){return l},pn:function(){return s}});o(57658);var r=o(14925);function i(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};var o,r,i=[t];while(o=i.pop())if(r=o.children,o.isExpand&&r.length)for(var n=r.length,a=n-1;a>=0;a--){var l=r[a];l.hierNode={defaultAncestor:null,ancestor:l,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},i.push(l)}}function n(e,t){var o=e.isExpand?e.children:[],r=e.parentNode.children,i=e.hierNode.i?r[e.hierNode.i-1]:null;if(o.length){h(e);var n=(o[0].hierNode.prelim+o[o.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-n):e.hierNode.prelim=n}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=u(e,i,e.parentNode.hierNode.defaultAncestor||r[0],t)}function a(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function l(e){return arguments.length?e:v}function d(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function s(e,t){return r.ME(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function h(e){var t=e.children,o=t.length,r=0,i=0;while(--o>=0){var n=t[o];n.hierNode.prelim+=r,n.hierNode.modifier+=r,i+=n.hierNode.change,r+=n.hierNode.shift+i}}function u(e,t,o,r){if(t){var i=e,n=e,a=n.parentNode.children[0],l=t,d=i.hierNode.modifier,s=n.hierNode.modifier,h=a.hierNode.modifier,u=l.hierNode.modifier;while(l=p(l),n=c(n),l&&n){i=p(i),a=c(a),i.hierNode.ancestor=e;var v=l.hierNode.prelim+u-n.hierNode.prelim-s+r(l,n);v>0&&(g(f(l,e,o),e,v),s+=v,d+=v),u+=l.hierNode.modifier,s+=n.hierNode.modifier,d+=i.hierNode.modifier,h+=a.hierNode.modifier}l&&!p(i)&&(i.hierNode.thread=l,i.hierNode.modifier+=u-d),n&&!c(a)&&(a.hierNode.thread=n,a.hierNode.modifier+=s-h,o=e)}return o}function p(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function c(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function f(e,t,o){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:o}function g(e,t,o){var r=o/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=o,t.hierNode.modifier+=o,t.hierNode.prelim+=o,e.hierNode.change+=r}function v(e,t){return e.parentNode===t.parentNode?1:2}},80736:function(e,t,o){o.d(t,{N:function(){return Ge}});var r=o(56062),i=o(33051),n=["treemapZoomToNode","treemapRender","treemapMove"];function a(e){for(var t=0;t<n.length;t++)e.registerAction({type:n[t],update:"updateView"},i.noop);e.registerAction({type:"treemapRootToNode",update:"updateView"},(function(e,t){function o(t,o){var i=["treemapZoomToNode","treemapRootToNode"],n=r.d1(e,i,t);if(n){var a=t.getViewRoot();a&&(e.direction=r.Gx(a,n.node)?"rollUp":"drillDown"),t.resetViewRoot(n.node)}}t.eachComponent({mainType:"series",subType:"treemap",query:e},o)}))}o(68309),o(47042);var l=o(57490),d=o(9863),s=o(76040),h=o(34925),u=o(14035),p=o(35245),c=o(66957),f=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o.preventUsingHoverLayer=!0,o}return(0,l.ZT)(t,e),t.prototype.getInitialData=function(e,t){var o={name:e.name,children:e.data};g(o);var r=e.levels||[],n=this.designatedVisualItemStyle={},a=new h.Z({itemStyle:n},this,t);r=e.levels=v(r,t);var l=i.map(r||[],(function(e){return new h.Z(e,a,t)}),this),d=s.Z.createTree(o,this,u);function u(e){e.wrapMethod("getItemModel",(function(e,t){var o=d.getNodeByDataIndex(t),r=o?l[o.depth]:null;return e.parentModel=r||a,e}))}return d.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,o){var r=this.getData(),i=this.getRawValue(e),n=r.getName(e);return(0,p.TX)("nameValue",{name:n,value:i})},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return o.treeAncestors=(0,r.n3)(i,this),o.treePathInfo=o.treeAncestors,o},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},i.extend(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=i.createHashMap(),this._idIndexMapCount=0);var o=t.get(e);return null==o&&t.set(e,o=this._idIndexMapCount++),o},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){(0,c.Z)(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"â–¶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(d.Z);function g(e){var t=0;i.each(e.children,(function(e){g(e);var o=e.value;i.isArray(o)&&(o=o[0]),t+=o}));var o=e.value;i.isArray(o)&&(o=o[0]),(null==o||isNaN(o))&&(o=t),o<0&&(o=0),i.isArray(e.value)?e.value[0]=o:e.value=o}function v(e,t){var o=(0,u.kF)(t.get("color")),r=(0,u.kF)(t.get(["aria","decal","decals"]));if(o){var n,a;e=e||[],i.each(e,(function(e){var t=new h.Z(e),o=t.get("color"),r=t.get("decal");(t.get(["itemStyle","color"])||o&&"none"!==o)&&(n=!0),(t.get(["itemStyle","decal"])||r&&"none"!==r)&&(a=!0)}));var l=e[0]||(e[0]={});return n||(l.color=o.slice()),!a&&r&&(l.decal=r.slice()),e}}var y=f,m=(o(43290),o(57658),o(38154)),x=o(25293),w=o(70915),N=o(97193),b=o(49349),M=(o(40561),o(95094)),I=o(96498),T=o(14925),L=o(55589),S=8,_=8,R=5,C=function(){function e(e){this.group=new m.Z,e.add(this.group)}return e.prototype.render=function(e,t,o,r){var i=e.getModel("breadcrumb"),n=this.group;if(n.removeAll(),i.get("show")&&o){var a=i.getModel("itemStyle"),l=i.getModel("emphasis"),d=a.getModel("textStyle"),s=l.getModel(["itemStyle","textStyle"]),h={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,h,d),this._renderContent(e,h,a,l,d,s,r),T.p$(n,h.pos,h.box)}},e.prototype._prepare=function(e,t,o){for(var r=e;r;r=r.parentNode){var i=(0,u.U5)(r.getModel().get("name"),""),n=o.getTextRect(i),a=Math.max(n.width+2*S,t.emptyItemWidth);t.totalWidth+=a+_,t.renderList.push({node:r,text:i,width:a})}},e.prototype._renderContent=function(e,t,o,r,n,a,l){for(var d=0,s=t.emptyItemWidth,h=e.get(["breadcrumb","height"]),u=T.lq(t.pos,t.box),p=t.totalWidth,c=t.renderList,f=r.getModel("itemStyle").getItemStyle(),g=c.length-1;g>=0;g--){var v=c[g],y=v.node,m=v.width,x=v.text;p>u.width&&(p-=m-s,m=s,x=null);var w=new M.Z({shape:{points:A(d,0,m,h,g===c.length-1,0===g)},style:(0,i.defaults)(o.getItemStyle(),{lineJoin:"bevel"}),textContent:new I.ZP({style:(0,L.Lr)(n,{text:x})}),textConfig:{position:"inside"},z2:1e4*N.zr,onclick:(0,i.curry)(l,y)});w.disableLabelAnimation=!0,w.getTextContent().ensureState("emphasis").style=(0,L.Lr)(a,{text:x}),w.ensureState("emphasis").style=f,(0,N.k5)(w,r.get("focus"),r.get("blurScope"),r.get("disabled")),this.group.add(w),V(w,e,y),d+=m+_}},e.prototype.remove=function(){this.group.removeAll()},e}();function A(e,t,o,r,i,n){var a=[[i?e:e-R,t],[e+o,t],[e+o,t+r],[i?e:e-R,t+r]];return!n&&a.splice(2,0,[e+o+R,t+r/2]),!i&&a.push([e,t+r/2]),a}function V(e,t,o){(0,w.A)(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:o&&o.dataIndex,name:o&&o.name},treePathInfo:o&&(0,r.n3)(o,t)}}var D=C,Z=o(72756),W=o(60479),k=o(32892),E=o(98157),G=o(16531),z=o(17296),H=o(7719),B=o(28021),q=m.Z,P=x.Z,F=3,Y="label",U="upperLabel",X=10*N.zr,O=2*N.zr,K=3*N.zr,j=(0,G.Z)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),J=function(e){var t=j(e);return t.stroke=t.fill=t.lineWidth=null,t},$=(0,u.Yf)(),Q=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._state="ready",o._storage=ee(),o}return(0,l.ZT)(t,e),t.prototype.render=function(e,t,o,n){var a=t.findComponents({mainType:"series",subType:"treemap",query:n});if(!((0,i.indexOf)(a,e)<0)){this.seriesModel=e,this.api=o,this.ecModel=t;var l=["treemapZoomToNode","treemapRootToNode"],d=r.d1(n,l,e),s=n&&n.type,h=e.layoutInfo,u=!this._oldTree,p=this._storage,c="treemapRootToNode"===s&&d&&p?{rootNodeGroup:p.nodeGroup[d.node.getRawIndex()],direction:n.direction}:null,f=this._giveContainerGroup(h),g=e.get("animation"),v=this._doRender(f,e,c);!g||u||s&&"treemapZoomToNode"!==s&&"treemapRootToNode"!==s?v.renderFinally():this._doAnimation(f,v,e,c),this._resetController(o),this._renderBreadcrumb(e,o,d)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new q,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,o){var r=t.getData().tree,n=this._oldTree,a=ee(),l=ee(),d=this._storage,s=[];function h(e,r,i,n){return te(t,l,d,o,a,s,e,r,i,n)}p(r.root?[r.root]:[],n&&n.root?[n.root]:[],e,r===n||!n,0);var u=c(d);return this._oldTree=r,this._storage=l,{lastsForAnimation:a,willDeleteEls:u,renderFinally:f};function p(e,t,o,r,n){function a(e){return e.getId()}function l(i,a){var l=null!=i?e[i]:null,d=null!=a?t[a]:null,s=h(l,d,o,n);s&&p(l&&l.viewChildren||[],d&&d.viewChildren||[],s,r,n+1)}r?(t=e,(0,i.each)(e,(function(e,t){!e.isRemoved()&&l(t,t)}))):new b.Z(t,e,a,a).add(l).update(l).remove((0,i.curry)(l,null)).execute()}function c(e){var t=ee();return e&&(0,i.each)(e,(function(e,o){var r=t[o];(0,i.each)(e,(function(e){e&&(r.push(e),$(e).willDelete=!0)}))})),t}function f(){(0,i.each)(u,(function(e){(0,i.each)(e,(function(e){e.parent&&e.parent.remove(e)}))})),(0,i.each)(s,(function(e){e.invisible=!0,e.dirty()}))}},t.prototype._doAnimation=function(e,t,o,r){var n=o.get("animationDurationUpdate"),a=o.get("animationEasing"),l=((0,i.isFunction)(n)?0:n)||0,d=((0,i.isFunction)(a)?null:a)||"cubicOut",s=E.o();(0,i.each)(t.willDeleteEls,(function(e,t){(0,i.each)(e,(function(e,o){if(!e.invisible){var i,n=e.parent,a=$(n);if(r&&"drillDown"===r.direction)i=n===r.rootNodeGroup?{shape:{x:0,y:0,width:a.nodeWidth,height:a.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var h=0,u=0;a.willDelete||(h=a.nodeWidth/2,u=a.nodeHeight/2),i="nodeGroup"===t?{x:h,y:u,style:{opacity:0}}:{shape:{x:h,y:u,width:0,height:0},style:{opacity:0}}}i&&s.add(e,i,l,0,d)}}))})),(0,i.each)(this._storage,(function(e,o){(0,i.each)(e,(function(e,r){var n=t.lastsForAnimation[o][r],a={};n&&(e instanceof m.Z?null!=n.oldX&&(a.x=e.x,a.y=e.y,e.x=n.oldX,e.y=n.oldY):(n.oldShape&&(a.shape=(0,i.extend)({},e.shape),e.setShape(n.oldShape)),n.fadein?(e.setStyle("opacity",0),a.style={opacity:1}):1!==e.style.opacity&&(a.style={opacity:1})),s.add(e,a,l,0,d))}))}),this),this._state="animating",s.finished((0,i.bind)((function(){this._state="ready",t.renderFinally()}),this)).start()},t.prototype._resetController=function(e){var t=this._controller;t||(t=this._controller=new Z.Z(e.getZr()),t.enable(this.seriesModel.get("roam")),t.on("pan",(0,i.bind)(this._onPan,this)),t.on("zoom",(0,i.bind)(this._onZoom,this)));var o=new W.Z(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,r){return o.contain(t,r)}))},t.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>F||Math.abs(e.dy)>F)){var t=this.seriesModel.getData().tree.root;if(!t)return;var o=t.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},t.prototype._onZoom=function(e){var t=e.originX,o=e.originY;if("animating"!==this._state){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;var n=new W.Z(i.x,i.y,i.width,i.height),a=this.seriesModel.layoutInfo;t-=a.x,o-=a.y;var l=k.create();k.translate(l,l,[-t,-o]),k.scale(l,l,[e.scale,e.scale]),k.translate(l,l,[t,o]),n.applyTransform(l),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x,y:n.y,width:n.width,height:n.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",(function(e){if("ready"===t._state){var o=t.seriesModel.get("nodeClick",!0);if(o){var r=t.findTarget(e.offsetX,e.offsetY);if(r){var i=r.node;if(i.getLayout().isLeafRoot)t._rootToNode(r);else if("zoomToNode"===o)t._zoomToNode(r);else if("link"===o){var n=i.hostTree.data.getItemModel(i.dataIndex),a=n.get("link",!0),l=n.get("target",!0)||"blank";a&&(0,B.MI)(a,l)}}}}}),this)},t.prototype._renderBreadcrumb=function(e,t,o){var i=this;o||(o=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2),o||(o={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new D(this.group))).render(e,t,o.node,(function(t){"animating"!==i._state&&(r.Gx(e.getViewRoot(),t)?i._rootToNode({node:t}):i._zoomToNode({node:t}))}))},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=ee(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var o,r=this.seriesModel.getViewRoot();return r.eachNode({attr:"viewChildren",order:"preorder"},(function(r){var i=this._storage.background[r.getRawIndex()];if(i){var n=i.transformCoordToLocal(e,t),a=i.shape;if(!(a.x<=n[0]&&n[0]<=a.x+a.width&&a.y<=n[1]&&n[1]<=a.y+a.height))return!1;o={node:r,offsetX:n[0],offsetY:n[1]}}}),this),o},t.type="treemap",t}(z.Z);function ee(){return{nodeGroup:[],background:[],content:[]}}function te(e,t,o,r,n,a,l,d,s,h){if(l){var p=l.getLayout(),c=e.getData(),f=l.getModel();if(c.setItemGraphicEl(l.dataIndex,null),p&&p.isInView){var g=p.width,v=p.height,y=p.borderWidth,x=p.invisible,b=l.getRawIndex(),M=d&&d.getRawIndex(),I=l.viewChildren,T=p.upperHeight,S=I&&I.length,_=f.getModel("itemStyle"),R=f.getModel(["emphasis","itemStyle"]),C=f.getModel(["blur","itemStyle"]),A=f.getModel(["select","itemStyle"]),V=_.get("borderRadius")||0,D=re("nodeGroup",q);if(D){if(s.add(D),D.x=p.x||0,D.y=p.y||0,D.markRedraw(),$(D).nodeWidth=g,$(D).nodeHeight=v,p.isAboveViewRoot)return D;var Z=re("background",P,h,O);Z&&F(D,Z,S&&p.upperLabelHeight);var W=f.getModel("emphasis"),k=W.get("focus"),E=W.get("blurScope"),G=W.get("disabled"),z="ancestor"===k?l.getAncestorsIndices():"descendant"===k?l.getDescendantIndices():k;if(S)(0,N.Av)(D)&&(0,N.Nj)(D,!1),Z&&((0,N.Nj)(Z,!G),c.setItemGraphicEl(l.dataIndex,Z),(0,N.Ib)(Z,z,E));else{var B=re("content",P,h,K);B&&X(D,B),Z.disableMorphing=!0,Z&&(0,N.Av)(Z)&&(0,N.Nj)(Z,!1),(0,N.Nj)(D,!G),c.setItemGraphicEl(l.dataIndex,D),(0,N.Ib)(D,z,E)}return D}}}function F(t,o,r){var i=(0,w.A)(o);if(i.dataIndex=l.dataIndex,i.seriesIndex=e.seriesIndex,o.setShape({x:0,y:0,width:g,height:v,r:V}),x)Q(o);else{o.invisible=!1;var n=l.getVisual("style"),a=n.stroke,d=J(_);d.fill=a;var s=j(R);s.fill=R.get("borderColor");var h=j(C);h.fill=C.get("borderColor");var u=j(A);if(u.fill=A.get("borderColor"),r){var p=g-2*y;ee(o,a,n.opacity,{x:y,y:0,width:p,height:T})}else o.removeTextContent();o.setStyle(d),o.ensureState("emphasis").style=s,o.ensureState("blur").style=h,o.ensureState("select").style=u,(0,N.MA)(o)}t.add(o)}function X(t,o){var r=(0,w.A)(o);r.dataIndex=l.dataIndex,r.seriesIndex=e.seriesIndex;var i=Math.max(g-2*y,0),n=Math.max(v-2*y,0);if(o.culling=!0,o.setShape({x:y,y:y,width:i,height:n,r:V}),x)Q(o);else{o.invisible=!1;var a=l.getVisual("style"),d=a.fill,s=J(_);s.fill=d,s.decal=a.decal;var h=j(R),u=j(C),p=j(A);ee(o,d,a.opacity,null),o.setStyle(s),o.ensureState("emphasis").style=h,o.ensureState("blur").style=u,o.ensureState("select").style=p,(0,N.MA)(o)}t.add(o)}function Q(e){!e.invisible&&a.push(e)}function ee(t,o,r,n){var a=f.getModel(n?U:Y),d=(0,u.U5)(f.get("name"),null),s=a.getShallow("show");(0,L.ni)(t,(0,L.k3)(f,n?U:Y),{defaultText:s?d:null,inheritColor:o,defaultOpacity:r,labelFetcher:e,labelDataIndex:l.dataIndex});var h=t.getTextContent();if(h){var c=h.style,g=(0,i.normalizeCssArray)(c.padding||0);n&&(t.setTextConfig({layoutRect:n}),h.disableLabelLayout=!0),h.beforeUpdate=function(){var e=Math.max((n?n.width:t.shape.width)-g[1]-g[3],0),o=Math.max((n?n.height:t.shape.height)-g[0]-g[2],0);c.width===e&&c.height===o||h.setStyle({width:e,height:o})},c.truncateMinChar=2,c.lineOverflow="truncate",te(c,n,p);var v=h.getState("emphasis");te(v?v.style:null,n,p)}}function te(t,o,r){var i=t?t.text:null;if(!o&&r.isLeafRoot&&null!=i){var n=e.get("drillDownIcon",!0);t.text=n?n+" "+i:i}}function re(e,r,i,a){var l=null!=M&&o[e][M],d=n[e];return l?(o[e][M]=null,ie(d,l)):x||(l=new r,l instanceof H.ZP&&(l.z2=oe(i,a)),ne(d,l)),t[e][b]=l}function ie(e,t){var o=e[b]={};t instanceof q?(o.oldX=t.x,o.oldY=t.y):o.oldShape=(0,i.extend)({},t.shape)}function ne(e,t){var o=e[b]={},i=l.parentNode,a=t instanceof m.Z;if(i&&(!r||"drillDown"===r.direction)){var d=0,s=0,h=n.background[i.getRawIndex()];!r&&h&&h.oldShape&&(d=h.oldShape.width,s=h.oldShape.height),a?(o.oldX=0,o.oldY=s):o.oldShape={x:d,y:s,width:0,height:0}}o.fadein=!a}}function oe(e,t){return e*X+t}var re=Q,ie=o(39994),ne=o(21092),ae="itemStyle",le=(0,u.Yf)(),de={seriesType:"treemap",reset:function(e){var t=e.getData().tree,o=t.root;o.isRemoved()||se(o,{},e.getViewRoot().getAncestors(),e)}};function se(e,t,o,r){var n=e.getModel(),a=e.getLayout(),l=e.hostTree.data;if(a&&!a.invisible&&a.isInView){var d,s=n.getModel(ae),h=he(s,t,r),u=l.ensureUniqueItemVisual(e.dataIndex,"style"),p=s.get("borderColor"),c=s.get("borderColorSaturation");null!=c&&(d=ue(h),p=pe(c,d)),u.stroke=p;var f=e.viewChildren;if(f&&f.length){var g=fe(e,n,a,s,h,f);(0,i.each)(f,(function(e,t){if(e.depth>=o.length||e===o[e.depth]){var i=ve(n,h,e,t,g,r);se(e,i,o,r)}}))}else d=ue(h),u.fill=d}}function he(e,t,o){var r=(0,i.extend)({},t),n=o.designatedVisualItemStyle;return(0,i.each)(["color","colorAlpha","colorSaturation"],(function(o){n[o]=t[o];var i=e.get(o);n[o]=null,null!=i&&(r[o]=i)})),r}function ue(e){var t=ce(e,"color");if(t){var o=ce(e,"colorAlpha"),r=ce(e,"colorSaturation");return r&&(t=(0,ne.modifyHSL)(t,null,null,r)),o&&(t=(0,ne.modifyAlpha)(t,o)),t}}function pe(e,t){return null!=t?(0,ne.modifyHSL)(t,null,null,e):null}function ce(e,t){var o=e[t];if(null!=o&&"none"!==o)return o}function fe(e,t,o,r,i,n){if(n&&n.length){var a=ge(t,"color")||null!=i.color&&"none"!==i.color&&(ge(t,"colorAlpha")||ge(t,"colorSaturation"));if(a){var l=t.get("visualMin"),d=t.get("visualMax"),s=o.dataExtent.slice();null!=l&&l<s[0]&&(s[0]=l),null!=d&&d>s[1]&&(s[1]=d);var h=t.get("colorMappingBy"),u={type:a.name,dataExtent:s,visual:a.range};"color"!==u.type||"index"!==h&&"id"!==h?u.mappingMethod="linear":(u.mappingMethod="category",u.loop=!0);var p=new ie.Z(u);return le(p).drColorMappingBy=h,p}}}function ge(e,t){var o=e.get(t);return(0,i.isArray)(o)&&o.length?{name:t,range:o}:null}function ve(e,t,o,r,n,a){var l=(0,i.extend)({},t);if(n){var d=n.type,s="color"===d&&le(n).drColorMappingBy,h="index"===s?r:"id"===s?a.mapIdToIndex(o.getId()):o.getValue(e.get("visualDimension"));l[d]=n.mapValueToVisual(h)}return l}o(2707);var ye=o(33122),me=Math.max,xe=Math.min,we=i.retrieve,Ne=i.each,be=["itemStyle","borderWidth"],Me=["itemStyle","gapWidth"],Ie=["upperLabel","show"],Te=["upperLabel","height"],Le={seriesType:"treemap",reset:function(e,t,o,n){var a=o.getWidth(),l=o.getHeight(),d=e.option,s=T.ME(e.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()}),h=d.size||[],u=(0,ye.GM)(we(s.width,h[0]),a),p=(0,ye.GM)(we(s.height,h[1]),l),c=n&&n.type,f=["treemapZoomToNode","treemapRootToNode"],g=r.d1(n,f,e),v="treemapRender"===c||"treemapMove"===c?n.rootRect:null,y=e.getViewRoot(),m=r.zN(y);if("treemapMove"!==c){var x="treemapZoomToNode"===c?Ze(e,g,y,u,p):v?[v.width,v.height]:[u,p],w=d.sort;w&&"asc"!==w&&"desc"!==w&&(w="desc");var N={squareRatio:d.squareRatio,sort:w,leafDepth:d.leafDepth};y.hostTree.clearLayouts();var b={x:0,y:0,width:x[0],height:x[1],area:x[0]*x[1]};y.setLayout(b),Se(y,N,!1,0),b=y.getLayout(),Ne(m,(function(e,t){var o=(m[t+1]||y).getValue();e.setLayout(i.extend({dataExtent:[o,o],borderWidth:0,upperHeight:0},b))}))}var M=e.getData().tree.root;M.setLayout(We(s,v,g),!0),e.setLayoutInfo(s),ke(M,new W.Z(-s.x,-s.y,a,l),m,y,0)}};function Se(e,t,o,r){var i,n;if(!e.isRemoved()){var a=e.getLayout();i=a.width,n=a.height;var l=e.getModel(),d=l.get(be),s=l.get(Me)/2,h=Ee(l),u=Math.max(d,h),p=d-s,c=u-s;e.setLayout({borderWidth:d,upperHeight:u,upperLabelHeight:h},!0),i=me(i-2*p,0),n=me(n-p-c,0);var f=i*n,g=_e(e,l,f,t,o,r);if(g.length){var v={x:p,y:c,width:i,height:n},y=xe(i,n),m=1/0,x=[];x.area=0;for(var w=0,N=g.length;w<N;){var b=g[w];x.push(b),x.area+=b.getLayout().area;var M=Ve(x,y,t.squareRatio);M<=m?(w++,m=M):(x.area-=x.pop().getLayout().area,De(x,y,v,s,!1),y=xe(v.width,v.height),x.length=x.area=0,m=1/0)}if(x.length&&De(x,y,v,s,!0),!o){var I=l.get("childrenVisibleMin");null!=I&&f<I&&(o=!0)}for(w=0,N=g.length;w<N;w++)Se(g[w],t,o,r+1)}}}function _e(e,t,o,r,n,a){var l=e.children||[],d=r.sort;"asc"!==d&&"desc"!==d&&(d=null);var s=null!=r.leafDepth&&r.leafDepth<=a;if(n&&!s)return e.viewChildren=[];l=i.filter(l,(function(e){return!e.isRemoved()})),Ce(l,d);var h=Ae(t,l,d);if(0===h.sum)return e.viewChildren=[];if(h.sum=Re(t,o,h.sum,d,l),0===h.sum)return e.viewChildren=[];for(var u=0,p=l.length;u<p;u++){var c=l[u].getValue()/h.sum*o;l[u].setLayout({area:c})}return s&&(l.length&&e.setLayout({isLeafRoot:!0},!0),l.length=0),e.viewChildren=l,e.setLayout({dataExtent:h.dataExtent},!0),l}function Re(e,t,o,r,i){if(!r)return o;for(var n=e.get("visibleMin"),a=i.length,l=a,d=a-1;d>=0;d--){var s=i["asc"===r?a-d-1:d].getValue();s/o*t<n&&(l=d,o-=s)}return"asc"===r?i.splice(0,a-l):i.splice(l,a-l),o}function Ce(e,t){return t&&e.sort((function(e,o){var r="asc"===t?e.getValue()-o.getValue():o.getValue()-e.getValue();return 0===r?"asc"===t?e.dataIndex-o.dataIndex:o.dataIndex-e.dataIndex:r})),e}function Ae(e,t,o){for(var r=0,i=0,n=t.length;i<n;i++)r+=t[i].getValue();var a,l=e.get("visualDimension");return t&&t.length?"value"===l&&o?(a=[t[t.length-1].getValue(),t[0].getValue()],"asc"===o&&a.reverse()):(a=[1/0,-1/0],Ne(t,(function(e){var t=e.getValue(l);t<a[0]&&(a[0]=t),t>a[1]&&(a[1]=t)}))):a=[NaN,NaN],{sum:r,dataExtent:a}}function Ve(e,t,o){for(var r=0,i=1/0,n=0,a=void 0,l=e.length;n<l;n++)a=e[n].getLayout().area,a&&(a<i&&(i=a),a>r&&(r=a));var d=e.area*e.area,s=t*t*o;return d?me(s*r/d,d/(s*i)):1/0}function De(e,t,o,r,i){var n=t===o.width?0:1,a=1-n,l=["x","y"],d=["width","height"],s=o[l[n]],h=t?e.area/t:0;(i||h>o[d[a]])&&(h=o[d[a]]);for(var u=0,p=e.length;u<p;u++){var c=e[u],f={},g=h?c.getLayout().area/h:0,v=f[d[a]]=me(h-2*r,0),y=o[l[n]]+o[d[n]]-s,m=u===p-1||y<g?y:g,x=f[d[n]]=me(m-2*r,0);f[l[a]]=o[l[a]]+xe(r,v/2),f[l[n]]=s+xe(r,x/2),s+=m,c.setLayout(f,!0)}o[l[a]]+=h,o[d[a]]-=h}function Ze(e,t,o,r,i){var n,a=(t||{}).node,l=[r,i];if(!a||a===o)return l;var d=r*i,s=d*e.option.zoomToNodeRatio;while(n=a.parentNode){for(var h=0,u=n.children,p=0,c=u.length;p<c;p++)h+=u[p].getValue();var f=a.getValue();if(0===f)return l;s*=h/f;var g=n.getModel(),v=g.get(be),y=Math.max(v,Ee(g));s+=4*v*v+(3*v+y)*Math.pow(s,.5),s>ye.YM&&(s=ye.YM),a=n}s<d&&(s=d);var m=Math.pow(s/d,.5);return[r*m,i*m]}function We(e,t,o){if(t)return{x:t.x,y:t.y};var r={x:0,y:0};if(!o)return r;var i=o.node,n=i.getLayout();if(!n)return r;var a=[n.width/2,n.height/2],l=i;while(l){var d=l.getLayout();a[0]+=d.x,a[1]+=d.y,l=l.parentNode}return{x:e.width/2-a[0],y:e.height/2-a[1]}}function ke(e,t,o,r,i){var n=e.getLayout(),a=o[i],l=a&&a===e;if(!(a&&!l||i===o.length&&e!==r)){e.setLayout({isInView:!0,invisible:!l&&!t.intersect(n),isAboveViewRoot:l},!0);var d=new W.Z(t.x-n.x,t.y-n.y,t.width,t.height);Ne(e.viewChildren||[],(function(e){ke(e,d,o,r,i+1)}))}}function Ee(e){return e.get(Ie)?e.get(Te):0}function Ge(e){e.registerSeriesModel(y),e.registerChartView(re),e.registerVisual(de),e.registerLayout(Le),a(e)}}}]);
//# sourceMappingURL=chunk-vendors-0ff46c1f-legacy.dd1e3afd.js.map
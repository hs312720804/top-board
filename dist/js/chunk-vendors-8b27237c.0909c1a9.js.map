{"version":3,"file":"js/chunk-vendors-8b27237c.0909c1a9.js","mappings":"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","sources":["webpack://databoard/./node_modules/echarts/lib/component/toolbox/featureManager.js","webpack://databoard/./node_modules/echarts/lib/component/toolbox/feature/Brush.js","webpack://databoard/./node_modules/echarts/lib/component/toolbox/ToolboxModel.js","webpack://databoard/./node_modules/echarts/lib/component/toolbox/ToolboxView.js","webpack://databoard/./node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","webpack://databoard/./node_modules/echarts/lib/component/toolbox/feature/MagicType.js","webpack://databoard/./node_modules/echarts/lib/component/toolbox/feature/DataView.js","webpack://databoard/./node_modules/echarts/lib/component/toolbox/feature/Restore.js","webpack://databoard/./node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","webpack://databoard/./node_modules/echarts/lib/component/toolbox/install.js","webpack://databoard/./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack://databoard/./node_modules/echarts/lib/component/tooltip/helper.js","webpack://databoard/./node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","webpack://databoard/./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack://databoard/./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack://databoard/./node_modules/echarts/lib/component/tooltip/install.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature =\n/** @class */\nfunction () {\n  function ToolboxFeature() {}\n\n  return ToolboxFeature;\n}();\n\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar ICON_TYPES = ['rect', 'polygon', 'lineX', 'lineY', 'keep', 'clear'];\n\nvar BrushFeature =\n/** @class */\nfunction (_super) {\n  __extends(BrushFeature, _super);\n\n  function BrushFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BrushFeature.prototype.render = function (featureModel, ecModel, api) {\n    var brushType;\n    var brushMode;\n    var isBrushed;\n    ecModel.eachComponent({\n      mainType: 'brush'\n    }, function (brushModel) {\n      brushType = brushModel.brushType;\n      brushMode = brushModel.brushOption.brushMode || 'single';\n      isBrushed = isBrushed || !!brushModel.areas.length;\n    });\n    this._brushType = brushType;\n    this._brushMode = brushMode;\n    zrUtil.each(featureModel.get('type', true), function (type) {\n      featureModel.setIconStatus(type, (type === 'keep' ? brushMode === 'multiple' : type === 'clear' ? isBrushed : type === brushType) ? 'emphasis' : 'normal');\n    });\n  };\n\n  BrushFeature.prototype.updateView = function (featureModel, ecModel, api) {\n    this.render(featureModel, ecModel, api);\n  };\n\n  BrushFeature.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon', true);\n    var icons = {};\n    zrUtil.each(model.get('type', true), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  ;\n\n  BrushFeature.prototype.onclick = function (ecModel, api, type) {\n    var brushType = this._brushType;\n    var brushMode = this._brushMode;\n\n    if (type === 'clear') {\n      // Trigger parallel action firstly\n      api.dispatchAction({\n        type: 'axisAreaSelect',\n        intervals: []\n      });\n      api.dispatchAction({\n        type: 'brush',\n        command: 'clear',\n        // Clear all areas of all brush components.\n        areas: []\n      });\n    } else {\n      api.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'brush',\n        brushOption: {\n          brushType: type === 'keep' ? brushType : brushType === type ? false : type,\n          brushMode: type === 'keep' ? brushMode === 'multiple' ? 'single' : 'multiple' : brushMode\n        }\n      });\n    }\n  };\n\n  ;\n\n  BrushFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: ICON_TYPES.slice(),\n      icon: {\n        /* eslint-disable */\n        rect: 'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13',\n        polygon: 'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2',\n        lineX: 'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4',\n        lineY: 'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4',\n        keep: 'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z',\n        clear: 'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2' // jshint ignore:line\n\n        /* eslint-enable */\n\n      },\n      // `rect`, `polygon`, `lineX`, `lineY`, `keep`, `clear`\n      title: ecModel.getLocaleModel().get(['toolbox', 'brush', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return BrushFeature;\n}(ToolboxFeature);\n\nexport default BrushFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as featureManager from './featureManager.js';\nimport ComponentModel from '../../model/Component.js';\n\nvar ToolboxModel =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxModel, _super);\n\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    // zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\n\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exist.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has multiple icons, they are organized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis'); // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array, document */\n\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n/* global window, document */\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser; // Chrome, Firefox, New Edge\n\n    if (isFunction(MouseEvent) && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob || isSvg) {\n          var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n          var base64Encoded = parts[0].indexOf('base64') > -1;\n          var bstr = isSvg // should decode the svg data uri first\n          ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n          // otherwise, like `svg` data uri exported by zrender,\n          // there will be an error, for it's not encoded with base64.\n          // (just a url-encoded string through `encodeURIComponent`)\n\n          base64Encoded && (bstr = window.atob(bstr));\n          var filename = title + '.' + type; // @ts-ignore\n\n          if (window.navigator.msSaveOrOpenBlob) {\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var blob = new Blob([u8arr]); // @ts-ignore\n\n            window.navigator.msSaveOrOpenBlob(blob, filename);\n          } else {\n            var frame = document.createElement('iframe');\n            document.body.appendChild(frame);\n            var cw = frame.contentWindow;\n            var doc = cw.document;\n            doc.open('image/svg+xml', 'replace');\n            doc.write(bstr);\n            doc.close();\n            cw.focus();\n            doc.execCommand('SaveAs', true, filename);\n            document.body.removeChild(frame);\n          }\n        } else {\n          var lang = model.get('lang');\n          var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n          var tab = window.open();\n          tab.document.write(html);\n          tab.document.title = title;\n        }\n      }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { SINGLE_REFERRING } from '../../../util/model.js';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack']; // stack and tiled appears in pair for the title\n\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nvar MagicType =\n/** @class */\nfunction (_super) {\n  __extends(MagicType, _super);\n\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n\n    var newOption = {\n      series: []\n    };\n\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      } // Modify boundaryGap\n\n\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type; // Change title of stack\n\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n\n  return MagicType;\n}(ToolboxFeature);\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n}; // TODO: SELF REGISTERED.\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\n\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div'); // use padding to avoid 5px whitespace\n\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style; // eslint-disable-next-line max-len\n\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0'; // eslint-disable-next-line max-len\n\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as history from '../../dataZoom/history.js';\nimport { ToolboxFeature } from '../featureManager.js';\n\nvar RestoreOption =\n/** @class */\nfunction (_super) {\n  __extends(RestoreOption, _super);\n\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return RestoreOption;\n}(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO depends on DataZoom and Brush\n\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../../helper/BrushController.js';\nimport BrushTargetManager from '../../helper/BrushTargetManager.js';\nimport * as history from '../../dataZoom/history.js';\nimport sliderMove from '../../helper/sliderMove.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model.js';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator.js';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\n\nvar DataZoomFeature =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomFeature, _super);\n\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n\n    var snapshot = {};\n    var ecModel = this.ecModel;\n\n    this._brushController.updateCovers([]); // remove cover\n\n\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n\n      var brushType = area.brushType;\n\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n\n    this._dispatchZoomAction(snapshot);\n\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n\n  ;\n\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = []; // Convert from hash map to array.\n\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n\n  return DataZoomFeature;\n}(ToolboxFeature);\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\n\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect.js';\nimport ToolboxModel from './ToolboxModel.js';\nimport ToolboxView from './ToolboxView.js'; // TODOD: REGISTER IN INSTALL\n\nimport { registerFeature } from './featureManager.js';\nimport SaveAsImage from './feature/SaveAsImage.js';\nimport MagicType from './feature/MagicType.js';\nimport DataView from './feature/DataView.js';\nimport Restore from './feature/Restore.js';\nimport DataZoom from './feature/DataZoom.js';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\n\nvar TooltipModel =\n/** @class */\nfunction (_super) {\n  __extends(TooltipModel, _super);\n\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    // zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaut false (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    enterable: false,\n    backgroundColor: '#fff',\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      } // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n\n    },\n    textStyle: {\n      color: '#666',\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\n\nexport default TooltipModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { toCamelCase } from '../../util/format.js';\nimport env from 'zrender/lib/core/env.js';\n/* global document */\n\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\n\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n\n  var style = document.documentElement.style;\n\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\n\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isString, indexOf, each, bind, isArray, isDom } from 'zrender/lib/core/util.js';\nimport { normalizeEvent } from 'zrender/lib/core/event.js';\nimport { transformLocalCoord } from 'zrender/lib/core/dom.js';\nimport env from 'zrender/lib/core/env.js';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format.js';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\n/* global document, window */\n\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform'); // eslint-disable-next-line\n\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\n\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\n\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var borderWidth = tooltipModel.get('borderWidth');\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n  var positionStyle = '';\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n  var rotateDeg;\n\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n\n  var rotateRadian = rotateDeg * Math.PI / 180;\n  var arrowWH = arrowSize + borderWidth;\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;z-index:-1;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\n\nfunction assembleTransition(duration, onlyFade) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n  var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n\n  if (!onlyFade) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n  }\n\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\n\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px'; // not support transform, use `left` and `top` instead.\n\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  } // support transform\n\n\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize // @ts-ignore, leave it to the tooltip refactor.\n  && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n\nfunction assembleCssText(tooltipModel, enableTransition, onlyFade) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow); // Animation transition. Do not animate when transitionDuration is 0.\n\n  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n\n  if (backgroundColor) {\n    cssText.push('background-color:' + backgroundColor);\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\n\nvar TooltipHTMLContent =\n/** @class */\nfunction () {\n  function TooltipHTMLContent(container, api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._alwaysShowContent = false;\n    this._firstShow = true;\n    this._longHide = true;\n\n    if (env.wxa) {\n      return null;\n    }\n\n    var el = document.createElement('div'); // TODO: TYPE\n\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendToBody = this._appendToBody = opt && opt.appendToBody;\n    makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n    if (appendToBody) {\n      document.body.appendChild(el);\n    } else {\n      container.appendChild(el);\n    }\n\n    this._container = container; // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n\n    var self = this;\n\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    };\n\n    el.onmousemove = function (e) {\n      e = e || window.event;\n\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n\n\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var position = getComputedStyle(container, 'position');\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // move tooltip if chart resized\n\n\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized(); // update alwaysShowContent\n\n    this._alwaysShowContent = alwaysShowContent; // update className\n\n    this.el.className = tooltipModel.get('className') || ''; // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide) // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '') // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n    }\n\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    var el = this.el;\n\n    if (content == null) {\n      el.innerHTML = '';\n      return;\n    }\n\n    var arrow = '';\n\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n    }\n\n    if (isString(content)) {\n      el.innerHTML = content + arrow;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n\n      if (!isArray(content)) {\n        content = [content];\n      }\n\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      } // no arrow if empty\n\n\n      if (arrow && el.childNodes.length) {\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\n        var arrowEl = document.createElement('div');\n        arrowEl.innerHTML = arrow;\n        el.appendChild(arrowEl);\n      }\n    }\n  };\n\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return [el.offsetWidth, el.offsetHeight];\n  };\n\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n\n\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n\n    var style = this.el.style;\n    style.visibility = 'hidden';\n    style.opacity = '0';\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n\n  TooltipHTMLContent.prototype.dispose = function () {\n    this.el.parentNode.removeChild(this.el);\n  };\n\n  return TooltipHTMLContent;\n}();\n\nexport default TooltipHTMLContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\nimport { throwError } from '../../util/log.js';\n\nvar TooltipRichContent =\n/** @class */\nfunction () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._alwaysShowContent = false;\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n\n\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized(); // update alwaysShowContent\n\n    this._alwaysShowContent = alwaysShowContent;\n  };\n\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.show();\n    this._show = true;\n  };\n  /**\n   * Set tooltip content\n   */\n\n\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    var _this = this;\n\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        borderWidth: 1,\n        borderColor: borderColor,\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n    zrUtil.each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n      _this.el.style[propName] = tooltipModel.get(propName);\n    });\n    zrUtil.each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n      _this.el.style[propName] = textStyleModel.get(propName) || 0;\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  };\n\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect(); // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style); // rich text x, y do not include border.\n\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n\n\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  };\n\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n\n  return TooltipRichContent;\n}();\n\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\n\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\n\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\n\nexport default TooltipRichContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nimport { bind, each, clone, trim, isString, isFunction, isArray, isObject, extend } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport TooltipHTMLContent from './TooltipHTMLContent.js';\nimport TooltipRichContent from './TooltipRichContent.js';\nimport { convertToColorString, formatTpl } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport { Rect } from '../../util/graphic.js';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport Model from '../../model/Model.js';\nimport * as globalListener from '../axisPointer/globalListener.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper.js';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model.js';\nimport ComponentView from '../../view/Component.js';\nimport { format as timeFormat } from '../../util/time.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { shouldTooltipConfine } from './helper.js';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat.js';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup.js';\nimport { findEventDispatcher } from '../../util/event.js';\nimport { clear, createOrUpdate } from '../../util/throttle.js';\nvar proxyRect = new Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar TooltipView =\n/** @class */\nfunction (_super) {\n  __extends(TooltipView, _super);\n\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TooltipView.type;\n    return _this;\n  }\n\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n    this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api.getDom(), api, {\n      appendToBody: tooltipModel.get('appendToBody', true)\n    });\n  };\n\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow(); // PENDING\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\n    // which causes that the `updatePosition` function was also called frequently.\n    // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n    // To avoid frequent triggering,\n    // consider throttling it in 50ms when transition is enabled\n\n\n    if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n      createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n    } else {\n      clear(this, '_updatePosition');\n    }\n  };\n\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api;\n    var triggerOn = tooltipModel.get('triggerOn'); // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && triggerOn !== 'none' && triggerOn !== 'click') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n\n\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node || !api.getDom()) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      }; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  }; // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n\n\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex; // @ts-ignore\n\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n          return true;\n        } // Tooltip provided directly. Like legend.\n\n\n        if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n          return true;\n        }\n      }, true);\n\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n\n      this._hide(dispatchAction);\n    }\n  };\n\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    }); // Only for legacy: `Serise['formatTooltip']` returns a string.\n\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex); // Can't find data.\n\n          if (cbParams.dataIndex < 0) {\n            return;\n          }\n\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel; // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n          var frag = seriesTooltipResult.frag;\n\n          if (frag) {\n            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n            axisSectionMarkup.blocks.push(valueFormatter ? extend({\n              valueFormatter: valueFormatter\n            }, frag) : frag);\n          }\n\n          if (seriesTooltipResult.text) {\n            markupTextArrLegacy.push(seriesTooltipResult.text);\n          }\n\n          cbParamsList.push(cbParams);\n        });\n      });\n    }); // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  };\n\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher); // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n\n    params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var valueFormatter = tooltipModel.get('valueFormatter');\n    var frag = seriesTooltipResult.frag;\n    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n      valueFormatter: valueFormatter\n    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n\n    if (isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var tooltipModelCascade = [tooltipOpt];\n\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    } // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they cannot share the same formatter. Since the global tooltip formatter is used for series\n    // by convention, we do not use it as the default formatter for component.\n\n\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + ''; // PENDING: this case do not support richText style yet.\n\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype._showTooltipContent = function ( // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n\n    var nearPointColor = nearPoint.color;\n\n    if (formatter) {\n      if (isString(formatter)) {\n        var useUTC = tooltipModel.ecModel.get('useUTC');\n        var params0 = isArray(params) ? params[0] : params;\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n        html = formatter;\n\n        if (isTimeAxis) {\n          html = timeFormat(params0.axisValue, html, useUTC);\n        }\n\n        html = formatTpl(html, params, true);\n      } else if (isFunction(formatter)) {\n        var callback = bind(function (cbTicket, html) {\n          if (cbTicket === this._ticket) {\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n          }\n        }, this);\n        this._ticket = asyncTicket;\n        html = formatter(params, asyncTicket, callback);\n      } else {\n        html = formatter;\n      }\n    }\n\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n    if (trigger === 'axis' || isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n      };\n    }\n\n    if (!isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x, // Mouse x\n  y, // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (isString(positionExpr) && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  }; // FIXME\n  // Should we remove this but leave this to user?\n\n\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var lastCbParamsList = this._cbParamsList;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        }); // check is cbParams data value changed\n\n        lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n          var seriesIdx = idxItem.seriesIndex;\n          var cbParams = cbParamsList[seriesIdx];\n          var lastCbParams = lastCbParamsList[seriesIdx];\n\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n            contentNotChanged = false;\n          }\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    this._cbParamsList = cbParamsList;\n    return !!contentNotChanged;\n  };\n\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n\n    clear(this, '_updatePosition');\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  };\n\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in default tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - offset;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + offset;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\n * Find target component by payload like:\n * ```js\n * { legendId: 'some_id', name: 'xxx' }\n * { toolboxIndex: 1, name: 'xxx' }\n * { geoName: 'some_name', name: 'xxx' }\n * ```\n * PENDING: at present only\n *\n * If not found, return null/undefined.\n */\n\n\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n\n  if (!model) {\n    return;\n  }\n\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\n\nexport default TooltipView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nimport TooltipModel from './TooltipModel.js';\nimport TooltipView from './TooltipView.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\n   * @action\n   * @property {string} type\n   * @property {number} seriesIndex\n   * @property {number} dataIndex\n   * @property {number} [x]\n   * @property {number} [y]\n   */\n\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, noop);\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, noop);\n}"],"names":["ToolboxFeature","features","registerFeature","name","ctor","getFeature","ICON_TYPES","BrushFeature","_super","apply","this","arguments","__extends","prototype","render","featureModel","ecModel","api","brushType","brushMode","isBrushed","eachComponent","mainType","brushModel","brushOption","areas","length","_brushType","_brushMode","zrUtil","get","type","setIconStatus","updateView","getIcons","model","availableIcons","icons","onclick","dispatchAction","intervals","command","key","getDefaultOption","defaultOption","show","slice","icon","rect","polygon","lineX","lineY","keep","clear","title","getLocaleModel","ToolboxModel","_this","optionUpdated","option","feature","featureOpt","featureName","Feature","featureManager","layoutMode","ignoreSize","z","orient","left","top","backgroundColor","borderColor","borderRadius","borderWidth","padding","itemSize","itemGap","showTitle","iconStyle","color","emphasis","tooltip","position","ComponentModel","ToolboxView","toolboxModel","payload","group","removeAll","isVertical","featureOpts","_features","featureNames","opt","push","DataDiffer","_featureNames","add","processFeature","update","remove","execute","listComponentHelper","getBoundingRect","eachChild","titleText","__title","emphasisState","ensureState","emphasisTextConfig","textConfig","textContent","getTextContent","emphasisTextState","emphasisTextStyle","style","textContain","ZRText","offsetX","x","offsetY","y","needPutOnTop","height","getHeight","topOffset","width","getWidth","align","newIndex","oldIndex","oldName","Model","newTitle","isUserFeatureName","uid","getUID","isToolboxFeature","unusable","createIconPaths","iconName","status","iconPaths","iconStatus","enterEmphasis","leaveEmphasis","dispose","iconsMap","titlesMap","iconStyleModel","getModel","iconStyleEmphasisModel","titles","iconStr","path","graphic","createIcon","setStyle","getItemStyle","pathEmphasisState","text","fill","ignore","setTextContent","setTooltipConfig","el","componentModel","itemName","formatterParamsExtra","on","hoverStyle","defaultTextPosition","stroke","setTextConfig","hide","ComponentView","indexOf","SaveAsImage","isSvg","getZr","painter","getType","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","browser","env","isFunction","MouseEvent","newEdge","ie","edge","$a","document","createElement","download","target","href","evt","view","defaultView","bubbles","cancelable","dispatchEvent","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","bstr","decodeURIComponent","atob","filename","n","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","body","appendChild","cw","contentWindow","doc","open","write","close","focus","execCommand","removeChild","lang","html","tab","INNER_STACK_KEYWORD","radioTypes","MagicType","line","bar","stack","seriesIndex","seriesOptGenreator","newOption","series","generateNewSeriesTypes","seriesModel","seriesType","subType","seriesId","id","newSeriesOpt","coordSys","coordinateSystem","categoryAxis","getAxesByScale","axisDim","dim","axisType","axisModel","getReferringComponents","SINGLE_REFERRING","models","axisIndex","componentIndex","i","boundaryGap","radio","item","query","currentType","tiled","data","markPoint","markLine","isStack","echarts","event","mergeOption","BLOCK_SPLITER","Array","join","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","baseAxis","getBaseAxis","index","valueAxis","getOtherAxis","other","assembleSeriesWithCategoryAxis","groups","tables","valueAxisDim","headers","concat","columns","getCategories","rawData","getRawData","mapArray","mapDimension","val","lines","items","j","assembleOtherSeries","vals","each","dimensions","argLen","dataIndex","getName","getContentFromModel","result","value","str","replace","trim","isTSVFormat","block","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","shift","categories","header","parseListContents","seriesName","name_1","hasName","isNaN","parseContents","blockMetaList","blocks","idx","blockMeta","axisKey","DataView","setTimeout","container","getDom","_dom","root","cssText","innerHTML","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","getOption","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","self","addEventListener","e","Error","clientHeight","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","newValIsObject","shouldDeleteName","newSeriesOptList","seriesOpt","getSeriesByName","RestoreOption","history","from","resetOption","DATA_ZOOM_ID_BASE","makeInternalComponentId","DataZoomFeature","_brushController","BrushController","_onBrush","mount","updateZoomBtnStatus","updateBackBtnStatus","handlers","call","unmount","eventParam","isEnd","snapshot","updateCovers","brushTargetManager","BrushTargetManager","makeAxisFinder","include","matchOutputRanges","area","coordRange","setBatch","_dispatchZoomAction","dimName","minMax","axis","getAxis","dataZoomModel","findDataZoom","minMaxSpan","findRepresentativeAxisProxy","getMinMaxSpan","minValueSpan","maxValueSpan","sliderMove","scale","getExtent","dataZoomId","startValue","endValue","found","dzModel","has","getAxisModel","batch","batchItem","filterMode","zoom","back","brushStyle","nextActive","_isZoomActive","dataZoomSelectActive","dzFeatureModel","setting","xAxisIndex","yAxisIndex","xAxisId","yAxisId","zoomActive","panels","makePanelOpts","targetInfo","xAxisDeclared","yAxisDeclared","setPanels","enableBrush","registerInternalOptionCreator","getComponent","featureDataZoomPath","dzOptions","finder","finderResult","parseFinder","xAxisModels","buildInternalOptions","yAxisModels","axisMainType","axisIndexPropName","newOpt","$fromToolbox","install","registers","registerComponentModel","registerComponentView","DataZoom","Restore","use","installDataZoomSelect","TooltipModel","dependencies","showContent","trigger","triggerOn","alwaysShowContent","displayMode","renderMode","confine","showDelay","hideDelay","transitionDuration","enterable","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","extraCssText","axisPointer","animation","animationDurationUpdate","animationEasingUpdate","crossStyle","textStyle","fontSize","shouldTooltipConfine","tooltipModel","confineOption","testStyle","styleProps","documentElement","len","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","toCamelCase","toLowerCase","getComputedStyle","stl","currentStyle","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","mirrorPos","pos","assembleArrow","arrowPosition","isString","convertToColorString","rotateDeg","arrowPos","arrowSize","Math","max","round","positionStyle","transformStyle","rotateRadian","PI","arrowWH","rotatedWH","abs","cos","sin","arrowOffset","SQRT2","borderStyle","styleCss","assembleTransition","duration","onlyFade","transitionCurve","transitionOption","transitionText","assembleTransform","toString","x0","toFixed","y0","is3d","translate","assembleFont","textStyleModel","getTextColor","getFont","assembleCssText","enableTransition","getPaddingFromTooltipModel","boxShadow","borderName","camelCase","normalizeCssArray","makeStyleCoord","out","zr","appendToBody","zrX","zrY","zrPainter","zrViewportRoot","getViewportRoot","transformLocalCoord","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","TooltipHTMLContent","_show","_styleCoord","_enterable","_alwaysShowContent","_firstShow","_longHide","domBelongToZr","_zr","_appendToBody","_container","onmouseenter","clearTimeout","_hideTimeout","_inContent","onmousemove","handler","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","domStyle","_moveIfResized","className","nearPointColor","_longHideTimeout","styleCoord","display","setContent","content","markers","arrow","isArray","isDom","parentNode","childNodes","arrowEl","setEnterable","getSize","offsetWidth","offsetHeight","moveTo","style_1","transforms","transform","ratioX","ratioY","visibility","opacity","willChange","time","bind","isShow","TooltipRichContent","markupStyleCreator","throwError","rich","richTextStyles","lineHeight","textShadowColor","verticalAlign","propName","bounding","shadowOuterSize","calcShadowOuterSize","right","bottom","mathMaxWith0","markRedraw","proxyRect","Rect","shape","TooltipView","init","_renderMode","getTooltipRenderMode","_tooltipContent","_tooltipModel","_ecModel","_api","tooltipContent","_initGlobalListener","_keepShow","createOrUpdate","globalListener","currTrigger","_tryShow","_hide","_lastX","_lastY","self_1","_refreshUpdateTimeout","isDisposed","manuallyShowTip","dataByCoordSys","_lastDataByCoordSys","makeDispatchAction","_ticket","cmptRef","findComponentReference","clone","applyTransform","positionDefault","getECData","tooltipConfig","tooltipOption","_manuallyAxisShowTip","pointInfo","findPointFromSeries","cx","point","cy","findHover","manuallyHideTip","coordSysAxesInfo","getSeriesByIndex","getData","tooltipCascadedModel","buildTooltipModel","getItemModel","_showAxisTooltip","seriesDispatcher_1","cmptDispatcher_1","findEventDispatcher","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","cb","delay","_showTimout","globalTooltipModel","singleTooltipModel","cbParamsList","articleMarkup","createTooltipMarkup","noHeader","markupTextArrLegacy","TooltipMarkupStyleCreator","itemCoordSys","dataByAxis","axisItem","axisValue","axisValueLabel","axisPointerViewHelper","seriesDataIndices","valueLabelOpt","axisSectionMarkup","sortBlocks","idxItem","dataIndexInside","cbParams","getDataParams","axisId","axisHelper","marker","makeTooltipMarker","seriesTooltipResult","normalizeTooltipFormatResult","formatTooltip","frag","valueFormatter","extend","reverse","positionExpr","orderMode","builtMarkupText","buildTooltipMarkup","unshift","blockBreak","allMarkupText","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","dispatcher","ecData","dataModel","dataType","tooltipTrigger","params","markupText","asyncTicket","getRawIndex","tooltipOpt","formatter","tooltipModelCascade","cmpt","componentMainType","subTooltipModel","defaultHtml","formatterParams","nearPoint","_getNearestPoint","useUTC","params0","isTimeAxis","timeFormat","formatTpl","callback","cbTicket","tooltipDataParams","viewWidth","viewHeight","contentSize","vAlign","viewSize","parsePercent","isObject","boxLayoutPosition","layoutRect","getLayoutRect","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","_cbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","newIdxItem","seriesIdx","lastCbParams","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","size","min","domWidth","domHeight","offset","ceil","rectWidth","rectHeight","queryOptionMap","preParseFinder","keys","queryResult","queryReferringComponents","useDefault","enableAll","enableNone","getViewOfComponentModel","traverse","subEl","installAxisPointer","registerAction","noop"],"sourceRoot":""}
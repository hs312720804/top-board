{"version":3,"file":"js/chunk-vendors-c4344193-legacy.18e07dd2.js","mappings":"6NAgDO,SAASA,EAA2BC,GACzC,IAUIC,EACAC,EACAC,EACAC,EAbAC,EAASL,EAAIK,OACbC,EAAYN,EAAIM,UAChBC,EAAiBP,EAAIO,eACrBC,EAAOH,EAAOI,UACdC,EAAcF,EAAKG,iBAAiB,oBACpCC,EAAgBF,EAAYG,OAC5BC,EAAQT,EAAOU,YAAYT,GAC3BU,GAAa,IAAAC,SAAQH,GACrBI,GAAc,QAAoCb,EAAQC,GAM9D,GAAIM,EAAgB,GAAKI,IAAeJ,EAAe,CACrD,IAAIO,EAAkBC,EAAwBN,EAAOT,EAAQC,EAAWI,EAAaQ,GACrFjB,EAAckB,EAAgBE,aAC9BnB,EAAkBiB,EAAgBG,iBAClCnB,EAAYgB,EAAgBI,OAE5BnB,EAAYe,EAAgBE,aAAa,EAC3C,MAAO,GAAIT,EAAe,CACxB,IAAIY,EAAUhB,EAAKiB,iBAAiBf,EAAY,IAChDN,EAAYH,GAAc,QAAiBO,EAAMF,EAAWI,EAAY,IACxER,EAAkBsB,EAAQE,IAC5B,MACEtB,EAAYH,EAAce,EAAaF,EAAM,GAAKA,EAGpD,IAAIa,GAAsB,QAAgBtB,GACtCuB,EAAaD,GAAuBtB,EAAOwB,MAAQ,GACnDC,EAAWtB,EAAKuB,QAAQzB,GACxB0B,EAAazB,EAAiBqB,EAAaE,EAC/C,OAAO,QAAoB,UAAW,CACpCG,OAAQL,EAGRM,SAAU3B,IAAmBoB,EAC7BvB,UAAWA,EACXmB,OAAQ,EAAC,QAAoB,YAAa,CACxCY,WAAY,OACZjB,YAAaA,EAGbW,KAAMG,EAGNI,SAAS,IAAAC,MAAKL,GACdlB,MAAOb,EACPqC,UAAWpC,KACTqC,OAAOpC,GAAa,KAE5B,CACA,SAASiB,EAAwBN,EAAOT,EAAQC,EAAWI,EAAa8B,GAEtE,IAAIhC,EAAOH,EAAOI,UACdgC,GAAsB,IAAAC,QAAO5B,GAAO,SAAU2B,EAAqBE,EAAKC,GAC1E,IAAIC,EAAUrC,EAAKiB,iBAAiBmB,GACpC,OAA6BH,GAAuBI,IAA+B,IAApBA,EAAQC,SAA4C,MAAvBD,EAAQE,WACtG,IAAG,GACC1B,EAAe,GACfC,EAAmB,GACnBC,EAAS,GAKb,SAASyB,EAAYL,EAAKM,GACxB,IAAIzB,EAAUhB,EAAKiB,iBAAiBwB,GAE/BzB,IAAyC,IAA9BA,EAAQ0B,UAAUJ,UAG9BL,EACFlB,EAAO4B,MAAK,QAAoB,YAAa,CAC3ChB,WAAY,UACZjB,YAAasB,EACbX,KAAML,EAAQuB,YACdjC,MAAO6B,EACPL,UAAWd,EAAQE,SAGrBL,EAAa8B,KAAKR,GAClBrB,EAAiB6B,KAAK3B,EAAQE,OAElC,CACA,OAvBAhB,EAAYG,QAAS,IAAAuC,MAAK1C,GAAa,SAAUuC,GAC/CD,GAAY,QAAiBxC,EAAMF,EAAW2C,GAAMA,EACtD,KACE,IAAAG,MAAKtC,EAAOkC,GAoBP,CACL3B,aAAcA,EACdC,iBAAkBA,EAClBC,OAAQA,EAEZ,C,gQC1FI8B,EAA0B,gBAE9B,SAASC,EAAoBC,EAAWC,GACtC,IAAIC,EAAgBF,EAAUG,OAAS,UACnCC,EAAeJ,EAAUK,UAAY,GACrCC,EAAiBN,EAAUO,YAAc,MACzCC,EAAiBR,EAAUG,OAAS,UACpCM,EAAgBT,EAAUK,UAAY,GACtCK,EAAkBV,EAAUO,YAAc,MAC9C,MAAmB,SAAfN,EAEK,CAELU,UAAW,cAAe,QAAWP,EAAe,IAAM,aAAc,QAAWF,GAAiB,iBAAkB,QAAWI,EAAiB,IAElJM,WAAY,cAAe,QAAWH,EAAgB,IAAM,aAAc,QAAWD,GAAkB,iBAAkB,QAAWE,EAAkB,KAGjJ,CACLC,UAAW,CACTN,SAAUD,EACVS,KAAMX,EACNK,WAAYD,GAEdM,WAAY,CACVP,SAAUI,EACVI,KAAML,EACND,WAAYG,GAIpB,CAGA,IAAII,EAAY,CAAC,EAAG,GAAI,GAAI,IACxBC,EAAiB,CAAC,GAAI,KAAM,OAAQ,UAEjC,SAASC,EAAoB7C,EAAM8C,GAExC,OADAA,EAAO9C,KAAOA,EACP8C,CACT,CACA,SAASC,EAAkBC,GACzB,MAAqB,YAAdA,EAAKhD,IACd,CACA,SAASiD,EAAWD,GAClB,OAAOD,EAAkBC,GAAQE,EAAeC,CAClD,CACA,SAASC,EAAiBJ,GACxB,GAAID,EAAkBC,GAAO,CAC3B,IAAIK,EAAa,EACbC,EAAcN,EAAKnD,OAAOV,OAC1BoE,EAAgBD,EAAc,GAAKA,EAAc,IAAMN,EAAKxC,SAahE,OAZA,IAAAkB,MAAKsB,EAAKnD,QAAQ,SAAU2D,GAC1B,IAAIC,EAAcL,EAAiBI,GAG/BC,GAAeJ,IACjBA,EAAaI,KAAgBF,KAE5BE,GAEEV,EAAkBS,KAAcA,EAAShD,WAEhD,IACO6C,CACT,CACA,OAAO,CACT,CACA,SAASH,EAAaQ,EAAKC,EAAUC,EAAsBC,GACzD,IAAIrD,EAAWmD,EAASnD,SACpBsD,EAAOC,EAAOX,EAAiBO,IAC/BK,EAAoB,GACpBvF,EAAYkF,EAAS9D,QAAU,IACnC,IAAAoE,SAAQxF,IAAa,IAAAc,SAAQd,IAC7BA,EAAYA,GAAa,GACzB,IAAIyF,EAAYR,EAAIQ,UACpB,GAAIP,EAASQ,YAAcD,EAAW,CACpCzF,EAAYA,EAAU2F,QACtB,IAAIC,EAAW,CACbC,SAAU,MACVC,UAAW,QAEb,IAAI,IAAAC,QAAOH,EAAUH,GAAY,CAC/B,IAAIO,EAAe,IAAI,KAAoBJ,EAASH,GAAY,MAChEzF,EAAUiG,MAAK,SAAUC,EAAGC,GAC1B,OAAOH,EAAaI,SAASF,EAAEjG,UAAWkG,EAAElG,UAC9C,GACF,KACuB,eAAdwF,GACPzF,EAAUqG,SAEd,EACA,IAAApD,MAAKjD,GAAW,SAAU+E,EAAUtC,GAClC,IAAI6D,EAAiBpB,EAASoB,eAC1BC,EAAgB/B,EAAWO,EAAXP,CAEpB8B,GAAiB,IAAAE,SAAO,IAAAA,QAAO,CAAC,EAAGvB,GAAM,CACvCqB,eAAgBA,IACbrB,EAAKF,EAAUtC,EAAM,EAAI4C,EAAKoB,KAAO,EAAGrB,GAC5B,MAAjBmB,GAAyBhB,EAAkBvC,KAAKuD,EAClD,IACA,IAAIA,EAAmC,aAAnBtB,EAAI5B,WAA4BkC,EAAkBmB,KAAKrB,EAAKsB,UAAYC,EAAcrB,EAAkBmB,KAAK,IAAK3E,EAAWoD,EAAuBE,EAAKoB,MAC7K,GAAI1E,EACF,OAAOwE,EAET,IAAIM,GAAoB,QAAkB3B,EAASpD,OAAQ,UAAWmD,EAAI6B,QACtE/C,EAAYZ,EAAoBiC,EAAkBH,EAAI5B,YAAYU,UACtE,MAAuB,aAAnBkB,EAAI5B,WACC0D,EAAuB9B,EAAK4B,EAAmB9C,GAAasB,EAAKsB,SAAWJ,EAE5EK,EAAc,eAAkB7C,EAAY,IAAMb,EAA0B,OAAS,QAAW2D,GAAqB,SAAWN,EAAepB,EAE1J,CACA,SAAST,EAAeO,EAAKC,EAAUC,EAAsBC,GAC3D,IAAI/B,EAAa4B,EAAI5B,WACjBpB,EAASiD,EAASjD,OAClB+E,EAAU9B,EAAS8B,QACnBC,GAAY/B,EAASlD,WACrBN,EAAOwD,EAASxD,KAChBoF,EAAS7B,EAAI6B,OACbR,EAAiBpB,EAASoB,gBAAkBrB,EAAIqB,gBAAkB,SAAU3F,GAE9E,OADAA,GAAQ,IAAAG,SAAQH,GAASA,EAAQ,CAACA,IAC3B,IAAAuG,KAAIvG,GAAO,SAAU6B,EAAKC,GAC/B,OAAO,QAAkBD,GAAK,IAAA1B,SAAQqG,GAAmBA,EAAgB1E,GAAO0E,EAAiBL,EACnG,GACF,EACA,IAAI7E,IAAU+E,EAAd,CAGA,IAAII,EAAYH,EAAW,GAAKhC,EAAIoC,mBAAmBC,kBAAkBpC,EAASlD,WAAYkD,EAASnE,aAAe,OAAQsC,GAC1HkE,EAAetF,EAAS,IAAK,QAAkBP,EAAM,UAAWoF,GAChEK,EAAkBjC,EAAS/C,UAC3BqF,EAAoBR,EAAU,GAAKV,EAAepB,EAASvE,OAC3D8G,GAAmBR,IAAahF,EAEhCyF,GAAsBT,GAAYhF,EAClC0F,EAAKxE,EAAoBiC,EAAkB/B,GAC7CU,EAAY4D,EAAG5D,UACfC,EAAa2D,EAAG3D,WAClB,MAAsB,aAAfX,GAA6B4D,EAAW,GAAKG,IAAcnF,EAAS,GAAK8E,EAAuB9B,EAAKsC,EAAcxD,KACvHiD,EAAU,GAAKY,EAAwB3C,EAAKuC,EAAmBC,EAAiBC,EAAoB1D,IAAe4C,GAAeK,EAAW,GAAKG,IAAcnF,EAAS,GAAK4F,EAAmBN,GAAeN,EAAUlD,KAAeiD,EAAU,GAAKc,EAAoBN,EAAmBC,EAAiBC,EAAoB1D,IAAcmB,EAZrV,CAaF,CAKO,SAAS4C,EAAmB7C,EAAUmC,EAAoBhE,EAAYoC,EAAWqB,EAAQ1B,GAC9F,GAAKF,EAAL,CAGA,IAAI8C,EAAUxD,EAAWU,GACrBD,EAAM,CACR6B,OAAQA,EACRzD,WAAYA,EACZoC,UAAWA,EACX4B,mBAAoBA,EACpBf,eAAgBpB,EAASoB,gBAE3B,OAAO0B,EAAQ/C,EAAKC,EAAU,EAAGE,EATjC,CAUF,CACA,SAASE,EAAO2C,GACd,MAAO,CACLxB,KAAMvC,EAAU+D,GAChBtB,SAAUxC,EAAe8D,GAE7B,CACA,SAASrB,EAAcsB,EAAgBC,GACrC,IAAIC,EAAW,iCACXC,EAAY,WAAaF,EAAS,SACtC,MAAO,eAAkBE,EAAY,IAAMnF,EAA0B,MAASgF,EAAiBE,EAAW,QAC5G,CACA,SAASP,EAAmBnG,EAAM4G,EAAeC,GAC/C,IAAIC,EAAYF,EAAgB,kBAAoB,GACpD,MAAO,gBAAmBC,EAAQ,IAAMC,EAAY,MAAQ,QAAW9G,GAAQ,SACjF,CACA,SAASoG,EAAoBW,EAAWC,EAAYhB,EAAoBa,GAEtE,IAAII,EAAajB,EAAqB,OAAS,OAC3CkB,EAAWF,EAAa,2BAA6BC,EAAa,GAEtE,OADAF,GAAY,IAAA3H,SAAQ2H,GAAaA,EAAY,CAACA,GACvC,gBAAmBG,EAAW,IAAML,EAAQ,MACjD,IAAArB,KAAIuB,GAAW,SAAU9H,GACzB,OAAO,QAAWA,EACpB,IAAG+F,KAAK,gBAAkB,SAC5B,CACA,SAASK,EAAuB9B,EAAKvD,EAAM6G,GACzC,OAAOtD,EAAIoC,mBAAmBwB,kBAAkBnH,EAAM6G,EACxD,CACA,SAASX,EAAwB3C,EAAK6D,EAAQJ,EAAYhB,EAAoBa,GAC5E,IAAIQ,EAAS,CAACR,GACVS,EAActB,EAAqB,GAAK,GAM5C,OALAgB,GAAcK,EAAO/F,KAAK,CACxBiG,QAAS,CAAC,EAAG,EAAG,EAAGD,GACnBE,MAAO,UAGFjE,EAAIoC,mBAAmBwB,mBAAkB,IAAA/H,SAAQgI,GAAUA,EAAOpC,KAAK,MAAQoC,EAAQC,EAChG,CACO,SAASI,EAAoCjJ,EAAQC,GAC1D,IAAIoI,EAAQrI,EAAOI,UAAU8I,cAAcjJ,EAAW,SAClDoD,EAAQgF,EAAMrI,EAAOmJ,gBACzB,OAAO,QAAqB9F,EAC9B,CACO,SAAS+F,EAA2BC,EAAOlG,GAChD,IAAI4F,EAAUM,EAAMC,IAAI,WACxB,OAAkB,MAAXP,EAAkBA,EACR,aAAf5F,EAA4B,CAAC,EAAG,IAAM,EAC1C,CAOA,IAAIoG,EACJ,WACE,SAASA,IACPC,KAAKC,eAAiB,CAAC,EAIvBD,KAAKE,kBAAmB,SAC1B,CAmDA,OAlDAH,EAA0BI,UAAUC,mBAAqB,WACvD,MAAO,aAAeJ,KAAKE,kBAC7B,EACAH,EAA0BI,UAAUvC,kBAAoB,SAAUtF,EAAYK,EAAUgB,GACtF,IAAI0G,EAA0B,aAAf1G,EAA4BqG,KAAKI,qBAAuB,KACnEE,GAAS,QAAiB,CAC5BzG,MAAOlB,EACPd,KAAMS,EACNqB,WAAYA,EACZ0G,SAAUA,IAEZ,OAAI,IAAAE,UAASD,GACJA,GAKPN,KAAKC,eAAeI,GAAYC,EAAOzB,MAChCyB,EAAOE,QAElB,EAiBAT,EAA0BI,UAAUhB,kBAAoB,SAAUsB,EAAMpB,GACtE,IAAIqB,EAAW,CAAC,GACZ,IAAAtJ,SAAQiI,IACV,IAAA9F,MAAK8F,GAAQ,SAAUsB,GACrB,OAAO,IAAA7D,QAAO4D,EAAUC,EAC1B,KAEA,IAAA7D,QAAO4D,EAAUrB,GAEnB,IAAIuB,EAAYZ,KAAKI,qBAErB,OADAJ,KAAKC,eAAeW,GAAaF,EAC1B,IAAME,EAAY,IAAMH,EAAO,GACxC,EACOV,CACT,CA3DA,E,sGC5NWc,EAAkB,CAC3BhJ,KAAM,iBAENiJ,UAAW,SAAmBC,GAoC5B,IA/BA,IACIC,EADAC,EAAWF,EAAOE,SAElBC,GAAY,OAA2BH,EAAOI,OAAQ,CACxDC,oBAAoB,IAAAC,eAAc,CAChCC,WAAW,IAEbC,gBAAiB,SAAyBC,GACxC,IAAIC,EAAS,GACTC,EAAWF,EAAWF,WACrB,IAAAjF,QAAOmF,EAAY,eAItB,QAAWC,GAEb,IAAI9J,EAAUsJ,EAASrJ,iBAAiB8J,GAOxC,OANK/J,IAIH,QAAW8J,GAEN,CACLE,OAAQhK,EAAQiK,MAEpB,EACAC,SAAU,SAAkBC,GAC1B,OAAOb,EAASc,sBAAsBf,EAASc,EAAMH,OACvD,IAEEK,EAAa,GACRC,EAAI,EAAGC,EAAMjB,EAASkB,QAASF,EAAIC,EAAKD,IAC/CjB,EAAUC,EAASmB,eAAeH,GAC9Bf,EAAUxE,YACZsF,EAAW1I,KAAK0H,GAGpB,MAAO,CACLrK,KAAMqL,EAEV,G,oDCxCK,IAAIK,EAAgB,CACzBxK,KAAM,eACNiJ,UAAW,SAAmBC,GAC5B,IAAIE,EAAWF,EAAOE,SAClBE,EAASJ,EAAOI,OAChBM,EAAS,GAKTa,GAAgB,QAAiBnB,GAChCmB,EAActL,SAIjB,QAAWyK,GAEb,IAAIc,EAAe,IACnB,IAAAhJ,MAAK+I,GAAe,SAAUE,GAC5B,IAAId,EAAWc,EAAUlB,UACrBmB,EAAQD,EAAUC,MAClBC,EAAaF,EAAUG,OACvBC,EAAeJ,EAAUI,aAa7B,GAZgB,MAAZlB,IAIF,QAAWD,GAEC,QAAVgB,GAA6B,SAAVA,IAIrB,QAAWhB,GAETmB,GAAiC,QAAjBA,GAA2C,QAAjBA,EAAwB,CACpE,IAAIC,EAAW,GACX,GAGJ,QAAWA,EACb,CACA,GAAc,QAAVJ,GAA6B,SAAVA,EAAkB,CACvC,IAAIK,EAAW,GACX,GAGJ,QAAWA,EACb,CACA,IAAInL,EAAUsJ,EAASrJ,iBAAiB8J,GACnC/J,IAIH,QAAW8J,GAEb,IAAIkB,EAASD,GAAa,QAAkBA,GAAc,KACtDA,IAAeC,IAIjB,QAAWlB,GAEbc,EAAajJ,KAAK,CAChBqI,OAAQhK,EAAQiK,MAChBe,OAAQA,EACRI,WAAY,IAAI,KAAoBN,EAAOG,IAE/C,IAEA,IAAII,EAAe/B,EAAS+B,aACxBA,IAAiB,MAA4BA,IAAiB,OAIhE,QAAWvB,GAIb,IADA,IAAIO,EAAa,GACRC,EAAI,EAAGC,EAAMjB,EAASkB,QAASF,EAAIC,EAAKD,IAC/CD,EAAW1I,KAAK2H,EAASmB,eAAeH,IAkB1C,OAhBAD,EAAWzF,MAAK,SAAU0G,EAAOC,GAC/B,IAAK,IAAIjB,EAAI,EAAGA,EAAIM,EAAavL,OAAQiL,IAAK,CAC5C,IAAIkB,EAAWZ,EAAaN,GACxBmB,EAAOnC,EAASc,sBAAsBkB,EAAOE,EAASxB,QACtD0B,EAAOpC,EAASc,sBAAsBmB,EAAOC,EAASxB,QACtDwB,EAASR,SACXS,EAAOD,EAASR,OAAOS,GACvBC,EAAOF,EAASR,OAAOU,IAEzB,IAAIC,EAASH,EAASJ,WAAWrG,SAAS0G,EAAMC,GAChD,GAAe,IAAXC,EACF,OAAOA,CAEX,CACA,OAAO,CACT,IACO,CACL3M,KAAMqL,EAEV,GC/GK,SAASuB,EAAQC,GACtBA,EAAUC,kBAAkB5C,GAC5B2C,EAAUC,kBAAkBpB,EAC9B,C,iKCKIqB,EAAYC,EAAAA,EAAAA,UACZC,EAAaD,EAAAA,EAAAA,WACbvM,EAAUyM,EAAAA,QACVtK,EAAOsK,EAAAA,KACPC,EAAMC,EAAAA,GACNC,EAAYD,EAAAA,GAEZE,EAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMpE,KAAMqE,YAAcrE,KAgBhE,OAdAmE,EAAMtM,KAAOoM,EAAepM,KAC5BsM,EAAMG,UAAY,CAAC,UAAW,cAC9BH,EAAMI,qBAAuB,CAAC,UAAW,aAAc,SAAU,aAAc,SAC/EJ,EAAMK,WAAa,CACjB3M,KAAM,MACN4M,YAAY,GAMdN,EAAMO,UAAY,EAAEC,IAAUA,KAC9BR,EAAMS,cAAgB,CAAC,EACvBT,EAAMU,kBAAoB,CAAC,EACpBV,CACT,CAsYA,OA1ZAW,EAAAA,EAAAA,IAAUb,EAAgBC,GAsB1BD,EAAe9D,UAAU4E,KAAO,SAAUpK,EAAQqK,EAAaC,GAC7DjF,KAAKkF,qBAAqBvK,EAAQsK,EACpC,EAMAhB,EAAe9D,UAAUgF,cAAgB,SAAUC,EAAWC,GAC5D,IAAIC,EAAatF,KAAKrF,QACrB0K,GAAUE,EAAAA,GAAmCD,EAAYF,EAAWpF,KAAKuE,sBAC1EvE,KAAKwF,eAAiBxF,KAAKyF,SAAS,aACpCzF,KAAK0F,gBACL1F,KAAK2F,sBACP,EAMA1B,EAAe9D,UAAUyF,YAAc,SAAUC,GAC/C,IAAIvB,EAAYtE,KAAKsE,UACrBuB,EAAyBhC,EAAAA,KAAYgC,EAAwB7F,MAC7DA,KAAK6E,kBAAoBU,EAAAA,GAAoCvF,KAAKrF,OAAOmL,WAAYxB,EAAWuB,GAChG7F,KAAK4E,cAAgBW,EAAAA,GAAoCvF,KAAKrF,OAAOoL,OAAQzB,EAAWuB,EAC1F,EAMA5B,EAAe9D,UAAU6F,cAAgB,WACvC,OAAO,IACT,EAOA/B,EAAe9D,UAAU8F,uBAAyB,WAChD,IAAIC,EAAoBlG,KAAKrF,OAAOwL,YAChCC,EAAgB,GAUpB,OARyB,MAArBF,GAAmD,QAAtBA,EAC/BlG,KAAKiF,QAAQoB,YAAW,SAAUC,EAAa1E,GAC7CwE,EAAc9M,KAAKsI,EACrB,IAEAwE,EAAgBG,EAAAA,GAA2BL,GAGtCE,CACT,EAMAnC,EAAe9D,UAAUqG,iBAAmB,SAAUC,EAAUC,GAC9D7C,EAAAA,KAAY7D,KAAKiG,0BAA0B,SAAUE,GACnD,IAAIG,EAActG,KAAKiF,QAAQ0B,iBAAiBR,GAE5CG,GACFG,EAASG,KAAKF,EAASJ,EAE3B,GAAGtG,KACL,EAMAiE,EAAe9D,UAAU0G,eAAiB,SAAUP,GAClD,IAAIQ,GAAK,EAIT,OAHA9G,KAAKwG,kBAAiB,SAAU3G,GAC9BA,IAAUyG,IAAgBQ,GAAK,EACjC,IACOA,CACT,EAgBA7C,EAAe9D,UAAU4G,gBAAkB,SAAU9P,EAAO+P,EAAYC,GACtE,IAIIC,EAJAvM,EAASqF,KAAKrF,OACdwM,EAAYxM,EAAOwM,UACnBzC,EAAY1E,KAAK0E,UACjB0C,EAAYzM,EAAOyM,UAEvBH,EAAcA,GAAe,CAAC,IAAK,KAE/BpD,EAAAA,QAAe5M,KACjBA,EAAQA,EAAMgF,QACdiL,GAAW,GAGb,IAAIG,EAAYL,EAAa/P,EAC3BiQ,EAAW,CAACI,EAAQrQ,EAAM,IAAKqQ,EAAQrQ,EAAM,KAAOqQ,EAAQrQ,GAE9D,OAAI4M,EAAAA,SAAgBuD,GACXA,EAAUG,QAAQ,UAAWL,EAAWG,EAAU,GAAKA,GAAWE,QAAQ,WAAYL,EAAWG,EAAU,GAAKA,GAC9GxD,EAAAA,WAAkBuD,GACpBF,EAAWE,EAAUnQ,EAAM,GAAIA,EAAM,IAAMmQ,EAAUnQ,GAG1DiQ,EACEjQ,EAAM,KAAOyN,EAAU,GAClBuC,EAAY,GAAK,IAAMI,EAAU,GAC/BpQ,EAAM,KAAOyN,EAAU,GACzBuC,EAAY,GAAK,IAAMI,EAAU,GAEjCA,EAAU,GAAK,MAAQA,EAAU,GAInCA,EAGT,SAASC,EAAQxO,GACf,OAAOA,IAAQ4L,EAAU,GAAK,MAAQ5L,IAAQ4L,EAAU,GAAK,QAAU5L,GAAKwO,QAAQE,KAAKC,IAAIN,EAAW,IAC1G,CACF,EAMAlD,EAAe9D,UAAUuH,YAAc,WACrC,IAAIpC,EAAatF,KAAKrF,OAIlBgN,EAAS7D,EAAI,CAACwB,EAAWmC,IAAKnC,EAAWsC,MAC7C5H,KAAK6H,YAAcF,CACrB,EAuBA1D,EAAe9D,UAAU2H,sBAAwB,SAAUnR,GACzD,IAAIoR,EAAS/H,KAAKrF,OAAO2G,UAEzB,GAAc,MAAVyG,EACF,OAAOpR,EAAKqR,kBAAkBD,GAKhC,IAFA,IAAIE,EAAWtR,EAAKuR,WAEXjG,EAAIgG,EAASjR,OAAS,EAAGiL,GAAK,EAAGA,IAAK,CAC7C,IAAIkG,EAAUF,EAAShG,GACnBtK,EAAUhB,EAAKiB,iBAAiBuQ,GAEpC,IAAKxQ,EAAQyQ,mBACX,OAAOzQ,EAAQ0Q,aAEnB,CACF,EAEApE,EAAe9D,UAAUmI,UAAY,WACnC,OAAOtI,KAAK6H,YAAY5L,OAC1B,EAEAgI,EAAe9D,UAAUwF,qBAAuB,WAC9C,IAAIV,EAAUjF,KAAKiF,QACfK,EAAatF,KAAKrF,OAClB4N,EAAO,CACTC,QAASlD,EAAWkD,QACpBC,WAAYnD,EAAWmD,YAErB1C,EAAST,EAAWS,SAAWT,EAAWS,OAAS,CAAC,GACpDD,EAAaR,EAAWQ,aAAeR,EAAWQ,WAAa,CAAC,GACpEjC,EAAAA,MAAakC,EAAQwC,GAErB1E,EAAAA,MAAaiC,EAAYyC,GAEzB,IAAIvB,EAAahH,KAAKgH,aAOtB,SAAS0B,EAAeH,GAKlBnR,EAAQkO,EAAWzL,SAEnB0O,EAAKC,UACPD,EAAKC,QAAU,CACb3O,MAAOyL,EAAWzL,MAAMoC,QAAQU,YAUpC4L,EAAKC,QAAUD,EAAKC,SAAW,CAC7B3O,MAAOoL,EAAQnF,IAAI,iBAEvB,CAEA,SAAS6I,EAAiBJ,EAAMK,EAAYC,GAC1C,IAAIC,EAAWP,EAAKK,GAChBG,EAAYR,EAAKM,GAEjBC,IAAaC,IACfA,EAAYR,EAAKM,GAAe,CAAC,EACjCtP,EAAKuP,GAAU,SAAUE,EAAYC,GACnC,GAAKtF,EAAAA,EAAAA,YAA0BsF,GAA/B,CAIA,IAAIC,EAAOC,EAAAA,EAAAA,IAAkBF,EAAY,WAAYjC,GAEzC,MAARkC,IACFH,EAAUE,GAAcC,EAIL,UAAfD,GAA2BF,EAAUK,eAAe,YAAeL,EAAUK,eAAe,gBAC9FL,EAAUM,QAAU,CAAC,EAAG,IAV5B,CAaF,IAEJ,CAEA,SAASC,EAAmBxD,GAC1B,IAAIyD,GAAgBzD,EAAW0C,SAAW,CAAC,GAAGgB,SAAW1D,EAAW2C,YAAc,CAAC,GAAGe,OAClFC,GAAoB3D,EAAW0C,SAAW,CAAC,GAAGkB,aAAe5D,EAAW2C,YAAc,CAAC,GAAGiB,WAC1FC,EAAgB3J,KAAKF,IAAI,iBACzB8J,EAAa5J,KAAKgG,gBAClB6D,EAAgBD,GAAc,YAClCrQ,EAAKyG,KAAKsE,WAAW,SAAUwF,GAC7B,IAAIC,EAAW/J,KAAK+J,SAChBC,EAAUlE,EAAWgE,GAGpBE,IACHA,EAAUlE,EAAWgE,GAAS,CAC5BjQ,MAAOmN,EAAa2C,EAAgB,CAACA,KAKnB,MAAlBK,EAAQR,SACVQ,EAAQR,OAASD,GAAgB1F,EAAAA,MAAa0F,KAAkBvC,EAAa6C,EAAgB,CAACA,KAGtE,MAAtBG,EAAQN,aACVM,EAAQN,WAAaD,GAAoB5F,EAAAA,MAAa4F,KAAsBzC,EAAa+C,EAAS,GAAK,CAACA,EAAS,GAAIA,EAAS,MAIhIC,EAAQR,OAAS9F,EAAUsG,EAAQR,QAAQ,SAAUA,GACnD,MAAkB,SAAXA,EAAoBK,EAAgBL,CAC7C,IAEA,IAAIE,EAAaM,EAAQN,WAEzB,GAAkB,MAAdA,EAAoB,CACtB,IAAIO,GAAStF,IAEbf,EAAW8F,GAAY,SAAUzS,GAC/BA,EAAQgT,IAAUA,EAAQhT,EAC5B,IACA+S,EAAQN,WAAahG,EAAUgG,GAAY,SAAUzS,GACnD,OAAO+M,EAAU/M,EAAO,CAAC,EAAGgT,GAAQ,CAAC,EAAGF,EAAS,KAAK,EACxD,GACF,CACF,GAAG/J,KACL,CApGA0I,EAAe9B,KAAK5G,KAAM+F,GAC1B2C,EAAe9B,KAAK5G,KAAM8F,GAC1B6C,EAAiB/B,KAAK5G,KAAM+F,EAAQ,UAAW,cAE/CuD,EAAmB1C,KAAK5G,KAAM8F,EAiGhC,EAEA7B,EAAe9D,UAAUuF,cAAgB,WACvC1F,KAAK+J,SAAW,CAACG,WAAWlK,KAAKF,IAAI,cAAeoK,WAAWlK,KAAKF,IAAI,eAC1E,EAEAmE,EAAe9D,UAAU6G,WAAa,WACpC,QAAShH,KAAKrF,OAAOwP,UACvB,EAOAlG,EAAe9D,UAAUiK,YAAc,SAAUC,GAAW,EAE5DpG,EAAe9D,UAAUmK,YAAc,WACrC,OAAO,IACT,EAOArG,EAAe9D,UAAUoK,cAAgB,SAAUtT,GACjD,OAAO,IACT,EAkBAgN,EAAe9D,UAAUqK,cAAgB,SAAUC,GACjD,OAAO,IACT,EAEAxG,EAAepM,KAAO,YACtBoM,EAAeyG,aAAe,CAAC,UAC/BzG,EAAe0G,cAAgB,CAC7BC,MAAM,EAENC,EAAG,EACH1E,YAAa,MACbsB,IAAK,EACLG,IAAK,IACLkD,KAAM,EACNC,MAAO,KACPC,IAAK,KACLC,OAAQ,EACRC,UAAW,KACXC,WAAY,KACZC,SAAS,EACTC,OAAQ,WACRC,gBAAiB,gBACjBC,YAAa,OACbC,aAAc,UACd7B,cAAe,OACf8B,YAAa,EACblM,QAAS,EAETmM,QAAS,GACTvE,UAAW,EACXzN,UAAW,CACTG,MAAO,SAIJoK,CACT,CA5ZA,CA4ZE0H,EAAAA,GAEF,Q,yGCvaIC,EAEJ,SAAU1H,GAGR,SAAS0H,IACP,IAAIzH,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMpE,KAAMqE,YAAcrE,KAShE,OAPAmE,EAAMtM,KAAO+T,EAAc/T,KAC3BsM,EAAM0H,mBAAqB,CACzBf,KAAM,EACNC,MAAO,EACPC,IAAK,EACLC,OAAQ,GAEH9G,CACT,CA0GA,OAvHAW,EAAAA,EAAAA,IAAU8G,EAAe1H,GAezB0H,EAAczL,UAAU4E,KAAO,SAAUE,EAAS6G,GAChD9L,KAAKiF,QAAUA,EACfjF,KAAK8L,IAAMA,CACb,EAMAF,EAAczL,UAAU4L,OAAS,SAAUC,EAAgB/G,EAAS6G,EAAKG,GAEvEjM,KAAKgM,eAAiBA,GAEa,IAA/BA,EAAelM,IAAI,QAKvBE,KAAKkM,SAASF,EAAgB/G,EAAS6G,EAAKG,GAJ1CjM,KAAKmM,MAAMC,WAKf,EAMAR,EAAczL,UAAUkM,iBAAmB,SAAUF,GACnD,IAAIH,EAAiBhM,KAAKgM,eACtBzM,EAAU+M,EAAAA,GAA6BN,EAAelM,IAAI,YAAc,GACxEyM,EAAOJ,EAAMK,kBACjBL,EAAMM,IAAI,IAAIC,EAAAA,EAAK,CACjBC,IAAK,EACLC,QAAQ,EACRC,MAAO,CACLC,EAAGP,EAAKO,EAAIvN,EAAQ,GACpBwN,EAAGR,EAAKQ,EAAIxN,EAAQ,GACpByN,MAAOT,EAAKS,MAAQzN,EAAQ,GAAKA,EAAQ,GACzC0N,OAAQV,EAAKU,OAAS1N,EAAQ,GAAKA,EAAQ,IAE7CV,MAAO,CACLtE,KAAMyR,EAAelM,IAAI,mBACzBoN,OAAQlB,EAAelM,IAAI,eAC3BqN,UAAWnB,EAAelM,IAAI,kBAGpC,EAYA8L,EAAczL,UAAUiN,oBAAsB,SAAUC,EAAaC,EAAeC,GAClFA,EAAOA,GAAQ,CAAC,EAChB,IAAIC,EAAaD,EAAKC,WAClBxB,EAAiBhM,KAAKgM,eACtByB,EAAY,CAAC,EAEjB,GAAsB,UAAlBH,EAA2B,CAC7B,IAAII,EAAe1B,EAAelM,IAAI,gBACtC2N,EAAU5T,MAAQ6T,CACpB,CAEA,SAASC,EAAOC,GACd,OAAOH,EAAUG,EACnB,CAEA,SAASC,EAAOD,EAAK3W,GACnBwW,EAAUG,GAAO3W,CACnB,CAEA,IAAI6W,EAAW9B,EAAenH,kBAAkB2I,GAAcxB,EAAezB,cAAc8C,IACvFU,EAAcpK,EAAAA,EAAAA,mBAAiCmK,GAanD,OAZAjK,EAAAA,KAAYkK,GAAa,SAAUlW,GACjC,IAAImW,EAAgBF,EAASjW,GAEzB0V,EAAKU,uBAAkC,YAATpW,IAChCA,EAAO,aACPmW,EAAgBF,EAASI,mBAGvBvK,EAAAA,EAAAA,UAAwB9L,EAAMyV,IAChCU,GAAiBA,EAAcG,YAAYd,EAAaM,EAAQE,EAEpE,IACOJ,EAAUH,EACnB,EAEA1B,EAAczL,UAAUiO,cAAgB,SAAUjC,GAChD,IAAItM,EAAQG,KAAKgM,eACbF,EAAM9L,KAAK8L,IACfuC,EAAAA,GAAuBlC,EAAOtM,EAAMyO,qBAAsB,CACxDtB,MAAOlB,EAAIyC,WACXtB,OAAQnB,EAAI0C,aAEhB,EAEA5C,EAAczL,UAAU+L,SAAW,SAAUF,EAAgB/G,EAAS6G,EAAKG,GAAU,EAErFL,EAAc/T,KAAO,YACd+T,CACT,CAzHA,CAyHE6C,EAAAA,GAEF,Q,wGCnIIC,EAAY,CAAC,CAAC,OAAQ,QAAS,SAAU,CAAC,MAAO,SAAU,WAQxD,SAASC,EAAa3C,EAAgBF,EAAK/B,GAChD,IAAI6E,EAAc5C,EAAerR,OAC7BkU,EAAYD,EAAYpP,MAE5B,GAAiB,MAAbqP,GAAmC,SAAdA,EACvB,OAAOA,EAaT,IATA,IAAIC,EAAS,CACX9B,MAAOlB,EAAIyC,WACXtB,OAAQnB,EAAI0C,aAEVO,EAAmC,eAAvBH,EAAYvD,OAA0B,EAAI,EACtD2D,EAAQN,EAAUK,GAClBE,EAAY,CAAC,EAAG,KAAM,IACtBC,EAAc,CAAC,EAEVjN,EAAI,EAAGA,EAAI,EAAGA,IACrBiN,EAAYR,EAAU,EAAIK,GAAW9M,IAAMgN,EAAUhN,GACrDiN,EAAYF,EAAM/M,IAAY,IAANA,EAAU8H,EAAS,GAAK6E,EAAYI,EAAM/M,IAGpE,IAAIkN,EAAS,CAAC,CAAC,IAAK,QAAS,GAAI,CAAC,IAAK,SAAU,IAAIJ,GACjDxC,GAAO6C,EAAAA,EAAAA,IAAcF,EAAaJ,EAAQF,EAAYrP,SAC1D,OAAOyP,GAAOzC,EAAK8C,OAAOF,EAAO,KAAO,GAAK5C,EAAK4C,EAAO,IAAwB,GAAlB5C,EAAK4C,EAAO,IAAgC,GAApBL,EAAOK,EAAO,IAAY,EAAI,EACvH,CAOO,SAASG,EAAkBC,EAAOvD,GASvC,OARAnI,EAAAA,KAAY0L,GAAS,IAAI,SAAUC,GACN,MAAvBA,EAAU/Y,YACZ+Y,EAAUC,gBAAkBD,EAAU/Y,UACtC+Y,EAAU/Y,UAAY,MAGxB+Y,EAAUE,aAAe,aAAe1D,EAAiBA,EAAe2D,eAAiB,GAC3F,IACOJ,CACT,C,4FCpDO,SAAShM,EAAQC,IACtB,OAAI,MACJ,OAAI,IAEN,C,wDCLO,IAAIoM,EAAsB,CAC/B/X,KAAM,kBACNgY,MAAO,oBAEPC,OAAQ,UAECC,EAAwB,SAAU9D,EAAShH,GACpDA,EAAQ+K,cAAc,CACpBC,SAAU,YACVC,MAAOjE,IACN,SAAUpM,GACXA,EAAMuK,YAAY6B,EAAQ5B,SAC5B,GACF,E,sDCTW8F,EAA4B,CAAC,CACtCC,mBAAmB,EACnBC,MAAO,SAAU/J,EAAarB,GAC5B,IAAIqL,EAAe,GAUnB,OATArL,EAAQ+K,cAAc,aAAa,SAAUhE,GAC3C,IAAIuE,EAAkBjK,EAAYiK,iBAE7BvE,EAAenF,eAAeP,IAAgBiK,GAAmBA,EAAgBC,OAItFF,EAAahX,KAAKiM,EAAAA,GAAsCyG,EAAe1H,UAAW0H,EAAepH,cAAef,EAAAA,KAAYmI,EAAezB,cAAeyB,GAAiBA,EAAelE,sBAAsBxB,EAAY1P,YAC9N,IACO0Z,CACT,GAEF,CACEF,mBAAmB,EACnBC,MAAO,SAAU/J,EAAarB,GAC5B,IAAItO,EAAO2P,EAAY1P,UACnB6Z,EAAiB,GACrBxL,EAAQ+K,cAAc,aAAa,SAAUhE,GAC3C,GAAIA,EAAenF,eAAeP,GAAc,CAC9C,IAAIoK,EAAa1E,EAAexB,cAAc3G,EAAAA,KAAY4G,EAAgB,KAAMnE,EAAa0F,KAAoB,CAC/G2E,MAAO,GACPC,YAAa,IAEXjP,EAASqK,EAAelE,sBAAsBnR,GAE9CgL,GAAU,IAEZ+O,EAAWpP,UAAYK,EACvB8O,EAAenX,KAAKoX,GAExB,CACF,IAEApK,EAAY1P,UAAUia,UAAU,aAAcJ,EAChD,IAKF,SAAShG,EAAenE,EAAa0F,EAAgB/U,EAAO6Z,GAQ1D,IAPA,IAAIhD,EAAW9B,EAAepH,cAAckM,GACxC/C,EAAcpK,EAAAA,EAAAA,mBAAiCmK,GAC/CiD,EAAe,CACjBlX,OAAOmX,EAAAA,EAAAA,IAAkB1K,EAAY1P,UAAW,UAIzCqL,EAAI,EAAGC,EAAM6L,EAAY/W,OAAQiL,EAAIC,EAAKD,IAAK,CACtD,IAAIpK,EAAOkW,EAAY9L,GACnBgP,EAAUnD,EAAkB,YAATjW,EAAqB,oBAAsBA,GAClEoZ,GAAWA,EAAQ9C,YAAYlX,EAAOia,EAAWL,EACnD,CAEA,OAAOE,EAAalX,MAEpB,SAASqX,EAAUtD,GACjB,OAAOmD,EAAanD,EACtB,CAEA,SAASiD,EAAUjD,EAAK3W,GACtB8Z,EAAanD,GAAO3W,CACtB,CACF,CCpEA,IAAIsC,EAAOsK,EAAAA,KACI,SAASsN,EAAsBxW,GAC5C,IAAIyW,EAAYzW,GAAUA,EAAOyW,UAE5BvN,EAAAA,QAAeuN,KAClBA,EAAYA,EAAY,CAACA,GAAa,IAGxC7X,EAAK6X,GAAW,SAAUjb,GACxB,GAAKA,EAAL,CAKIkb,EAAIlb,EAAK,eAAiBkb,EAAIlb,EAAK,YACrCA,EAAImb,OAASnb,EAAIob,iBACVpb,EAAIob,WAGb,IAAID,EAASnb,EAAImb,OAEbA,GAAUzN,EAAAA,QAAeyN,IAC3B/X,EAAK+X,GAAQ,SAAUE,GACjB3N,EAAAA,SAAgB2N,KACdH,EAAIG,EAAO,WAAaH,EAAIG,EAAO,SACrCA,EAAM/J,IAAM+J,EAAMC,OAGhBJ,EAAIG,EAAO,SAAWH,EAAIG,EAAO,SACnCA,EAAM5J,IAAM4J,EAAME,KAGxB,GArBF,CAuBF,GACF,CAEA,SAASL,EAAIM,EAAK3Z,GAChB,OAAO2Z,GAAOA,EAAIvI,gBAAkBuI,EAAIvI,eAAepR,EACzD,CCvCA,IAAI4Z,GAAY,EACD,SAASC,EAAcrO,GAChCoO,IAGJA,GAAY,EACZpO,EAAUsO,yBAAyB,aAAa,SAAUnX,GAExD,OAAQA,EAAOwP,aAAiBxP,EAAO2W,OAAS3W,EAAO2W,OAAOta,OAAS,EAAI2D,EAAOoX,YAAc,KAAMpX,EAAOqX,WAA6B,YAAf,YAC7H,IACAxO,EAAUyO,eAAerC,EAAqBG,IAC9C,IAAAxW,MAAK4W,GAA2B,SAAU+B,GACxC1O,EAAU2O,eAAe3O,EAAU4O,SAASC,OAAOC,UAAWJ,EAChE,IACA1O,EAAU+O,qBAAqB,GACjC,C,qICXIC,EAAoB,CAAC,GAAI,KACzBC,EACJ,SAAUvO,GAER,SAASuO,IACP,IAAItO,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMpE,KAAMqE,YAAcrE,KAEhE,OADAmE,EAAMtM,KAAO4a,EAAgB5a,KACtBsM,CACT,CAyLA,OA9LA,QAAUsO,EAAiBvO,GAU3BuO,EAAgBtS,UAAUgF,cAAgB,SAAUC,EAAWC,GAC7DnB,EAAO/D,UAAUgF,cAAcf,MAAMpE,KAAMqE,WAC3CrE,KAAK0H,cACL1H,KAAK4F,aAAY,SAAU8M,GACzBA,EAAcC,cAAgB,SAC9BD,EAAcE,WAAa5S,KAAKsI,WAClC,IACAtI,KAAK6S,aACP,EAMAJ,EAAgBtS,UAAUuF,cAAgB,WACxCxB,EAAO/D,UAAUuF,cAActB,MAAMpE,KAAMqE,WAC3C,IAAI0F,EAAW/J,KAAK+J,UACJ,MAAfA,EAAS,IAAc+I,MAAM/I,EAAS,OAASA,EAAS,GAAKyI,EAAkB,KAChE,MAAfzI,EAAS,IAAc+I,MAAM/I,EAAS,OAASA,EAAS,GAAKyI,EAAkB,GAClF,EAKAC,EAAgBtS,UAAU0S,YAAc,WACtC,IAAID,EAAa5S,KAAKsI,YAClByK,EAAQ/S,KAAKrF,OAAOoY,OACnBA,GAASA,EAAMC,MAGlBJ,EAAWI,KAAO,EAClBhT,KAAKrF,OAAOoY,MAAQH,GACX,UAAeG,KACpBA,EAAM,GAAKA,EAAM,IACnBA,EAAMpW,UAERoW,EAAM,GAAKvL,KAAKI,IAAImL,EAAM,GAAIH,EAAW,IACzCG,EAAM,GAAKvL,KAAKC,IAAIsL,EAAM,GAAIH,EAAW,IAE7C,EAMAH,EAAgBtS,UAAUwF,qBAAuB,WAC/CzB,EAAO/D,UAAUwF,qBAAqBvB,MAAMpE,KAAMqE,WAClD,OAAYrE,KAAKsE,WAAW,SAAUwF,GACpC,IAAIJ,EAAa1J,KAAKrF,OAAOmL,WAAWgE,GAAOJ,WAC3CA,GAAcA,EAAW,KAAOA,EAAW,KAC7CA,EAAW,GAAKA,EAAW,GAAK,EAEpC,GAAG1J,KACL,EAKAyS,EAAgBtS,UAAUiK,YAAc,SAAUC,GAChDrK,KAAKrF,OAAOoY,MAAQ1I,EAASpO,QAC7B+D,KAAK6S,aACP,EAKAJ,EAAgBtS,UAAUmK,YAAc,WACtC,IAAIsI,EAAa5S,KAAKsI,YAClB2K,EAAeC,EAAA,IAAgBlT,KAAKF,IAAI,UAAY,IAAI7D,SAM5D,OAJAgX,EAAa,GAAKL,EAAW,KAAOK,EAAa,GAAKL,EAAW,IACjEK,EAAa,GAAKL,EAAW,KAAOK,EAAa,GAAKL,EAAW,IACjEK,EAAa,GAAKL,EAAW,KAAOK,EAAa,GAAKL,EAAW,IACjEK,EAAa,GAAKL,EAAW,KAAOK,EAAa,GAAKL,EAAW,IAC1DK,CACT,EAKAR,EAAgBtS,UAAUoK,cAAgB,SAAUtT,GAClD,IAAI8b,EAAQ/S,KAAKrF,OAAOoY,MACpBH,EAAa5S,KAAKsI,YAGtB,OAAQyK,EAAM,IAAMH,EAAW,IAAMG,EAAM,IAAM9b,KAAW8b,EAAM,IAAMH,EAAW,IAAM3b,GAAS8b,EAAM,IAAM,UAAY,YAC5H,EACAN,EAAgBtS,UAAUgT,sBAAwB,SAAUJ,GAC1D,IAAIzP,EAAS,GAYb,OAXAtD,KAAKwG,kBAAiB,SAAUF,GAC9B,IAAI8M,EAAc,GACdzc,EAAO2P,EAAY1P,UACvBD,EAAK4C,KAAKyG,KAAK8H,sBAAsBnR,IAAO,SAAUM,EAAOR,GAC3Dsc,EAAM,IAAM9b,GAASA,GAAS8b,EAAM,IAAMK,EAAY9Z,KAAK7C,EAC7D,GAAGuJ,MACHsD,EAAOhK,KAAK,CACV+Z,SAAU/M,EAAYgN,GACtB7c,UAAW2c,GAEf,GAAGpT,MACIsD,CACT,EAKAmP,EAAgBtS,UAAUqK,cAAgB,SAAUC,GAClD,IAAI8I,EAAQC,EAAmBxT,KAAM,aAAcA,KAAKsI,aACpDmL,EAAQD,EAAmBxT,KAAM,UAAWA,KAAKrF,OAAOoY,MAAM9W,SAC9D0U,EAAQ,GACZ,SAAS+C,EAAQzc,EAAO6Z,GACtBH,EAAMrX,KAAK,CACTrC,MAAOA,EACP4C,MAAO4Q,EAAexT,EAAO6Z,IAEjC,CAMA,IAJA,IAAI6C,EAAO,EACPC,EAAO,EACPC,EAAOJ,EAAMzc,OACb8c,EAAOP,EAAMvc,OACV4c,EAAOE,KAAUL,EAAMzc,QAAUuc,EAAMK,IAASH,EAAM,IAAKG,IAE5DL,EAAMK,GAAQH,EAAME,IACtBD,EAAQH,EAAMK,GAAO,cAGzB,IAAK,IAAIG,EAAQ,EAAGJ,EAAOE,EAAMF,IAAQI,EAAQ,EAG/CA,GAASpD,EAAM3Z,QAAU0c,EAAQD,EAAME,GAAO,cAC9CD,EAAQD,EAAME,GAAO,WAEvB,IAASI,EAAQ,EAAGH,EAAOE,EAAMF,MAC1BH,EAAMzc,QAAUyc,EAAMA,EAAMzc,OAAS,GAAKuc,EAAMK,MAE/CG,IACFpD,EAAM3Z,QAAU0c,EAAQ/C,EAAMA,EAAM3Z,OAAS,GAAGC,MAAO,cACvD8c,EAAQ,GAEVL,EAAQH,EAAMK,GAAO,eAGzB,IAAII,EAAWrD,EAAM3Z,OACrB,MAAO,CACL2Z,MAAOA,EACPC,YAAa,CAACoD,EAAWrD,EAAM,GAAG9W,MAAQ,cAAema,EAAWrD,EAAMqD,EAAW,GAAGna,MAAQ,eAEpG,EACA4Y,EAAgB5a,KAAO,uBACvB4a,EAAgB9H,eAAgB,QAAqB1G,EAAA,gBAA8B,CACjFzE,MAAO,OACPwS,YAAY,EACZiC,WAAW,EACXC,UAAU,EACVC,WAAY,6HACZC,WAAY,OACZC,YAAa,CACX9I,YAAa,OACbE,YAAa,GAEf6I,cAAe,SACfC,cAAe,MACfC,eAAgB,CACdjJ,YAAa,OACbE,YAAa,EACbgJ,WAAY,EACZC,cAAe,EACfC,cAAe,EACfC,YAAa,qBAWVnC,CACT,CAhMA,CAgMExO,EAAA,GACF,SAASuP,EAAmBxH,EAAgB8E,EAAY8B,GACtD,GAAIA,EAAW,KAAOA,EAAW,GAC/B,OAAOA,EAAW3W,QAUpB,IAJA,IAAIkG,EAAQ,IACR0S,GAAQjC,EAAW,GAAKA,EAAW,IAAMzQ,EACzClL,EAAQ2b,EAAW,GACnBkC,EAAa,GACR7S,EAAI,EAAGA,GAAKE,GAASlL,EAAQ2b,EAAW,GAAI3Q,IACnD6S,EAAWxb,KAAKrC,GAChBA,GAAS4d,EAGX,OADAC,EAAWxb,KAAKsZ,EAAW,IACpBkC,CACT,CACA,Q,qMC3MI9Q,EAAYkP,EAAA,GACZ3Z,EAAO,OACPwb,EAAUvN,KAAKC,IACfuN,EAAUxN,KAAKI,IAEfqN,EAAkB,GAClBC,EAAiB,EAQjBC,EACJ,SAAUjR,GAER,SAASiR,IACP,IAAIhR,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMpE,KAAMqE,YAAcrE,KAMhE,OALAmE,EAAMtM,KAAOsd,EAAetd,KAC5BsM,EAAMiR,QAAU,CAAC,EACjBjR,EAAMkR,cAAgB,GACtBlR,EAAMmR,YAAc,GACpBnR,EAAMoR,sBAAwB,GACvBpR,CACT,CAgkBA,OAzkBA,QAAUgR,EAAgBjR,GAU1BiR,EAAehV,UAAU+L,SAAW,SAAUF,EAAgB/G,EAAS6G,EAAKG,GAC1EjM,KAAKwV,KAAO1J,EACPG,GAA4B,oBAAjBA,EAAQpU,MAA8BoU,EAAQwJ,OAASzV,KAAK0V,KAC1E1V,KAAK2V,YAET,EACAR,EAAehV,UAAUwV,WAAa,WACpC3V,KAAKmM,MAAMC,YACX,IAAIJ,EAAiBhM,KAAKgM,eACtB4J,EAAY5V,KAAKmM,MACrBnM,KAAK6V,QAAU7J,EAAelM,IAAI,UAClCE,KAAK8V,WAAa9J,EAAelM,IAAI,cACrCE,KAAK+V,iBACL/V,KAAKgW,WAAWJ,GAChB,IAAIK,EAAgBjK,EAAelM,IAAI,QACvCE,KAAKkW,gBAAgBN,EAAWK,EAAe,GAC/CjW,KAAKkW,gBAAgBN,EAAWK,EAAe,GAE/CjW,KAAKmW,aAAY,GAGjBnW,KAAKqM,iBAAiBuJ,GAEtB5V,KAAKmW,cACLnW,KAAKoW,2BACLpW,KAAKqW,6BACLrW,KAAKoO,cAAcwH,EACrB,EACAT,EAAehV,UAAU+V,gBAAkB,SAAU/J,EAAO8J,EAAeK,GACzE,GAAKL,EAAL,CAIA,IAAIxV,EAAOwV,EAAc,EAAIK,GAC7B7V,EAAe,MAARA,EAAeA,EAAO,GAAK,GAClC,IAAIuL,EAAiBhM,KAAKgM,eACtBN,EAAUM,EAAelM,IAAI,WAC7BiK,EAAWiC,EAAejC,SAC1BwM,EAAWvW,KAAKoV,QAAQoB,UACxBC,EAAWzW,KAAK0W,gBAAgB,CAAC3M,EAAS,GAAK,EAAiB,IAAduM,GAAmB5K,EAAU3B,EAAS,GAAK2B,GAAU6K,GACvG/W,EAAQQ,KAAK0W,gBAA8B,IAAdJ,EAAkB,SAAW,MAAOC,GACjElL,EAASrL,KAAK6V,QACdrQ,EAAiBxF,KAAKgM,eAAexG,eACzCxF,KAAKmM,MAAMM,IAAI,IAAI,KAAa,CAC9B5N,OAAO,QAAgB2G,EAAgB,CACrCsH,EAAG2J,EAAS,GACZ1J,EAAG0J,EAAS,GACZE,cAA0B,eAAXtL,EAA0B,SAAW7L,EACpDA,MAAkB,eAAX6L,EAA0B7L,EAAQ,SACzCiB,KAAMA,MAlBV,CAqBF,EACA0U,EAAehV,UAAU6V,WAAa,SAAUY,GAC9C,IAAI5K,EAAiBhM,KAAKgM,eACtB6K,EAAS7W,KAAKoV,QACdrL,EAAWiC,EAAejC,SAC1BsB,EAASrL,KAAK6V,QACdiB,EAAY9W,KAAK8V,WACjBjH,EAAYkI,EAAA,EAAoB/K,EAAgBhM,KAAK8L,IAAK/B,GAC1DyM,EAAYK,EAAOL,UAAYxW,KAAKgX,gBAAgBnI,GACpDoI,EAAmB,IAAI,IAC3BT,EAAU/J,IAAIwK,GAEdA,EAAiBxK,IAAIoK,EAAOpO,WAAayO,KACzCD,EAAiBxK,IAAIoK,EAAOrO,QAAU0O,EAAc,KAAMJ,EAAYK,EAAUnX,KAAK6V,SAAW,KAAM,OAAY7V,KAAKoX,YAAapX,KAAM,OAAO,GAAQ,OAAYA,KAAKoX,YAAapX,KAAM,OAAO,KAEpMiX,EAAiBI,YAAY,IAAI,IAAa,CAC5CxK,MAAO,CACLC,EAAG,EACHC,EAAG,EACHC,MAAOjD,EAAS,GAChBkD,OAAQlD,EAAS,GACjBuN,EAAG,MAGP,IAAIC,EAAWvL,EAAexG,eAAegS,YAAY,KACrDC,EAAWzC,EAAQuC,EAASvK,MAAOuK,EAAStK,QAE5C6J,IACFD,EAAOa,aAAe,GACtBb,EAAOc,aAAe,GACtBd,EAAOe,kBAAoB,GAC3B5X,KAAK6X,cAAc7L,EAAgBwK,EAAW,EAAGzM,EAAU0N,EAAUpM,GACrErL,KAAK6X,cAAc7L,EAAgBwK,EAAW,EAAGzM,EAAU0N,EAAUpM,IAEvErL,KAAK8X,iBAAiB9L,EAAgBwK,EAAWzM,EAAU0N,EAAUpM,GACrEuL,EAAYnK,IAAI+J,EAClB,EACArB,EAAehV,UAAU0X,cAAgB,SAAU7L,EAAgBwK,EAAWuB,EAAahO,EAAU0N,EAAUpM,GAC7G,IAAI2M,EAAU,OAAYhY,KAAKoX,YAAapX,KAAM+X,GAAa,GAC3DE,EAAY,OAAYjY,KAAKoX,YAAapX,KAAM+X,GAAa,GAC7D3D,GAAa,QAAapI,EAAelM,IAAI,cAAeiK,EAAS,IACrEmO,GAAc,QAAalM,EAAelM,IAAI,eAAgBsU,EAAa,GAAIA,EAAa,EAAGA,EAAYA,EAAY,MAAM,GAC7H+D,EAAShB,EAAUnX,KAAK6V,SAC5BqC,EAAYE,KAAK,CACfD,OAAQA,EACRE,WAAW,EACXC,MAAON,EACPO,UAAWN,EACXO,YAAa,SAAqBC,GAChC,KAAeA,EAAE5I,MACnB,IAEFqI,EAAYpL,EAAI/C,EAAS,GAAK,EAC9BmO,EAAYQ,SAAS1M,EAAevG,SAAS,eAAekT,gBAC5DT,EAAYU,SAAS,CACnBC,eAAe,EACfC,aAAa,IAEfZ,EAAYrZ,MAAMsO,WAAa,EAC/B+K,EAAYa,YAAY,YAAYla,MAAQmN,EAAevG,SAAS,CAAC,WAAY,gBAAgBkT,gBACjG,QAAwBT,GAAa,GACrC1B,EAAU/J,IAAIyL,GAKd,IAAI1S,EAAiBxF,KAAKgM,eAAexG,eACrCwT,EAAc,IAAI,KAAa,CACjCb,OAAQA,EACRE,WAAW,EACXC,MAAON,EACPQ,YAAa,SAAqBC,GAEhC,KAAeA,EAAE5I,MACnB,EACA0I,UAAWN,EACXpZ,OAAO,QAAgB2G,EAAgB,CACrCsH,EAAG,EACHC,EAAG,EACHtM,KAAM,OAGVuY,EAAYD,YAAY,QAAQla,MAAQ,CACtCwK,QAAS,IAEX2P,EAAYC,gBAAkB,CAC5BC,SAAU,KAEZlZ,KAAKmM,MAAMM,IAAIuM,GACf,IAAIG,EAAmB,CAAC/E,EAAY,GAChCyC,EAAS7W,KAAKoV,QAClByB,EAAOa,aAAaK,GAAeG,EACnCrB,EAAOe,kBAAkBG,GAAeoB,EACxCtC,EAAOc,aAAaI,GAAeiB,CACrC,EACA7D,EAAehV,UAAU2X,iBAAmB,SAAU9L,EAAgBwK,EAAWzM,EAAU0N,EAAUpM,GACnG,IAAI+N,GAAQ,QAAapN,EAAelM,IAAI,iBAAkBiK,EAAS,IACnEsP,GAAY,QAAarN,EAAelM,IAAI,kBAAmBsZ,EAAQ,GAAIA,EAAQ,EAAGA,EAAOA,EAAO,MAAM,GAC9GC,EAAUjB,KAAK,CACbD,OAAQ,OACRmB,WAAW,EACX1M,QAAQ,EACRE,EAAG/C,EAAS,GAAK,IAEnB,IAAIyK,EAAiBxI,EAAevG,SAAS,kBAAkBkT,eAC/D,GAAIU,aAAqB,KAAS,CAChC,IAAIE,EAAYF,EAAUxa,MAC1Bwa,EAAUX,SAAS,SAAc,CAE/Bc,MAAOD,EAAUC,MACjB1M,EAAGyM,EAAUzM,EACbC,EAAGwM,EAAUxM,EACbC,MAAOuM,EAAUvM,MACjBC,OAAQsM,EAAUtM,QACjBuH,GACL,MACE6E,EAAUX,SAASlE,GAErBgC,EAAU/J,IAAI4M,GACd,IAAI7T,EAAiBxF,KAAKgM,eAAexG,eACrCiU,EAAiB,IAAI,KAAa,CACpC7M,QAAQ,EACR0M,WAAW,EACXza,OAAO,QAAgB2G,EAAgB,CACrCsH,EAAG,EACHC,EAAG,EACHtM,KAAM,OAGVT,KAAKmM,MAAMM,IAAIgN,GACf,IAAIC,EAAsB,EAAa,eAAXrO,EAA0BoM,EAAW,EAAIvC,GAAkBnL,EAAS,GAAK,EAAG,GACpG8M,EAAS7W,KAAKoV,QAClByB,EAAOwC,UAAYA,EACnBxC,EAAO4C,eAAiBA,EACxB5C,EAAO6C,oBAAsBA,EAC7B1Z,KAAK2Z,qBAAsB,CAC7B,EACAxE,EAAehV,UAAUiX,YAAc,SAAUW,EAAa6B,EAE9DC,EAAIC,GACF,GAAK9Z,KAAK8V,WAAV,CAIA,GADA9V,KAAK+Z,WAAaH,GACbA,EAAO,CAEV,IAAII,EAASha,KAAK0W,gBAAgB,CAACmD,EAAIC,GAAK9Z,KAAKoV,QAAQoB,WAAW,GACpExW,KAAKia,gBAAgBlC,EAAaiC,EAAO,IACzCha,KAAKka,iBAGLla,KAAKmW,aACP,CAEIyD,KAAW5Z,KAAKgM,eAAelM,IAAI,aAErCE,KAAK8L,IAAIqO,eAAe,CACtBtiB,KAAM,kBACN4d,KAAMzV,KAAK0V,IACX0E,YAAapa,KAAKgM,eAAesH,GACjCjJ,SAAUrK,KAAKqV,cAAcpZ,UAG7B2d,GACD5Z,KAAKqa,WAAara,KAAKsa,0BACfC,EAAqBva,KAAKgM,iBACnChM,KAAKwa,qBAAqBxa,KAAKsV,YAAYyC,IAAc,EAxB3D,CA0BF,EACA5C,EAAehV,UAAU4V,eAAiB,WACxC,IAAI/J,EAAiBhM,KAAKgM,eACtBiH,EAAejT,KAAKqV,cAAgBrJ,EAAe1B,cACnDsI,EAAa5G,EAAe1D,YAC5BmS,EAAa,CAAC,EAAGzO,EAAejC,SAAS,IAC7C/J,KAAKsV,YAAc,CAACtR,EAAUiP,EAAa,GAAIL,EAAY6H,GAAY,GAAOzW,EAAUiP,EAAa,GAAIL,EAAY6H,GAAY,GACnI,EAQAtF,EAAehV,UAAU8Z,gBAAkB,SAAUlC,EAAa2C,GAChEA,EAAQA,GAAS,EACjB,IAAI1O,EAAiBhM,KAAKgM,eACtB2O,EAAa3a,KAAKsV,YAClBmF,EAAa,CAAC,EAAGzO,EAAejC,SAAS,KAC7C,EAAA6Q,EAAA,GAAWF,EAAOC,EAAYF,EAAY1C,EAE1C,GACA,IAAInF,EAAa5G,EAAe1D,YAEhCtI,KAAKqV,cAAgB,CAACrR,EAAU2W,EAAW,GAAIF,EAAY7H,GAAY,GAAO5O,EAAU2W,EAAW,GAAIF,EAAY7H,GAAY,GACjI,EACAuC,EAAehV,UAAUgW,YAAc,SAAU0E,GAC/C,IAAI7O,EAAiBhM,KAAKgM,eACtB4G,EAAa5G,EAAe1D,YAC5BuO,EAAS7W,KAAKoV,QACd0F,EAAuB,CAAC,EAAG9O,EAAejC,SAAS,IACnDgR,EAAoBF,EAAYC,EAAuB9a,KAAKsV,YAC5D0F,EAAgBhb,KAAKib,iBAAiBjb,KAAKqV,cAAezC,EAAYmI,EAAmB,WACzFG,EAAmBlb,KAAKib,iBAAiBrI,EAAYA,EAAYkI,EAAsB,cAC3FjE,EAAOrO,QAAQoQ,SAAS,CACtBre,KAAMygB,EAAcG,WACnBC,SAAS,SAAUJ,EAAcK,WACpCxE,EAAOpO,WAAWmQ,SAAS,CACzBre,KAAM2gB,EAAiBC,WACtBC,SAAS,SAAUF,EAAiBG,WACvCrb,KAAKsb,cAAcP,EAAmBC,EACxC,EACA7F,EAAehV,UAAU8a,iBAAmB,SAAUhI,EAAcL,EAAY+H,EAAYnN,GAC1F,IAAID,EAAO,CACTC,WAAYA,EACZS,uBAAuB,GAErBsN,EAAavb,KAAKwb,mBAAmBvI,EAAc1F,GACnDkO,EAAc,CAACzb,KAAKoN,oBAAoB6F,EAAa,GAAI,aAAc1F,GAAOvN,KAAKoN,oBAAoB6F,EAAa,GAAI,aAAc1F,IACtI8N,EAAYrb,KAAK0b,iBAAiBf,EAAYc,GAClD,MAAO,CACLN,SAAU,IAAIQ,EAAA,EAAe,EAAG,EAAG,EAAG,EAAGJ,GACzCF,UAAWA,EACXO,aAAc,CAACL,EAAW,GAAG1hB,MAAO0hB,EAAWA,EAAWvkB,OAAS,GAAG6C,OAE1E,EACAsb,EAAehV,UAAUqb,mBAAqB,SAAUvI,EAAc1F,GAIpE,IAAIsO,EAAe,IAEfN,EAAa,GACb1G,GAAQ5B,EAAa,GAAKA,EAAa,IAAM4I,EACjDN,EAAWjiB,KAAK,CACdO,MAAOmG,KAAKoN,oBAAoB6F,EAAa,GAAI,QAAS1F,GAC1DuO,OAAQ,IAEV,IAAK,IAAI7Z,EAAI,EAAGA,EAAI4Z,EAAc5Z,IAAK,CACrC,IAAI8Z,EAAY9I,EAAa,GAAK4B,EAAO5S,EACzC,GAAI8Z,EAAY9I,EAAa,GAC3B,MAEFsI,EAAWjiB,KAAK,CACdO,MAAOmG,KAAKoN,oBAAoB2O,EAAW,QAASxO,GACpDuO,OAAQ7Z,EAAI4Z,GAEhB,CAKA,OAJAN,EAAWjiB,KAAK,CACdO,MAAOmG,KAAKoN,oBAAoB6F,EAAa,GAAI,QAAS1F,GAC1DuO,OAAQ,IAEHP,CACT,EACApG,EAAehV,UAAUub,iBAAmB,SAAUf,EAAYc,GAChE,IAAI1R,EAAW/J,KAAKgM,eAAejC,SACnC,MAAO,CAAC,CAACA,EAAS,GAAK0R,EAAY,GAAId,EAAW,IAAK,CAAC5Q,EAAS,GAAI4Q,EAAW,IAAK,CAAC5Q,EAAS,GAAI4Q,EAAW,IAAK,CAAC5Q,EAAS,GAAK0R,EAAY,GAAId,EAAW,IAC/J,EACAxF,EAAehV,UAAU6W,gBAAkB,SAAUnI,GACnD,IAAIxD,EAASrL,KAAK6V,QACdzK,EAAUpL,KAAKgM,eAAelM,IAAI,WACtC,OAAO,IAAI,IAAyB,eAAXuL,GAA4BD,EAGtC,eAAXC,GAA2BD,EAAU,CACvC4Q,OAAsB,WAAdnN,GAA0B,EAAI,EACtCoN,UAAWzU,KAAK0U,GAAK,GACR,aAAX7Q,GAA0BD,EAG1B,CACF4Q,OAAsB,SAAdnN,EAAuB,GAAK,GAJE,CACtCmN,OAAsB,SAAdnN,EAAuB,GAAK,EACpCsN,QAAS,GARoD,CAC7DH,OAAsB,WAAdnN,EAAyB,GAAK,EACtCoN,SAAUzU,KAAK0U,GAAK,GAUxB,EACA/G,EAAehV,UAAUmb,cAAgB,SAAUX,EAAYK,GAC7D,GAAKhb,KAAK8V,WAAV,CAGA,IAAIe,EAAS7W,KAAKoV,QACdpJ,EAAiBhM,KAAKgM,eACtB0L,EAAeb,EAAOa,aACtBC,EAAed,EAAOc,aACtB5N,EAAWiC,EAAejC,SAC1B6I,EAAa5G,EAAe1D,YAChC/O,EAAK,CAAC,EAAG,IAAI,SAAUwe,GACrB,IAAIG,EAAcR,EAAaK,GAC/BG,EAAYU,SAAS,OAAQoC,EAAcY,aAAa7D,IACxDG,EAAYnL,EAAI4N,EAAW5C,GAC3B,IAAIjf,EAAMkL,EAAU2W,EAAW5C,GAAc,CAAC,EAAGhO,EAAS,IAAK6I,GAAY,GACvElJ,EAAa1J,KAAKoN,oBAAoBtU,EAAK,cAC/Cof,EAAY8D,OAAS9D,EAAYiE,OAASzS,EAAaK,EAAS,GAChEmO,EAAYpL,EAAI/C,EAAS,GAAKL,EAAa,EAE3C,IAAI0S,EAAYC,EAAQC,eAAezF,EAAOe,kBAAkBG,GAAcsE,EAAQE,aAAarE,EAAalY,KAAKmM,QACrHwL,EAAaI,GAAaa,SAAS,CACjC9L,EAAGsP,EAAU,GACbrP,EAAGqP,EAAU,GACb3b,KAAMuL,EAAejF,gBAAgB/G,KAAKqV,cAAc0C,IACxDpB,cAAe,SACfnX,MAAwB,aAAjBQ,KAAK6V,QAAyB7V,KAAK0W,gBAAgB,OAAQG,EAAOL,WAAa,UAE1F,GAAGxW,KAxBH,CAyBF,EACAmV,EAAehV,UAAUqc,eAAiB,SAAUC,EAAapV,EAAWqV,EAAaC,GACvF,IAAI3Q,EAAiBhM,KAAKgM,eACtB4G,EAAa5G,EAAe1D,YAC5ByB,EAAWiC,EAAejC,SAC1B0Q,EAAa,CAAC,EAAG1Q,EAAS,IAC1B8M,EAAS7W,KAAKoV,QACdiE,EAAYxC,EAAOwC,UACvB,GAAKA,EAAL,CAGAA,EAAUjB,KAAK,aAAa,GAC5B,IAAI7K,EAAO,CACTU,uBAAuB,GAErBpU,EAAQmG,KAAKoN,oBAAoBqP,EAAa,QAASlP,GACvD7D,EAAa1J,KAAKoN,oBAAoBqP,EAAa,cACnD1P,EAAI/I,EAAUyY,EAAa7J,EAAY6H,GAAY,GACnD3N,EAAI/C,EAAS,GAAKL,EAAa,EAC/BkT,EAAkB,CACpB9P,EAAGuM,EAAUvM,EACbC,EAAGsM,EAAUtM,GAGfsM,EAAUtM,EAAIA,EACdsM,EAAUvM,EAAIA,EACd,IAAIsP,EAAYC,EAAQC,eAAezF,EAAO6C,oBAAqB2C,EAAQE,aAAalD,EAAWrZ,KAAKmM,QACpGsN,EAAiB5C,EAAO4C,eAC5BA,EAAerB,KAAK,aAAa,GACjC,IAAI5Y,EAAQQ,KAAK0W,gBAAgB,OAAQG,EAAOL,WAC5CnL,EAASrL,KAAK6V,QACdgH,EAA0B,eAAXxR,EACnBoO,EAAeb,SAAS,CACtBnY,MAAOic,GAA4B,IAAM1Q,EAAejF,gBAAgBM,GACxEsP,cAAekG,EAAerd,EAAQ,SACtCA,MAAOqd,EAAe,SAAWrd,IAEnC,IAAIsd,EAAoB,CACtBhQ,EAAGA,EACHC,EAAGA,EACHlO,MAAO,CACLtE,KAAMV,IAGNkjB,EAAgB,CAClBle,MAAO,CACLiO,EAAGsP,EAAU,GACbrP,EAAGqP,EAAU,KAGjB,GAAIpQ,EAAe/G,QAAQ+X,uBAAyBhd,KAAK2Z,oBAAqB,CAC5E,IAAIsD,EAAe,CACjB/D,SAAU,IACVgE,OAAQ,aACRC,UAAU,GAEZ9D,EAAUvM,EAAI8P,EAAgB9P,EAC9BuM,EAAUtM,EAAI6P,EAAgB7P,EAC9BsM,EAAU+D,UAAUN,EAAmBG,GACvCxD,EAAe2D,UAAUL,EAAeE,EAC1C,MACE5D,EAAUjB,KAAK0E,GACfrD,EAAerB,KAAK2E,GAEtB/c,KAAK2Z,qBAAsB,EAC3B,IAAIhC,EAAe3X,KAAKoV,QAAQuC,aAChC,GAAIA,EACF,IAAK,IAAI1V,EAAI,EAAGA,EAAI0V,EAAa3gB,OAAQiL,IAGvCjC,KAAKwV,KAAK6H,UAAU1F,EAAa1V,GA5DrC,CA+DF,EACAkT,EAAehV,UAAUiW,yBAA2B,WAClD,IAAIkH,EAAOtd,KACXA,KAAKoV,QAAQoB,UAAU+G,GAAG,aAAa,SAAU9E,GAE/C,GADA6E,EAAKjD,WAAY,GACZiD,EAAKvD,UAAW,CACnB,IAAIhQ,EAAWuT,EAAKtR,eAAejC,SAC/ByT,EAAMF,EAAK5G,gBAAgB,CAAC+B,EAAEgF,QAAShF,EAAEiF,SAAUJ,EAAKlI,QAAQoB,WAAW,GAAM,GAGrFgH,EAAI,GAAKzI,EAAQC,EAAQ,EAAGwI,EAAI,IAAKzT,EAAS,IAC9CuT,EAAK9C,qBAAqBgD,EAAI,GAAI,GAAKA,EAAI,IAAMA,EAAI,IAAMzT,EAAS,GACtE,CACF,IAAGwT,GAAG,YAAY,WAGhBD,EAAKjD,WAAY,GAChBiD,EAAKvD,WAAauD,EAAKhD,yBAC1B,GACF,EACAnF,EAAehV,UAAUkW,2BAA6B,WACpD,IAAIsH,EAAK3d,KAAK8L,IAAI8R,QACd5d,KAAKgM,eAAerR,OAAOsZ,WAC7B0J,EAAGJ,GAAG,YAAavd,KAAK6d,8BAA+B7d,MACvD2d,EAAGJ,GAAG,WAAYvd,KAAKka,eAAgBla,OAEvCA,KAAK8d,2BAET,EACA3I,EAAehV,UAAUqa,qBAAuB,SAAUuD,EAAWC,GACnE,IAAIhS,EAAiBhM,KAAKgM,eACtBjC,EAAWiC,EAAejC,SAC9B,GAAKiC,EAAerR,OAAOsZ,UAA3B,CAGA,IAAIwG,EAAa,CAAC,EAAG1Q,EAAS,IAC1B6I,EAAa5G,EAAe1D,YAEhCyV,EAAYhJ,EAAQC,EAAQyF,EAAW,GAAIsD,GAAYtD,EAAW,IAClE,IAAIkC,EAAoBsB,EAAqBjS,EAAgB4G,EAAY6H,GACrEyD,EAAa,CAACH,EAAYpB,EAAmBoB,EAAYpB,GACzDF,EAAczY,EAAU+Z,EAAWtD,EAAY7H,GAAY,GAC3DuL,EAAa,CAACna,EAAUka,EAAW,GAAIzD,EAAY7H,GAAY,GAAO5O,EAAUka,EAAW,GAAIzD,EAAY7H,GAAY,IAG3HsL,EAAW,GAAKzD,EAAW,KAAO0D,EAAW,IAAMxZ,KACnDuZ,EAAW,GAAKzD,EAAW,KAAO0D,EAAW,GAAKxZ,KAG9CqZ,IACEG,EAAW,MAAQxZ,IACrB3E,KAAKwc,eAAeC,EAAa0B,EAAW,GAAI,KAAMxB,GAC7CwB,EAAW,KAAOxZ,IAC3B3E,KAAKwc,eAAeC,EAAa0B,EAAW,GAAI,KAAMxB,GAEtD3c,KAAKwc,eAAeC,EAAaA,EAAa,KAAME,IASxD,IAAIyB,EAAWpe,KAAKuV,sBAChB8I,EAAW,IACXL,GAAczD,EAAqBvO,MACrCqS,EAAWre,KAAKuV,sBAAwBvJ,EAAemH,sBAAsBgL,IAE/E,IAAIG,EAAgBze,EAAA,GAA0Bue,EAAUC,GACxDre,KAAKue,kBAAkB,WAAYxH,EAAA,EAAyBuH,EAAc,GAAItS,IAC9EhM,KAAKue,kBAAkB,YAAaxH,EAAA,EAAyBuH,EAAc,GAAItS,GArC/E,CAsCF,EACAmJ,EAAehV,UAAU0d,8BAAgC,SAAUpF,GACjE,IAAI+F,EAQJ,IAPA,OAAoB/F,EAAE1S,QAAQ,SAAUA,GACtC,IAAI0Y,GAAa,OAAU1Y,GAC3B,GAA4B,MAAxB0Y,EAAWhoB,UAEb,OADA+nB,EAASC,GACF,CAEX,IAAG,GACED,EAAL,CAGA,IAAIE,EAAY1e,KAAKiF,QAAQ0B,iBAAiB6X,EAAOrY,aACjD6F,EAAiBhM,KAAKgM,eAC1B,GAAKA,EAAenF,eAAe6X,GAAnC,CAGA,IAAI/nB,EAAO+nB,EAAU9nB,QAAQ4nB,EAAOG,UAChC1nB,EAAQN,EAAKioB,WAAW9e,IAAIkM,EAAelE,sBAAsBnR,GAAO6nB,EAAO/nB,WAC9Eqc,MAAM7b,IACT+I,KAAKwc,eAAevlB,EAAOA,EAJ7B,CALA,CAWF,EACAke,EAAehV,UAAU+Z,eAAiB,WACxC,IAAIrD,EAAS7W,KAAKoV,QAClByB,EAAOwC,WAAaxC,EAAOwC,UAAUjB,KAAK,aAAa,GACvDvB,EAAO4C,gBAAkB5C,EAAO4C,eAAerB,KAAK,aAAa,GACjE,IAAIT,EAAe3X,KAAKoV,QAAQuC,aAChC,GAAIA,EACF,IAAK,IAAI1V,EAAI,EAAGA,EAAI0V,EAAa3gB,OAAQiL,IAGvCjC,KAAKwV,KAAKqJ,UAAUlH,EAAa1V,GAGvC,EACAkT,EAAehV,UAAUma,wBAA0B,WACjDta,KAAKka,iBACL,IAAI4E,EAAU9e,KAAKuV,sBACnBvV,KAAKue,kBAAkB,WAAYxH,EAAA,EAAyB+H,EAAS9e,KAAKgM,iBAC1E8S,EAAQ9nB,OAAS,CACnB,EACAme,EAAehV,UAAU2d,0BAA4B,WACnD9d,KAAKka,iBACL,IAAIyD,EAAK3d,KAAK8L,IAAI8R,QAClBD,EAAGoB,IAAI,YAAa/e,KAAK6d,+BACzBF,EAAGoB,IAAI,WAAY/e,KAAKka,eAC1B,EACA/E,EAAehV,UAAUuW,gBAAkB,SAAUsD,EAAQgF,EAAS5T,EAAS6T,GAC7E,IAAIne,EAAYub,EAAQE,aAAayC,EAASC,EAAS,KAAOjf,KAAKmM,OACnE,OAAO,UAAe6N,GAAUqC,EAAQC,eAAetC,EAAQlZ,EAAWsK,GAAWiR,EAAQ6C,mBAAmBlF,EAAQlZ,EAAWsK,EACrI,EAEA+J,EAAehV,UAAUoe,kBAAoB,SAAU1mB,EAAM0X,GAC3DA,GAASA,EAAMvY,QAAUgJ,KAAK8L,IAAIqO,eAAe,CAC/CtiB,KAAMA,EACN0X,MAAOA,GAEX,EAKA4F,EAAehV,UAAUgf,QAAU,WACjCnf,KAAK8d,4BACL9d,KAAKsa,yBACP,EAKAnF,EAAehV,UAAUif,OAAS,WAChCpf,KAAK8d,4BACL9d,KAAKsa,yBACP,EACAnF,EAAetd,KAAO,uBACfsd,CACT,CA3kBA,CA2kBEvJ,EAAA,GACF,SAASsL,EAAcmI,EAAQlH,EAAQH,EAASC,GAC9C,OAAO,IAAI,IAAgB,CACzBpL,MAAO,CACLwS,OAAQA,GAEVhH,YAAaL,EACbG,OAAQA,EACRG,MAAON,EACPQ,YAAa,SAAqBC,GAEhC,KAAeA,EAAE5I,MACnB,EACA0I,UAAWN,GAEf,CACA,SAASgG,EAAqBjS,EAAgB4G,EAAY6H,GACxD,IAAIkC,EAAoB1H,EAAkB,EACtCqK,EAAoBtT,EAAelM,IAAI,qBAI3C,OAHIwf,IACF3C,EAAoB3Y,EAAUsb,EAAmB1M,EAAY6H,GAAY,GAAQ,GAE5EkC,CACT,CACA,SAASpC,EAAqBvO,GAC5B,IAAIuT,EAAoBvT,EAAelM,IAAI,qBAC3C,SAA+B,MAArByf,EAA4BvT,EAAelM,IAAI,YAAcyf,EACzE,CACA,SAASpI,EAAU9L,GACjB,MAAkB,aAAXA,EAAwB,YAAc,WAC/C,CACA,Q,WCzoBO,SAAS9H,EAAQC,GACtBA,EAAUgc,uBAAuB,GACjChc,EAAUic,sBAAsB,IAChC,EAAA5N,EAAA,GAAcrO,EAChB,C,4KCIIkc,EACJ,SAAUxb,GAER,SAASwb,IACP,IAAIvb,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMpE,KAAMqE,YAAcrE,KAQhE,OAPAmE,EAAMtM,KAAO6nB,EAAe7nB,KAM5BsM,EAAMwb,WAAa,GACZxb,CACT,CAgQA,OA3QA,QAAUub,EAAgBxb,GAY1Bwb,EAAevf,UAAUgF,cAAgB,SAAUC,EAAWC,GAC5DnB,EAAO/D,UAAUgF,cAAcf,MAAMpE,KAAMqE,WAC3CrE,KAAK0H,cACL,IAAIkY,EAAO5f,KAAK6f,MAAQ7f,KAAK8f,iBAC7B9f,KAAK2f,WAAa,GAClBI,EAAa/f,KAAK6f,OAAOjZ,KAAK5G,KAAMA,KAAK2f,YACzC3f,KAAKggB,eAAe5a,EAAWC,GAC/B,IAAI8E,EAAanK,KAAKrF,OAAOwP,WAC7BnK,KAAK4F,aAAY,SAAU8M,EAAe5I,GAC3B,eAAT8V,GACFlN,EAAcC,cAAgB,WAC9BD,EAAcvI,WAAa,QAAaA,KAExCuI,EAAcE,WAAa5S,KAAKsI,YAChCoK,EAAcC,cAAgB,YAC9BD,EAAcuN,UAAY,MAAWjgB,KAAK2f,YAAY,SAAUnO,GAO9D,OANAA,EAAQ,QAAaA,GACP,YAAV1H,IAGF0H,EAAM0O,OAAS,MAEV1O,CACT,IAEJ,GACF,EAMAkO,EAAevf,UAAUwF,qBAAuB,WAQ9C,IAAIhL,EAASqF,KAAKrF,OACdwlB,EAAsB,CAAC,EACvBpS,EAAcpK,EAAA,oBACdqD,EAAahH,KAAKgH,aAiBtB,SAASqK,EAAIM,EAAK7H,EAAOb,GACvB,OAAO0I,GAAOA,EAAI7H,IAAU6H,EAAI7H,GAAOV,eAAeH,EACxD,CAlBA,OAAYtO,EAAO2W,QAAQ,SAAUE,GACnC,OAAYzD,GAAa,SAAU9E,GAC7BuI,EAAMpI,eAAeH,KACvBkX,EAAoBlX,GAAc,EAEtC,GACF,IACA,OAAYkX,GAAqB,SAAUC,EAAGnX,GAC5C,IAAIoX,GAAS,EACb,OAAYrgB,KAAKsE,WAAW,SAAUwF,GACpCuW,EAASA,GAAUhP,EAAI1W,EAAQmP,EAAOb,IAAeoI,EAAI1W,EAAOoL,OAAQ+D,EAAOb,EACjF,GAAGjJ,OACFqgB,GAAU,OAAYrgB,KAAKsE,WAAW,SAAUwF,IAC9CnP,EAAOmP,KAAWnP,EAAOmP,GAAS,CAAC,IAAIb,GAAcE,EAAA,MAAkBF,EAAsB,YAAVa,EAAsB,SAAW,WAAY9C,EACnI,GACF,GAAGhH,MAIHkE,EAAO/D,UAAUwF,qBAAqBvB,MAAMpE,KAAMqE,UACpD,EACAqb,EAAevf,UAAU6f,eAAiB,SAAU5a,EAAWC,GAC7D,IAAIC,EAAatF,KAAKrF,OAClBslB,EAAYjgB,KAAK2f,WAEjBtV,GAAYhF,EAASC,EAAaF,GAAWiF,UAAY,CAAC,EAS9D,GARA/E,EAAW+E,SAAWA,EAEtB,OAAY4V,GAAW,SAAUzO,EAAO5P,GACtC,IAAIgM,EAAM5N,KAAKsgB,kBAAkB9O,GAC5BnH,EAASjB,eAAewE,KAC3BvD,EAASuD,IAAO,EAEpB,GAAG5N,MAC6B,WAA5BsF,EAAWib,aAA2B,CAExC,IAAIC,GAAW,EACf,OAAYP,GAAW,SAAUzO,EAAO5P,GACtC,IAAIgM,EAAM5N,KAAKsgB,kBAAkB9O,GAC7BnH,EAASuD,KACX4S,EAAWnW,EAASuD,IAAO,EAAQ4S,GAAW,EAElD,GAAGxgB,KACL,CACF,EAKA0f,EAAevf,UAAU6F,cAAgB,WACvC,OAAOhG,KAAKF,IAAI,aAClB,EAKA4f,EAAevf,UAAUmgB,kBAAoB,SAAU9O,GACrD,MAAsB,eAAfxR,KAAK6f,MAAyBrO,EAAMva,MAAQ,GAAKua,EAAM5P,MAAQ,EACxE,EAKA8d,EAAevf,UAAUsgB,aAAe,WACtC,OAAOzgB,KAAK2f,UACd,EAKAD,EAAevf,UAAU2f,eAAiB,WACxC,IAAInlB,EAASqF,KAAKrF,OAClB,OAAOA,EAAO2W,QAAU3W,EAAO2W,OAAOta,OAAS,EAAI,SAAWgJ,KAAKrF,OAAOwP,WAAa,aAAe,aACxG,EAKAuV,EAAevf,UAAUiK,YAAc,SAAUC,GAC/CrK,KAAKrF,OAAO0P,SAAW,QAAaA,EACtC,EAKAqV,EAAevf,UAAUoK,cAAgB,SAAUtT,GACjD,IAAI2K,EAAQ+B,EAAA,iBAA6B1M,EAAO+I,KAAK2f,YACrD,OAAgB,MAAT/d,GAAgB5B,KAAKrF,OAAO0P,SAASrK,KAAKsgB,kBAAkBtgB,KAAK2f,WAAW/d,KAAW,UAA2B,YAC3H,EAMA8d,EAAevf,UAAUgT,sBAAwB,SAAUuN,GACzD,IAAIpd,EAAS,GACT2c,EAAYjgB,KAAK2f,WAcrB,OAbA3f,KAAKwG,kBAAiB,SAAUF,GAC9B,IAAI8M,EAAc,GACdzc,EAAO2P,EAAY1P,UACvBD,EAAK4C,KAAKyG,KAAK8H,sBAAsBnR,IAAO,SAAUM,EAAOR,GAE3D,IAAIkqB,EAAOhd,EAAA,iBAA6B1M,EAAOgpB,GAC/CU,IAASD,GAActN,EAAY9Z,KAAK7C,EAC1C,GAAGuJ,MACHsD,EAAOhK,KAAK,CACV+Z,SAAU/M,EAAYgN,GACtB7c,UAAW2c,GAEf,GAAGpT,MACIsD,CACT,EAOAoc,EAAevf,UAAUygB,kBAAoB,SAAUpP,GACrD,IAAIqP,EACJ,GAAI7gB,KAAKgH,aACP6Z,EAAiBrP,EAAMva,WAEvB,GAAmB,MAAfua,EAAMva,MACR4pB,EAAiBrP,EAAMva,UAClB,CACL,IAAI6pB,EAAgBtP,EAAMuP,UAAY,GACtCF,EAAiBC,EAAc,MAAQnc,KAAYmc,EAAc,KAAOnc,IAAW,GAAKmc,EAAc,GAAKA,EAAc,IAAM,CACjI,CAEF,OAAOD,CACT,EACAnB,EAAevf,UAAUqK,cAAgB,SAAUC,GAEjD,IAAIzK,KAAKgH,aAAT,CAGA,IAAI2J,EAAQ,GACRC,EAAc,CAAC,GAAI,IACnB5E,EAAiBhM,KAyBjBigB,EAAYjgB,KAAK2f,WAAW1jB,QAChC,GAAKgkB,EAAUjpB,OAIR,CACL,IAAIgqB,EAAOf,EAAU,GAAGc,SAAS,GACjCC,KAAUrc,KAAYsb,EAAUgB,QAAQ,CACtCF,SAAU,EAAEpc,IAAUqc,KAExBA,EAAOf,EAAUA,EAAUjpB,OAAS,GAAG+pB,SAAS,GAChDC,IAASrc,KAAYsb,EAAU3mB,KAAK,CAClCynB,SAAU,CAACC,EAAMrc,MAErB,MAZEsb,EAAU3mB,KAAK,CACbynB,SAAU,EAAEpc,IAAUA,OAY1B,IAAIuc,GAAQvc,IAUZ,OATA,OAAYsb,GAAW,SAAUzO,GAC/B,IAAIuP,EAAWvP,EAAMuP,SACjBA,IAEFA,EAAS,GAAKG,GAAQxN,EAAQ,CAACwN,EAAMH,EAAS,IAAK,cACnDrN,EAAQqN,EAAS9kB,SACjBilB,EAAOH,EAAS,GAEpB,GAAG/gB,MACI,CACL2Q,MAAOA,EACPC,YAAaA,EAvDf,CAIA,SAAS8C,EAAQqN,EAAUjQ,GACzB,IAAI+P,EAAiB7U,EAAe4U,kBAAkB,CACpDG,SAAUA,IAGPjQ,IACHA,EAAa9E,EAAezB,cAAcsW,IAE5C,IAAIhnB,EAAQ4Q,EAAeoW,EAAgB/P,GACvCiQ,EAAS,MAAQpc,IACnBiM,EAAY,GAAK/W,EACRknB,EAAS,KAAOpc,IACzBiM,EAAY,GAAK/W,EAEjB8W,EAAMrX,KAAK,CACTrC,MAAO8pB,EAAS,GAChBlnB,MAAOA,GACN,CACD5C,MAAO8pB,EAAS,GAChBlnB,MAAOA,GAGb,CA+BF,EACA6lB,EAAe7nB,KAAO,sBACtB6nB,EAAe/U,eAAgB,QAAqB1G,EAAA,gBAA8B,CAChFoG,SAAU,KACV8W,SAAS,EACTC,SAAS,EACT5hB,MAAO,OACP0L,UAAW,GACXC,WAAY,GACZvB,WAAY,YACZ0H,OAAQ,KACRnH,WAAY,KACZ4H,YAAa,EACbwO,aAAc,WACdc,QAAS,GACTpN,WAAW,IAGNyL,CACT,CA7QA,CA6QEzb,EAAA,GAQE8b,EAAe,CACjBhO,YAAa,SAAqBuP,GAChC,IAAIhc,EAAatF,KAAKrF,OAClBwM,EAAYK,KAAKC,IAAInC,EAAW6B,UAAW,IAC3CyL,EAAa5S,KAAKsI,YAClByJ,EAAczM,EAAWyM,YAC7BA,EAAcvK,KAAKI,IAAI2Z,SAASxP,EAAa,IAAK,GAClDzM,EAAWyM,YAAcA,EACzB,IAAIyP,GAAa5O,EAAW,GAAKA,EAAW,IAAMb,EAElD,OAAQyP,EAAUla,QAAQH,KAAeqa,GAAara,EAAY,EAChEA,IAEF7B,EAAW6B,UAAYA,EACvBqa,GAAaA,EAAUla,QAAQH,GAC3B7B,EAAW6b,SACbG,EAAahoB,KAAK,CAChBynB,SAAU,EAAEpc,IAAUiO,EAAW,IACjC6O,MAAO,CAAC,EAAG,KAGf,IAAK,IAAI7f,EAAQ,EAAGsf,EAAOtO,EAAW,GAAIhR,EAAQmQ,EAAamP,GAAQM,EAAW5f,IAAS,CACzF,IAAIgG,EAAMhG,IAAUmQ,EAAc,EAAIa,EAAW,GAAKsO,EAAOM,EAC7DF,EAAahoB,KAAK,CAChBynB,SAAU,CAACG,EAAMtZ,GACjB6Z,MAAO,CAAC,EAAG,IAEf,CACInc,EAAW8b,SACbE,EAAahoB,KAAK,CAChBynB,SAAU,CAACnO,EAAW,GAAIjO,KAC1B8c,MAAO,CAAC,EAAG,MAGf,QAAgBH,GAChB,OAAYA,GAAc,SAAU9P,EAAO5P,GACzC4P,EAAM5P,MAAQA,EACd4P,EAAM/Q,KAAOT,KAAK+G,gBAAgByK,EAAMuP,SAC1C,GAAG/gB,KACL,EACAmK,WAAY,SAAoBmX,GAC9B,IAAIhc,EAAatF,KAAKrF,OACtB,OAAY2K,EAAW6E,YAAY,SAAUuX,GAG3CJ,EAAahoB,KAAK,CAChBmH,KAAMT,KAAK+G,gBAAgB2a,GAAM,GACjCzqB,MAAOyqB,GAEX,GAAG1hB,MAEH2hB,EAAiBrc,EAAYgc,EAC/B,EACAhQ,OAAQ,SAAgBgQ,GACtB,IAAIhc,EAAatF,KAAKrF,OACtB,OAAY2K,EAAWgM,QAAQ,SAAUsQ,EAAehgB,GACjD,WAAgBggB,KACnBA,EAAgB,CACd3qB,MAAO2qB,IAGX,IAAIC,EAAO,CACTphB,KAAM,GACNmB,MAAOA,GAKT,GAH2B,MAAvBggB,EAAcE,QAChBD,EAAKphB,KAAOmhB,EAAcE,OAExBF,EAAcxY,eAAe,SAAU,CACzC,IAAInS,EAAQ4qB,EAAK5qB,MAAQ2qB,EAAc3qB,MACvC4qB,EAAKd,SAAW,CAAC9pB,EAAOA,GACxB4qB,EAAKJ,MAAQ,CAAC,EAAG,EACnB,KAAO,CAQL,IALA,IAAIV,EAAWc,EAAKd,SAAW,GAC3BgB,EAAUF,EAAKJ,MAAQ,CAAC,EAAG,GAC3BO,EAAY,CAAC,EAAG,EAAG,GACnBC,EAAe,EAAEtd,IAAUA,KAC3Bud,EAAY,GACPC,EAAK,EAAGA,EAAK,EAAGA,IAAM,CAE7B,IADA,IAAIC,EAAQ,CAAC,CAAC,MAAO,KAAM,OAAQ,CAAC,MAAO,KAAM,QAAQD,GAChDlgB,EAAI,EAAGA,EAAI,GAAqB,MAAhB8e,EAASoB,GAAalgB,IAC7C8e,EAASoB,GAAMP,EAAcQ,EAAMngB,IACnC8f,EAAQI,GAAMH,EAAU/f,GACxBigB,EAAUC,GAAY,IAANlgB,EAEF,MAAhB8e,EAASoB,KAAgBpB,EAASoB,GAAMF,EAAaE,GACvD,CACAD,EAAU,IAAMnB,EAAS,KAAOpc,MAAaod,EAAQ,GAAK,GAC1DG,EAAU,IAAMnB,EAAS,MAAQpc,MAAaod,EAAQ,GAAK,GAMvDhB,EAAS,KAAOA,EAAS,IAAMgB,EAAQ,IAAMA,EAAQ,KAGvDF,EAAK5qB,MAAQ8pB,EAAS,GAE1B,CACAc,EAAK3B,OAASvc,EAAA,kBAA8Bie,GAC5CN,EAAahoB,KAAKuoB,EACpB,GAAG7hB,MAEH2hB,EAAiBrc,EAAYgc,IAE7B,QAAgBA,GAChB,OAAYA,GAAc,SAAU9P,GAClC,IAAIiQ,EAAQjQ,EAAMiQ,MACdxa,EAAc,CAAC,CAAC,IAAK,KAAKwa,EAAM,IAAK,CAAC,IAAK,KAAKA,EAAM,KAC1DjQ,EAAM/Q,KAAO+Q,EAAM/Q,MAAQT,KAAK+G,gBAA+B,MAAfyK,EAAMva,MAAgBua,EAAMva,MAAQua,EAAMuP,UAAU,EAAO9Z,EAC7G,GAAGjH,KACL,GAEF,SAAS2hB,EAAiBrc,EAAY2a,GACpC,IAAI7U,EAAU9F,EAAW8F,SACC,aAAtB9F,EAAW+F,QAAyBD,EAAUA,IAChD6U,EAAUtjB,SAEd,CACA,Q,4EClZI0lB,EACJ,SAAUne,GAER,SAASme,IACP,IAAIle,EAAmB,OAAXD,GAAmBA,EAAOE,MAAMpE,KAAMqE,YAAcrE,KAEhE,OADAmE,EAAMtM,KAAOwqB,EAAuBxqB,KAC7BsM,CACT,CAyJA,OA9JA,QAAUke,EAAwBne,GAMlCme,EAAuBliB,UAAU+L,SAAW,WAC1C,IAAI0J,EAAY5V,KAAKmM,MACrByJ,EAAUxJ,YACV,IAAIJ,EAAiBhM,KAAKgM,eACtBN,EAAUM,EAAelM,IAAI,WAC7B0F,EAAiBwG,EAAexG,eAChC8c,EAAW9c,EAAe+c,UAC1BC,EAAWhd,EAAeid,eAC1B5T,EAAY7O,KAAK0iB,gBACjB3Y,EAAWiC,EAAejC,SAC1B4Y,EAAW3iB,KAAK4iB,eAChBC,EAAWF,EAASE,SACpBC,EAAY,WAAgB9W,EAAelM,IAAI,aAAa,IAAQ+iB,GACxEA,GAAY7iB,KAAKkW,gBAAgBN,EAAWiN,EAAS,GAAI9Y,EAAU+Y,EAAWjU,GAC9E,OAAY8T,EAASI,eAAe,SAAUlB,GAC5C,IAAIrQ,EAAQqQ,EAAKrQ,MACbwR,EAAY,IAAI,IACpBA,EAAUC,QAAU,OAAYjjB,KAAKkjB,aAAcljB,KAAMwR,GACzDxR,KAAKmjB,iBAAiBH,EAAWnB,EAAKuB,uBAEtC,IAAIvC,EAAiB7U,EAAe4U,kBAAkBpP,GAEtD,GADAxR,KAAKqjB,kBAAkBL,EAAWnC,EAAgB,CAAC,EAAG,EAAG9W,EAAS,GAAIA,EAAS,KAC3E+Y,EAAW,CACb,IAAIQ,EAActjB,KAAKgM,eAAezB,cAAcsW,GACpDmC,EAAUvW,IAAI,IAAI,KAAa,CAC7B5N,MAAO,CACLiO,EAAiB,UAAd+B,GAAyBnD,EAAU3B,EAAS,GAAK2B,EACpDqB,EAAGhD,EAAS,GAAK,EACjBtJ,KAAM+Q,EAAM/Q,KACZkW,cAAe,SACfnX,MAAOqP,EACP0U,KAAMjB,EACN/nB,KAAMioB,EACNnZ,QAAyB,eAAhBia,EAA+B,GAAM,KAGpD,CACA1N,EAAUnJ,IAAIuW,EAChB,GAAGhjB,MACH6iB,GAAY7iB,KAAKkW,gBAAgBN,EAAWiN,EAAS,GAAI9Y,EAAU+Y,EAAWjU,GAC9ER,EAAA,GAAWrC,EAAelM,IAAI,UAAW8V,EAAW5J,EAAelM,IAAI,YACvEE,KAAKqM,iBAAiBuJ,GACtB5V,KAAKoO,cAAcwH,EACrB,EACAyM,EAAuBliB,UAAUgjB,iBAAmB,SAAUH,EAAWtC,GACvE,IAAIvc,EAAQnE,KACZgjB,EAAUzF,GAAG,aAAa,WACxB,OAAOiG,EAAY,YACrB,IAAGjG,GAAG,YAAY,WAChB,OAAOiG,EAAY,WACrB,IACA,IAAIA,EAAc,SAAqBC,GACrC,IAAIzX,EAAiB7H,EAAM6H,eAE3BA,EAAerR,OAAOsZ,WAAa9P,EAAM2H,IAAIqO,eAAe,CAC1DtiB,KAAM4rB,EACNlU,MAAOwH,EAAA,EAAyB/K,EAAemH,sBAAsBuN,GAAa1U,IAEtF,CACF,EACAqW,EAAuBliB,UAAUuiB,cAAgB,WAC/C,IAAI1W,EAAiBhM,KAAKgM,eACtB4C,EAAc5C,EAAerR,OACjC,GAA2B,aAAvBiU,EAAYvD,OACd,OAAO0L,EAAA,EAAoB/K,EAAgBhM,KAAK8L,IAAKE,EAAejC,UAGpE,IAAIvK,EAAQoP,EAAYpP,MAIxB,OAHKA,GAAmB,SAAVA,IACZA,EAAQ,QAEHA,CAEX,EACA6iB,EAAuBliB,UAAU+V,gBAAkB,SAAU/J,EAAO1L,EAAMsJ,EAAU+Y,EAAWjU,GAC7F,GAAKpO,EAAL,CAGA,IAAIuiB,EAAY,IAAI,IAChBxd,EAAiBxF,KAAKgM,eAAexG,eACzCwd,EAAUvW,IAAI,IAAI,KAAa,CAC7B5N,OAAO,QAAgB2G,EAAgB,CACrCsH,EAAGgW,EAA0B,UAAdjU,EAAwB9E,EAAS,GAAK,EAAIA,EAAS,GAAK,EACvEgD,EAAGhD,EAAS,GAAK,EACjB4M,cAAe,SACfnX,MAAOsjB,EAAYjU,EAAY,SAC/BpO,KAAMA,OAGV0L,EAAMM,IAAIuW,EAZV,CAaF,EAMAX,EAAuBliB,UAAUyiB,aAAe,WAC9C,IAAI5W,EAAiBhM,KAAKgM,eACtB+W,EAAgB,MAAW/W,EAAeyU,gBAAgB,SAAUjP,EAAO5P,GAC7E,MAAO,CACL4P,MAAOA,EACP4R,sBAAuBxhB,EAE3B,IACIihB,EAAW7W,EAAelM,IAAI,QAE9BuL,EAASW,EAAelM,IAAI,UAC5BsL,EAAUY,EAAelM,IAAI,WAQjC,OANe,eAAXuL,EAA0BD,GAAWA,GACvC2X,EAAcpmB,UAEPkmB,IACPA,EAAWA,EAAS5mB,QAAQU,WAEvB,CACLomB,cAAeA,EACfF,SAAUA,EAEd,EACAR,EAAuBliB,UAAUkjB,kBAAoB,SAAUlX,EAAO0U,EAAgB6C,GACpFvX,EAAMM,KAAI,QAEVzM,KAAKoN,oBAAoByT,EAAgB,UAAW6C,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAE5G1jB,KAAKoN,oBAAoByT,EAAgB,UAC3C,EACAwB,EAAuBliB,UAAU+iB,aAAe,SAAU1R,GACxD,IAAIxF,EAAiBhM,KAAKgM,eACtBrR,EAASqR,EAAerR,OACxB4lB,EAAe5lB,EAAO4lB,aAC1B,GAAKA,EAAL,CAGA,IAAIlW,EAAW,QAAa1P,EAAO0P,UAC/BsZ,EAAS3X,EAAesU,kBAAkB9O,GACzB,WAAjB+O,IAA8C,IAAjBA,GAC/BlW,EAASsZ,IAAU,EACnB,OAAYtZ,GAAU,SAAUuZ,EAAGhW,GACjCvD,EAASuD,GAAOA,IAAQ+V,CAC1B,KAEAtZ,EAASsZ,IAAWtZ,EAASsZ,GAE/B3jB,KAAK8L,IAAIqO,eAAe,CACtBtiB,KAAM,kBACN4d,KAAMzV,KAAK0V,IACX0E,YAAapa,KAAKgM,eAAesH,GACjCjJ,SAAUA,GAfZ,CAiBF,EACAgY,EAAuBxqB,KAAO,sBACvBwqB,CACT,CAhKA,CAgKEzW,EAAA,GACF,I,WCxKO,SAASrI,EAAQC,GACtBA,EAAUgc,uBAAuB,GACjChc,EAAUic,sBAAsBoE,IAChC,EAAAhS,EAAA,GAAcrO,EAChB,C","sources":["webpack://databoard/./node_modules/echarts/lib/component/tooltip/seriesFormatTooltip.js","webpack://databoard/./node_modules/echarts/lib/component/tooltip/tooltipMarkup.js","webpack://databoard/./node_modules/echarts/lib/component/transform/filterTransform.js","webpack://databoard/./node_modules/echarts/lib/component/transform/sortTransform.js","webpack://databoard/./node_modules/echarts/lib/component/transform/install.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/VisualMapModel.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/VisualMapView.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/helper.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/install.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/visualMapAction.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/visualEncoding.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/preprocessor.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/installCommon.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/ContinuousModel.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/ContinuousView.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/installVisualMapContinuous.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/PiecewiseView.js","webpack://databoard/./node_modules/echarts/lib/component/visualMap/installVisualMapPiecewise.js"],"sourcesContent":["import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.push.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { trim, isArray, each, reduce } from 'zrender/lib/core/util.js';\nimport { retrieveVisualColorForTooltipMarker, createTooltipMarkup } from './tooltipMarkup.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isNameSpecified } from '../../util/model.js';\nexport function defaultSeriesFormatTooltip(opt) {\n  var series = opt.series;\n  var dataIndex = opt.dataIndex;\n  var multipleSeries = opt.multipleSeries;\n  var data = series.getData();\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n  var tooltipDimLen = tooltipDims.length;\n  var value = series.getRawValue(dataIndex);\n  var isValueArr = isArray(value);\n  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex); // Complicated rule for pretty tooltip.\n\n  var inlineValue;\n  var inlineValueType;\n  var subBlocks;\n  var sortParam;\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n    inlineValue = formatArrResult.inlineValues;\n    inlineValueType = formatArrResult.inlineValueTypes;\n    subBlocks = formatArrResult.blocks; // Only support tooltip sort by the first inline value. It's enough in most cases.\n\n    sortParam = formatArrResult.inlineValues[0];\n  } else if (tooltipDimLen) {\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n    inlineValueType = dimInfo.type;\n  } else {\n    sortParam = inlineValue = isValueArr ? value[0] : value;\n  } // Do not show generated series name. It might not be readable.\n\n  var seriesNameSpecified = isNameSpecified(series);\n  var seriesName = seriesNameSpecified && series.name || '';\n  var itemName = data.getName(dataIndex);\n  var inlineName = multipleSeries ? seriesName : itemName;\n  return createTooltipMarkup('section', {\n    header: seriesName,\n    // When series name is not specified, do not show a header line with only '-'.\n    // This case always happens in tooltip.trigger: 'item'.\n    noHeader: multipleSeries || !seriesNameSpecified,\n    sortParam: sortParam,\n    blocks: [createTooltipMarkup('nameValue', {\n      markerType: 'item',\n      markerColor: markerColor,\n      // Do not mix display seriesName and itemName in one tooltip,\n      // which might confuses users.\n      name: inlineName,\n      // name dimension might be auto assigned, where the name might\n      // be not readable. So we check trim here.\n      noName: !trim(inlineName),\n      value: inlineValue,\n      valueType: inlineValueType\n    })].concat(subBlocks || [])\n  });\n}\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n  // check: category-no-encode-has-axis-data in dataset.html\n  var data = series.getData();\n  var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n    var dimItem = data.getDimensionInfo(idx);\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n  }, false);\n  var inlineValues = [];\n  var inlineValueTypes = [];\n  var blocks = [];\n  tooltipDims.length ? each(tooltipDims, function (dim) {\n    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n  }) // By default, all dims is used on tooltip.\n  : each(value, setEachItem);\n  function setEachItem(val, dim) {\n    var dimInfo = data.getDimensionInfo(dim); // If `dimInfo.tooltip` is not set, show tooltip.\n\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n      return;\n    }\n    if (isValueMultipleLine) {\n      blocks.push(createTooltipMarkup('nameValue', {\n        markerType: 'subItem',\n        markerColor: colorStr,\n        name: dimInfo.displayName,\n        value: val,\n        valueType: dimInfo.type\n      }));\n    } else {\n      inlineValues.push(val);\n      inlineValueTypes.push(dimInfo.type);\n    }\n  }\n  return {\n    inlineValues: inlineValues,\n    inlineValueTypes: inlineValueTypes,\n    blocks: blocks\n  };\n}","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.function.name.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getTooltipMarker, encodeHTML, makeValueReadable, convertToColorString } from '../../util/format.js';\nimport { isString, each, hasOwn, isArray, map, assert, extend } from 'zrender/lib/core/util.js';\nimport { SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nimport { getRandomIdBase } from '../../util/number.js';\nvar TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1'; // TODO: more textStyle option\n\nfunction getTooltipTextStyle(textStyle, renderMode) {\n  var nameFontColor = textStyle.color || '#6e7079';\n  var nameFontSize = textStyle.fontSize || 12;\n  var nameFontWeight = textStyle.fontWeight || '400';\n  var valueFontColor = textStyle.color || '#464646';\n  var valueFontSize = textStyle.fontSize || 14;\n  var valueFontWeight = textStyle.fontWeight || '900';\n  if (renderMode === 'html') {\n    // `textStyle` is probably from user input, should be encoded to reduce security risk.\n    return {\n      // eslint-disable-next-line max-len\n      nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\n      // eslint-disable-next-line max-len\n      valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\n    };\n  } else {\n    return {\n      nameStyle: {\n        fontSize: nameFontSize,\n        fill: nameFontColor,\n        fontWeight: nameFontWeight\n      },\n      valueStyle: {\n        fontSize: valueFontSize,\n        fill: valueFontColor,\n        fontWeight: valueFontWeight\n      }\n    };\n  }\n} // See `TooltipMarkupLayoutIntent['innerGapLevel']`.\n// (value from UI design)\n\nvar HTML_GAPS = [0, 10, 20, 30];\nvar RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n']; // eslint-disable-next-line max-len\n\nexport function createTooltipMarkup(type, option) {\n  option.type = type;\n  return option;\n}\nfunction isSectionFragment(frag) {\n  return frag.type === 'section';\n}\nfunction getBuilder(frag) {\n  return isSectionFragment(frag) ? buildSection : buildNameValue;\n}\nfunction getBlockGapLevel(frag) {\n  if (isSectionFragment(frag)) {\n    var gapLevel_1 = 0;\n    var subBlockLen = frag.blocks.length;\n    var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\n    each(frag.blocks, function (subBlock) {\n      var subGapLevel = getBlockGapLevel(subBlock); // If the some of the sub-blocks have some gaps (like 10px) inside, this block\n      // should use a larger gap (like 20px) to distinguish those sub-blocks.\n\n      if (subGapLevel >= gapLevel_1) {\n        gapLevel_1 = subGapLevel + +(hasInnerGap_1 && (\n        // 0 always can not be readable gap level.\n        !subGapLevel // If no header, always keep the sub gap level. Otherwise\n        // look weird in case `multipleSeries`.\n        || isSectionFragment(subBlock) && !subBlock.noHeader));\n      }\n    });\n    return gapLevel_1;\n  }\n  return 0;\n}\nfunction buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var noHeader = fragment.noHeader;\n  var gaps = getGap(getBlockGapLevel(fragment));\n  var subMarkupTextList = [];\n  var subBlocks = fragment.blocks || [];\n  assert(!subBlocks || isArray(subBlocks));\n  subBlocks = subBlocks || [];\n  var orderMode = ctx.orderMode;\n  if (fragment.sortBlocks && orderMode) {\n    subBlocks = subBlocks.slice();\n    var orderMap = {\n      valueAsc: 'asc',\n      valueDesc: 'desc'\n    };\n    if (hasOwn(orderMap, orderMode)) {\n      var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\n      subBlocks.sort(function (a, b) {\n        return comparator_1.evaluate(a.sortParam, b.sortParam);\n      });\n    } // FIXME 'seriesDesc' necessary?\n    else if (orderMode === 'seriesDesc') {\n      subBlocks.reverse();\n    }\n  }\n  each(subBlocks, function (subBlock, idx) {\n    var valueFormatter = fragment.valueFormatter;\n    var subMarkupText = getBuilder(subBlock)(\n    // Inherit valueFormatter\n    valueFormatter ? extend(extend({}, ctx), {\n      valueFormatter: valueFormatter\n    }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\n    subMarkupText != null && subMarkupTextList.push(subMarkupText);\n  });\n  var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\n  if (noHeader) {\n    return subMarkupText;\n  }\n  var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\n  var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\n  if (ctx.renderMode === 'richText') {\n    return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\n  } else {\n    return wrapBlockHTML(\"<div style=\\\"\" + nameStyle + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\n  }\n}\nfunction buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var renderMode = ctx.renderMode;\n  var noName = fragment.noName;\n  var noValue = fragment.noValue;\n  var noMarker = !fragment.markerType;\n  var name = fragment.name;\n  var useUTC = ctx.useUTC;\n  var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\n    value = isArray(value) ? value : [value];\n    return map(value, function (val, idx) {\n      return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\n    });\n  };\n  if (noName && noValue) {\n    return;\n  }\n  var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || '#333', renderMode);\n  var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\n  var valueTypeOption = fragment.valueType;\n  var readableValueList = noValue ? [] : valueFormatter(fragment.value);\n  var valueAlignRight = !noMarker || !noName; // It little weird if only value next to marker but far from marker.\n\n  var valueCloseToMarker = !noMarker && noName;\n  var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\n    nameStyle = _a.nameStyle,\n    valueStyle = _a.valueStyle;\n  return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle)) // Value has commas inside, so use ' ' as delimiter for multiple values.\n  + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML((noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\n}\n/**\n * @return markupText. null/undefined means no content.\n */\n\nexport function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\n  if (!fragment) {\n    return;\n  }\n  var builder = getBuilder(fragment);\n  var ctx = {\n    useUTC: useUTC,\n    renderMode: renderMode,\n    orderMode: orderMode,\n    markupStyleCreator: markupStyleCreator,\n    valueFormatter: fragment.valueFormatter\n  };\n  return builder(ctx, fragment, 0, toolTipTextStyle);\n}\nfunction getGap(gapLevel) {\n  return {\n    html: HTML_GAPS[gapLevel],\n    richText: RICH_TEXT_GAPS[gapLevel]\n  };\n}\nfunction wrapBlockHTML(encodedContent, topGap) {\n  var clearfix = '<div style=\"clear:both\"></div>';\n  var marginCSS = \"margin: \" + topGap + \"px 0 0\";\n  return \"<div style=\\\"\" + marginCSS + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodedContent + clearfix + '</div>';\n}\nfunction wrapInlineNameHTML(name, leftHasMarker, style) {\n  var marginCss = leftHasMarker ? 'margin-left:2px' : '';\n  return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\n}\nfunction wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\n  // Do not too close to marker, considering there are multiple values separated by spaces.\n  var paddingStr = valueCloseToMarker ? '10px' : '20px';\n  var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\n  valueList = isArray(valueList) ? valueList : [valueList];\n  return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\" // Value has commas inside, so use '  ' as delimiter for multiple values.\n  + map(valueList, function (value) {\n    return encodeHTML(value);\n  }).join('&nbsp;&nbsp;') + '</span>';\n}\nfunction wrapInlineNameRichText(ctx, name, style) {\n  return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\n}\nfunction wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\n  var styles = [style];\n  var paddingLeft = valueCloseToMarker ? 10 : 20;\n  alignRight && styles.push({\n    padding: [0, 0, 0, paddingLeft],\n    align: 'right'\n  }); // Value has commas inside, so use '  ' as delimiter for multiple values.\n\n  return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\n}\nexport function retrieveVisualColorForTooltipMarker(series, dataIndex) {\n  var style = series.getData().getItemVisual(dataIndex, 'style');\n  var color = style[series.visualDrawType];\n  return convertToColorString(color);\n}\nexport function getPaddingFromTooltipModel(model, renderMode) {\n  var padding = model.get('padding');\n  return padding != null ? padding // We give slightly different to look pretty.\n  : renderMode === 'richText' ? [8, 10] : 10;\n}\n/**\n * The major feature is generate styles for `renderMode: 'richText'`.\n * But it also serves `renderMode: 'html'` to provide\n * \"renderMode-independent\" API.\n */\n\nvar TooltipMarkupStyleCreator = /** @class */\nfunction () {\n  function TooltipMarkupStyleCreator() {\n    this.richTextStyles = {}; // Notice that \"generate a style name\" usually happens repeatedly when mouse is moving and\n    // a tooltip is displayed. So we put the `_nextStyleNameId` as a member of each creator\n    // rather than static shared by all creators (which will cause it increase to fast).\n\n    this._nextStyleNameId = getRandomIdBase();\n  }\n  TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\n    return '__EC_aUTo_' + this._nextStyleNameId++;\n  };\n  TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\n    var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\n    var marker = getTooltipMarker({\n      color: colorStr,\n      type: markerType,\n      renderMode: renderMode,\n      markerId: markerId\n    });\n    if (isString(marker)) {\n      return marker;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(markerId);\n      }\n      this.richTextStyles[markerId] = marker.style;\n      return marker.content;\n    }\n  };\n  /**\n   * @usage\n   * ```ts\n   * const styledText = markupStyleCreator.wrapRichTextStyle([\n   *     // The styles will be auto merged.\n   *     {\n   *         fontSize: 12,\n   *         color: 'blue'\n   *     },\n   *     {\n   *         padding: 20\n   *     }\n   * ]);\n   * ```\n   */\n\n  TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\n    var finalStl = {};\n    if (isArray(styles)) {\n      each(styles, function (stl) {\n        return extend(finalStl, stl);\n      });\n    } else {\n      extend(finalStl, styles);\n    }\n    var styleName = this._generateStyleName();\n    this.richTextStyles[styleName] = finalStl;\n    return \"{\" + styleName + \"|\" + text + \"}\";\n  };\n  return TooltipMarkupStyleCreator;\n}();\nexport { TooltipMarkupStyleCreator };","import \"core-js/modules/es.array.push.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseConditionalExpression } from '../../util/conditionalExpression.js';\nimport { hasOwn, createHashMap } from 'zrender/lib/core/util.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nexport var filterTransform = {\n  type: 'echarts:filter',\n  // PENDING: enhance to filter by index rather than create new data\n  transform: function transform(params) {\n    // [Caveat] Fail-Fast:\n    // Do not return the whole dataset unless user config indicates it explicitly.\n    // For example, if no condition is specified by mistake, returning an empty result\n    // is better than returning the entire raw source for the user to find the mistake.\n    var upstream = params.upstream;\n    var rawItem;\n    var condition = parseConditionalExpression(params.config, {\n      valueGetterAttrMap: createHashMap({\n        dimension: true\n      }),\n      prepareGetValue: function prepareGetValue(exprOption) {\n        var errMsg = '';\n        var dimLoose = exprOption.dimension;\n        if (!hasOwn(exprOption, 'dimension')) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Relation condition must has prop \"dimension\" specified.', 'Illegal condition:', exprOption);\n          }\n          throwError(errMsg);\n        }\n        var dimInfo = upstream.getDimensionInfo(dimLoose);\n        if (!dimInfo) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal condition:', exprOption, '.\\n');\n          }\n          throwError(errMsg);\n        }\n        return {\n          dimIdx: dimInfo.index\n        };\n      },\n      getValue: function getValue(param) {\n        return upstream.retrieveValueFromItem(rawItem, param.dimIdx);\n      }\n    });\n    var resultData = [];\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      rawItem = upstream.getRawDataItem(i);\n      if (condition.evaluate()) {\n        resultData.push(rawItem);\n      }\n    }\n    return {\n      data: resultData\n    };\n  }\n};","import \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.sort.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS } from '../../util/types.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { getRawValueParser, SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nvar sampleLog = '';\nif (process.env.NODE_ENV !== 'production') {\n  sampleLog = ['Valid config is like:', '{ dimension: \"age\", order: \"asc\" }', 'or [{ dimension: \"age\", order: \"asc\"], { dimension: \"date\", order: \"desc\" }]'].join(' ');\n}\nexport var sortTransform = {\n  type: 'echarts:sort',\n  transform: function transform(params) {\n    var upstream = params.upstream;\n    var config = params.config;\n    var errMsg = ''; // Normalize\n    // const orderExprList: OrderExpression[] = isArray(config[0])\n    //     ? config as OrderExpression[]\n    //     : [config as OrderExpression];\n\n    var orderExprList = normalizeToArray(config);\n    if (!orderExprList.length) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Empty `config` in sort transform.';\n      }\n      throwError(errMsg);\n    }\n    var orderDefList = [];\n    each(orderExprList, function (orderExpr) {\n      var dimLoose = orderExpr.dimension;\n      var order = orderExpr.order;\n      var parserName = orderExpr.parser;\n      var incomparable = orderExpr.incomparable;\n      if (dimLoose == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"dimension\" specified.' + sampleLog;\n        }\n        throwError(errMsg);\n      }\n      if (order !== 'asc' && order !== 'desc') {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"order\" specified.' + sampleLog;\n        }\n        throwError(errMsg);\n      }\n      if (incomparable && incomparable !== 'min' && incomparable !== 'max') {\n        var errMsg_1 = '';\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_1 = 'incomparable must be \"min\" or \"max\" rather than \"' + incomparable + '\".';\n        }\n        throwError(errMsg_1);\n      }\n      if (order !== 'asc' && order !== 'desc') {\n        var errMsg_2 = '';\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_2 = 'order must be \"asc\" or \"desc\" rather than \"' + order + '\".';\n        }\n        throwError(errMsg_2);\n      }\n      var dimInfo = upstream.getDimensionInfo(dimLoose);\n      if (!dimInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n        throwError(errMsg);\n      }\n      var parser = parserName ? getRawValueParser(parserName) : null;\n      if (parserName && !parser) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Invalid parser name ' + parserName + '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n        throwError(errMsg);\n      }\n      orderDefList.push({\n        dimIdx: dimInfo.index,\n        parser: parser,\n        comparator: new SortOrderComparator(order, incomparable)\n      });\n    }); // TODO: support it?\n\n    var sourceFormat = upstream.sourceFormat;\n    if (sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'sourceFormat \"' + sourceFormat + '\" is not supported yet';\n      }\n      throwError(errMsg);\n    } // Other upstream format are all array.\n\n    var resultData = [];\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      resultData.push(upstream.getRawDataItem(i));\n    }\n    resultData.sort(function (item0, item1) {\n      for (var i = 0; i < orderDefList.length; i++) {\n        var orderDef = orderDefList[i];\n        var val0 = upstream.retrieveValueFromItem(item0, orderDef.dimIdx);\n        var val1 = upstream.retrieveValueFromItem(item1, orderDef.dimIdx);\n        if (orderDef.parser) {\n          val0 = orderDef.parser(val0);\n          val1 = orderDef.parser(val1);\n        }\n        var result = orderDef.comparator.evaluate(val0, val1);\n        if (result !== 0) {\n          return result;\n        }\n      }\n      return 0;\n    });\n    return {\n      data: resultData\n    };\n  }\n};","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { filterTransform } from './filterTransform.js';\nimport { sortTransform } from './sortTransform.js';\nexport function install(registers) {\n  registers.registerTransform(filterTransform);\n  registers.registerTransform(sortTransform);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport * as modelUtil from '../../util/model.js';\nimport * as numberUtil from '../../util/number.js';\nimport ComponentModel from '../../model/Component.js';\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\n\nvar VisualMapModel =\n/** @class */\nfunction (_super) {\n  __extends(VisualMapModel, _super);\n\n  function VisualMapModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = VisualMapModel.type;\n    _this.stateList = ['inRange', 'outOfRange'];\n    _this.replacableOptionKeys = ['inRange', 'outOfRange', 'target', 'controller', 'color'];\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    /**\n     * [lowerBound, upperBound]\n     */\n\n    _this.dataBound = [-Infinity, Infinity];\n    _this.targetVisuals = {};\n    _this.controllerVisuals = {};\n    return _this;\n  }\n\n  VisualMapModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.resetVisual = function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  };\n  /**\n   * @public\n   */\n\n\n  VisualMapModel.prototype.getItemSymbol = function () {\n    return null;\n  };\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n\n\n  VisualMapModel.prototype.getTargetSeriesIndices = function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  };\n  /**\n   * @public\n   */\n\n\n  VisualMapModel.prototype.eachTargetSeries = function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      var seriesModel = this.ecModel.getSeriesByIndex(seriesIndex);\n\n      if (seriesModel) {\n        callback.call(context, seriesModel);\n      }\n    }, this);\n  };\n  /**\n   * @pubilc\n   */\n\n\n  VisualMapModel.prototype.isTargetSeries = function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  };\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param value Real value, or this.dataBound[0 or 1].\n   * @param isCategory Only available when value is number.\n   * @param edgeSymbols Open-close symbol when value is interval.\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.formatValueText = function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    var textValue = isCategory ? value // Value is string when isCategory\n    : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.resetExtent = function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  };\n  /**\n   * PENDING:\n   * delete this method if no outer usage.\n   *\n   * Return  Concrete dimension. If null/undefined is returned, no dimension is used.\n   */\n  // getDataDimension(data: SeriesData) {\n  //     const optDim = this.option.dimension;\n  //     if (optDim != null) {\n  //         return data.getDimension(optDim);\n  //     }\n  //     const dimNames = data.dimensions;\n  //     for (let i = dimNames.length - 1; i >= 0; i--) {\n  //         const dimName = dimNames[i];\n  //         const dimInfo = data.getDimensionInfo(dimName);\n  //         if (!dimInfo.isCalculationCoord) {\n  //             return dimName;\n  //         }\n  //     }\n  // }\n\n\n  VisualMapModel.prototype.getDataDimensionIndex = function (data) {\n    var optDim = this.option.dimension;\n\n    if (optDim != null) {\n      return data.getDimensionIndex(optDim);\n    }\n\n    var dimNames = data.dimensions;\n\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = data.getDimensionInfo(dimName);\n\n      if (!dimInfo.isCalculationCoord) {\n        return dimInfo.storeDimIndex;\n      }\n    }\n  };\n\n  VisualMapModel.prototype.getExtent = function () {\n    return this._dataExtent.slice();\n  };\n\n  VisualMapModel.prototype.completeVisualOption = function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a default color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the default color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      };\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      var itemSymbol = this.getItemSymbol();\n      var defaultSymbol = itemSymbol || 'roundRect';\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? defaultSymbol : [defaultSymbol]);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter none\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' ? defaultSymbol : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max_1 = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max_1 && (max_1 = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max_1], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  };\n\n  VisualMapModel.prototype.resetItemSize = function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  };\n\n  VisualMapModel.prototype.isCategory = function () {\n    return !!this.option.categories;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n\n\n  VisualMapModel.prototype.setSelected = function (selected) {};\n\n  VisualMapModel.prototype.getSelected = function () {\n    return null;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n\n\n  VisualMapModel.prototype.getValueState = function (value) {\n    return null;\n  };\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n\n\n  VisualMapModel.prototype.getVisualMeta = function (getColorVisual) {\n    return null;\n  };\n\n  VisualMapModel.type = 'visualMap';\n  VisualMapModel.dependencies = ['series'];\n  VisualMapModel.defaultOption = {\n    show: true,\n    // zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    min: 0,\n    max: 200,\n    left: 0,\n    right: null,\n    top: null,\n    bottom: 0,\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    padding: 5,\n    // css\n    textGap: 10,\n    precision: 0,\n    textStyle: {\n      color: '#333' // \n\n    }\n  };\n  return VisualMapModel;\n}(ComponentModel);\n\nexport default VisualMapModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { Rect } from '../../util/graphic.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as layout from '../../util/layout.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport ComponentView from '../../view/Component.js';\n\nvar VisualMapView =\n/** @class */\nfunction (_super) {\n  __extends(VisualMapView, _super);\n\n  function VisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = VisualMapView.type;\n    _this.autoPositionValues = {\n      left: 1,\n      right: 1,\n      top: 1,\n      bottom: 1\n    };\n    return _this;\n  }\n\n  VisualMapView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapView.prototype.render = function (visualMapModel, ecModel, api, payload // TODO: TYPE\n  ) {\n    this.visualMapModel = visualMapModel;\n\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    this.doRender(visualMapModel, ecModel, api, payload);\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapView.prototype.renderBackground = function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new Rect({\n      z2: -1,\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  };\n  /**\n   * @protected\n   * @param targetValue can be Infinity or -Infinity\n   * @param visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param opts\n   * @param opts.forceState Specify state, instead of using getValueState method.\n   * @param opts.convertOpacityToAlpha For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n\n\n  VisualMapView.prototype.getControllerVisual = function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {}; // Default values.\n\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n\n    function getter(key) {\n      return visualObj[key];\n    }\n\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  };\n\n  VisualMapView.prototype.positionGroup = function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n\n  VisualMapView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {};\n\n  VisualMapView.type = 'visualMap';\n  return VisualMapView;\n}(ComponentView);\n\nexport default VisualMapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nvar paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n/**\n * @param visualMapModel\n * @param api\n * @param itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\n\nexport function getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  } // Auto decision align.\n\n\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n// TODO: TYPE more specified payload types.\n\nexport function makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installVisualMapContinuous } from './installVisualMapContinuous.js';\nimport { install as installVisualMapPiecewise } from './installVisualMapPiecewise.js';\nexport function install(registers) {\n  use(installVisualMapContinuous);\n  use(installVisualMapPiecewise); // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var visualMapActionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\nexport var visualMapActionHander = function (payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as visualSolution from '../../visual/visualSolution.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { getVisualFromData } from '../../visual/helper.js';\nexport var visualMapEncodingHandlers = [{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimensionIndex(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n}, // Only support color.\n{\n  createOnAllSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var dimIdx = visualMapModel.getDataDimensionIndex(data);\n\n        if (dimIdx >= 0) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimIdx;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}]; // FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\n\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: getVisualFromData(seriesModel.getData(), 'color') // default color.\n\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n\n  return resultVisual.color;\n\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar each = zrUtil.each;\nexport default function visualMapPreprocessor(option) {\n  var visualMap = option && option.visualMap;\n\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    } // rename splitList to pieces\n\n\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n\n    var pieces = opt.pieces;\n\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\n\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { visualMapActionInfo, visualMapActionHander } from './visualMapAction.js';\nimport { visualMapEncodingHandlers } from './visualEncoding.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport preprocessor from './preprocessor.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n  installed = true;\n  registers.registerSubTypeDefaulter('visualMap', function (option) {\n    // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n    return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n  });\n  registers.registerAction(visualMapActionInfo, visualMapActionHander);\n  each(visualMapEncodingHandlers, function (handler) {\n    registers.registerVisual(registers.PRIORITY.VISUAL.COMPONENT, handler);\n  });\n  registers.registerPreprocessor(preprocessor);\n}","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.push.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport * as numberUtil from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js'; // Constant\n\nvar DEFAULT_BAR_BOUND = [20, 140];\nvar ContinuousModel = /** @class */\nfunction (_super) {\n  __extends(ContinuousModel, _super);\n  function ContinuousModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ContinuousModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n  ContinuousModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n    this._resetRange();\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n  ContinuousModel.prototype.resetItemSize = function () {\n    _super.prototype.resetItemSize.apply(this, arguments);\n    var itemSize = this.itemSize;\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  };\n  /**\n   * @private\n   */\n\n  ContinuousModel.prototype._resetRange = function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n    if (!range || range.auto) {\n      // `range` should always be array (so we don't use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n  ContinuousModel.prototype.completeVisualOption = function () {\n    _super.prototype.completeVisualOption.apply(this, arguments);\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = symbolSize[1] / 3; // For good looking.\n      }\n    }, this);\n  };\n  /**\n   * @override\n   */\n\n  ContinuousModel.prototype.setSelected = function (selected) {\n    this.option.range = selected.slice();\n    this._resetRange();\n  };\n  /**\n   * @public\n   */\n\n  ContinuousModel.prototype.getSelected = function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  };\n  /**\n   * @override\n   */\n\n  ContinuousModel.prototype.getValueState = function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  };\n  ContinuousModel.prototype.findTargetDataIndices = function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @implement\n   */\n\n  ContinuousModel.prototype.getVisualMeta = function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  };\n  ContinuousModel.type = 'visualMap.continuous';\n  ContinuousModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    align: 'auto',\n    calculable: false,\n    hoverLink: true,\n    realtime: true,\n    handleIcon: 'path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z',\n    handleSize: '120%',\n    handleStyle: {\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    indicatorIcon: 'circle',\n    indicatorSize: '50%',\n    indicatorStyle: {\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0,0,0,0.2)'\n    } // emphasis: {\n    //     handleStyle: {\n    //         shadowBlur: 3,\n    //         shadowOffsetX: 1,\n    //         shadowOffsetY: 1,\n    //         shadowColor: 'rgba(0,0,0,0.2)'\n    //     }\n    // }\n  });\n\n  return ContinuousModel;\n}(VisualMapModel);\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\nexport default ContinuousModel;","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.push.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport * as helper from './helper.js';\nimport * as modelUtil from '../../util/model.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { setAsHighDownDispatcher } from '../../util/states.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { findEventDispatcher } from '../../util/event.js';\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max; // Arbitrary value\n\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6; // Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\n\nvar ContinuousView = /** @class */\nfunction (_super) {\n  __extends(ContinuousView, _super);\n  function ContinuousView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ContinuousView.type;\n    _this._shapes = {};\n    _this._dataInterval = [];\n    _this._handleEnds = [];\n    _this._hoverLinkDataIndices = [];\n    return _this;\n  }\n  ContinuousView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {\n    this._api = api;\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  };\n  ContinuousView.prototype._buildView = function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n    this._resetInterval();\n    this._renderBar(thisGroup);\n    var dataRangeText = visualMapModel.get('text');\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n    this._renderEndsText(thisGroup, dataRangeText, 1); // Do this for background size calculation.\n\n    this._updateView(true); // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n\n    this.renderBackground(thisGroup); // Real update view\n\n    this._updateView();\n    this._enableHoverLinkToSeries();\n    this._enableHoverLinkFromSeries();\n    this.positionGroup(thisGroup);\n  };\n  ContinuousView.prototype._renderEndsText = function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    } // Compatible with ec2, text[0] map to high value, text[1] map low value.\n\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.mainGroup;\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: position[0],\n        y: position[1],\n        verticalAlign: orient === 'horizontal' ? 'middle' : align,\n        align: orient === 'horizontal' ? align : 'center',\n        text: text\n      })\n    }));\n  };\n  ContinuousView.prototype._renderBar = function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n    var mainGroup = shapes.mainGroup = this._createBarGroup(itemAlign);\n    var gradientBarGroup = new graphic.Group();\n    mainGroup.add(gradientBarGroup); // Bar\n\n    gradientBarGroup.add(shapes.outOfRange = createPolygon());\n    gradientBarGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true))); // A border radius clip.\n\n    gradientBarGroup.setClipPath(new graphic.Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: itemSize[0],\n        height: itemSize[1],\n        r: 3\n      }\n    }));\n    var textRect = visualMapModel.textStyleModel.getTextRect('');\n    var textSize = mathMax(textRect.width, textRect.height); // Handle\n\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n      this._createHandle(visualMapModel, mainGroup, 0, itemSize, textSize, orient);\n      this._createHandle(visualMapModel, mainGroup, 1, itemSize, textSize, orient);\n    }\n    this._createIndicator(visualMapModel, mainGroup, itemSize, textSize, orient);\n    targetGroup.add(mainGroup);\n  };\n  ContinuousView.prototype._createHandle = function (visualMapModel, mainGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleSize = parsePercent(visualMapModel.get('handleSize'), itemSize[0]);\n    var handleThumb = createSymbol(visualMapModel.get('handleIcon'), -handleSize / 2, -handleSize / 2, handleSize, handleSize, null, true);\n    var cursor = getCursor(this._orient);\n    handleThumb.attr({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      ondragend: onDragEnd,\n      onmousemove: function onmousemove(e) {\n        eventTool.stop(e.event);\n      }\n    });\n    handleThumb.x = itemSize[0] / 2;\n    handleThumb.useStyle(visualMapModel.getModel('handleStyle').getItemStyle());\n    handleThumb.setStyle({\n      strokeNoScale: true,\n      strokeFirst: true\n    });\n    handleThumb.style.lineWidth *= 2;\n    handleThumb.ensureState('emphasis').style = visualMapModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n    setAsHighDownDispatcher(handleThumb, true);\n    mainGroup.add(handleThumb); // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function onmousemove(e) {\n        // For mobile device, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    handleLabel.ensureState('blur').style = {\n      opacity: 0.1\n    };\n    handleLabel.stateTransition = {\n      duration: 200\n    };\n    this.group.add(handleLabel);\n    var handleLabelPoint = [handleSize, 0];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  };\n  ContinuousView.prototype._createIndicator = function (visualMapModel, mainGroup, itemSize, textSize, orient) {\n    var scale = parsePercent(visualMapModel.get('indicatorSize'), itemSize[0]);\n    var indicator = createSymbol(visualMapModel.get('indicatorIcon'), -scale / 2, -scale / 2, scale, scale, null, true);\n    indicator.attr({\n      cursor: 'move',\n      invisible: true,\n      silent: true,\n      x: itemSize[0] / 2\n    });\n    var indicatorStyle = visualMapModel.getModel('indicatorStyle').getItemStyle();\n    if (indicator instanceof ZRImage) {\n      var pathStyle = indicator.style;\n      indicator.useStyle(zrUtil.extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, indicatorStyle));\n    } else {\n      indicator.useStyle(indicatorStyle);\n    }\n    mainGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: createTextStyle(textStyleModel, {\n        x: 0,\n        y: 0,\n        text: ''\n      })\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [(orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT) + itemSize[0] / 2, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n    this._firstShowIndicator = true;\n  };\n  ContinuousView.prototype._dragHandle = function (handleIndex, isEnd,\n  // dx is event from ondragend if isEnd is true. It's not used\n  dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n    this._dragging = !isEnd;\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.mainGroup, true);\n      this._updateInterval(handleIndex, vertex[1]);\n      this._hideIndicator(); // Considering realtime, update view should be executed\n      // before dispatch action.\n\n      this._updateView();\n    } // dragEnd do not dispatch action when realtime.\n\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  };\n  ContinuousView.prototype._resetInterval = function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  };\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n\n  ContinuousView.prototype._updateInterval = function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex,\n    // cross is forbidden\n    0);\n    var dataExtent = visualMapModel.getExtent(); // Update data interval.\n\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  };\n  ContinuousView.prototype._updateView = function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor // opacity: visualInRange.opacity\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor // opacity: visualOutOfRange.opacity\n    }).setShape('points', visualOutOfRange.barPoints);\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  };\n  ContinuousView.prototype._createBarVisual = function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  };\n  ContinuousView.prototype._makeColorGradient = function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only calculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  };\n  ContinuousView.prototype._createBarPoints = function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  };\n  ContinuousView.prototype._createBarGroup = function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scaleX: itemAlign === 'bottom' ? 1 : -1,\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scaleX: itemAlign === 'bottom' ? -1 : 1,\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scaleX: itemAlign === 'left' ? 1 : -1,\n      scaleY: -1\n    } : {\n      scaleX: itemAlign === 'left' ? 1 : -1\n    });\n  };\n  ContinuousView.prototype._updateHandle = function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    var itemSize = visualMapModel.itemSize;\n    var dataExtent = visualMapModel.getExtent();\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.y = handleEnds[handleIndex];\n      var val = linearMap(handleEnds[handleIndex], [0, itemSize[1]], dataExtent, true);\n      var symbolSize = this.getControllerVisual(val, 'symbolSize');\n      handleThumb.scaleX = handleThumb.scaleY = symbolSize / itemSize[0];\n      handleThumb.x = itemSize[0] - symbolSize / 2; // Update handle label position.\n\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        verticalAlign: 'middle',\n        align: this._orient === 'vertical' ? this._applyTransform('left', shapes.mainGroup) : 'center'\n      });\n    }, this);\n  };\n  ContinuousView.prototype._showIndicator = function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n    if (!indicator) {\n      return;\n    }\n    indicator.attr('invisible', false);\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    var symbolSize = this.getControllerVisual(cursorValue, 'symbolSize');\n    var y = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var x = itemSize[0] - symbolSize / 2;\n    var oldIndicatorPos = {\n      x: indicator.x,\n      y: indicator.y\n    }; // Update handle label position.\n\n    indicator.y = y;\n    indicator.x = x;\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n    var align = this._applyTransform('left', shapes.mainGroup);\n    var orient = this._orient;\n    var isHorizontal = orient === 'horizontal';\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      verticalAlign: isHorizontal ? align : 'middle',\n      align: isHorizontal ? 'center' : align\n    });\n    var indicatorNewProps = {\n      x: x,\n      y: y,\n      style: {\n        fill: color\n      }\n    };\n    var labelNewProps = {\n      style: {\n        x: textPoint[0],\n        y: textPoint[1]\n      }\n    };\n    if (visualMapModel.ecModel.isAnimationEnabled() && !this._firstShowIndicator) {\n      var animationCfg = {\n        duration: 100,\n        easing: 'cubicInOut',\n        additive: true\n      };\n      indicator.x = oldIndicatorPos.x;\n      indicator.y = oldIndicatorPos.y;\n      indicator.animateTo(indicatorNewProps, animationCfg);\n      indicatorLabel.animateTo(labelNewProps, animationCfg);\n    } else {\n      indicator.attr(indicatorNewProps);\n      indicatorLabel.attr(labelNewProps);\n    }\n    this._firstShowIndicator = false;\n    var handleLabels = this._shapes.handleLabels;\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this._api.enterBlur(handleLabels[i]);\n      }\n    }\n  };\n  ContinuousView.prototype._enableHoverLinkToSeries = function () {\n    var self = this;\n    this._shapes.mainGroup.on('mousemove', function (e) {\n      self._hovering = true;\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.mainGroup, true, true); // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  };\n  ContinuousView.prototype._enableHoverLinkFromSeries = function () {\n    var zr = this.api.getZr();\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  };\n  ContinuousView.prototype._doHoverLinkToSeries = function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent(); // For hover link show when hover handle, which might be below or upper than sizeExtent.\n\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)]; // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity); // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, ' ', halfHoverLinkSize);\n      }\n    } // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  };\n  ContinuousView.prototype._hoverLinkFromSeriesMouseOver = function (e) {\n    var ecData;\n    findEventDispatcher(e.target, function (target) {\n      var currECData = getECData(target);\n      if (currECData.dataIndex != null) {\n        ecData = currECData;\n        return true;\n      }\n    }, true);\n    if (!ecData) {\n      return;\n    }\n    var dataModel = this.ecModel.getSeriesByIndex(ecData.seriesIndex);\n    var visualMapModel = this.visualMapModel;\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n    var data = dataModel.getData(ecData.dataType);\n    var value = data.getStore().get(visualMapModel.getDataDimensionIndex(data), ecData.dataIndex);\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  };\n  ContinuousView.prototype._hideIndicator = function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n    var handleLabels = this._shapes.handleLabels;\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this._api.leaveBlur(handleLabels[i]);\n      }\n    }\n  };\n  ContinuousView.prototype._clearHoverLinkToSeries = function () {\n    this._hideIndicator();\n    var indices = this._hoverLinkDataIndices;\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n    indices.length = 0;\n  };\n  ContinuousView.prototype._clearHoverLinkFromSeries = function () {\n    this._hideIndicator();\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  };\n  ContinuousView.prototype._applyTransform = function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return zrUtil.isArray(vertex) ? graphic.applyTransform(vertex, transform, inverse) : graphic.transformDirection(vertex, transform, inverse);\n  }; // TODO: TYPE more specified payload types.\n\n  ContinuousView.prototype._dispatchHighDown = function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  };\n  /**\n   * @override\n   */\n\n  ContinuousView.prototype.dispose = function () {\n    this._clearHoverLinkFromSeries();\n    this._clearHoverLinkToSeries();\n  };\n  /**\n   * @override\n   */\n\n  ContinuousView.prototype.remove = function () {\n    this._clearHoverLinkFromSeries();\n    this._clearHoverLinkToSeries();\n  };\n  ContinuousView.type = 'visualMap.continuous';\n  return ContinuousView;\n}(VisualMapView);\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function onmousemove(e) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n  return halfHoverLinkSize;\n}\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\nexport default ContinuousView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ContinuousModel from './ContinuousModel.js';\nimport ContinuousView from './ContinuousView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(ContinuousModel);\n  registers.registerComponentView(ContinuousView);\n  installCommon(registers);\n}","import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapModel from './VisualMapModel.js';\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport visualDefault from '../../visual/visualDefault.js';\nimport { reformIntervals } from '../../util/number.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar PiecewiseModel = /** @class */\nfunction (_super) {\n  __extends(PiecewiseModel, _super);\n  function PiecewiseModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PiecewiseModel.type;\n    /**\n     * The order is always [low, ..., high].\n     * [{text: string, interval: Array.<number>}, ...]\n     */\n\n    _this._pieceList = [];\n    return _this;\n  }\n  PiecewiseModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    this.resetExtent();\n    var mode = this._mode = this._determineMode();\n    this._pieceList = [];\n    resetMethods[this._mode].call(this, this._pieceList);\n    this._resetSelected(newOption, isInit);\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          piece = zrUtil.clone(piece);\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n          return piece;\n        });\n      }\n    });\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n  PiecewiseModel.prototype.completeVisualOption = function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = false;\n      zrUtil.each(this.stateList, function (state) {\n        exists = exists || has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n    function has(obj, state, visualType) {\n      return obj && obj[state] && obj[state].hasOwnProperty(visualType);\n    }\n    _super.prototype.completeVisualOption.apply(this, arguments);\n  };\n  PiecewiseModel.prototype._resetSelected = function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList; // Selected do not merge but all override.\n\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected; // Consider 'not specified' means true.\n\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel_1 = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n        if (selected[key]) {\n          hasSel_1 ? selected[key] = false : hasSel_1 = true;\n        }\n      }, this);\n    } // thisOption.selectedMode === 'multiple', default: all selected.\n  };\n  /**\n   * @public\n   */\n\n  PiecewiseModel.prototype.getItemSymbol = function () {\n    return this.get('itemSymbol');\n  };\n  /**\n   * @public\n   */\n\n  PiecewiseModel.prototype.getSelectedMapKey = function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  };\n  /**\n   * @public\n   */\n\n  PiecewiseModel.prototype.getPieceList = function () {\n    return this._pieceList;\n  };\n  /**\n   * @return {string}\n   */\n\n  PiecewiseModel.prototype._determineMode = function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  };\n  /**\n   * @override\n   */\n\n  PiecewiseModel.prototype.setSelected = function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  };\n  /**\n   * @override\n   */\n\n  PiecewiseModel.prototype.getValueState = function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  };\n  /**\n   * @public\n   * @param pieceIndex piece index in visualMapModel.getPieceList()\n   */\n\n  PiecewiseModel.prototype.findTargetDataIndices = function (pieceIndex) {\n    var result = [];\n    var pieceList = this._pieceList;\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @private\n   * @param piece piece.value or piece.interval is required.\n   * @return  Can be Infinity or -Infinity\n   */\n\n  PiecewiseModel.prototype.getRepresentValue = function (piece) {\n    var representValue;\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n    return representValue;\n  };\n  PiecewiseModel.prototype.getVisualMeta = function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n    var stops = [];\n    var outerColors = ['', ''];\n    var visualMapModel = this;\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      }); // Not category\n\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n      var color = getColorVisual(representValue, valueState);\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    } // Suplement\n\n    var pieceList = this._pieceList.slice();\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  };\n  PiecewiseModel.type = 'visualMap.piecewise';\n  PiecewiseModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    selected: null,\n    minOpen: false,\n    maxOpen: false,\n    align: 'auto',\n    itemWidth: 20,\n    itemHeight: 14,\n    itemSymbol: 'roundRect',\n    pieces: null,\n    categories: null,\n    splitNumber: 5,\n    selectedMode: 'multiple',\n    itemGap: 10,\n    hoverLink: true // Enable hover highlight.\n  });\n\n  return PiecewiseModel;\n}(VisualMapModel);\n;\n/**\n * Key is this._mode\n * @type {Object}\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\n */\n\nvar resetMethods = {\n  splitNumber: function splitNumber(outPieceList) {\n    var thisOption = this.option;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber; // Precision auto-adaption\n\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n    if (thisOption.minOpen) {\n      outPieceList.push({\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n    for (var index = 0, curr = dataExtent[0]; index < splitNumber; curr += splitStep, index++) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      outPieceList.push({\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n    if (thisOption.maxOpen) {\n      outPieceList.push({\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece, index) {\n      piece.index = index;\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function categories(outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME categorypieceListvisualMappingpieceList\n      // \n      outPieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, outPieceList);\n  },\n  pieces: function pieces(outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n      var item = {\n        text: '',\n        index: index\n      };\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommended.\n        var interval = item.interval = [];\n        var close_1 = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close_1[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n        useMinMax[0] && interval[1] === Infinity && (close_1[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close_1[1] = 0);\n        if (process.env.NODE_ENV !== 'production') {\n          if (interval[0] > interval[1]) {\n            console.warn('Piece ' + index + 'is illegal: ' + interval + ' lower bound should not greater then uppper bound.');\n          }\n        }\n        if (interval[0] === interval[1] && close_1[0] && close_1[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      outPieceList.push(item);\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, outPieceList); // Only pieces\n\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', ''][close[1]], ['>', ''][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\nexport default PiecewiseModel;","import \"core-js/modules/es.array.slice.js\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport VisualMapView from './VisualMapView.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from './helper.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar PiecewiseVisualMapView = /** @class */\nfunction (_super) {\n  __extends(PiecewiseVisualMapView, _super);\n  function PiecewiseVisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = PiecewiseVisualMapView.type;\n    return _this;\n  }\n  PiecewiseVisualMapView.prototype.doRender = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var textStyleModel = visualMapModel.textStyleModel;\n    var textFont = textStyleModel.getFont();\n    var textFill = textStyleModel.getTextColor();\n    var itemAlign = this._getItemAlign();\n    var itemSize = visualMapModel.itemSize;\n    var viewData = this._getViewData();\n    var endsText = viewData.endsText;\n    var showLabel = zrUtil.retrieve(visualMapModel.get('showLabel', true), !endsText);\n    endsText && this._renderEndsText(thisGroup, endsText[0], itemSize, showLabel, itemAlign);\n    zrUtil.each(viewData.viewPieceList, function (item) {\n      var piece = item.piece;\n      var itemGroup = new graphic.Group();\n      itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece);\n      this._enableHoverLink(itemGroup, item.indexInModelPieceList); // TODO Category\n\n      var representValue = visualMapModel.getRepresentValue(piece);\n      this._createItemSymbol(itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]]);\n      if (showLabel) {\n        var visualState = this.visualMapModel.getValueState(representValue);\n        itemGroup.add(new graphic.Text({\n          style: {\n            x: itemAlign === 'right' ? -textGap : itemSize[0] + textGap,\n            y: itemSize[1] / 2,\n            text: piece.text,\n            verticalAlign: 'middle',\n            align: itemAlign,\n            font: textFont,\n            fill: textFill,\n            opacity: visualState === 'outOfRange' ? 0.5 : 1\n          }\n        }));\n      }\n      thisGroup.add(itemGroup);\n    }, this);\n    endsText && this._renderEndsText(thisGroup, endsText[1], itemSize, showLabel, itemAlign);\n    layout.box(visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap'));\n    this.renderBackground(thisGroup);\n    this.positionGroup(thisGroup);\n  };\n  PiecewiseVisualMapView.prototype._enableHoverLink = function (itemGroup, pieceIndex) {\n    var _this = this;\n    itemGroup.on('mouseover', function () {\n      return onHoverLink('highlight');\n    }).on('mouseout', function () {\n      return onHoverLink('downplay');\n    });\n    var onHoverLink = function onHoverLink(method) {\n      var visualMapModel = _this.visualMapModel; // TODO: TYPE More detailed action types\n\n      visualMapModel.option.hoverLink && _this.api.dispatchAction({\n        type: method,\n        batch: helper.makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex), visualMapModel)\n      });\n    };\n  };\n  PiecewiseVisualMapView.prototype._getItemAlign = function () {\n    var visualMapModel = this.visualMapModel;\n    var modelOption = visualMapModel.option;\n    if (modelOption.orient === 'vertical') {\n      return helper.getItemAlign(visualMapModel, this.api, visualMapModel.itemSize);\n    } else {\n      // horizontal, most case left unless specifying right.\n      var align = modelOption.align;\n      if (!align || align === 'auto') {\n        align = 'left';\n      }\n      return align;\n    }\n  };\n  PiecewiseVisualMapView.prototype._renderEndsText = function (group, text, itemSize, showLabel, itemAlign) {\n    if (!text) {\n      return;\n    }\n    var itemGroup = new graphic.Group();\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        x: showLabel ? itemAlign === 'right' ? itemSize[0] : 0 : itemSize[0] / 2,\n        y: itemSize[1] / 2,\n        verticalAlign: 'middle',\n        align: showLabel ? itemAlign : 'center',\n        text: text\n      })\n    }));\n    group.add(itemGroup);\n  };\n  /**\n   * @private\n   * @return {Object} {peiceList, endsText} The order is the same as screen pixel order.\n   */\n\n  PiecewiseVisualMapView.prototype._getViewData = function () {\n    var visualMapModel = this.visualMapModel;\n    var viewPieceList = zrUtil.map(visualMapModel.getPieceList(), function (piece, index) {\n      return {\n        piece: piece,\n        indexInModelPieceList: index\n      };\n    });\n    var endsText = visualMapModel.get('text'); // Consider orient and inverse.\n\n    var orient = visualMapModel.get('orient');\n    var inverse = visualMapModel.get('inverse'); // Order of model pieceList is always [low, ..., high]\n\n    if (orient === 'horizontal' ? inverse : !inverse) {\n      viewPieceList.reverse();\n    } // Origin order of endsText is [high, low]\n    else if (endsText) {\n      endsText = endsText.slice().reverse();\n    }\n    return {\n      viewPieceList: viewPieceList,\n      endsText: endsText\n    };\n  };\n  PiecewiseVisualMapView.prototype._createItemSymbol = function (group, representValue, shapeParam) {\n    group.add(createSymbol(\n    // symbol will be string\n    this.getControllerVisual(representValue, 'symbol'), shapeParam[0], shapeParam[1], shapeParam[2], shapeParam[3],\n    // color will be string\n    this.getControllerVisual(representValue, 'color')));\n  };\n  PiecewiseVisualMapView.prototype._onItemClick = function (piece) {\n    var visualMapModel = this.visualMapModel;\n    var option = visualMapModel.option;\n    var selectedMode = option.selectedMode;\n    if (!selectedMode) {\n      return;\n    }\n    var selected = zrUtil.clone(option.selected);\n    var newKey = visualMapModel.getSelectedMapKey(piece);\n    if (selectedMode === 'single' || selectedMode === true) {\n      selected[newKey] = true;\n      zrUtil.each(selected, function (o, key) {\n        selected[key] = key === newKey;\n      });\n    } else {\n      selected[newKey] = !selected[newKey];\n    }\n    this.api.dispatchAction({\n      type: 'selectDataRange',\n      from: this.uid,\n      visualMapId: this.visualMapModel.id,\n      selected: selected\n    });\n  };\n  PiecewiseVisualMapView.type = 'visualMap.piecewise';\n  return PiecewiseVisualMapView;\n}(VisualMapView);\nexport default PiecewiseVisualMapView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PiecewiseModel from './PiecewiseModel.js';\nimport PiecewiseView from './PiecewiseView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(PiecewiseModel);\n  registers.registerComponentView(PiecewiseView);\n  installCommon(registers);\n}"],"names":["defaultSeriesFormatTooltip","opt","inlineValue","inlineValueType","subBlocks","sortParam","series","dataIndex","multipleSeries","data","getData","tooltipDims","mapDimensionsAll","tooltipDimLen","length","value","getRawValue","isValueArr","isArray","markerColor","formatArrResult","formatTooltipArrayValue","inlineValues","inlineValueTypes","blocks","dimInfo","getDimensionInfo","type","seriesNameSpecified","seriesName","name","itemName","getName","inlineName","header","noHeader","markerType","noName","trim","valueType","concat","colorStr","isValueMultipleLine","reduce","val","idx","dimItem","tooltip","displayName","setEachItem","dim","otherDims","push","each","TOOLTIP_LINE_HEIGHT_CSS","getTooltipTextStyle","textStyle","renderMode","nameFontColor","color","nameFontSize","fontSize","nameFontWeight","fontWeight","valueFontColor","valueFontSize","valueFontWeight","nameStyle","valueStyle","fill","HTML_GAPS","RICH_TEXT_GAPS","createTooltipMarkup","option","isSectionFragment","frag","getBuilder","buildSection","buildNameValue","getBlockGapLevel","gapLevel_1","subBlockLen","hasInnerGap_1","subBlock","subGapLevel","ctx","fragment","topMarginForOuterGap","toolTipTextStyle","gaps","getGap","subMarkupTextList","assert","orderMode","sortBlocks","slice","orderMap","valueAsc","valueDesc","hasOwn","comparator_1","sort","a","b","evaluate","reverse","valueFormatter","subMarkupText","extend","html","join","richText","wrapBlockHTML","displayableHeader","useUTC","wrapInlineNameRichText","noValue","noMarker","map","valueTypeOption","markerStr","markupStyleCreator","makeTooltipMarker","readableName","readableValueList","valueAlignRight","valueCloseToMarker","_a","wrapInlineValueRichText","wrapInlineNameHTML","wrapInlineValueHTML","buildTooltipMarkup","builder","gapLevel","encodedContent","topGap","clearfix","marginCSS","leftHasMarker","style","marginCss","valueList","alignRight","paddingStr","alignCSS","wrapRichTextStyle","values","styles","paddingLeft","padding","align","retrieveVisualColorForTooltipMarker","getItemVisual","visualDrawType","getPaddingFromTooltipModel","model","get","TooltipMarkupStyleCreator","this","richTextStyles","_nextStyleNameId","prototype","_generateStyleName","markerId","marker","isString","content","text","finalStl","stl","styleName","filterTransform","transform","params","rawItem","upstream","condition","config","valueGetterAttrMap","createHashMap","dimension","prepareGetValue","exprOption","errMsg","dimLoose","dimIdx","index","getValue","param","retrieveValueFromItem","resultData","i","len","count","getRawDataItem","sortTransform","orderExprList","orderDefList","orderExpr","order","parserName","parser","incomparable","errMsg_1","errMsg_2","comparator","sourceFormat","item0","item1","orderDef","val0","val1","result","install","registers","registerTransform","mapVisual","VisualMapping","eachVisual","zrUtil","asc","numberUtil","linearMap","VisualMapModel","_super","_this","apply","arguments","stateList","replacableOptionKeys","layoutMode","ignoreSize","dataBound","Infinity","targetVisuals","controllerVisuals","__extends","init","parentModel","ecModel","mergeDefaultAndTheme","optionUpdated","newOption","isInit","thisOption","visualSolution","textStyleModel","getModel","resetItemSize","completeVisualOption","resetVisual","supplementVisualOption","controller","target","getItemSymbol","getTargetSeriesIndices","optionSeriesIndex","seriesIndex","seriesIndices","eachSeries","seriesModel","modelUtil","eachTargetSeries","callback","context","getSeriesByIndex","call","isTargetSeries","is","formatValueText","isCategory","edgeSymbols","isMinMax","precision","formatter","textValue","toFixed","replace","Math","min","resetExtent","extent","max","_dataExtent","getDataDimensionIndex","optDim","getDimensionIndex","dimNames","dimensions","dimName","isCalculationCoord","storeDimIndex","getExtent","base","inRange","outOfRange","completeSingle","completeInactive","stateExist","stateAbsent","optExist","optAbsent","visualData","visualType","defa","visualDefault","hasOwnProperty","opacity","completeController","symbolExists","symbol","symbolSizeExists","symbolSize","inactiveColor","itemSymbol","defaultSymbol","state","itemSize","visuals","max_1","parseFloat","categories","setSelected","selected","getSelected","getValueState","getVisualMeta","getColorVisual","dependencies","defaultOption","show","z","left","right","top","bottom","itemWidth","itemHeight","inverse","orient","backgroundColor","borderColor","contentColor","borderWidth","textGap","ComponentModel","VisualMapView","autoPositionValues","api","render","visualMapModel","payload","doRender","group","removeAll","renderBackground","formatUtil","rect","getBoundingRect","add","Rect","z2","silent","shape","x","y","width","height","stroke","lineWidth","getControllerVisual","targetValue","visualCluster","opts","forceState","visualObj","defaultColor","getter","key","setter","mappings","visualTypes","visualMapping","convertOpacityToAlpha","__alphaForOpacity","applyVisual","positionGroup","layout","getBoxLayoutParams","getWidth","getHeight","ComponentView","paramsSet","getItemAlign","modelOption","itemAlign","ecSize","realIndex","reals","fakeValue","layoutInput","rParam","getLayoutRect","margin","makeHighDownBatch","batch","batchItem","dataIndexInside","highlightKey","componentIndex","visualMapActionInfo","event","update","visualMapActionHander","eachComponent","mainType","query","visualMapEncodingHandlers","createOnAllSeries","reset","resetDefines","pipelineContext","large","visualMetaList","visualMeta","stops","outerColors","setVisual","valueState","resultVisual","getVisualFromData","mapping","getVisual","visualMapPreprocessor","visualMap","has","pieces","splitList","piece","start","end","obj","installed","installCommon","registerSubTypeDefaulter","splitNumber","calculable","registerAction","handler","registerVisual","PRIORITY","VISUAL","COMPONENT","registerPreprocessor","DEFAULT_BAR_BOUND","ContinuousModel","mappingOption","mappingMethod","dataExtent","_resetRange","isNaN","range","auto","dataInterval","number","findTargetDataIndices","dataIndices","seriesId","id","oVals","getColorStopValues","iVals","setStop","iIdx","oIdx","iLen","oLen","first","stopsLen","hoverLink","realtime","handleIcon","handleSize","handleStyle","indicatorIcon","indicatorSize","indicatorStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","step","stopValues","mathMin","mathMax","HOVER_LINK_SIZE","HOVER_LINK_OUT","ContinuousView","_shapes","_dataInterval","_handleEnds","_hoverLinkDataIndices","_api","from","uid","_buildView","thisGroup","_orient","_useHandle","_resetInterval","_renderBar","dataRangeText","_renderEndsText","_updateView","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","endsIndex","barGroup","mainGroup","position","_applyTransform","verticalAlign","targetGroup","shapes","useHandle","helper","_createBarGroup","gradientBarGroup","createPolygon","getCursor","_dragHandle","setClipPath","r","textRect","getTextRect","textSize","handleThumbs","handleLabels","handleLabelPoints","_createHandle","_createIndicator","handleIndex","onDrift","onDragEnd","handleThumb","cursor","attr","draggable","drift","ondragend","onmousemove","e","useStyle","getItemStyle","setStyle","strokeNoScale","strokeFirst","ensureState","handleLabel","stateTransition","duration","handleLabelPoint","scale","indicator","invisible","pathStyle","image","indicatorLabel","indicatorLabelPoint","_firstShowIndicator","isEnd","dx","dy","_dragging","vertex","_updateInterval","_hideIndicator","dispatchAction","visualMapId","_hovering","_clearHoverLinkToSeries","useHoverLinkOnHandle","_doHoverLinkToSeries","sizeExtent","delta","handleEnds","sliderMove","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","barColor","setShape","barPoints","_updateHandle","colorStops","_makeColorGradient","symbolSizes","_createBarPoints","LinearGradient","handlesColor","sampleNumber","offset","currValue","scaleX","rotation","PI","scaleY","textPoint","graphic","applyTransform","getTransform","_showIndicator","cursorValue","rangeSymbol","halfHoverLinkSize","oldIndicatorPos","isHorizontal","indicatorNewProps","labelNewProps","isAnimationEnabled","animationCfg","easing","additive","animateTo","enterBlur","self","on","pos","offsetX","offsetY","zr","getZr","_hoverLinkFromSeriesMouseOver","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","getHalfHoverLinkSize","hoverRange","valueRange","oldBatch","newBatch","resultBatches","_dispatchHighDown","ecData","currECData","dataModel","dataType","getStore","leaveBlur","indices","off","element","global","transformDirection","dispose","remove","points","hoverLinkDataSize","hoverLinkOnHandle","registerComponentModel","registerComponentView","PiecewiseModel","_pieceList","mode","_mode","_determineMode","resetMethods","_resetSelected","pieceList","visual","visualTypesInPieces","v","exists","getSelectedMapKey","selectedMode","hasSel_1","getPieceList","pieceIndex","pIdx","getRepresentValue","representValue","pieceInterval","interval","edge","unshift","curr","minOpen","maxOpen","itemGap","outPieceList","parseInt","splitStep","close","cate","normalizeReverse","pieceListItem","item","label","close_1","closeList","infinityList","useMinMax","lg","names","PiecewiseVisualMapView","textFont","getFont","textFill","getTextColor","_getItemAlign","viewData","_getViewData","endsText","showLabel","viewPieceList","itemGroup","onclick","_onItemClick","_enableHoverLink","indexInModelPieceList","_createItemSymbol","visualState","font","onHoverLink","method","shapeParam","newKey","o","PiecewiseView"],"sourceRoot":""}